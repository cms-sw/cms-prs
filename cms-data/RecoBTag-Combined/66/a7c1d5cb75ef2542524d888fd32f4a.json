{"additions": 0, "auther_ref": "convert-tf-models", "auther_sha": "9f5e916e8630ea4ef3d7ff2ccbd86f27cf02e916", "author": "hqucms", "body": "A few technical updates to the TF models (e.g., remove nodes that are only used for training like `cpf_input_batchnorm/keras_learning_phase` from the graph, fix the DeepDoubleX models for batch inference). No change in the output is expected. Small (5-10%) speedup and slightly reduced model size.\r\n\r\nThe models are converted from the original Keras models using\r\nhttps://github.com/hqucms/keras_to_tensorflow/blob/master/keras_to_tensorflow.py\r\n\r\n**[Updated on backward compatibility]**\r\n\r\nThese models are intended to be used together w/ https://github.com/cms-sw/cmssw/pull/29172, though it is OK to merge this PR (the DNN models) before https://github.com/cms-sw/cmssw/pull/29172, because currently the inference in CMSSW is using ONNX (since https://github.com/cms-sw/cmssw/pull/28112), so these TF models are not really used. \r\n\r\nThese models are NOT compatible w/ older releases (before https://github.com/cms-sw/cmssw/pull/28112) -- one needs to remove the `learning_phase` input in https://github.com/cms-sw/cmssw/blob/8a7ee7592d72cc40cc0a95c371787ccc49f520b1/RecoBTag/TensorFlow/plugins/DeepDoubleXTFJetTagsProducer.cc#L136 and https://github.com/cms-sw/cmssw/blob/8a7ee7592d72cc40cc0a95c371787ccc49f520b1/RecoBTag/TensorFlow/plugins/DeepFlavourTFJetTagsProducer.cc#L141 to use these new models.\r\n", "branch": "master", "changed_files": 7, "closed_at": "1592569633", "comments": 33, "commits": 1, "created_at": "1583869163", "deletions": 0, "labels": ["comparison-available", "externals-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "requires-external", "tests-approved"], "number": 27, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Technical update to the DeepJet and DeepDoubleX TF models", "updated_at": "1592569634", "user": "hqucms"}