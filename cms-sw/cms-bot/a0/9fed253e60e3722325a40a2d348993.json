{"additions": 50, "auther_ref": "dqmhistosizes-make-output-more-detailed", "auther_sha": "11807a53f83e11eb6d45890d37570384f31b4609", "author": "schneiml", "body": "This PR revises the logic behind the `DQMHistoSizes` comparison output. It slightly changes its paradigm: from a tool to estimate run-time memory use (which was always flawed, but useful in the past), to one that automates a big part of DQM PR validation: check that the code changes only affect the DQM output that they claim to affect.\r\n\r\nIn more detail\r\n- it now looks at harvesting output, and covers the full DQM process.\r\n- it uses the \"baseline camparison\" feature of `dqmMemoryStats.py` to get a detailed difference in content.\r\n- it condenses down this comparison to no more than 11 lines, deduplicating changes in multiple files and truncating the rest. These lines are added to the `SUMMARY`.\r\n- it reports workflow numbers for the changes found, to give a hint where to start debugging when unexpected changes appear.\r\n\r\nTo be effective, this needs https://github.com/cms-sw/cmssw/pull/22925 , but it will also work without it (just outputting noise if nothing significant changed). The new comparison is about 2x slower than before (up to ~1min per file), since reading the harvesting output format is slower.\r\n\r\nThis change was only tested on a few samples locally, I hope it does not break any of the other comparisons touched.  ", "branch": "master", "changed_files": 1, "comments": 1, "commits": 6, "created_at": "1523430153", "deletions": 30, "labels": ["externals-pending", "orp-pending", "pending-signatures", "tests-pending"], "number": 972, "release-notes": [], "review_comments": 0, "state": "open", "title": "DQMHistoSizes: make output more detailed", "updated_at": "1523430169", "user": "schneiml"}