{"additions": 62, "auther_ref": "iarspider-debug-20250506", "auther_sha": "eb577259a2ab89651a97b8e358a424fd6c137be5", "author": "cms-sw", "body": "https://github.com/cms-sw/cms-bot/pull/2480 revealed that we are trying to create same reference twice, [e.g.](https://cmssdt.cern.ch/jenkins/job/ib-tag-and-schdule/9355/consoleFull):\r\n\r\n```\r\ncreate_git_tag(cms-sw/cmssw, CMSSW_15_0_X_2025-04-29-2300, 001b97d2ac867b36ee0fb0273dda20fe6e95f6ed) failed: HTTP Error 422: Unprocessable Entity\r\nResponse: {\"message\":\"Reference already exists\",\"documentation_url\":\"https://docs.github.com/rest/git/refs#create-a-reference\",\"status\":\"422\"}'\r\n```\r\n\r\nI think what happens is Github returns 5xx error (\"server error\"), but since we assume the only error we can get is 404 (i.e. tag doesn't exist) we try to create the reference anyway and fail. \r\n\r\n[Documentation](https://docs.github.com/en/rest/git/refs?apiVersion=2022-11-28#get-a-reference) also mentions code `409 Conflict` (probably when `ref` parameter is not `heads/xyz` or `tags/xyz`).\r\n\r\nShould we silently retry a few (5?) times if we get error 5xx when checking for tag existence?", "branch": "master", "changed_files": 1, "comments": 5, "commits": 2, "created_at": "1746532656", "deletions": 34, "labels": ["orp-pending", "pending-signatures", "externals-pending", "tests-pending"], "number": 2493, "release-notes": [], "review_comments": 1, "state": "open", "title": "ib-create-tag: do not fail if trying to create a tag that already exists", "updated_at": "1746690787", "user": "iarspider"}