{"additions": 293, "auther_ref": "EF_BA_uGT_index_etaCut_backport130X", "auther_sha": "1792f9babcf252be14483f49fe1fdf0e31ef4e13", "author": "elfontan", "body": "#### PR description:\r\nBackport of https://github.com/cms-sw/cmssw/pull/41312.\r\nThese updates are needed for the deployment of the Run L1 menu [L1Menu_Collisions2023_v1_0_1](https://github.com/cms-l1-dpg/L1MenuRun3/tree/master/development/L1Menu_Collisions2023_v1_0_1) in view of the first stable beams at 13.6 TeV or soon after.\r\n\r\nThis PR includes two updates of the GT emulator accorging to the latest version of the utm library v0.11.2 (see details in [CMSLITDPG-1104](https://its.cern.ch/jira/browse/CMSLITDPG-1104)) and developments of the L1 menu for Run 3:\r\n* Usage of three eta cuts (up to five cuts are allowed) in the design of the muon algorithms with the upt requirement. The check on the eta range is now implemented as a function checking a vector of eta windows to handle the five cuts in a easier way.\r\n* New track finder index feature for muons in the uGT emulator needed for the update of the 2023 L1 menu as detailed in [CMSLITDPG-1075](https://its.cern.ch/jira/browse/CMSLITDPG-1075)). Note that the missing muon index data is also included in the GtRecordDumper, needed to produce a test vector as input to the firmware validation. The bits assigned to muon index in the muon object are 36..42 (see Table 6 in the uGT firmware documentation - [scales_inputs_2_ugt.pdf](https://github.com/cms-l1-globaltrigger/mp7_ugt_legacy/blob/master/doc/scales_inputs_2_ugt/pdf/scales_inputs_2_ugt.pdf)). Thank you @arnobaer and Herbert for the work!\r\n\r\n#### PR validation:\r\nBasic tests performed successfully starting from CMSSW_13_0_X_2023-04-06-1100\r\n> cmsrel CMSSW_13_0_X_2023-04-06-1100\r\n> cd CMSSW_13_0_X_2023-04-06-1100/src\r\n> cmsenv\r\n> git cms-addpkg L1Trigger/L1TGlobal \r\n> git cms-addpkg L1Trigger/Configuration\r\n> scram b distclean \r\n> git cms-checkdeps -a -A\r\n> scram b -j 8\r\n> scram b runtests \r\n> scram build code-checks\r\n> scram build code-format\r\n\r\nA cross-check of the countings of each trigger bit in the new firmware and in the updated emulator showed a perfect match.\r\n\r\nBasic cmsDriver command for L1Ntuple production successfully tested:\r\n> cmsDriver.py l1Ntuple -s RAW2DIGI --python_filename=test.py -n 1000 --no_output --era=Run3 --data --conditions=124X_dataRun3_Prompt_v4  --customise=L1Trigger/Configuration/customiseReEmul.L1TReEmulFromRAW --customise=L1Trigger/L1TNtuples/customiseL1Ntuple.L1NtupleRAWEMU --filein=/store/data/Run2022F/EphemeralZeroBias0/RAW/v1/000/361/468/00000/52351179-2329-47d8-bffc-a01833bb1704.root --fileout=L1Ntuple.root\r\n\r\nNote that the temporary release CMSSW_13_0_X_2023-04-06-1100 is not available anymore, so that final tests have been performed in CMSSW_13_0_X_2023-04-15-1100.", "branch": "CMSSW_13_0_X", "changed_files": 9, "comments": 20, "commits": 6, "created_at": "1681193363", "deletions": 303, "labels": ["l1-pending", "pending-signatures", "tests-approved", "orp-pending", "backport-ok"], "milestone": "CMSSW_13_0_X", "number": 41313, "release-notes": [], "review_comments": 0, "state": "open", "title": "[Backport] Adding the new muon track finder index and three eta cuts features in the GT emulator", "updated_at": "1681933023", "user": "elfontan"}