{"additions": 542, "auther_ref": "gartung-backport-MkfitCore-37868", "auther_sha": "05e10254bd8ccc14cc5d0f563c47a28cd6856a37", "author": "gartung", "body": "commit 18abd3a967c4794bd081ef2af94a85f2585b25eb\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Wed May 25 02:12:21 2022 +0200\r\n\r\n    Code format\r\n\r\ncommit f067f254ac785d8cdd2d46112174b3f044f82553\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Wed May 25 02:08:47 2022 +0200\r\n\r\n    Fix icc compilation errors\r\n\r\ncommit b265ce2d97be1f38a882e53aa0f1ad8c6469263e\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Fri May 20 23:22:10 2022 +0200\r\n\r\n    Add line to RecoTracker/MkFitCore/standalone/README_buildFromCMSSW.txt\r\n\r\ncommit 861899759440ffb1e2aedc848014bf2c23765b2b\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Fri May 20 18:18:50 2022 +0200\r\n\r\n    Add CMS_UNROLL_LOOP defines for Intel compilers and use with pragme omp simd instructions that cause internal icc error\r\n\r\ncommit 45977ea512079ea324b009a2edd03df9c3e58e50\r\nAuthor: Patrick Gartung <gartung@fnal.gov>\r\nDate:   Fri May 20 18:17:54 2022 +0200\r\n\r\n    Squashed commit of the following:\r\n\r\n    commit a565f528861deb96fb549f12c8ec619dc60fde1d\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Thu May 19 15:23:44 2022 +0200\r\n\r\n        Remove fast-math flag and attribute needed to prevent segfault when fast-math is used\r\n\r\n    commit c3fbce9e16987ce4f152b3ae1197c543f988a363\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 16 17:28:41 2022 +0200\r\n\r\n        Code format\r\n\r\n    commit c388ab36ccecad460b22042ca882b0f572ce7c6e\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 16 17:27:00 2022 +0200\r\n\r\n        Update location of #endif after enabling debug. #pragma omp simd not needed for debug statements. Move debug statements to own loop.\r\n\r\n    commit 468b4760a1a6df6bf8545903339b6312e8420c31\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Sat May 14 19:51:00 2022 +0200\r\n\r\n        No need to link to libmvec. It is called from libm on el8. Always use -ffastmath\r\n\r\n    commit 0ef90368b2b7c5345b417d9e99fb37acef9f8685\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Fri May 13 20:01:43 2022 +0200\r\n\r\n        Only works on el8_amd64 arch\r\n\r\n    commit 8866ca64dc913d274f25da401c321cc5d2193790\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Fri May 13 16:10:23 2022 +0200\r\n\r\n        Update for macro name change\r\n\r\n    commit fe4a38fa1fca00e3746b14c1d72a9e35c675360c\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Thu May 12 21:43:02 2022 +0200\r\n\r\n        code format?\r\n\r\n    commit 8326129cd2333b8fcc256880f70a5deb9e5d899f\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Thu May 12 21:18:44 2022 +0200\r\n\r\n    \t    Add CMS_UNROLL_LOOP defines for Intel compilers and use with pragme omp simd instructions that cause internal icc error\r\n\r\n    commit 056f7ef4fcc745107ff55365f0a1d9e0a2634349\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Thu May 12 03:42:01 2022 +0200\r\n\r\n        Add CMS_UNROLL_LOOP_COUNT(Config::Niter) and initialize arrays with += and -= assignment statements to 0. first\r\n\r\n    commit 31e2c8351f4f988e97b04ec39eb52547654c3923\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Wed May 11 05:16:27 2022 +0200\r\n\r\n        Add CMS_UNROLL_LOOP_COUNT(Config::Niter)\r\n        and #include \"FWCore/Utilities/interface/CMSUnrollLoop.h\"\r\n\r\n    commit 8eab5b1ea5f6d29b90d4670ef7aedbec0ff8af72\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Wed May 11 04:57:47 2022 +0200\r\n\r\n        Change atrribute from no-fast-math to match-errno\r\n\r\n    commit 688e905a36b83cf8d5da1313b703098598cd74ae\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Tue May 10 17:37:25 2022 +0200\r\n\r\n        Code format\r\n\r\n    commit ed58228b16f3b86686725556739cc93508d3af14\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Tue May 10 17:23:08 2022 +0200\r\n\r\n        Change attribute from no-inline to no-fast-math. Back out changes to applyMaterialEffects since it does not vectorize with the conditional on radL.\r\n\r\n    commit c19f9c8b6bb718ae110f914177788bb760a5e59a\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 19:49:15 2022 +0200\r\n\r\n        code format\r\n\r\n    commit 373ea0d28c50e3b7d949604eddae5ac0859e0a93\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 19:02:48 2022 +0200\r\n\r\n        missed a few initialization of variable length arrays\r\n\r\n    commit 753934cb32362ecf846b24e726ec4c1b49cf644c\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 18:51:13 2022 +0200\r\n\r\n        for all el8 archs\r\n\r\n    commit 2eb25ef5bf7c45353d4cae9c852d5b75fd848a85\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 18:31:35 2022 +0200\r\n\r\n        clang does not allow initialization of variable length arrays\r\n\r\n    commit 7f237622ef7b3c216e6ed3ce1a0a03f978b03817\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 17:41:29 2022 +0200\r\n\r\n        Add fast-math and mvec when compiling under el8\r\n\r\n    commit 5f6efe223081fe7a17becd39d5f27088c227136b\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Mon May 9 16:07:08 2022 +0200\r\n\r\n        Comment out changes that are CERN specific\r\n\r\n    commit 1ba6e069887f2ca38a3318f292d409a5c19b8406\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Thu May 5 21:25:33 2022 +0200\r\n\r\n        Try to break loop in applyMaterialEffects into smaller loops\r\n        Combine arithmetic ops into one loop.\r\n        Add -lmvec which is avaiable on RHEL8\r\n\r\n    commit dbc748cdd84b82a3faa3d621eb3ea9cb2621bc7c\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Wed May 4 20:02:05 2022 +0200\r\n\r\n        Incorporate Dan Riley's suggested changes\r\n\r\n    commit d6ae2c9c7bb50e03e3e9f187a1413568f5aeb7e0\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Tue May 3 20:20:47 2022 +0200\r\n\r\n        Update helixAtZ to use small calculation loops\r\n\r\n    commit 3d704ba96e6cefc4d7d1959f621c0d47fc57879e\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Fri Apr 29 21:43:00 2022 +0200\r\n\r\n        Work in progress\r\n\r\n    commit 31550b4446669845eb696676f47a257726923532\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Fri Apr 29 20:03:09 2022 +0200\r\n\r\n        Fixups\r\n\r\n    commit f10ef52690510ba9ad9ad00dc9285bc4951e651e\r\n    Author: Patrick Gartung <gartung@fnal.gov>\r\n    Date:   Fri Apr 29 00:57:47 2022 +0200\r\n\r\n        WIP\r\n\r\n#### PR description:\r\n\r\n<!-- Please replace this text with a description of the feature proposed or problem addressed, specifying:\r\n  - what changes are expected in the output if any, \r\n  - what other PRs or externals it depends upon if any,\r\n  - link to any additional material useful to provide a documentation for this PR (slides, JIRA tickets, related pull requestes, hypernews, TWiki or Indico pages)  -->\r\n\r\n#### PR validation:\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\n<!-- Please replace this text with any link to  -->\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n", "branch": "CMSSW_12_4_X", "changed_files": 4, "closed_at": "1654776347", "comments": 10, "commits": 1, "created_at": "1654519286", "deletions": 188, "labels": ["core-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved"], "merge_commit_sha": "e83b01df6ae18da7aabebf02f4fb728a815677de", "merged_at": "1654776347", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 38259, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Backport of MkFitCore vectorization PR 37868", "updated_at": "1654776347", "user": "gartung"}