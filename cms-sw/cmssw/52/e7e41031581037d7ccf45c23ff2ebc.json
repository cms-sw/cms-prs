{"additions": 794, "auther_ref": "concurrentIOVsCondDBESSource", "auther_sha": "37151d38c169a9a881357ca2d6d87d8343e539ab", "author": "wddgit", "body": "#### PR description:\r\n\r\nThe most significant part of this involves replicating\r\nthe PayloadProxy object so there is one per IOV and\r\nmoving the IOVProxy object out of PayloadProxy into\r\nDataProxyWrapper so there can only be one of those\r\nper record type. When each new IOV actually becomes\r\nactive the IOV range gets copied into the PayloadProxy.\r\n\r\nExcept for a few tests, the number of concurrent IOVs\r\nwill still be configured to be 1 everywhere so nothing\r\nwill run with concurrent IOVs even after this PR is\r\nmerged. I would suggest additional testing and validation\r\nbe done before concurrent IOVs are used in production.\r\nAnd also some thought will be necessary to determine\r\nwhere the performance gain justifies the extra memory used\r\nby the concurrent IOVs.\r\n\r\n#### PR validation:\r\n\r\nA new unit test is added that runs CondDBESSource with\r\nmultiple IOVs being processed concurrently, reads data\r\nfrom the database into BeamSpot objects, and compares\r\nthat data with a reference file to verify the values\r\nread remain the same.\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nNot a backport and should not be backported.\r\n", "branch": "master", "changed_files": 18, "closed_at": "1573072130", "comments": 43, "commits": 1, "created_at": "1568656080", "deletions": 167, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "db-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "74e3c77885e03efa70cd6e25a536fd19cba6da5f", "merged_at": "1573072130", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28010, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Upgrade CondDBESSource to support concurrent IOVs", "updated_at": "1573072130", "user": "wddgit"}