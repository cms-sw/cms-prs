{"additions": 15, "auther_ref": "threadSafeStorageFactoryCache", "auther_sha": "662bc2b404fe224497667c8c3b53709e79db9386", "author": "Dr15Jones", "body": "Given the use of SecondarySource, it is possible for multiple modules to ask the StorageFactory to open a file simultaneously. Switching the cache to use a tbb::concurrent_unordered_map avoids race conditions. In addition, having the map hold std::shared_ptr makes lifetime issues easier to deal with. [Can't use a std::unique_ptr since tbb::concurrent_unordered_map can't deal with R-value references.]\n", "branch": "CMSSW_7_3_X", "changed_files": 2, "closed_at": "1414049822", "comments": 6, "commits": 1, "created_at": "1414001140", "deletions": 10, "labels": ["comparison-pending", "core-approved", "fully-signed", "tests-approved"], "merge_commit_sha": "95b79adea16a13e3eb6c6d8aa91d471b7a3b9b67", "merged_at": "1414049822", "merged_by": "nclopezo", "milestone": "Next CMSSW_7_3_X", "number": 5950, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Make StorageFactory's StorageMaker cache thread safe", "updated_at": "1414537197", "user": "Dr15Jones"}