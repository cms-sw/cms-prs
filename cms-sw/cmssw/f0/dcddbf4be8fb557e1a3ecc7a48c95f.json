{"additions": 145, "auther_ref": "fixDoubleDeletionsFrompoolDbService", "auther_sha": "6a27c629c5533f03ddb8ac6ce4f7bef4aadac5f3", "author": "mmusich", "body": "resolves https://github.com/cms-sw/cmssw/issues/35723 and  https://github.com/cms-sw/cmssw/issues/35670\r\n\r\n#### PR description:\r\n\r\nPR https://github.com/cms-sw/cmssw/pull/35048 changed the behaviour of payload pointer ownership for condition updating workflows. \r\nIn a couple of workflows tested in unit tests (`CondTools/BeamSpot` and `CondTools/SiPhase2Tracker`) the raw pointer underlying a `std::unique_ptr` to the payload to be written was passed to the `createNewIOV` and `writeOne` methods of `PoolDBOutputService` that are now deleting the pointer. This might lead to double deletion and consequent job crashes.\r\nIn this PR (commit d68381f) the behaviour is changed by releasing the the ownership of the managed payload object to the `PoolDBOutputService` hence avoiding the double deletion.\r\nI profit of this PR to introduce (in commit 6a27c62) a new plugin `SiPhase2OuterTrackerLorentzAngleReader` to read `SiPhase2OuterTrackerLorentzAngle` payloads and use it in unit tests.\r\n\r\n#### PR validation:\r\n\r\nRun the augmented unit tests `scram b runtests`\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN/A", "branch": "master", "changed_files": 5, "comments": 0, "commits": 2, "created_at": "1634641212", "deletions": 19, "labels": ["alca-pending", "db-pending", "pending-signatures", "tests-pending", "orp-pending", "upgrade-pending", "code-checks-pending"], "milestone": "CMSSW_12_1_X", "number": 35731, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix pointers double deletions from `PoolDBOutputService` in `CondTools` subsystem ", "updated_at": "1634641353", "user": "mmusich"}