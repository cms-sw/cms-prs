{"additions": 7, "auther_ref": "fixPATEleProducer", "auther_sha": "50e2d9f40eabedf2f2a6bf72df8dab7e6b4e8fa2", "author": "RSalvatico", "body": "#### PR description:\r\n\r\nThere are two related bugs in the PATElectronProducer:\r\n\r\n1. The variable beamSpot\r\nhttps://github.com/cms-sw/cmssw/blob/4a85623cb932d794ab5e136e7c15518baeb53988/PhysicsTools/PatAlgos/plugins/PATElectronProducer.cc#L523\r\nis initialized but never set to the actual collection of BeamSpot. Nevertheless, it is used throughout the code. As a result, the BS2D and BS3D variables (impact parameters wrt the beamspot)\r\nhttps://github.com/cms-sw/cmssw/blob/4a85623cb932d794ab5e136e7c15518baeb53988/PhysicsTools/PatAlgos/plugins/PATElectronProducer.cc#L1427\r\nare essentially trash. For example, before the fix `gsfTrack->dxy(beamspot)` tends to be a very large number wrt the equivalent for muons.\r\n\r\n2. There is no check on the validity of the beamspot, so\r\nhttps://github.com/cms-sw/cmssw/blob/4a85623cb932d794ab5e136e7c15518baeb53988/PhysicsTools/PatAlgos/plugins/PATElectronProducer.cc#L524\r\nis never set to `true`. As a result, the BS3D error\r\nhttps://github.com/cms-sw/cmssw/blob/4a85623cb932d794ab5e136e7c15518baeb53988/PhysicsTools/PatAlgos/plugins/PATElectronProducer.cc#L1435\r\nis always `-1.0`.\r\n\r\nThis PR fixes 1. and 2.\r\n\r\n#### PR validation:\r\n\r\nI ran several workflows and saw reasonable values for the impact parameters wrt the beamspot.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nIt does not need a backport if future re-minis are going to happen with CMSSW >= 142X (probably the case?).", "branch": "master", "changed_files": 1, "comments": 1, "commits": 1, "created_at": "1729086202", "deletions": 0, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "xpog-pending"], "milestone": "CMSSW_14_2_X", "number": 46412, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix beamspot in PATElectronProducer", "updated_at": "1729086231", "user": "RSalvatico"}