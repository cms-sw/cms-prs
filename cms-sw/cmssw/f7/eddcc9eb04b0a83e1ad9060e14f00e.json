{"additions": 128, "auther_ref": "linpuppi_rewrite_cmsswmaster", "auther_sha": "4c61faf05643719ad72a5d577ac76e609e762827", "author": "gpetruc", "body": "#### PR description:\r\n\r\nThe old emulator was written long time ago using ap_uint and implementing bit shifts by hand.\r\n\r\nThis new version uses ap_fixed types, resulting in cleaner code, and also better agreement with the floating point expectations (roundings are handled better) and the associated firmware is also a bit better as it uses less bits in the accumulation part.\r\n\r\nPhysics performance is expected to be essentially identical. \r\n\r\nThe corresponding PR to cms-l1t-offline is https://github.com/cms-l1t-offline/cmssw/pull/1201\r\n\r\n#### PR validation:\r\n\r\n * Usual code-checks, code-format, etc.\r\n * `runTheMatrix.py -l 24834.0` which runs TTbar_14TeV_TuneCP5_2026D98_GenSimHLBeamSpot14INPUT + DigiTrigger_2026D98 + RecoGlobal_2026D98 + HARVESTGlobal_2026D98+ALCAPhase2_2026D98\r\n * `L1Trigger/Phase2L1ParticleFlow/test/cmsRun make_l1ct_binaryFiles_cfg.py`\r\n\r\nIn CMSSW 13_3_X, as used in the cms-l1t-offline PR, some occupancy plots for Puppi candidates from TTbar events at PU200 were made, showing only small differences between the new and the old code. The new code was also validated against an updated version of the firmware.\r\n", "branch": "master", "changed_files": 5, "comments": 7, "commits": 1, "created_at": "1706687883", "deletions": 157, "labels": ["l1-approved", "pending-signatures", "tests-approved", "orp-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_14_0_X", "number": 43821, "release-notes": [], "review_comments": 0, "state": "open", "title": "    Phase-2 L1T Correlator: Rewrite linpuppi emulator with ap_fixed", "updated_at": "1706793850", "user": "gpetruc"}