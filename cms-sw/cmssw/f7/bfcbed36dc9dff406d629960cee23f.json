{"additions": 117, "auther_ref": "alca-HIscenarios-125X", "auther_sha": "655c73a4e6519dcd013262e9e04568528258dcb7", "author": "malbouis", "body": "#### PR description:\r\n\r\nThis is a tentative to integrate the AlCa related Run3 scenarios for the HI Run.\r\n\r\nWe have adapted three scenarios existing for Run2 2018 HI Run to create the corresponding Run3 ones, namely: \r\n\r\n- `trackingOnlyEra_Run3_pp_on_PbPb` (adapted from [trackingOnlyEra_Run2_2018_pp_on_AA.py](https://github.com/cms-sw/cmssw/blob/master/Configuration/DataProcessing/python/Impl/trackingOnlyEra_Run2_2018_pp_on_AA.py) ), \r\n- `ppEra_Run3_pp_on_PbPb` ( from [ppEra_Run2_2018_pp_on_AA.py](https://github.com/cms-sw/cmssw/blob/master/Configuration/DataProcessing/python/Impl/ppEra_Run2_2018_pp_on_AA.py) ) \r\n- `hcalnzsEra_Run3_pp_on_PbPb` (from [hcalnzsEra_Run2_2018_pp_on_AA.py](https://github.com/cms-sw/cmssw/blob/master/Configuration/DataProcessing/python/Impl/hcalnzsEra_Run2_2018_pp_on_AA.py) ).\r\n\r\nOnce these scenarios are integrated, the plan is to test them with a Tier0 replay on HI 2018 data.\r\n\r\nIn order to be able to run the Express processing without crashes, we had to introduce a new customization for the offline Tracking DQM, `PPonPbPbTrackingOnly_custom.py`. @mandrenguyen, please advise and feel free to include any interested parties. We would be specially interested in knowing how will the tracking be handled for the HI and if/how we should adapt the AlCa scenarios introduced here to take it into account.\r\n\r\n#### PR validation:\r\n\r\nWe have used the tests below for validating each of the workflows. They all run without any crashes.\r\n\r\n+=+=+=\r\n**trackingOnlyEra_Run3_pp_on_PbPb** scenario:\r\n+=+=+=\r\n\r\n`python3 Configuration/DataProcessing/test/RunRepack.py --lfn file:/eos/cms/store/t0streamer/Data/HIExpressAlignment/000/327/527/run327527_ls0051_streamHIExpressAlignment_StorageManager.dat`\r\n\r\n`python3 Configuration/DataProcessing/test/RunExpressProcessing.py --scenario trackingOnlyEra_Run3_pp_on_PbPb --global-tag 124X_dataRun3_Express_TIER0_REPLAY_Run2_v2 --lfn file:write_PrimDS1_RAW.root --alcarecos=TkAlMinBias+PromptCalibProdBeamSpotHP`\r\n\r\n`python3 Configuration/DataProcessing/test/RunAlcaSkimming.py --scenario trackingOnlyEra_Run3_pp_on_PbPb --lfn file:output.root --global-tag 124X_dataRun3_Express_TIER0_REPLAY_Run2_v2 --skims TkAlMinBias,PromptCalibProdBeamSpotHP`\r\n\r\n`python3 Configuration/DataProcessing/test//RunAlcaHarvesting.py --scenario trackingOnlyEra_Run3_pp_on_PbPb --lfn file:TkAlMinBias.root --dataset /A/B/C --global-tag 124X_dataRun3_Express_TIER0_REPLAY_Run2_v2 --alcapromptdataset=PromptCalibProdBeamSpotHP`\r\n\r\n+=+=+=\r\n**ppEra_Run3_pp_on_PbPb** scenario:\r\n+=+=+=\r\n\r\n`python3 Configuration/DataProcessing/test/RunRepack.py --lfn file:/eos/cms/store/t0streamer/Data/HIExpressAlignment/000/327/527/run327527_ls0051_streamHIExpressAlignment_StorageManager.dat`\r\n\r\n`python3 Configuration/DataProcessing/test/RunPromptReco.py --scenario ppEra_Run3_pp_on_PbPb --reco --aod --dqmio --global-tag 124X_dataRun3_Prompt_TIER0_REPLAY_Run2_v2 --lfn file:write_PrimDS1_RAW.root --alcareco TkAlMinBias+SiStripCalMinBias`\r\n\r\n+=+=+=\r\n**hcalnzsEra_Run3_pp_on_PbPb** scenario:\r\n+=+=+=\r\n\r\n`python3 Configuration/DataProcessing/test/RunRepack.py --lfn file:/eos/cms/store/t0streamer/Data/HIExpressAlignment/000/327/527/run327527_ls0051_streamHIExpressAlignment_StorageManager.dat`\r\n\r\n`python3 Configuration/DataProcessing/test/RunPromptReco.py --scenario hcalnzsEra_Run3_pp_on_PbPb --reco --aod --dqmio --global-tag 124X_dataRun3_Prompt_TIER0_REPLAY_Run2_v2 --lfn file:write_PrimDS1_RAW.root --alcareco HcalCalMinBias`\r\n\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nIf/when it decided to move forward with this, it should be backported to the HI data-taking release, 125X.\r\n", "branch": "master", "changed_files": 6, "closed_at": "1663388585", "comments": 28, "commits": 1, "created_at": "1663085733", "deletions": 6, "labels": ["alca-approved", "dqm-approved", "operations-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "urgent", "code-checks-approved"], "merge_commit_sha": "7e88734eeada26f6d4ea7113c79fd7d336fe86b3", "merged_at": "1663388585", "merged_by": "cmsbuild", "milestone": "CMSSW_12_6_X", "number": 39387, "release-notes": [], "review_comments": 7, "state": "closed", "title": "AlCa Run3 Heavy Ion scenarios", "updated_at": "1663388585", "user": "malbouis"}