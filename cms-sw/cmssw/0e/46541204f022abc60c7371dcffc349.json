{"additions": 2258, "auther_ref": "unify-alignment-producers_90X", "auther_sha": "9b749cfaf1eb4289572b80d8e3774e50bd7663ce", "author": "ghellwig", "body": "backport of  #18138\r\n\r\nPreviously two parallel code infrastructures in place for offline and PCL alignment\r\n - Offline: `AlignmentProducer`  `edm::ESProducerLooper`\r\n - PCL: `PCLTrackerAlProducer`  `edm::EDAnalyzer` (legacy!)\r\n\r\nMost of the code is just duplication with more than 1000 lines of redundant code, i.e. it is hard to maintain.\r\nIn addition, only the PCL code is routinely tested during CMSSW software integration in workflow 1001.\r\n\r\nThis PR unifies the two alignment producers by means of a common base class `AlignmentProducerBase` which provides the common implementation.\r\n`AlignmentProducer` now inherits from `AlignmentProducerBase` and `edm::ESProducerLooper`.\r\n`PCLTrackerAlProducer` is renamed to the more generic `AlignmentProducerAsAnalyzer` which now inherits from `AlignmentProducerBase` and `edm::one::EDAnalyzer`.\r\n\r\nThis means easier maintenance and multi-threading friendliness. The latter applies not only to the PCL workflow, but also the offline MillePede workflow which is migrated the `edm::one::EDAnalyzer` version of the alignment producer.\r\nAs a bonus, the main part of the offline alignment code is now routinely exercised during integration tests.\r\n\r\nThis changes has also been presented at the [last Tracker Alignment meeting](https://indico.cern.ch/event/607510/contributions/2533635/attachments/1436040/2208307/Alignment-UnifiedAliProducer_CMS-TkAl_20170329.pdf).\r\n\r\nThis PR includes also some minor fixes regarding the transition to phase-1.", "branch": "CMSSW_9_0_X", "changed_files": 41, "closed_at": "1493713899", "comments": 22, "commits": 24, "created_at": "1490945219", "deletions": 2951, "labels": ["alca-approved", "backport", "comparison-notrun", "fully-signed", "orp-pending", "tests-rejected"], "merge_commit_sha": "9b749cfaf1eb4289572b80d8e3774e50bd7663ce", "merged_at": "1493713899", "merged_by": "cmsbuild", "milestone": "CMSSW_9_0_X", "number": 18139, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[90X] Unify alignment producers", "updated_at": "1493732948", "user": "ghellwig"}