{"additions": 521, "auther_ref": "PortableCollection_160X", "auther_sha": "2a5cc452f9c24d74545f634e1867248fec6f10fa", "author": "Electricks94", "body": "The PortableCollections have an inconsistent interface if used with a normal Layout or with an SoABlocks Layout. In the later case, the Alpaka Queue is the first argument, while in the first case it is the other way around. This PR addresses the problem and sets the Alpaka Queue always as the first argument.\r\n\r\nFurthermore, the constructors of the PortableCollections are streamlined to always use std::integal as the input type for the elements. Then a checked_cast has been implemented that checks if casting to int is safe. If so, the inputs are casted to int. Casting to int is necessary since the SoA Layouts use int for the number of elements due to the dependency on ROOT.\r\n\r\nThis PR has to be addressed after https://github.com/cms-sw/cmssw/pull/49882.\r\n\r\n**If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:**\r\n\r\nThis is a backport of https://github.com/cms-sw/cmssw/pull/49860 to CMSSW_16_0_X\r\n\r\nThis PR also contains commits from https://github.com/cms-sw/cmssw/pull/49882. It is meant to be merged after https://github.com/cms-sw/cmssw/pull/49882 since it builds on top of it\r\n\r\nATTN @fwyzard \r\n\r\n@felicepantaleo fyi\r\n", "branch": "CMSSW_16_0_X", "changed_files": 96, "comments": 21, "commits": 1, "created_at": "1769586167", "deletions": 356, "labels": ["geometry-pending", "alca-approved", "reconstruction-approved", "pending-signatures", "tests-approved", "orp-pending", "db-approved", "urgent", "backport", "heterogeneous-pending", "tracking", "trk", "ml-pending", "ngt"], "milestone": "CMSSW_16_0_X", "number": 49953, "release-notes": [], "review_comments": 0, "state": "open", "title": "[Backport to 16_0_X (#49860)]  Refactor of PortableCollections", "updated_at": "1769691469", "user": "Electricks94"}