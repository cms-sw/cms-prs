{"additions": 423, "auther_ref": "RestoreFEDErrorTreatmentForPhase0v2", "auther_sha": "afe87d406c702fd2e910f37f570a6d85a5c62852", "author": "veszpv", "body": "Resubmitting original [PR26606](https://github.com/cms-sw/cmssw/pull/26606/) without the format checks.\r\n\r\nPR description:\r\n\r\nThe FED raw data format for phase 0 and phase 1 detectors are essentially the same with small differences for the bit-packing of the pixel hit information in layer 1. There is a difference also in the error assignment by the front-end (*). The former case has been treated in the PixelDataFormatter by setting the 'phase1' variable through python configuration files. The error decoding class, called ErrorChecker, however was not made aware of the difference, instead, was just simply updated to phase 1.\r\nThis PR fixes that: a base class is defined for the ErrorChecker, the present default code is kept with the same name deriving from this base, and a new derived class ErrorCheckerPhase0 is introduced to restore the phase 0 treatment. The proper error checker is instantiated by the PixelDataFormatter based on the value of 'phase1', so no change needs to be made in the python configurations.\r\n\r\nFED error 25: in phase 1, FED error type 25 has been reinterpreted and used by the FED firmware to signal \"dead\" links. It is used to flag stuck TBMs. This error has a totally different meaning in phase 0. In this PR, the special treatment of this error type by raw-to-digi and digi-to-raw is cancelled for phase 0.\r\n\r\n(*) Few error codes have different interpretation; and in phase 0 FPix, the error association with detId is ambiguous.\r\nPR validation:\r\n\r\nDuring the reconstruction of phase 0 data, when a rare type 25 error was encountered, the tracking code crashed. This PR fixes that. The FED25 error packing in simulation, and unpacking in simulation and data for phase 1 should be unchanged, are being validated by @tsusa.\r\n\r\n@tsusa @mmusich @dkotlins", "branch": "master", "changed_files": 8, "closed_at": "1557728218", "comments": 37, "commits": 7, "created_at": "1557211136", "deletions": 29, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "b45186ede11cae7403e55eac9dc1d9ae1d808d6f", "merged_at": "1557728218", "merged_by": "cmsbuild", "milestone": "CMSSW_10_6_X", "number": 26679, "release-notes": [], "review_comments": 9, "state": "closed", "title": "Restore fed error treatment for phase0 pixel detector", "updated_at": "1557728218", "user": "veszpv"}