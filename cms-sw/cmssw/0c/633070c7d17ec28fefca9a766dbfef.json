{"additions": 43, "auther_ref": "15_1_0_pre3_LHCInfoXxxx_analyzer_tests", "auther_sha": "75556e7f24a565f991d2b0ee67f514aed265c68d", "author": "Alejandro1400", "body": "#### PR description:\r\n\r\nThis PR has tests for lhcinfo_analyzer for both PerFill and PerLS. This have been created after in pull request #48678 the tests that were manually analyzing that the values introduced by the writer are the same ones as returned to tester. The tests defined for this one are instead more generalized, where we want to print the result and check that the number of fields for CondFormats/RunInfo/interface/LHCInfoPerFill.h \"which is 29\" is correspondent to the number of lines from the print. The number for assertion is 31, due to the print of both the IOV and the line *LHCInfoPerFill retrieved:\\n* \"\r\n\r\nThe PR is also related to issue [ts-coordination#26](https://gitlab.cern.ch/cms-ppd/technical-support/ts-coordination/-/issues/56)\r\n\r\nAlso the test is named in BuildFile.xml\r\n\r\n#### PR validation:\r\n\r\nFor validation, the tests were run, were the values that are inserted are through writer and we analize the SQLite file that is created. The results are working and the number of lines was modified to confirm that the exceptions were handled correctly for both files, which produces an output like this (the code just prints last 5 lines if failed but for testing purposes I printed the entire file):\r\n\r\n```\r\n[asalgado@lxplus965 test]$ bash ./test_lhcinfo_analyzer.sh\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:37:54.186 CEST\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:37:59.530 CEST\r\nLog output (last 31 lines):\r\nLHC fill: 7066\r\nLumi section: 1\r\nRun number: 301765\r\nCrossing angle x (urad): 170\r\nCrossing angle y (urad): 170\r\nBeta star x (m): 11\r\nBeta star y (m): 11\r\n\r\nFailure: LHCInfoPerLSAnalyzer_cfg.py log has wrong number of lines (expected 87, got 31)\r\n[asalgado@lxplus965 test]$ bash ./test_lhcinfo_analyzer.sh\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:38:55.923 CEST\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:39:01.675 CEST\r\n[asalgado@lxplus965 test]$ bash ./test_lhcinfo_analyzer.sh\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:45:36.403 CEST\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:45:41.026 CEST\r\n[asalgado@lxplus965 test]$ bash ./test_lhcinfo_analyzer.sh\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:45:53.412 CEST\r\nBegin processing the 1st record. Run 1, Event 1, LumiSection 1 on stream 0 at 26-Aug-2025 15:45:57.408 CEST\r\nLog output (last 5 lines):\r\nCrossing angle x (urad): 170\r\nCrossing angle y (urad): 170\r\nBeta star x (m): 11\r\nBeta star y (m): 11\r\n\r\nFailure Failure: LHCInfoPerLSAnalyzer_cfg.py log has wrong number of lines (expected 32, got 31): status\r\n```\r\n\r\n@JanChyczynski please review", "branch": "master", "changed_files": 2, "comments": 1, "commits": 1, "created_at": "1756212609", "deletions": 0, "labels": ["db-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_15_1_X", "number": 48804, "release-notes": [], "review_comments": 0, "state": "open", "title": "LHCInfoAnalyzer Tests", "updated_at": "1756212671", "user": "Alejandro1400"}