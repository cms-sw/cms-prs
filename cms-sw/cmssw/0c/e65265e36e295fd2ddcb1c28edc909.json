{"additions": 56, "auther_ref": "Fix-GEMCSCSegmentProducer-Geometry-Loading__from-CMSSW_12_3_0_pre2", "auther_sha": "b3ebd8589f4f4aa82d65cd6c02c725b244d4638f", "author": "seungjin-yang", "body": "#### PR description:\r\n`GEMCSCSegmentProducer` is using `EventSetup::get` to retrieve the geometry from `EventSetup`. However, `EventSetup::get` has been deprecated in favor of methods that take `ESGetToken` as an argument, such as `EventSetup::getHandle`. As a result, `GEMCSCSegment` reconstruction throws `MustUseESGetToken` exception. Therefore, this PR migrates to using `EventSetup` with `ESGetToken`.\r\n\r\n\r\n#### PR validation:\r\nThe GEMCSCSegment reconstruction is not included in RECO. So, we can't verify this PR with any wf. So, I added it to step3 of 11850.0 for testing and ran [RecoLocalMuon/GEMCSCSegment/test/TestGEMCSCSegmentAnalyzer.cc](https://github.com/seungjin-yang/cmssw/blob/Fix-GEMCSCSegmentProducer-Geometry-Loading__from-CMSSW_12_3_0_pre2/RecoLocalMuon/GEMCSCSegment/test/TestGEMCSCSegmentAnalyzer.cc). See more details on the last page of [this slide](https://indico.cern.ch/event/1105924/contributions/4652889/attachments/2368910/4045551/220104__GEM_DPG__Fix_GEMCSCSegmentProducer_Geometry_Loading.pdf).\r\n\r\nThe figures below are some of the results.\r\n<img src=\"https://raw.githubusercontent.com/seungjin-yang/GEM-Workspace/main/SW-Dev/211227_GEMCSCSegmentProducer-Geometry-Loading/test/plots/NumGMCSCSeg.png\" width=\"400\">\r\n\r\n<img src=\"https://raw.githubusercontent.com/seungjin-yang/GEM-Workspace/2319ba1d096f719b395c28156ab34dd2d706a505/SW-Dev/211227_GEMCSCSegmentProducer-Geometry-Loading/test/plots/NumCSCRH.png\" width=\"400\">\r\n\r\n\r\n<img src=\"https://raw.githubusercontent.com/seungjin-yang/GEM-Workspace/main/SW-Dev/211227_GEMCSCSegmentProducer-Geometry-Loading/test/plots/NumGEMRH.png\" width=\"400\">\r\n\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\nN/A", "branch": "master", "changed_files": 3, "closed_at": "1642008846", "comments": 20, "commits": 4, "created_at": "1641299621", "deletions": 22, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "upgrade-approved", "code-checks-approved"], "merge_commit_sha": "2cc6633f5d2779d032a6a85359e85e9bca01f67b", "merged_at": "1642008846", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36628, "release-notes": [], "review_comments": 5, "state": "closed", "title": "Migrate to EventSetup with ESGetToken in GEMCSCSegmentProducer", "updated_at": "1642008847", "user": "seungjin-yang"}