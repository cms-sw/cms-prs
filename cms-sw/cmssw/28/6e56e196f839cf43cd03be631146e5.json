{"additions": 95, "auther_ref": "121_MigrateDD4hepWorkflowAsDefault", "auther_sha": "e7329c09bca98b9613e5199f017659eaca8c4ddd", "author": "srimanob", "body": "#### PR description:\r\nThis is a PR to migrate DD4hep to be a default for Run-3 workflows.\r\nRelated issue: https://github.com/cms-sw/cmssw/issues/35707\r\n\r\nThis PR includes:\r\n- Era: Update Run3 era to include dd4hep, update Run3_dd4hep for compatibility, introduce new Run3_DDD for DDD workflow,\r\n- Introduce .914 workflow for DDD,\r\n- Update short matrix, exclude .912 (DD4hep DB) as it becomes default (.0) now. Add .914,\r\n- Update Run-3 GT to DD4hep-base by default,\r\n- Update AutoCondModifiers from DD4hep to DDD modifier,\r\n- I use the chance to add one more short matrix workflow of D86 (no effect on DD4hep)\r\n\r\nWhen this PR is merged, the migration should be transparent to all users. Nothing will change in cmsDriver. No need of `--procModifier`, no change in `--era` and `--condition `with autoCond GT.\r\n\r\nGlobal Tag:\r\n* Added `VeryForwardIdealGeometryRecord` tag to 2017 ppRef GT to (partially) fix [IB failure with workflow 136.8562 and 149.0#35828](https://github.com/cms-sw/cmssw/issues/35828):\r\n* Switch to DD4HEP for mcRun3 GTs by adding to the tags:\r\n\r\n```\r\nCSCRECODIGI_Geometry_120DD4hepV1\r\nCSCRECO_Geometry_120DD4hepV1\r\nDTRECO_Geometry_120DD4hepV1\r\nGEMRECO_Geometry_120DD4hepV1\r\nXMLFILE_Geometry_121DD4hepV2_Extended2021_mc with label \"Extended\"\r\nHCALParameters_Geometry_120DD4hepV1\r\nTKRECO_Geometry_121DD4hepV1\r\nCTRECO_Geometry_120DD4hepV1\r\nEBRECO_Geometry_120DD4hepV1\r\nEERECO_Geometry_120DD4hepV1\r\nEPRECO_Geometry_120DD4hepV1\r\nHCALRECO_Geometry_120DD4hepV1\r\nTKParameters_Geometry_120DD4hepV1\r\nZDCRECO_Geometry_120DD4hepV1\r\nRPCRECO_Geometry_120DD4hepV1\r\n```\r\n \r\n* Which also includes the latest XMLFILE tag (V2) announced in https://hypernews.cern.ch/HyperNews/CMS/get/calibrations/4508.html\r\n\r\nThe difference in GTs is here: \r\n**2017 realistic for ppRef5TeV** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/120X_mc2017_realistic_forppRef5TeV_v2/121X_mc2017_realistic_forppRef5TeV_v1\r\n \r\n**2021 design** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2021_design_v12/121X_mcRun3_2021_design_v13\r\n \r\n**2021 realistic** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2021_realistic_v14/121X_mcRun3_2021_realistic_v15\r\n \r\n**2021 cosmics** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2021cosmics_realistic_deco_v14/121X_mcRun3_2021cosmics_realistic_deco_v15\r\n\r\n**2021 heavy ion** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2021_realistic_HI_v14/121X_mcRun3_2021_realistic_HI_v15\r\n\r\n**2023 realistic** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2023_realistic_v13/121X_mcRun3_2023_realistic_v14\r\n\r\n**2024 realistic** https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/121X_mcRun3_2024_realistic_v13/121X_mcRun3_2024_realistic_v14\r\n\r\n#### PR validation:\r\n`runTheMatrix.py --what upgrade -l 11634.0,11634.911,11634.914 --wm init`\r\ngives proper configurations.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\nNo need of backport AFAIK.\r\n", "branch": "master", "changed_files": 11, "closed_at": "1635264155", "comments": 79, "commits": 11, "created_at": "1634801182", "deletions": 55, "labels": ["alca-approved", "geometry-approved", "operations-approved", "simulation-approved", "fully-signed", "tests-approved", "pdmv-approved", "orp-approved", "urgent", "upgrade-approved", "requires-external", "code-checks-approved"], "merge_commit_sha": "5503dc662bb8d2942bd6d82374240b393259d282", "merged_at": "1635264155", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 35761, "release-notes": [], "review_comments": 10, "state": "closed", "title": "Migration to DD4hep as default for all Run-3 workflows", "updated_at": "1635264155", "user": "srimanob"}