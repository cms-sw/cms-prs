{"additions": 279, "auther_ref": "105-pilot-runTheMatrix-withULHLT", "auther_sha": "fe944cb111dba8ebf267164edf988264c9239ee7", "author": "srimanob", "body": "#### PR description:\r\n\r\nThis PR is not to merge for now. This is a first attempt to setup runTheMatrix to be able to inject the whole MC for UL, including HLT using the native release in 1 step.\r\n\r\n#### PR validation:\r\n\r\n> runTheMatrix.py --what run2UL -l 2250200.17 --noCaf -t 4 -m 11500 -b 'ul17_pilot_1' --label 'ul17_pilot_4' --wm init\r\n\r\ngives the reasonable JSON\r\n\r\nBut with --wm force, we still have issue to upload HLT config, as HLT_2e34v40_cff does not exist in 10_5. Trying to work that.\r\n\r\n> Importing the config, this may take a while... Importing the config, this may take a while...Traceback (most recent call last):\r\n>   File \"/afs/cern.ch/work/s/srimanob/test/UL-HLT/development/git/CMSSW_10_5_0_pre2/bin/slc7_amd64_gcc700/runTheMatrix.py\", line 338, in <module>\r\n>     ret = runSelected(opt)\r\n>   File \"/afs/cern.ch/work/s/srimanob/test/UL-HLT/development/git/CMSSW_10_5_0_pre2/bin/slc7_amd64_gcc700/runTheMatrix.py\", line 41, in runSelected\r\n>     wfInjector.upload()\r\n>   File \"/afs/cern.ch/work/s/srimanob/test/UL-HLT/development/git/CMSSW_10_5_0_pre2/python/Configuration/PyReleaseValidation/MatrixInjector.py\", line 664, in upload\r\n>     d['ConfigCacheUrl']\r\n>   File \"/afs/cern.ch/work/s/srimanob/test/UL-HLT/development/git/CMSSW_10_5_0_pre2/python/Configuration/PyReleaseValidation/MatrixInjector.py\", line 641, in uploadConf\r\n>     cacheIds = pool.map( upload_to_couch_oneArg, [(filePath,labelInCouch,self.user,self.group,where)] )\r\n>   File \"/cvmfs/cms.cern.ch/slc7_amd64_gcc700/external/python/2.7.14-omkpbe4/lib/python2.7/multiprocessing/pool.py\", line 253, in map\r\n>     return self.map_async(func, iterable, chunksize).get()\r\n>   File \"/cvmfs/cms.cern.ch/slc7_amd64_gcc700/external/python/2.7.14-omkpbe4/lib/python2.7/multiprocessing/pool.py\", line 572, in get\r\n>     raise self._value\r\n> ImportError: No module named HLT_2e34v40_cff\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n", "branch": "CMSSW_10_5_X", "changed_files": 6, "closed_at": "1559678383", "comments": 9, "commits": 2, "created_at": "1552487263", "deletions": 12, "labels": ["comparison-pending", "orp-pending", "pdmv-pending", "pending-signatures", "tests-pending", "upgrade-pending"], "milestone": "CMSSW_10_5_X", "number": 26171, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[Not to merge] first attempt to run ULHLT in runTheMatrix in a single step", "updated_at": "1559678383", "user": "srimanob"}