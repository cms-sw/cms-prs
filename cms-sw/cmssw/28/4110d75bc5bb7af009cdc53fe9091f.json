{"additions": 1, "auther_ref": "gcc14-array-bound-clusterTracksByDensity", "auther_sha": "a27faa39edf4f31add6afff44691d20de9519de7", "author": "smuzaffar", "body": "This is an attempt to fix the array bound warning we get in GCC14 IBs [a].\r\nSize of array `I m_v[S];` at https://github.com/cms-sw/cmssw/blob/master/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h#L21 is `257` via\r\n\r\n- https://github.com/cms-sw/cmssw/blob/master/DataFormats/TrackingRecHitSoA/interface/TrackingRecHitsSoA.h#L14-L19\r\n- https://github.com/cms-sw/cmssw/blob/master/HeterogeneousCore/CUDAUtilities/interface/HistoContainer.h#L94-L101\r\n\r\n`totbins()` at https://github.com/cms-sw/cmssw/blob/master/HeterogeneousCore/CUDAUtilities/interface/HistoContainer.h#L125 return 257 and then https://github.com/cms-sw/cmssw/blob/master/RecoVertex/PixelVertexFinding/plugins/alpaka/clusterTracksByDensity.h#L61-L63  tries to initialize/access `m_v[257]` which is out of array bound.\r\n\r\nEither `totbins()` should return `NHISTS * NBINS` instead of `NHISTS * NBINS +1` or we loop over 1 less element. \r\n\r\n@fwyzard, if this is not the correct fix then  feel free to propose a correct fix.\r\n\r\n[a] https://cmssdt.cern.ch/SDT/cgi-bin/buildlogs/el8_amd64_gcc14/CMSSW_15_1_X_2025-03-18-2300/RecoVertex/PixelVertexFinding\r\n```\r\nIn member function 'operator[]',\r\n    inlined from 'clusterTracksByDensity' at src/RecoVertex/PixelVertexFinding/plugins/alpaka/clusterTracksByDensity.h:62:17,\r\n    inlined from 'operator().isra' at src/RecoVertex/PixelVertexFinding/plugins/alpaka/clusterTracksByDensity.h:247:29:\r\n  [src/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h:14](https://github.com/cms-sw/cmssw/blob/CMSSW_15_1_X_2025-03-18-2300/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h#L14):48: warning: array subscript 257 is above array bounds of 'unsigned int[257]' [-Warray-bounds=]\r\n    14 |     constexpr I& operator[](int i) { return m_v[i]; }\r\n      |                                                ^\r\nsrc/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h: In function 'operator().isra':\r\nsrc/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h:21:7: note: while referencing 'm_v'\r\n   21 |     I m_v[S];\r\n      |       ^\r\nIn member function 'operator[]',\r\n    inlined from 'clusterTracksByDensity' at src/RecoVertex/PixelVertexFinding/plugins/alpaka/clusterTracksByDensity.h:62:17,\r\n    inlined from 'operator().isra' at src/RecoVertex/PixelVertexFinding/plugins/alpaka/clusterTracksByDensity.h:247:29:\r\n  [src/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h:14](https://github.com/cms-sw/cmssw/blob/CMSSW_15_1_X_2025-03-18-2300/HeterogeneousCore/AlpakaInterface/interface/FlexiStorage.h#L14):48: warning: array subscript 257 is above array bounds of 'unsigned int[257]' [-Warray-bounds=]\r\n    14 |     constexpr I& operator[](int i) { return m_v[i]; }\r\n```\r\n", "branch": "master", "changed_files": 1, "comments": 3, "commits": 1, "created_at": "1742456434", "deletions": 1, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved", "tracking"], "milestone": "CMSSW_15_1_X", "number": 47634, "release-notes": [], "review_comments": 0, "state": "open", "title": "[GCC14]Fix array bound warnings", "updated_at": "1742456648", "user": "smuzaffar"}