{"additions": 1352, "auther_ref": "CMSSW_12_6_0_pre4_hcalnano", "auther_sha": "148414447a7370f627b17a98857d37edeef987c1", "author": "DryRun", "body": "#### PR description:\r\n\r\n**Prototype implementation for use by HCAL DPG, not ready for merging yet**\r\n\r\nThis PR implements a NanoAOD format for HCAL digis and RecHits. This data format is intended to replace the old [HcalTupleMaker](https://gitlab.cern.ch/cmshcal/hcalpfg/HcalTupleMaker) used by most HCAL workflows. \r\n\r\nExample:\r\n```\r\ncmsDriver.py NANO \\\r\n    -s RAW2DIGI,RECO,USER:DPGAnalysis/HcalNanoAOD/hcalNano_cff.hcalNanoTask \\\r\n    --datatier NANOAOD \\\r\n    --eventcontent NANOAOD \\\r\n    --filein root://eoscms.cern.ch//store/group/dpg_hcal/comm_hcal/RAW/ZeroBias/361579/be9a0a12-548c-4aa0-837a-2d5654f8e63b.root \\\r\n    --fileout hcalnano_testcmsdriver.root \\\r\n    -n 100 \\\r\n    --nThreads 4 \\\r\n    --conditions auto:run3_data_prompt \\\r\n    --era Run3 \\\r\n    --python_filename testcmsdriver_cfg.py \\\r\n    --no_exec\r\ncmsRun testcmsdriver_cfg.py\r\n```\r\n\r\nRecHits are implemented following @kdlong's PFNano branch, https://github.com/kdlong/cmssw/tree/pfNano_HCALOnly_12_6_0_pre4. The specific modules, however, are defined in `DPGAnalysis/HcalNanoAOD` (e.g. `HBHERecHitFlatTableProducer`), rather than `DPGAnalysis/CaloNanoAOD` (e.g. `SimpleCaloRecHitFlatTableProducer`). Hence, this package is independent of `DPGAnalysis/CaloNanoAOD`. \r\n\r\nDigis are handled by dedicated modules in `DPGAnalysis/HcalNanoAOD` that output dense arrays, sorted by DetId. A list of the DetIds (i.e. the column labels) is placed in `Run`. For the moment, DetIds are also saved in `Event`, for development purposes although we might decide to keep them for ease of analysis. \r\n\r\nTBD: trigger primitives, calibration metadata like laser/LED flags. \r\n\r\n#### PR validation:\r\n\r\nProduces useful HCAL NanoAOD ntuples. Data validated event-by-event against HcalTupleMaker.\r\n\r\n#### Other\r\nThe contents of this PR are ready for use by HCAL DPG right away. An eventual merge should take into account @kdlong's PFNanoAOD branch, but the package is independent of `DPGAnalysis/CaloNanoAOD`. \r\n\r\n@mariadalfonso @wang-hui\r\n", "branch": "master", "changed_files": 26, "comments": 13, "commits": 3, "created_at": "1673474031", "deletions": 0, "labels": ["simulation-pending", "pending-signatures", "orp-pending", "new-package-pending", "tests-started", "code-checks-approved", "xpog-pending"], "milestone": "CMSSW_13_1_X", "number": 40489, "release-notes": [], "review_comments": 0, "state": "open", "title": "Add prototype HcalNanoAOD", "updated_at": "1676822400", "user": "DryRun"}