{"additions": 90, "auther_ref": "bugFixSkipBadFiles2", "auther_sha": "2f09bc8bd020d84b82420232a176f41a38d9f098", "author": "wddgit", "body": "#### PR description:\r\n\r\nBug fix. Make the skipBadFiles option work. I suspect this option was not being used at all given the number of problems with it and the lack of a good unit test... Anyway, this fixes it. I noticed this while testing ProcessBlock persistence (not from a user report). PoolInputTest_skip_with_failure_cfg.py was failing with the new ProcessBlock code.\r\n\r\n#### PR validation:\r\n\r\nAdded a new unit test. Also, fixed the unit test that creates an empty file. That used to work by using EmptySource and setting maxEvents to zero, but now that does not create any output files at all.  Now the fixed unit test uses PoolSource and selects only lumis not in the input file.\r\n\r\nAs far as I know, RelVal type tests do not use the skipBadFiles option so this should not affect them.\r\n", "branch": "master", "changed_files": 9, "closed_at": "1607092574", "comments": 11, "commits": 1, "created_at": "1606929658", "deletions": 27, "labels": ["code-checks-approved", "comparison-pending", "core-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "6b9dec929baa8616c0f8b958da8fe7d17cf4f23e", "merged_at": "1607092574", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32373, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Make the skipBadFiles option work, add tests", "updated_at": "1607092574", "user": "wddgit"}