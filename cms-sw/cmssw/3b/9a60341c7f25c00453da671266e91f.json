{"additions": 27, "auther_ref": "fixDetSetVectorNewThreadSafety", "auther_sha": "db51f79f2dd8b756311c18e6acc7b17779a57d15", "author": "Dr15Jones", "body": "The call to dataSize() can happen while the vector m_data is\nhaving its size change. Therefore it is not thread safe to call\nm_data.size() under that circumstance. Therefore when running onDemand\nwe need to use an std::atomic to control access to the value.\nWhen reading back from a source, onDemand is always false so\nwe do not have to worry about initializing m_dataSize when\nreading back from storage.\n", "branch": "CMSSW_8_1_X", "changed_files": 2, "closed_at": "1475233166", "comments": 15, "commits": 1, "created_at": "1475090196", "deletions": 7, "labels": ["comparison-available", "core-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "63b0e0ca6005c83f12c4e4ae8abd7323740cd004", "merged_at": "1475233166", "merged_by": "cmsbuild", "milestone": "Next CMSSW_8_1_X", "number": 16021, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix thread-safety issue in edmNew::DetSetVector", "updated_at": "1478674771", "user": "Dr15Jones"}