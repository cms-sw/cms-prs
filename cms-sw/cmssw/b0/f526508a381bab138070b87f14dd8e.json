{"additions": 16, "auther_ref": "asan-odr-gen", "auther_sha": "2be568ee561c0444bc4fa30c138778d40282646d", "author": "smuzaffar", "body": "GCC 10 ASAN IBs failed due to `One Definition Rule` violations\r\n\r\n- `gen::FortranCallback::fInstance` is defined in the header file `GeneratorInterface/Core/interface/FortranCallback.h`. This PR proposes to define it in a `cc` file\r\n```\r\n==13090==ERROR: AddressSanitizer: odr-violation (0x2b5fe7583ac0):\r\n  [1] size=8 'fInstance' CMSSW_12_0_ASAN_X_2021-06-25-2300/src/GeneratorInterface/Core/interface/FortranCallback.h:46:20\r\n  [2] size=8 'fInstance' CMSSW_12_0_ASAN_X_2021-06-25-2300/src/GeneratorInterface/Core/interface/FortranCallback.h:46:20\r\nThese globals were registered at these points:\r\n  [1]:\r\n    #0 0x2b5f3ab95f70 in __asan_register_globals ../../../../libsanitizer/asan/asan_globals.cpp:341\r\n    #1 0x2b5f3a94a9c2 in _dl_init_internal (/lib64/ld-linux-x86-64.so.2+0xf9c2)\r\n    #2 0x7ffd95da3fbe  (<unknown module>)\r\n\r\n  [2]:\r\n    #0 0x2b5f3ab95f70 in __asan_register_globals ../../../../libsanitizer/asan/asan_globals.cpp:341\r\n    #1 0x2b5f3a94a9c2 in _dl_init_internal (/lib64/ld-linux-x86-64.so.2+0xf9c2)\r\n    #2 0x7ffd95da3fbe  (<unknown module>)\r\n\r\n==13090==HINT: if you don't care about these errors you may set ASAN_OPTIONS=detect_odr_violation=0\r\n```\r\n\r\n- `HepMC::IO_HEPEVT conv;` is defined twice . I propose to just use different variables names. Feel free to propose a better solution.\r\n```\r\n==20119==ERROR: AddressSanitizer: odr-violation (0x7f68b1caaa60):\r\n  [1] size=16 'conv' GeneratorInterface/Pythia6Interface/plugins/Pythia6Hadronizer.cc:24:18\r\n  [2] size=16 'conv' GeneratorInterface/ExhumeInterface/src/ExhumeHadronizer.cc:27:18\r\nThese globals were registered at these points:\r\n  [1]:\r\n    #0 0x7f68c0f61f70 in __asan_register_globals ../../../../libsanitizer/asan/asan_globals.cpp:341\r\n    #1 0x7f68c19029c2 in _dl_init_internal (/lib64/ld-linux-x86-64.so.2+0xf9c2)\r\n    #2 0x7ffd278c7c70  (<unknown module>)\r\n\r\n  [2]:\r\n    #0 0x7f68c0f61f70 in __asan_register_globals ../../../../libsanitizer/asan/asan_globals.cpp:341\r\n    #1 0x7f68c19029c2 in _dl_init_internal (/lib64/ld-linux-x86-64.so.2+0xf9c2)\r\n    #2 0x7ffd278c7c70  (<unknown module>)\r\n\r\n==20119==HINT: if you don't care about these errors you may set ASAN_OPTIONS=detect_odr_violation=0\r\n```", "branch": "master", "changed_files": 4, "closed_at": "1624878022", "comments": 7, "commits": 2, "created_at": "1624711443", "deletions": 13, "labels": ["code-checks-approved", "fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "f54cf0bd9f6138622295219f5a94d2193fc0a8ab", "merged_at": "1624878022", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 34258, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[ASAN] Fix one definition rules violations", "updated_at": "1624878022", "user": "smuzaffar"}