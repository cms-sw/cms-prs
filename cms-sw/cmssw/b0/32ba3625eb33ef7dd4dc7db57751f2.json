{"additions": 7, "auther_ref": "customizeCMSSWforIrradiationBiasCorrectionAtHLT", "auther_sha": "b1a053e09413fcce0d4a034e0bbe57333d19aba8", "author": "mmusich", "body": "#### PR description:\r\nAs it was discussed in PR https://github.com/cms-sw/cmssw/pull/27183 it is needed to activate the `IrradiationBiasCorrection` at HLT as well for the Run3 HLT menus as the PixelCPEGeneric algorithm is used everywhere at HLT. \r\nThe outcome of the activation of this parameter is to mitigate the position bias (and related loss of resolution) of the pixel clusters due to high sensor irradiation as expected at the end of life of the phase-1 pixel detector.\r\nThe effects of the activation of the parameter have been studied in details and have been collected in this [presentation](https://mmasciov.web.cern.ch/mmasciov/HLTTracking/TrackingHLT_PixelCPE_2019July19th.pdf) from @mmasciov.    \r\n\r\nThe most striking effect is a drastic improvement (in the 2023 scenario) of the impact parameter pulls (especially in dz): \r\n\r\n![image](https://user-images.githubusercontent.com/5082376/61578133-3173f000-aaf2-11e9-8969-26c629a9a8f8.png)\r\n\r\nNow that \"GRun\" menu is used for the 2021 workflows (due to PR https://github.com/cms-sw/cmssw/pull/27331 ) and eventually lately for other Run3 workflows (as proposed in PR https://github.com/cms-sw/cmssw/pull/27433 ) it is possible to apply the customization directly from `customizeHLTforCMSSW`.\r\n**N.B.**: the issue is tracked also at https://its.cern.ch/jira/browse/CMSHLT-2093.\r\n\r\n#### PR validation:\r\n\r\nProposed code changes pass `addOnTests` and also explicit tests of a 2021 workflow:\r\n```\r\nrunTheMatrix.py -l 12024.0 -t 4 -j 8 --comman='-n 1'\r\n```\r\nInspection of the resulting step2 configuration via:\r\n```\r\nedmConfigDump step2_DIGI_L1_DIGI2RAW_HLT.py > dumped.py\r\nless dumped.py | grep -A 18 -B 8 IrradiationBiasCorrection\r\n```\r\nreveals the customization has been applied correctly:\r\n```python\r\nprocess.hltESPPixelCPEGeneric = cms.ESProducer(\"PixelCPEGenericESProducer\",\r\n    Alpha2Order = cms.bool(True),\r\n    ClusterProbComputationFlag = cms.int32(0),\r\n    ComponentName = cms.string('hltESPPixelCPEGeneric'),\r\n    DoCosmics = cms.bool(False),\r\n    EdgeClusterErrorX = cms.double(50.0),\r\n    EdgeClusterErrorY = cms.double(85.0),\r\n    IrradiationBiasCorrection = cms.bool(True),\r\n    LoadTemplatesFromDB = cms.bool(True),\r\n    MagneticFieldRecord = cms.ESInputTag(\"\",\"\"),\r\n    PixelErrorParametrization = cms.string('NOTcmsim'),\r\n    TruncatePixelCharge = cms.bool(True),\r\n    UseErrorsFromTemplates = cms.bool(True),\r\n    eff_charge_cut_highX = cms.double(1.0),\r\n    eff_charge_cut_highY = cms.double(1.0),\r\n    eff_charge_cut_lowX = cms.double(0.0),\r\n    eff_charge_cut_lowY = cms.double(0.0),\r\n    inflate_all_errors_no_trk_angle = cms.bool(False),\r\n    inflate_errors = cms.bool(False),\r\n    size_cutX = cms.double(3.0),\r\n    size_cutY = cms.double(3.0),\r\n    useLAAlignmentOffsets = cms.bool(False),\r\n    useLAWidthFromDB = cms.bool(False)\r\n)\r\n\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis is not a backport.\r\ncc:\r\n@tsusa @mtosi @JanFSchulte\r\n\r\n", "branch": "master", "changed_files": 1, "closed_at": "1563968088", "comments": 10, "commits": 1, "created_at": "1563616965", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "hlt-pending", "orp-pending", "pending-signatures", "tests-approved"], "milestone": "CMSSW_11_0_X", "number": 27575, "release-notes": [], "review_comments": 0, "state": "closed", "title": "customize HLT to activate IrradiationBiasCorrection in PixelCPEGenericESProducer", "updated_at": "1563968089", "user": "mmusich"}