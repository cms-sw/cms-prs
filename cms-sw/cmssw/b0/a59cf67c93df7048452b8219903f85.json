{"additions": 15, "auther_ref": "1407x-fix-contention", "auther_sha": "61e7d505072002ec918fb80f510e78783638aa2e", "author": "fwyzard", "body": "#### PR description:\r\n\r\nFixes lock contention in source. Lock is used for setting up waiting on the condition variable, but it should be released after.\r\nHowever, the lock is automatically reacquired at the end of wait as described:\r\nhttps://en.cppreference.com/w/cpp/thread/condition_variable/wait\r\n\r\nIn production HLT this is seen to take significant time in the source (8-20% depending on data flow conditions and configuration) and could be the cause preventing using top ~10% of the CPU capacity in HLT.\r\n\r\nAlso, more logging (destination info) is added for the case of file broker connection issues.\r\n\r\n#### PR validation:\r\n\r\nTested in daq3val system with both FedRawDataInputSource and DAQSource.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport of https://github.com/cms-sw/cmssw/pull/45097 for 14_0_7_patchX release cycle.\r\nReason: performance bugfix in DAQ/HLT", "branch": "CMSSW_14_0_7_patchX", "changed_files": 3, "comments": 8, "commits": 1, "created_at": "1717423076", "deletions": 11, "labels": ["daq-approved", "fully-signed", "tests-pending", "orp-pending", "bug-fix", "urgent", "backport-ok"], "number": 45121, "release-notes": [], "review_comments": 0, "state": "open", "title": "(DAQ) fix lock contention in the DAQ source [14_0_7_patchX]", "updated_at": "1717423306", "user": "fwyzard"}