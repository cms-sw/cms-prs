{"additions": 10, "auther_ref": "sortPixelTracks", "auther_sha": "7efac9904b631d7b4d2d36614bfc93b19d8af5fb", "author": "silviodonato", "body": "Backport of https://github.com/cms-sw/cmssw/pull/38065 to 12_4_X\r\n\r\n---------------------------\r\n\r\n#### PR description:\r\n\r\nThis PR helps to reduce the CPU-GPU differences. Testing on 10k of events of 900 GeV collisions, the hltAK4PFJets with difference in pt greater than 0.35 GeV passed from 5 to 2.\r\n\r\nMoreover, having the pixel tracks sorted by pT helps the CPU-GPU comparison.\r\n\r\n#### PR validation:\r\nI checked on 10k of events that this PR does not change the CPU reconstruction, while it changes 3 jets reconstructed using GPU, reducing the differences from CPU.\r\n\r\n\r\n```\r\nroot [2] Events->Scan(\"EventAuxiliary.event():EventAuxiliary.run():recoPFJets_hltAK4PFJets__CPU3.obj.pt():recoPFJets_hltAK4PFJets__GPU3.obj.pt():recoPFJets_hltAK4PFJets__CPU4.obj.pt():recoPFJets_hltAK4PFJets__GPU4.obj.pt()\",\"abs(recoPFJets_hltAK4PFJets__CPU4.obj.pt()-recoPFJets_hltAK4PFJets__GPU4.obj.pt())>0.35 || abs(recoPFJets_hltAK4PFJets__CPU3.obj.pt()-recoPFJets_hltAK4PFJets__GPU3.obj.pt())>0.35\")\r\n***********************************************************************************************\r\n*    Row   * Instance * EventAuxi * EventAuxi * recoPFJet * recoPFJet * recoPFJet * recoPFJet *\r\n***********************************************************************************************\r\n*     2787 *        1 * 249032616 *    346512 * 1.9907082 * 1.6183525 * 1.9907082 * 1.6183525 *\r\n*     4010 *        2 * 251712216 *    346512 * 2.0095655 * 2.0095655 * 2.0095655 * 2.6015811 *\r\n*     4010 *        3 * 251712216 *    346512 * 1.6040698 * 1.6040675 * 1.6040698 * 2.0095655 *\r\n*     7289 *        2 * 260018739 *    346512 * 1.7360442 * 2.2783870 * 1.7360442 * 2.2783870 *\r\n*     7962 *        1 * 261754240 *    346512 * 0.8782627 * 0.8782627 * 0.8782627 * 1.2651753 *\r\n***********************************************************************************************\r\n```\r\nCPU3 and GPU3 are after the PR and CPU4 and GPU4 before the PR \r\n\r\n#### Backport:\r\n\r\nI will open soon the backport PRs to use this PR in the HLT at P5\r\n\r\ncc @cms-sw/hlt-l2 @fwyzard @VinInn \r\n", "branch": "CMSSW_12_4_X", "changed_files": 1, "comments": 10, "commits": 1, "created_at": "1653402591", "deletions": 3, "labels": ["reconstruction-pending", "pending-signatures", "tests-approved", "orp-pending"], "milestone": "CMSSW_12_4_X", "number": 38066, "release-notes": [], "review_comments": 0, "state": "open", "title": "Sort pixel tracks in the SoA converter (12_4_X)", "updated_at": "1653937326", "user": "silviodonato"}