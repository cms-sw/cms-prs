{"additions": 4, "auther_ref": "patch-1", "auther_sha": "54882a14e39d0489f29901a75c5da4c16bd8f12b", "author": "perrozzi", "body": "In production (and gridpack creation) when using condor infrastructure \r\nsome failures have been observed which are related to the use of `/tmp`\r\nby MG5_aMC when the `$TMPDIR` environment variable is not set.\r\nA solution has been provided by @khurtado (https://github.com/cms-sw/genproductions/issues/1534#issuecomment-346390101)\r\nand is used for new gridpacks.\r\nHowever, so far, existing gridpacks had been patched one by one.\r\nDifferent MG5_aMC versions require different patches, making the operation cumbersome.\r\nDiscussing with @fabiocos and @vlimant it comes out that CMSSW doesn't touch this environment variable, \r\nso one can effectively set the $TMPDIR upstream in the ExternalLHEProducer before the gridpack runs.\r\nIt has been cross-checked that the call of `cmsenv` doesn't overwrite the `$TMPDIR` variable\r\n\r\n@kdlong, @agrohsje, @efeyazgan, @perrozzi\r\n\r\n[1]\r\n```\r\n-bash-4.1$ cmsenv\r\n-bash-4.1$ echo $TMPDIR\r\n/tmp/pippo\r\n-bash-4.1$ export TMPDIR=/ciao\r\n-bash-4.1$ echo $TMPDIR\r\n/ciao\r\n-bash-4.1$ cmsenv\r\n-bash-4.1$ echo $TMPDIR\r\n/ciao\r\n```", "branch": "master", "changed_files": 1, "closed_at": "1524233685", "comments": 20, "commits": 1, "created_at": "1524134142", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "c841e686d75e8f247dfabf606fb8e67af34488ad", "merged_at": "1524233685", "merged_by": "cmsbuild", "milestone": "CMSSW_10_2_X", "number": 23004, "release-notes": [], "review_comments": 0, "state": "closed", "title": "try to solve mg5 /tmp problem from ExternalLHEProducer", "updated_at": "1524233685", "user": "perrozzi"}