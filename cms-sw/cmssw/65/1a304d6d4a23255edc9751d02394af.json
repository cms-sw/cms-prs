{"additions": 813, "auther_ref": "CMSSW_12_3_4_patch2_METXYCorrections_rebased", "auther_sha": "3421775490e19d84e0f7314c4925b11d588532eb", "author": "michaelwassmer", "body": "DESCRIPTION WORK IN PROGRESS\r\n\r\n#### PR description:\r\n\r\nThis PR is intended to allow the application of the MET Phi corrections when running over MiniAOD. The MET Phi corrections are intended to mitigate the observed azimuthal angle modulation of missing transverse momentum (MET). The corrections were derived by @lathomas and can be found at the following link: https://lathomas.web.cern.ch/lathomas/METStuff/XYCorrections/\r\nThis PR is just the CMSSW implementation of those corrections using an already existing module with some adaptions.\r\nThe effect of the PR can be seen in more detail in the following two presentations, which were given in the MET meeting:\r\n1. https://indico.cern.ch/event/1153621/contributions/4849172/attachments/2431720/4164278/presentation.pdf\r\n2. https://indico.cern.ch/event/1166184/contributions/4897784/attachments/2453553/4204792/presentation.pdf\r\n\r\n**Important:** The PR is designed such that it shouldn't affect the default/current behavior at all.\r\nFor the PR to actually do something, the newly added 'campaign' and 'era' input arguments of the MET tool need to be explicitly used. This is actually one thing, where the input of experts would be greatly appreciated. It would probably be preferred to automatically retrieve the campaign and era, but at the moment I'm not sure how this could be achieved.\r\n\r\nChanges:\r\n1. JetMETCorrections/Type1MET/plugins/MultShiftMETcorrInputProducer.cc\r\n- Added possibility to also use the total number of primary vertices as the variable the Phi corrections depend on\r\n- Removed the PF candidate loop if the corrections are done as a function of a variable, which doesn't use the PF candidates\r\n2. Added several python configuration file containing the MET Phi corrections\r\n3. PhysicsTools/PatUtils/python/patPFMETCorrections_cff.py\r\n- Added the corrections from the configuration files as objects to be able to use them\r\n4. PhysicsTools/PatUtils/python/tools/runMETCorrectionsAndUncertainties.py\r\n- Allow to use the new corrections in the MET module if the newly added 'era' and 'campaign' input arguments are explicitly used.\r\n- Therefore, the default behavior should stay untouched for now.\r\n \r\n\r\n#### PR validation:\r\n\r\nSuccessfully performed  `code-checks` and `code-format`.\r\nBesides some file read/open errors, the `runTheMatrix.py -l limited -i all` command also seemed to work successfully.\r\n", "branch": "master", "changed_files": 8, "comments": 2, "commits": 10, "created_at": "1655877402", "deletions": 44, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 38461, "release-notes": [], "review_comments": 0, "state": "open", "title": "Add possibility to apply latest MET Phi corrections during MiniAOD processing", "updated_at": "1655879181", "user": "michaelwassmer"}