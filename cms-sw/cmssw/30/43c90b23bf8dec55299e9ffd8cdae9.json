{"additions": 1, "auther_ref": "TopHitFitBugFix", "auther_sha": "342869071033b2847c2708887eaeab048a61f5cf", "author": "emilbols", "body": "When the MET resolution to the Top fit is set, it gets evaluated for a specifc Kxy here [1] following the formula sigma = sqrt(p\\*p\\*c0\\*c0+p\\*c1\\*c1+c2\\*c2). There is no protection that p is positive, despite it being intended to be a magnitude.\r\n\r\nThis is relevant, since when the MET resolution is evaluated in the fit [2], it is done by inputting the x and y components of the kt vector to this sigma function. These components are signed, and can be negative.This means that the MET resolution assigned will be lower for systems with kt_x < 0 or/and kt_y < 0, when it should be symmetric around 0.\r\n\r\nThis fix ensures that the momentum input to the resolution function is always positive.\r\n\r\n[1] https://github.com/cms-sw/cmssw/blob/master/TopQuarkAnalysis/TopHitFit/src/Resolution.cc#L163-L179\r\n\r\n[2] https://github.com/cms-sw/cmssw/blob/master/TopQuarkAnalysis/TopHitFit/src/Constrained_Top.cc#L215-L216\r\n", "branch": "master", "changed_files": 1, "closed_at": "1634007546", "comments": 11, "commits": 1, "created_at": "1633090640", "deletions": 0, "labels": ["analysis-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "d4646a55b1208008dee6f35f0662da12ac3c34f3", "merged_at": "1634007546", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 35504, "release-notes": [], "review_comments": 2, "state": "closed", "title": "BugFix: HitFit MET resolution", "updated_at": "1634175611", "user": "emilbols"}