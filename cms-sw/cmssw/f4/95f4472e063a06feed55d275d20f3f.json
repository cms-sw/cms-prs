{"additions": 1274, "auther_ref": "CMSSW_11_2_X_2020-11-18_DeepCoreTechnical", "auther_sha": "671c380fbf7119967796e29918d31e9ed15cbc2e", "author": "vberta", "body": "### PR description:\r\n\r\nThis PR include DeepCore, the NN-based seeding algorithm for JetCore iteration. The PR should be considered  **technical**, thus DeepCore is disabled by default. The possibility to enable DeepCore is given with a modifier: `seedingDeepCore`. Anyway, **it should not be used** for practical purposes because DeepCore has not been fully tested. \r\n\r\n#### Recostruction side:\r\n\r\nThe `seedingDeepCore` code is mainly contained in the plugin: `DeepCoreSeedGenerator`, which use a pre-trained model (contained in the .pb file from the additiona PR: [link](https://github.com/cms-data/RecoTracker-TkSeedGenerator/pull/1)). The training code (the NN and the training sample preparation scripts) will be provided in another PR in the future. Several modifications are done in `JetCoreRegionalStep_cff.py`, all protected by the modifier.\r\n\r\nThere are also some features enable by default (which do not have an impact in the default reconstruction):\r\n- some protection against 0-hit seeds (needed only in DeepCore case), in `LowPtGsfElectronSeedProducer.cc` and `GoodSeedProducer.cc`,`TrackFromSeedProducer.cc`\r\n- some minor modification in `TrackAssociatorByPositionImpl` (I don't use it anymore, I can drop it, but I think is a useful feature to have)\r\n\r\n\r\n#### Validation Side:\r\n\r\nA dedicated directory in the `Track_validation_cff`, under tracking/JetCore which contains some MTV instance plots associated byChi2. The production of this plot is also enabled with `seedingDeepCore` modifier, but this is a **temporary solution**, since they are useful also in standard JetCore case. These plots are relevant mostly on high qT QCD samples, almost empty in case of no-dense environment samples).\r\n\r\nIn addition `JetCoreMCtruthSeedGenerator` plugin is also provided (under validation). It produces a list of seeds for JetCore iteration using the MC information, in the same fashion of DeepCore (i.e. as a list of hitless seed as seed-track parameters). \r\n\r\nThis PR includes also the removal of several not-needed tracking plots, completely not related to DeepCore o jetCore iteration, but since we're close to the memory limit they have been removed. Essentially have been removed all the plots related to:\r\n- `dzpvcut_pt`\r\n- `dzpvsigcut_pt`\r\n\r\nCurrenlty the workflwow 11723.17 is the only one with DeepCore enabled:\r\n`11723.17 2021_seedingDeepCore+QCD_Pt_1800_2400_14TeV_TuneCP5_GenSim+Digi+Reco+HARVEST`\r\n\r\n### PR validation:\r\n\r\nThe content of this PR (enabling DeepCore) has been validated on 9k events with:\r\n\r\n`cmsDriver.py step3 --conditions auto:phase1_2024_realistic -n -1 --era Run3 --eventcontent RECOSIM,MINIAODSIM,DQM --runUnscheduled -s RAW2DIGI,L1Reco,RECO,RECOSIM,EI,PAT,VALIDATION:@standardValidation+@miniAODValidation,DQM:@standardDQM+@ExtraHLT+@miniAODDQM --datatier GEN-SIM-RECO,MINIAODSIM,DQMIO --geometry DB:Extended --filein file:step2.root --fileout file:step3.root --no_exec --procModifiers seedingDeepCore`\r\n\r\nand (trackingOnly workflow):\r\n`cmsDriver.py step3_trackingOnly --conditions auto:phase1_2024_realistic -n -1 --era Run3 --eventcontent RECOSIM,MINIAODSIM,DQM --runUnscheduled -s RAW2DIGI,RECO,RECOSIM,EI,PAT,VALIDATION:@trackingOnlyValidation,DQM:@trackingOnlyDQM --datatier GEN-SIM-RECO,MINIAODSIM,DQMIO --geometry DB:Extended --filein file:step2.root --fileout file:step3.root --no_exec --procModifiers seedingDeepCore`\r\n\r\nusing as input:\r\n`/RelValQCD_Pt_1800_2400_14/CMSSW_11_2_0_pre8-112X_mcRun3_2024_realistic_v10_forTrk-v1/GEN-SIM-DIGI-RAW\r\n`\r\n\r\n### PR documentation:\r\n\r\nDocumentation about DeepCore: https://twiki.cern.ch/twiki/bin/view/CMSPublic/NNJetCoreAtCtD2019\r\n(DPS, talk, proceeding at References section)\r\n\r\nPresentation of this PR at Reco meeting (11/12/2020): https://indico.cern.ch/event/983567/contributions/4142430/attachments/2161501/3647084/presentation_deepcorePRnov2020_forReco.pdf\r\n\r\n", "branch": "master", "changed_files": 21, "closed_at": "1608214596", "comments": 228, "commits": 9, "created_at": "1605920376", "deletions": 157, "labels": ["code-checks-approved", "dqm-approved", "fully-signed", "operations-approved", "orp-approved", "pdmv-approved", "reconstruction-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "1911f2f34a3f676b2cb637dc3101784aff42d3e6", "merged_at": "1608214596", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32222, "release-notes": [], "review_comments": 370, "state": "closed", "title": "DeepCore (NN jetCore seeding) implementation ", "updated_at": "1608214596", "user": "vberta"}