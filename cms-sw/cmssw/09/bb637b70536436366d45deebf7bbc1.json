{"additions": 8, "auther_ref": "FixHOWarning", "auther_sha": "bdbf8c262a581f9c2ffbf954a481110558cc3e7d", "author": "kpedro88", "body": "It was noticed (by @fwyzard in https://hypernews.cern.ch/HyperNews/CMS/get/simDevelopment/1835.html) that the warning \"Mismatched calo signals\" occasionally appeared in premixing workflows in 94X.\r\n\r\nI eventually determined this was an unintended side effect of #17920. Before that PR, `CaloHitResponse::add()` didn't use the built-in `+=` operator for `CaloSamples`, but a separate, simpler algorithm that didn't check the precise size. We don't bother to do high-fidelity premixing for HO, so the warning started to appear in the (fairly rare) occurrence of premixing pileup hits in HO. It has no effect on physics, but is slightly irritating.\r\n\r\nTo fix this, I made a `setPreciseSize()` accessor for `CaloSamples` that resizes the associated vector. I also made `setSize()` resize the data vector (and appropriately modified the one place where `setSize()` was already used). The `HcalSiPMHitResponse` class uses this when high fidelity premixing is not enabled, and that suppresses the warning as intended.\r\n\r\nattn: @abdoulline", "branch": "master", "changed_files": 3, "closed_at": "1511785077", "comments": 13, "commits": 2, "created_at": "1511373785", "deletions": 2, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "7b07a3cfe939629e4f31e45c76877df4c67f047b", "merged_at": "1511785077", "merged_by": "cmsbuild", "milestone": "CMSSW_10_0_X", "number": 21439, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix mismatched calo signals warning and make accessors consistent", "updated_at": "1511785077", "user": "kpedro88"}