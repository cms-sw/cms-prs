{"additions": 365, "auther_ref": "devel_cmssw46740", "auther_sha": "fe94271275060f4dbd6f700ce190feca79dc286d", "author": "missirol", "body": "#### PR description:\r\n\r\nThis PR implements two improvements to the L1-uGT emulator. It goes in the direction of addressing #46740.\r\n\r\n - https://github.com/missirol/cmssw/commit/9dc135c19d7b352c094cf3eef14168fe6656bf3d moves several operations from `L1TGlobalProducer::produce` to `L1TGlobalProducer::beginRun` (these are operations that depend only on the L1T trigger menu, which (afaik) may only change during run transitions). In particular, this leads to building the map of \"trigger conditions\" (instances of classes inhering from `ConditionEvaluation`, one of them being `AXOL1TLCondition`) only once per run, as opposed to once per event.\r\n\r\n - https://github.com/missirol/cmssw/commit/fe94271275060f4dbd6f700ce190feca79dc286d moves the initialisation of the `hls4ml` model in `AXOL1TLCondition` from its `evaluateCondition` method (used multiple times per event) to its constructor (called only a few times per run given https://github.com/missirol/cmssw/commit/9dc135c19d7b352c094cf3eef14168fe6656bf3d).\r\n\r\nThis PR requires https://github.com/cms-hls4ml/hls4mlEmulatorExtras/pull/6, a simple improvement of the methods of the class `hls4mlEmulatorExtras::ModelLoader` in the `hls4mlEmulatorExtras` external (this update is available via https://github.com/cms-sw/cmsdist/pull/9606).\r\n\r\n(This PR will likely need to be rebased if #47030 is merged first.)\r\n\r\n#### PR validation:\r\n\r\nValidated in `CMSSW_15_0_0_pre1` with the checks described in https://github.com/cms-sw/cmssw/issues/46740#issuecomment-2571706939.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\nN/A\r\n", "branch": "master", "changed_files": 15, "comments": 11, "commits": 2, "created_at": "1736442405", "deletions": 510, "labels": ["l1-pending", "pending-signatures", "tests-pending", "orp-pending", "requires-external", "code-checks-approved"], "milestone": "CMSSW_15_0_X", "number": 47070, "release-notes": [], "review_comments": 3, "state": "open", "title": "move per-run changes of L1-uGT emulator to `beginRun` (incl. loading of AXOL1TL model)", "updated_at": "1736673229", "user": "missirol"}