{"additions": 10, "auther_ref": "dqm-fix-edmtome", "auther_sha": "2972d1d0c46fc73dd65466834b1f5f0b4441775e", "author": "schneiml", "body": "#### PR description:\r\n\r\nThis PR fixes a problem pointed out by @mmusich related to the AlCa multi-run harvesting workflows, caused by #28622.\r\n\r\nIn the past, the DQMStore, when used with \"collate\" mode, would\r\nautomatically merge the `TH1` object passed into a `book*()` call with an\r\nexisting object. However, the merge logic in the `DQMStore` is rather\r\nconservative and didn't merge objects with `SetCanExtend` set. So, to\r\nwork around this, `EDMtoMEConverter` would merge these objects itself.\r\n\r\nThe new `DQMStore` does not have the \"collate\" mode any more and all the\r\nmerging has to happen in the input modules. This fixes\r\n`EDMtoMEConverter` to *always* use its local merge logic.\r\n\r\nArguably the ME merge logic should be factored out of DQMRootSource and\r\nEDMtoMEConverter and shared between the two, but for now this small fix\r\nshould work to get the AlCa workflows working again.\r\n\r\n#### PR validation:\r\n\r\nPrivately provided test configuration seems to provide correct results, needs further testing by AlCa.\r\n\r\nI have not much confidence that the `EDMtoMEConverter` behaves correctly for all combinations of settings, but in the end this module is there to support the AlCa workflows dating back to Run1 and the only thing that matters is that these work correctly.", "branch": "master", "changed_files": 1, "closed_at": "1582879230", "comments": 29, "commits": 1, "created_at": "1581513128", "deletions": 11, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "requires-external", "tests-approved"], "merge_commit_sha": "804ccf4f2b5cc7a50a7ea18377d00e2294bb4c69", "merged_at": "1582879230", "merged_by": "cmsbuild", "milestone": "CMSSW_11_1_X", "number": 28934, "release-notes": [], "review_comments": 0, "state": "closed", "title": "DQM: Fix EDMtoMEConverter.", "updated_at": "1582879231", "user": "schneiml"}