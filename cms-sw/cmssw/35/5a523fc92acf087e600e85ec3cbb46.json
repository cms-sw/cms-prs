{"additions": 515, "auther_ref": "TrajectorySeed_recHits", "auther_sha": "65d50510ddc032d10c879bc174af8cd5d3c0c1cb", "author": "guitargeek", "body": "#### PR description:\r\n\r\nThe current interface of the TrajectorySeed class to its recHits bothered me for quite some time, especially since the ElectronSeed inherits it. I'm speaking about this member function [1]:\r\n\r\n```C++\r\nstd::pair<const_iterator, const_iterator> recHits() const { return std::make_pair(hits_.begin(), hits_.end()); }\r\n```\r\n~~which I think should better just return a const reference to the `edm::OwnVector<TrackingRecHit>` of seeds (proposed in this PR):~~ *original idea that got discarded in review*\r\nwhich should better return a `edm::Range<RecHitContainer::const_iterator>` that implements `begin()` and `end()` such that `recHits()` can be used in range-based loops:\r\n```C++\r\nedm::Range<RecHitContainer::const_iterator> recHits() const { return {hits_.begin(), hits_.end()}; }\r\n```\r\nthis also avoids the very misleading expression `recHits().second`: one might think that it points to the second rechit, but actually it is the `hits_.end()` iterator. This caused possible bugs here [2] and here [3], I think. No attempt is made in this PR to fix these potential bugs, it only adapts the code to the newly proposed range-loop friendly interface without changing any functionality (hopefully).\r\n\r\n[1] https://github.com/cms-sw/cmssw/blob/master/DataFormats/TrajectorySeed/interface/TrajectorySeed.h#L52\r\n[2] https://github.com/cms-sw/cmssw/blob/master/RecoTracker/MeasurementDet/src/StartingLayerFinder.cc#L79\r\n[3] https://github.com/cms-sw/cmssw/blob/master/Validation/RecoMuon/src/MuonSeedTrack.cc#L208\r\n\r\n#### PR validation:\r\n\r\nCMSSW compiles and local matrix tests pass.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNo backport intended.", "branch": "master", "changed_files": 66, "closed_at": "1591356618", "comments": 74, "commits": 4, "created_at": "1590355548", "deletions": 623, "labels": ["analysis-approved", "code-checks-approved", "comparison-available", "dqm-approved", "fastsim-approved", "fully-signed", "hlt-approved", "orp-approved", "reconstruction-approved", "simulation-approved", "tests-approved", "visualization-approved"], "merge_commit_sha": "8008927682387dc69c5dfde3ced7b0d8fe918373", "merged_at": "1591356618", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 29971, "release-notes": [], "review_comments": 16, "state": "closed", "title": "Better TrajectorySeed interface to recHits", "updated_at": "1591356619", "user": "guitargeek"}