{"additions": 3, "auther_ref": "fix_staticAnaWarns", "auther_sha": "4825f30f289b3bb06ab276927c3c11d8ffbafc2a", "author": "uhussain", "body": "Fixing Memory Leaks in DataFormats/ParticleFlowCandidate/src/PFCandidate.cc\n\nError 1: DataFormats/ParticleFlowCandidate/src/PFCandidate.cc [Memory error] [Memory Leak] [PFCandidate]line 161 Memory is Allocated but not released.\n\nhttps://cmssdt.cern.ch/SDT/jenkins-artifacts/ib-static-analysis/CMSSW_8_1_X_2016-08-08-1100/slc6_amd64_gcc530/llvm-analysis/report-18b31d.html#EndPath\n\n> Fix it by :  delete tmp; in line 161\n\nError 2: /DataFormats/ParticleFlowCandidate/src/PFCandidate.cc [Memory error] [Memory Leak] [operator=]-line 167\n\nhttps://cmssdt.cern.ch/SDT/jenkins-artifacts/ib-static-analysis/CMSSW_8_1_X_2016-08-08-1100/slc6_amd64_gcc530/llvm-analysis/report-3a4600.html#EndPath\n\n> Fix it by :  delete tmp; in line 172\n\nError 3: DataFormats/ParticleFlowCandidate/src/PFCandidate.cc [Memory error] [Memory Leak] [elementsInBlocks]line 694\n\nhttps://cmssdt.cern.ch/SDT/jenkins-artifacts/ib-static-analysis/CMSSW_8_1_X_2016-08-08-1100/slc6_amd64_gcc530/llvm-analysis/report-4dc31c.html#EndPath\n\n> temp.get_deleter(); in 695\n\nRegarding the memory leak in [elementsInBlocks]line 694:\nhttps://cmssdt.cern.ch/SDT/jenkins-artifacts/ib-static-analysis/CMSSW_8_1_X_2016-08-08-1100/slc6_amd64_gcc530/llvm-analysis/report-4dc31c.html#EndPath\n\nI am a little confused by this, why do we have a memory leak error here when unique_ptr is a smart pointer and the object managed by it in this instance should be destroyed and its memory deallocated when it goes out of scope. However, since it shows up as an error, in my fix the object is destroyed using \"get_deleter()\". The deleter calls the destructor of the object and dispenses the memory. \n", "branch": "CMSSW_8_1_X", "changed_files": 1, "closed_at": "1471297640", "comments": 5, "commits": 1, "created_at": "1471190170", "deletions": 1, "labels": ["comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-rejected"], "milestone": "Next CMSSW_8_1_X", "number": 15465, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fixing static analyzer errors in PFCandidate.cc", "updated_at": "1471297640", "user": "uhussain"}