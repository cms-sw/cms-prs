{"additions": 1566, "auther_ref": "NV-ROCm-ProfilerService", "auther_sha": "d1f90d6bd34cd97354c23ec8c69f159d46ca07b2", "author": "ericcano", "body": "#### PR description:\r\n\r\nSplits the NVProfilerService into a generic framework activity annotation base and an NVTX specific customization. A ROCm customization is added. Another one for VTune should be easily derivable.\r\n\r\nThis commit also adds thread safety wit spinlocks to avoid thread scheduling effects. Some ranges experience double start of double end. This is now indicated with a mark, instead of failing on an assertion.\r\n\r\nSupport added for ES modules execution, path ranges, source and event cleanup (which is are the most important contributions to the inter event gap).\r\n\r\nThis could still be polished a lot, by adding configurable content or message, coloring by event/EDM stream, etc...\r\n\r\nThe support for EDM events is also not complete and could still be expanded.\r\n\r\n#### PR validation:\r\n\r\nThe two services have been tested on NVIDIA and AMD GPUs and showed expected results:\r\n\r\nHere with the PyTorch test:\r\n<img width=\"1834\" height=\"973\" alt=\"image\" src=\"https://github.com/user-attachments/assets/25f86886-2c53-4912-9d56-29c9f3a25f8a\" />\r\n\r\n<img width=\"1161\" height=\"626\" alt=\"image\" src=\"https://github.com/user-attachments/assets/496ff457-a804-4409-8291-d8d6b1f7e1db\" />\r\n\r\nThis was also tested with HLT configurations.\r\n\r\n", "branch": "master", "changed_files": 5, "comments": 6, "commits": 3, "created_at": "1765282889", "deletions": 1182, "labels": ["core-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved", "heterogeneous-pending"], "milestone": "CMSSW_16_0_X", "number": 49580, "release-notes": [], "review_comments": 0, "state": "open", "title": "Adds ROCmProfilerService and fixes NVProfilerService.", "updated_at": "1765978883", "user": "ericcano"}