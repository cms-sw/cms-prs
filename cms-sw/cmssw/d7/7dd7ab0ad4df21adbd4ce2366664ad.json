{"additions": 4, "auther_ref": "dd4hep-ecal-barrel-algo-rotations-fix", "auther_sha": "7089310fda9ff037a4da852a2e1ff2fb270dcc6a", "author": "ianna", "body": "#### PR description:\r\n\r\nThe PR should fix the sign discrepancy observed by @bsunanda in rotations\r\n\r\n**DD**: 37 overlaps are displayed in `cm`\r\n<img width=\"1135\" alt=\"Screenshot 2021-03-15 at 11 10 57\" src=\"https://user-images.githubusercontent.com/1390682/111139025-ea692700-8580-11eb-8df3-e15f108c56a2.png\">\r\n**DD4hep**: 36 identical overlaps displayed in `mm`\r\n<img width=\"1134\" alt=\"Screenshot 2021-03-15 at 11 11 15\" src=\"https://user-images.githubusercontent.com/1390682/111139039-ed641780-8580-11eb-8333-ab124117234a.png\">\r\n\r\nShapes:\r\n**DD** (in `cm`):\r\n\r\n```\r\n*** Shape eregalgo:EBAR: TGeoPcon ***\r\n    Nz    = 4\r\n    phi1  =     0.00000\r\n    dphi  =   360.00000\r\n     plane 0: z= -304.50000 Rmin=  145.52200 Rmax=  177.50000\r\n     plane 1: z= -268.67000 Rmin=  123.80000 Rmax=  177.50000\r\n     plane 2: z=  268.67000 Rmin=  123.80000 Rmax=  177.50000\r\n     plane 3: z=  304.50000 Rmin=  145.52200 Rmax=  177.50000\r\n Bounding box:\r\n*** Shape eregalgo:EBAR: TGeoBBox ***\r\n    dX =   177.50000\r\n    dY =   177.50000\r\n    dZ =   304.50000\r\n    origin: x=    0.00000 y=    0.00000 z=    0.00000\r\n*** TGeoCompositeShape : ebalgo:ESPM = \r\n Bounding box:\r\n*** Shape ebalgo:ESPM: TGeoBBox ***\r\n    dX =    27.87442\r\n    dY =    32.80927\r\n    dZ =   152.20000\r\n    origin: x=  148.02558 y=    0.75404 z=  152.20000\r\n```\r\n\r\n**DD4hep** (in `mm`):\r\n```\r\n*** Shape eregalgo:EBAR_shape_0x7f18b1503500: TGeoPcon ***\r\n    Nz    = 4\r\n    phi1  =     0.00000\r\n    dphi  =   360.00000\r\n     plane 0: z=-3045.00000 Rmin= 1455.22000 Rmax= 1775.00000\r\n     plane 1: z=-2686.70000 Rmin= 1238.00000 Rmax= 1775.00000\r\n     plane 2: z= 2686.70000 Rmin= 1238.00000 Rmax= 1775.00000\r\n     plane 3: z= 3045.00000 Rmin= 1455.22000 Rmax= 1775.00000\r\n Bounding box:\r\n*** Shape eregalgo:EBAR_shape_0x7f18b1503500: TGeoBBox ***\r\n    dX =  1775.00000\r\n    dY =  1775.00000\r\n    dZ =  3045.00000\r\n    origin: x=    0.00000 y=    0.00000 z=    0.00000\r\n*** TGeoCompositeShape : ebalgo:ESPM_shape_0x7f18bbc17100 = Subtraction\r\n Bounding box:\r\n*** Shape ebalgo:ESPM_shape_0x7f18bbc17100: TGeoBBox ***\r\n    dX =   278.74416\r\n    dY =   328.09266\r\n    dZ =  1522.00000\r\n    origin: x= 1480.25584 y=    7.54037 z= 1522.00000\r\n```\r\n\r\nOverlaps in DD and DD4hep at a prescission level:\r\n<img width=\"1214\" alt=\"Screenshot 2021-03-15 at 11 36 09\" src=\"https://user-images.githubusercontent.com/1390682/111140567-c27ac300-8582-11eb-969a-6f82eb3ef2cd.png\">\r\n\r\n```\r\n = Overlap ov00036: eregalgo:EFAW extruded by: eregalgo:EFAW/eregalgo:EHAWR_2 ovlp=1.00141e-06\r\n - first volume: eregalgo:EFAW at position:\r\nmatrix Identity - tr=0  rot=0  refl=0  scl=0 shr=0 reg=1 own=0\r\n  1.000000    0.000000    0.000000    Tx =   0.000000\r\n  0.000000    1.000000    0.000000    Ty =   0.000000\r\n  0.000000    0.000000    1.000000    Tz =   0.000000\r\n*** TGeoCompositeShape : eregalgo:EFAW = \r\n Bounding box:\r\n*** Shape eregalgo:EFAW: TGeoBBox ***\r\n    dX =     2.72562\r\n    dY =    14.75000\r\n    dZ =   152.20000\r\n    origin: x=   -0.00000 y=    2.75000 z=    0.00000\r\n - second volume: eregalgo:EHAWR at position:\r\nmatrix  - tr=1  rot=1  refl=1  scl=0 shr=0 reg=0 own=0\r\n -1.000000    0.000000   -0.000000    Tx =  -1.210159\r\n  0.000000    1.000000    0.000000    Ty =  -0.000000\r\n -0.000000   -0.000000    1.000000    Tz =  -0.000000\r\n*** TGeoCompositeShape : eregalgo:EHAWR = \r\n Bounding box:\r\n*** Shape eregalgo:EHAWR: TGeoBBox ***\r\n    dX =     1.36281\r\n    dY =    14.75000\r\n    dZ =   152.20000\r\n    origin: x=    0.15265 y=    2.75000 z=    0.00000\r\n\r\n```\r\n#### PR validation:\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\n<!-- Please replace this text with any link to  -->\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n", "branch": "master", "changed_files": 1, "closed_at": "1615811463", "comments": 12, "commits": 1, "created_at": "1615801267", "deletions": 17, "labels": ["code-checks-approved", "fully-signed", "geometry-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "a2d8ea4e33a9bd4c56ec4665804a27da2f5ee4a8", "merged_at": "1615811463", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 33178, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[DD4Hep] Use Placement instead of TGeoCombiTrans", "updated_at": "1615811463", "user": "ianna"}