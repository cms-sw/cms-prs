{"additions": 447, "auther_ref": "probQInMiniAODMaster", "auther_sha": "beeba2bd3a6aad0d57c0c841b188944098ef33ff", "author": "tvami", "body": "#### PR description:\r\n\r\nSee request to ReRECO 2017/2018 SM and MET data in [1]. This assumed refitting tracks to get the required low-level pixel reco information. As an alternative (actually it's an improvement, so better then alternative) it was recommended to save the required information in the MiniAOD. This PR does that,  i.e. adds  SiPixel on track charge and shape probs to MiniAOD content. Since in 2017/2018 the Pixel layer 1 was very noisy, and alternative version that excludes L1 was added as well.\r\n\r\nAdding it to RECO/AOD as a new object `siPixelTrackProbQXY`:\r\n```\r\nedmDumpEventContent ReRECO_RAW2DIGI_L1Reco_RECO_EI.root | grep siPixelTrackProbQXY  \r\nedm::Association<vector<reco::SiPixelTrackProbQXY> >    \"siPixelTrackProbQXY\"       \"\"                \"RECO\"    \r\nvector<reco::SiPixelTrackProbQXY>     \"siPixelTrackProbQXY\"       \"\"                \"RECO\"    \r\n```\r\n\r\nWhile adding it to MiniAOD as a member of the isolatedTracks collection.\r\n\r\nPlease note that most of the changes in the PR are due to code-checks/code-formats.\r\n\r\nFurther details will be presented in the Tracking POG meeting on Monday [2]\r\n\r\n[1] https://its.cern.ch/jira/browse/PDMVRERECO-48\r\n[2] https://indico.cern.ch/event/1098365/#5-proposal-to-use-low-level-pi\r\n\r\n#### PR validation:\r\nRunning \r\n```\r\ncmsDriver.py ReRECO --conditions auto:run2_data --customise Configuration/DataProcessing/RecoTLR.customisePostEra_Run2_2018,Configuration/DataProcessing/Utils.addMonitoring --datatier MINIAOD --era Run2_2018,pf_badHcalMitigation --eventcontent MINIAOD --nThreads 8 --no_exec --number 100 --python_filename 4HLT2MiniAOD.py --scenario pp --step RAW2DIGI,L1Reco,RECO,EI,PAT --runUnscheduled --data  --filein root://cms-xrd-global.cern.ch//store/data/Run2018C/SingleMuon/RAW/v1/000/319/337/00000/004ED286-5582-E811-8895-FA163E126126.root --era Run2_2018\r\n```\r\nbefore the PR and after the PR the sizes change as follows:\r\n-rw-r--r-- 1 tvami cms 8177333 Nov 24 16:30 ReRECO_RAW2DIGI_L1Reco_RECO_EI_PAT.root\r\n--> \r\n-rw-r--r-- 1 tvami cms 8185759 Nov 24 16:26 ReRECO_RAW2DIGI_L1Reco_RECO_EI_PAT.root\r\ni.e an 1.00103041 increase in size is expected.\r\n\r\nHere is the timing report for before the PR\r\n```\r\n Time Summary: \r\n - Min event:   3.23837\r\n - Max event:   31.758\r\n - Avg event:   11.6797\r\n - Total loop:  238.961\r\n - Total init:  111.42\r\n - Total job:   353.645\r\n - EventSetup Lock:   644.041\r\n - EventSetup Get:   110.653\r\n Event Throughput: 0.418479 ev/s\r\n CPU Summary: \r\n - Total loop:  1052.11\r\n - Total init:  58.428\r\n - Total extra: 0\r\n - Total job:   1113.87\r\n ```\r\n\r\nand after the PR\r\n```\r\nTime Summary: \r\n - Min event:   3.93596\r\n - Max event:   48.6695\r\n - Avg event:   15.4078\r\n - Total loop:  219.115\r\n - Total init:  134.002\r\n - Total job:   353.124\r\n - EventSetup Lock: 0\r\n - EventSetup Get:  0\r\n Event Throughput: 0.456381 ev/s\r\n CPU Summary: \r\n - Total loop:     1372.34\r\n - Total init:     67.1617\r\n - Total extra:    0\r\n - Total children: 0.162391\r\n - Total job:      1439.51\r\n ```\r\n\r\nContent was validated on MC Signal samples, and on data as well, please see more plots in [2]\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNeeds a backport in 10_6_X\r\n\r\ncc @mmusich ", "branch": "master", "changed_files": 16, "comments": 19, "commits": 7, "created_at": "1637806635", "deletions": 6, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_12_2_X", "number": 36247, "release-notes": [], "review_comments": 15, "state": "open", "title": "Adding SiPixel on track charge and shape probs to MiniAOD content", "updated_at": "1638113902", "user": "tvami"}