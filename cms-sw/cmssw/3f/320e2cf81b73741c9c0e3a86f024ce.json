{"additions": 3, "auther_ref": "fix_cmsCudaSetup.sh", "auther_sha": "29e6fd2a2eff9f05a32b11b85b483dd6c0e2923d", "author": "fwyzard", "body": "#### PR description:\r\n\r\nFix cmsCudaSetup.sh to support the changes to the syntax used in the cuda.xml SCRAM tool.\r\n\r\n#### PR validation:\r\n\r\nRunning `cmsCudaSetup.sh` works with the current releases, and changes `cuda.xml` according to the GPUs present on the local machine:\r\n```diff\r\ndiff cuda.xml cuda.xml\r\n--- cuda.xml\r\n+++ cuda.xml\r\n@@ -11,7 +11,7 @@\r\n     <environment name=\"LIBDIR\"    default=\"$CUDA_BASE/lib64\"/>\r\n     <environment name=\"INCLUDE\"   default=\"$CUDA_BASE/include\"/>\r\n   </client>\r\n-  <flags CUDA_FLAGS=\"-std=c++17 -O3 --generate-line-info --source-in-ptx --display-error-number --expt-relaxed-constexpr --extended-lambda -gencode arch=compute_60,code=[sm_60,compute_60] -gencode arch=compute_70,code=[sm_70,compute_70] -gencode arch=compute_75,code=[sm_75,compute_75] -Wno-deprecated-gpu-targets -Xcudafe --diag_suppress=esa_on_defaulted_function_ignored --cudart shared\"/>\r\n+  <flags CUDA_FLAGS=\"-std=c++17 -O3 --generate-line-info --source-in-ptx --display-error-number --expt-relaxed-constexpr --extended-lambda   -Wno-deprecated-gpu-targets -Xcudafe --diag_suppress=esa_on_defaulted_function_ignored --cudart shared -gencode arch=compute_61,code=[sm_61,compute_61]\"/>\r\n   <flags CUDA_HOST_REM_CXXFLAGS=\"-std=%\"/>\r\n   <flags CUDA_HOST_REM_CXXFLAGS=\"%potentially-evaluated-expression\"/>\r\n   <flags CUDA_HOST_CXXFLAGS=\"-std=c++17\"/>\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nBackport of #38343 .", "branch": "CMSSW_12_4_X", "changed_files": 1, "comments": 5, "commits": 1, "created_at": "1655021400", "deletions": 3, "labels": ["pending-signatures", "tests-approved", "orp-pending", "bug-fix", "backport", "heterogeneous-pending"], "milestone": "CMSSW_12_4_X", "number": 38344, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix cmsCudaSetup.sh to follow the latest changes to cuda.xml [12.4.x]", "updated_at": "1655048119", "user": "fwyzard"}