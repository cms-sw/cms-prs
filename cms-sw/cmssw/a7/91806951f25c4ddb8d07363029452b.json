{"additions": 176, "auther_ref": "from-CMSSW_11_0_X_2019-08-19-1100-Update-GEM-Cluster-procedure", "auther_sha": "43d19f5fb9155168ac22684b342de45cd2c932b1", "author": "dildick", "body": "#### PR description:\r\n\r\nUpdate of the clustering procedure so it matches the implementation in the GEM optohybrid firmware. \r\n\r\nIn the current version of the algorithm, cluster finding is segmented into two separate halves of the GE1/1 chambers. Thus, each one of the trigger fibers can transmit clusters only from the half of the chamber that it corresponds to. For GE2/1, there are four separate quarts of the GE2/1 chamber. \r\n\r\nThis has the downside of being unable to transmit more than 4 clusters when they occur within that side of the chamber, so there will be a slightly higher rate of cluster overflow. For GE2/1 each OH can transmit up to 5 clusters.\r\n\r\n*Note*: GE1/1 does not have 2 physical optohybrids. There is only one optohybrid per chamber, but the firmware sees two independent halves. So `nOHGE11_` really means the number of independent optohybrid sectors. On the other hand `nOHGE21_` is the actual number of optohybrids on the chamber. However, the emulator should match the firmware, despite this subtle difference.\r\n\r\n#### PR validation:\r\n\r\nI tested this pull request on a customized multi-muon gun. I simulated 10 events, each with 100 muons and 100 antimuons propagating between 1.55 < |eta| < 2.15 - to emulate high pileup conditions in the GE1/1 region. Print-outs (not included in the pull request) show\r\n\r\n* Example GE1/1\r\n```\r\nAnalyzing optohybrid 1\r\n\tAdding cluster to final collection Re -1 Ri 1 St 1 La 1 Ch 7 Ro 1   bx: 0 pads:  29\r\n\tAdding cluster to final collection Re -1 Ri 1 St 1 La 1 Ch 7 Ro 1   bx: 0 pads:  60\r\n\tAdding cluster to final collection Re -1 Ri 1 St 1 La 1 Ch 7 Ro 1   bx: 0 pads:  127\r\n\tAdding cluster to final collection Re -1 Ri 1 St 1 La 1 Ch 7 Ro 3   bx: 0 pads:  63 64\r\n\tRejecting cluster  Re -1 Ri 1 St 1 La 1 Ch 7 Ro 3   bx: 0 pads:  70 71\r\nAnalyzing optohybrid 2\r\n\tAdding cluster to final collection Re -1 Ri 1 St 1 La 1 Ch 7 Ro 7   bx: 1 pads:  181\r\n```\r\n* Example GE2/1:\r\n```\r\nAnalyzing optohybrid 1\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 2   bx: 0 pads:  207\r\nAnalyzing optohybrid 2\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 4   bx: 0 pads:  271 272\r\nAnalyzing optohybrid 3\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  61\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  119\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  123\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  244\r\n\tAdding cluster to final collection Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  262\r\n\tRejecting cluster  Re 1 Ri 1 St 2 La 1 Ch 11 Ro 5   bx: 0 pads:  265 266 267 268\r\n\tRejecting cluster  Re 1 Ri 1 St 2 La 1 Ch 11 Ro 6   bx: 0 pads:  346\r\n\tRejecting cluster  Re 1 Ri 1 St 2 La 1 Ch 11 Ro 6   bx: 0 pads:  375\r\nAnalyzing optohybrid 4\r\n```\r\n\r\nAttention: @tahuang1991 @jiafulow @jshlee ", "branch": "master", "changed_files": 1, "closed_at": "1566853088", "comments": 13, "commits": 5, "created_at": "1566524393", "deletions": 44, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "4c7700b9d136955ad4478c4789389a48bb504176", "merged_at": "1566853088", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27832, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update GEMPadDigi clustering procedure", "updated_at": "1566853088", "user": "dildick"}