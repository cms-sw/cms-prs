{"additions": 194, "auther_ref": "VertexingAfterTracking_v2", "auther_sha": "6e4cf2302096c85e11f42f807072f6e27ad910d1", "author": "abaty", "body": "This PR is aimed at drastically improving the PV resolution in the heavy ion reconstruction by adding an additional fitting step after the tracking.  Previously, the PV was formed using a subset of pixel tracks formed before the tracking is run, in the `hiSelectedVertex` collection.  \r\n\r\nThis PR does the following:\r\n1) Changes the name of the `hiSelectedVertex` collection to `hiSelectedPixelVertex`\r\n2) Changes all heavy ion tracking to pick up `hiSelectedPixelVertex` while running the tracking\r\n3) After tracking, runs a copy of the pixel track vertexing after the tracking, but using `hiGeneralTracks` as the input collection\r\n4) Filters the output to make sure 1 best vertex is produced, and stores that as the new `hiSelectedVertex` which is used by downstream products\r\n\r\nThe effects on physics performance in 2015 data have been studied  [here](https://indico.cern.ch/event/638128/contributions/2585615/attachments/1460150/2255038/primaryVertexRefit.pdf) with a similar setup.  In general, we see drastically improved vertex resolutions. This PR applies an extra nHit requirement on tracks in order to reduce timing requirements.  \r\n\r\nThe memory of the new vertexing step seems reasonable in our tests.  We have added `hiSelectedPixelVertex` (which contains only 1 vertex) to the event content, so a very small increase in the output storage size is required.  The timing seems reasonable, on the order of a 5% increase for central events.  This change should affect both Phase-0 and Phase-1 reconstructions.  Tested with WF 140.53, as well as the instructions [here](https://twiki.cern.ch/twiki/bin/view/CMSPublic/HiRecoTaskForce2018).\r\n\r\n@mandrenguyen ", "branch": "master", "changed_files": 25, "closed_at": "1497780938", "comments": 33, "commits": 5, "created_at": "1496413360", "deletions": 106, "labels": ["comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "3845567c59c47c9283c4dd53130fb7d97848cba1", "merged_at": "1497780938", "merged_by": "cmsbuild", "milestone": "CMSSW_9_2_X", "number": 19083, "release-notes": [], "review_comments": 20, "state": "closed", "title": "Addition of P.V. Refit after Tracking in Heavy Ion Reco", "updated_at": "1497780938", "user": "abaty"}