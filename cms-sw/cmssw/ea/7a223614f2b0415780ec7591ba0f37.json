{"additions": 153, "auther_ref": "hcalreco-facile-squash", "auther_sha": "6520a8f925d981efeb51ddae4f8963a06b0aec69", "author": "jeffkrupa", "body": "#### PR description:\r\n\r\n- Introduction of Fast Calorimeter Learning (FACILE), an ML-based algorithm for HCAL energy reconstruction. \r\n- The producer is contained in `RecoLocalCalo/HcalRecProducers/src/FacileHcalReconstructor.cc`. It loads the HBHEChannelInfo collection and employs a client with Services for Optimized Network Inference in Coprocessors (SONIC) to communicate with a server in as-a-service operation using Triton Inference Server.\r\n- The HBHEChannelInfo collection is made with `RecoLocalCalo/HcalRecProducers/src/HBHEPhase1Reconstructor.cc` and the HBHERecHit collection is made with the new producer.\r\n- The trained ML model is `facile_all_v5`, in tensorflow SavedModel format (https://github.com/fastmachinelearning/sonic-models). We would like to request a space `cms-data:RecoLocalCalo/HcalRecProducers` to store the model.\r\n- We include HLT config (`RecoLocalCalo/HcalRecProducers/test/sonic_hlt_test.py`) and offline reco modifiers (`RecoLocalCalo/Configuration/python/hcalGlobalReco_cff.py`) for testing.\r\n- We will present slides with updated studies at an upcoming HCAL DPG meeting (old slides: https://indico.cern.ch/event/935592/#2-ml-reconstruction-for-hcal-a).\r\n\r\n#### PR validation:\r\n\r\n- Algorithm performance was validated with test HLT config (included in PR) and runTheMatrix command: `runTheMatrix.py -l 11634.0 --command=\"--procModifier enableSonicTriton\"`, and `cmsRun sonic_hlt_test.py`.\r\n- Basic PR tests completed.\r\n\r\nNote: to start a local instance of the Triton server for running the commands above, do:\r\n```\r\ncmsrel CMSSW_11_2_0_pre9\r\ncd CMSSW_11_2_0_pre9/src\r\ncmsenv\r\ngit cms-checkout-topic jeffkrupa:hcalreco-facile-squash\r\ngit cms-addpkg HeterogeneousCore/SonicTriton\r\nscram b\r\ngit clone https://github.com/hls-fpga-machine-learning/sonic-models HeterogeneousCore/SonicTriton/data\r\ncd HeterogeneousCore/SonicTriton/test\r\n./triton start\r\ncd $CMSSW_BASE/src/RecoLocalCalo/HcalRecProducers/test\r\n```\r\n\r\n@violatingcp ", "branch": "master", "changed_files": 6, "closed_at": "1614268785", "comments": 78, "commits": 9, "created_at": "1606256381", "deletions": 0, "labels": ["code-checks-approved", "operations-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-approved"], "milestone": "CMSSW_11_3_X", "number": 32272, "release-notes": [], "review_comments": 8, "state": "closed", "title": "Fast Calorimeter Learning (FACILE) algorithm for HCAL reconstruction", "updated_at": "1614268785", "user": "jeffkrupa"}