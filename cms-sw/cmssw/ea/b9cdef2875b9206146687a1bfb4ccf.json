{"additions": 7, "auther_ref": "FixIssue37970", "auther_sha": "927cc2005ffe850c9061ba39faa02b98b86c2bd3", "author": "leonardogiannini", "body": "#### PR description:\r\n\r\nThis PR addresses issue https://github.com/cms-sw/cmssw/issues/37970\r\n\r\nIn the cand level DNN run after MkFit the output is undetermined if the propagation to the beamline is invalid. This happens in 0.1% of cases at most.\r\n\r\nThis behaviour is flagged and the output set to -1 (i.e. failing the selection).\r\n\r\nI also added a check on ndof > 0 (used to divide chi2), which didn't create problems so far.\r\n\r\n\r\n#### PR validation:\r\n\r\nExample of difference in workflow 12434\r\n\r\nno PR https://github.com/cms-sw/cmssw/pull/37918    ------     | with PR https://github.com/cms-sw/cmssw/pull/37918    -----    | fixed\r\n\r\n  0.951501 the output                                                          |  0.951501 the output                                                          |  0.951501 the output\r\n  0.931231 the output                                                          |  0.931231 the output                                                          |  0.931231 the output\r\n  0.877139 the output                                                          |  0.877139 the output                                                          |  0.877139 the output\r\n  0.557774 the output                                                          |  0.557774 the output                                                          |  0.557774 the output\r\n  0.97176 the output                                                           |  0.97176 the output                                                           |  0.97176 the output\r\n  0.761749 the output                                                          |  -nan the output                                                              |  -1 the output                                                               \r\n  0.485212 the output                                                          |  0.485212 the output                                                          |  0.485212 the output\r\n  -0.888864 the output                                                         |  -0.888864 the output                                                         |  -0.888864 the output\r\n  0.990027 the output                                                          |  0.990027 the output                                                          |  0.990027 the output\r\n  0.769534 the output                                                          |  0.769534 the output                                                          |  0.769534 the output\r\n  0.962413 the output                                                          |  0.962413 the output                                                          |  0.962413 the output\r\n\r\nThe physics changes in MTV validation are almost zero, as expected.", "branch": "master", "changed_files": 1, "closed_at": "1652954221", "comments": 9, "commits": 1, "created_at": "1652886291", "deletions": 1, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "code-checks-approved"], "merge_commit_sha": "8f0f119c730cca1fbaedcb57effc09a0d0faf8c2", "merged_at": "1652954221", "merged_by": "cmsbuild", "milestone": "CMSSW_12_5_X", "number": 38004, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix for  issue 37970  - address undetermined output of cand DNN in mkFit", "updated_at": "1652954222", "user": "leonardogiannini"}