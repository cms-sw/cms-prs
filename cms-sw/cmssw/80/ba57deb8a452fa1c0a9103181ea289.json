{"additions": 139, "auther_ref": "revert-47061-CMSSW_14_1_0_pre7/stripsTiming", "auther_sha": "e6165e932ad0d45f98b5a2c92e3935f7d3380601", "author": "slava77", "body": "Reverts cms-sw/cmssw#47061\r\n\r\nhttps://github.com/cms-sw/cmssw/pull/47061#issuecomment-2784812601\r\n\r\nFollowing the TSG timing checks of the full unpacking/clustering showing possible slow down, I rechecked the impact and (unfortunately) confirm on data inputs (full menu based on /dev/CMSSW_14_2_0/GRun/V12 data from run 386593, 10K events, single thread test, in a configuration with mkFit and full strip unpacking and max cluster size set to 8):\r\n\r\n- valgrind callgrind still shows a speed up of around 25%\r\n- FastTimerService shows around 10% slowdown in `hltSiStripRawToClustersFacility`\r\n\r\nI can speculate that callgrind is so slow that the underlying hardware memory access costs are mis-represented\r\n\r\nI tried to measure the impact of individual contributions\r\n- changes in template/inline of ThreeThresholdAlgorithm have almost negligible impact on timing \r\n- precomputed qualityBits and rawNoises lead to most of the slowdown based on `FastTimerService`\r\n\r\nThe timing tests were done in CMSSW_14_2_1\r\n\r\n@mmasciov \r\n@elusian ", "branch": "master", "changed_files": 4, "comments": 4, "commits": 1, "created_at": "1744059997", "deletions": 184, "labels": ["reconstruction-pending", "alca-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved", "trk"], "milestone": "CMSSW_15_1_X", "number": 47803, "release-notes": [], "review_comments": 0, "state": "open", "title": "Revert \"speedup SiStripClusterizer(FromRaw) using ThreeThresholdAlgorithm\"", "updated_at": "1744060161", "user": "slava77"}