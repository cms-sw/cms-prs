{"additions": 293, "auther_ref": "EMTF_unpackerRPCGEMRun3_12_4_Sept22", "auther_sha": "65ea079ee92db467fbe026058220aa78fa0a7cf0", "author": "eyigitba", "body": "#### PR description:\r\n\r\nThis is a backport of https://github.com/cms-sw/cmssw/pull/39388.\r\n\r\nThis PR implements the necessary changes to unpack the new DAQ format that is implemented at P5 a couple of weeks ago. Our tests show that the new DAQ format significantly reduces EMTF dead time at very high PU scenarios. According to the new format 2 RPC (GEM) TPs are packed into 1 RPC (GEM) data block, thus reducing the total number of blocks in EMTF DAQ stream.\r\n\r\nModified `EMTFBlockGEM.cc`, `EMTFBlockRPC.cc` to add functionality to create 2 TPs per block depending on the firmware version. Changes in `EMTFSetup.cc` are made to pass firmware version to the RPC and GEM block unpackers.\r\n\r\n#### PR validation:\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\nTested with unpacking data collected last week and running `l1tstage2_dqm_sourceclient-live_cfg.py` to confirm the DQM plots are as expected. \r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nThis is a backport of https://github.com/cms-sw/cmssw/pull/39388.\r\n\r\nIt would be good to have this PR in the collisions runs to fix the EMTF DQM plots for RPC/GEM. This is important for promptly checking quality/timing of EMTF inputs during collisions.\r\n\r\nThe changes in EMTF unpacker shouldn't affect other workflows, as it's basically only used by DQM workflows and L1T experts. \r\n \r\n\r\n", "branch": "CMSSW_12_4_X", "changed_files": 3, "comments": 8, "commits": 1, "created_at": "1663153447", "deletions": 195, "labels": ["l1-approved", "fully-signed", "tests-approved", "orp-pending", "urgent", "backport"], "milestone": "CMSSW_12_4_X", "number": 39389, "release-notes": [], "review_comments": 0, "state": "open", "title": "[12_4_X] Modify RPC and GEM unpacker blocks in EMTF unpacker to match the new Run 3 format", "updated_at": "1663167438", "user": "eyigitba"}