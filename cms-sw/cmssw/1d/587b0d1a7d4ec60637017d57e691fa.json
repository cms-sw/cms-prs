{"additions": 1, "auther_ref": "Phase2TrackerDigiFix", "auther_sha": "10e79f856d2b03ac5e9fd1e49e1aae802c59f9ec", "author": "delaere", "body": "A bug was found in the tracker digi dataformat. The channel() should only return the encoded channel, not the otbit encoded in the same integer. Failing do to so induces problem when matching with the simhits because the channel from the digis and from the digisimlink may differ. Indeed there is no ot_flag in the digisimlink class.\r\n\r\nApplying a mask to get the encoded channel was already available in a dedicated method, but not in the channel() method used all over the place.\r\n\r\nThanks to Roberto Rossin for pointing this bug and @sviret for locating the problem.\r\n\r\n@boudoul, @suchandradutta, @atricomi  FYI...\r\n\r\nI join a [plot](https://github.com/cms-sw/cmssw/files/1074581/FixedDigiMuPU0-1.pdf) making the comparison for PU0 muons. I show the number of layers with stubs (nhits) with (black) and without (red) the fix. \r\n", "branch": "master", "changed_files": 1, "closed_at": "1497506468", "comments": 13, "commits": 1, "created_at": "1497336586", "deletions": 1, "labels": ["comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "68217de0001e405a3451493d8fabf4dc7c7b2534", "merged_at": "1497506468", "merged_by": "cmsbuild", "milestone": "CMSSW_9_2_X", "number": 19201, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Fix the Phase2 Tracker digis (for MC truth matching)", "updated_at": "1497506468", "user": "delaere"}