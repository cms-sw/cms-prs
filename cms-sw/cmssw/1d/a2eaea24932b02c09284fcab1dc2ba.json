{"additions": 1111, "auther_ref": "DetSetTS800", "auther_sha": "65c71d59f29a5a53a681ff86b90beccbf6647097", "author": "VinInn", "body": "With this PR DetSetNew support concurrent fillers.\nThe main application is Strip Unpacking and Clusterization on Demand at HLT.\n\nPassed all tests and show no regression in sequential mode.\n\nHow to test the concurrency (besides the unit test)?\nWaiting for the in-the-event module concurrency you can try concurrent PatternReco \n\n```\ngit cms-addpkg RecoTracker/CkfPattern\ntouch RecoTracker/CkfPattern/src/CkfTrackCandidateMakerBase.cc\nscram b -j8 USER_CXXFLAGS=\"-DVI_TBB\"\n```\n\ntake 134.91\nadd\n\n```\nprocess.options.numberOfThreads=cms.untracked.uint32(8)\nprocess.options.numberOfStreams=cms.untracked.uint32(1)\n```\n\nto step2_L1REPACK_HLT.py \nand\n\n```\ncmsRun step2_L1REPACK_HLT.py \n```\n\nyou can also switch VI_DEBUG in ClustersFromRawProducer.cc and compare\nthe dump (better just the event by event _VI VI clusters_ lines)\n\nAt the moment it will show some differences due to the fact that concurrent PatternReco is not reproducible due to cleaning of seeds and candidate (or a bug???)\nI will see if I can had a flag to make it fully reproducible at the cost of slowness and memory-blowup...\n\nbtw the current version (contrary to 7_6) will stop with\n\n```\nException Message:\nInstantiating a second DetSetVector::FastFiller only one DetSetVector::FastFiller can be active at a given time!\n```\n", "branch": "CMSSW_8_0_X", "changed_files": 37, "closed_at": "1448245401", "comments": 55, "commits": 34, "created_at": "1447422797", "deletions": 210, "labels": ["comparison-available", "core-approved", "dqm-pending", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "8d401b903bd2d03fe9278a744fd40fd7e95057a2", "merged_at": "1448245401", "merged_by": "davidlange6", "milestone": "CMSSW_8_0_X", "number": 12411, "release-notes": [], "review_comments": 27, "state": "closed", "title": "Make DetSetNew to support concurrent filler", "updated_at": "1448245401", "user": "VinInn"}