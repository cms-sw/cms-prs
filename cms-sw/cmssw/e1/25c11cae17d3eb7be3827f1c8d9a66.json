{"additions": 397, "auther_ref": "fix_RunInfo_and_PopCon_80X", "auther_sha": "a36856ed9be7d01a0e604ca6eddc4fe5ad3fa65b", "author": "diguida", "body": "The RunInfo O2O has been modified: \n- Make the tag population in synch with the `CondDBv2` tag policy. In https://github.com/diguida/cmssw/blob/fix_RunInfo_and_PopCon/CondCore/CondDB/src/IOVEditor.cc#L189-L201, as specified in the comment too, if the tag has synchronisation `ANY` or `VALIDATION`, IOV insertion in the past or overriding are allowed, while they are forbidden (an exception is thrown) for \"production\" tags. The RunInfo code is now protected so that it first tests the input run number against the last IOV of the target tag: if the new run number is smaller than or equal to the latest IOV in the target tag, the job exits, and no new IOVs are added irrespectively of the synchronisation;\n- Use `CondCore` API as defined in `ConnectionPool` in order to authenticate `Oracle` access via roles, instead of the `CORAL` API in `RelationalAccess`;\n- Improve queries by performing joins on PK-FK (query time improved by factor 2);\n- Throw exceptions in case CORAL fails to execute a query;\n- Improve logging messages;\n- Improve code style;\n- Review the configuration file to be fully complaint with the O2O online framework.\n\nRemoved a dead data member in PopCon.\n\nAdded a comment in `CondCore/CondDB/src/IOVEditor.cc` clarifying the tag update policy w.r.t. tag synchronisation.\n\nBack port of #14420 with one difference: use `boost::shared_ptr` instead of `std::shared_ptr` in https://github.com/cms-sw/cmssw/compare/CMSSW_8_0_X...diguida:fix_RunInfo_and_PopCon_80X#diff-d0d2d7d67286c9941ff28996f956d33cR71 due to smart pointer `boost -> std` migration in `CMSSW_8_1_X`.\n", "branch": "CMSSW_8_0_X", "changed_files": 8, "closed_at": "1464184337", "comments": 14, "commits": 10, "created_at": "1462805484", "deletions": 376, "labels": ["alca-approved", "comparison-available", "db-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "c5a8dc81e8b1cd847d9897049ba885db6544ef09", "merged_at": "1464184337", "merged_by": "cmsbuild", "milestone": "CMSSW_8_0_X", "number": 14421, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fixes for RunInfo O2O and cleanup of PopCon interface (80X)", "updated_at": "1464184338", "user": "diguida"}