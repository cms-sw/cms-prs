{"additions": 7, "auther_ref": "ofast-flag_mkFit", "auther_sha": "cb2e7d682fc8d28593d8add29a70c5a9961e9217", "author": "trackreco", "body": "### PR description:\r\n\r\nAs per title, this PR is meant to switch to `ofast-flag` rather than `fast-math` for mkFit building, as this was proven to allow for improved stability across different architectures.\r\nAn analogous change is applied to the standalone mkFit `Makefile.config`.\r\n\r\n**Additional notes on the mkFit `Makefile.config`:**\r\n`ofast-flag` in CMSSW consists of `-Ofast -fno-reciprocal-math -mrecip=none` (see https://github.com/cms-sw/cmsdist/pull/8280).\r\nThis is reflected in the mkFit `Makefile.config`, with intentional redundancy:\r\n`-Ofast` turns on `-ffast-math`, which in turn activates `-fno-math-errno` (see [reference](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)); the redundant flags are not removed intentionally, so that in the case one is willing to remove the effects of `ofast-flag` in the standalone mkFit application, it will be sufficient to comment out the line added in `Makefile.config` with this PR, without changing vectorization due to other pre-existing flags.\r\n\r\n### PR validation:\r\n\r\nThis PR is not meant to affect physics performance, except for compilation-driven effects. Technical performance is not affected either.\r\nThis is validated in: http://uaf-10.t2.ucsd.edu/~mmasciov/MIC/testFastMath/MTV_ttbarPU_cgpu-1_fastmath_vs_ofast/ (red/black vs. blue)\r\n\r\nFYI, @mmusich, @slava77 ", "branch": "master", "changed_files": 2, "comments": 13, "commits": 3, "created_at": "1681901452", "deletions": 3, "labels": ["reconstruction-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved", "tracking"], "milestone": "CMSSW_13_1_X", "number": 41374, "release-notes": [], "review_comments": 0, "state": "open", "title": "Use ofast-flag rather than fast-math for mkFit", "updated_at": "1682689675", "user": "mmasciov"}