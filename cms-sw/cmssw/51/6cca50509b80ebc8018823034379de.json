{"additions": 1, "auther_ref": "use-realpath-cmssw", "auther_sha": "c28f551b0898fb55f99a7fd7a0116761795b6f2a", "author": "smuzaffar", "body": "This fixes the FW unit test [a]. The issue is that python modules are loaded using realpath while https://github.com/cms-sw/cmssw/blob/master/FWCore/ParameterSet/python/Config.py#L55 is not resolving the symlink [b]. This change fix this unit test by using the realpath of `CMSSW_BASE, CMSSW_RELEASE_BASE and CMSSW_FULL_RELEASE_BASE` env\r\n\r\n\r\n[a] https://cmssdt.cern.ch/SDT/cgi-bin/logreader/el8_amd64_gcc12/CMSSW_15_0_ROOT6_X_2024-12-22-2300/unitTestLogs/FWCore/Integration#/3356-3356\r\n```\r\ncmsRun importRestrictions2.py ------------------------------------------------------------\r\nFailure cmsRun importRestrictions2.py: status 1\r\n\r\n---> test TestIntegrationParameterSet had ERRORS\r\n```\r\n\r\n[b] `CMSSWPath` has `/cvmfs/cms-ib.cern.ch/sw/x86_64/week1` which is symlink to `/cvmfs/cms-ib.cern.ch/sw/x86_64/nweek-02869` while the import module has realpth `/cvmfs/cms-ib.cern.ch/sw/x86_64/nweek-02869/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_X_2024-12-22-0000/src/FWCore/ParameterSet/python/Config.py`\r\n\r\n```\r\n(Pdb) print(CMSSWPath)\r\n['/build/muz/br/cvmfs/CMSSW_15_0_X_2024-12-22-0000', '/cvmfs/cms-ib.cern.ch/sw/x86_64/week1/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_X_2024-12-22-0000']\r\n(Pdb) print(item)\r\nFrameInfo(frame=<frame at 0x1ac9720, file '/cvmfs/cms-ib.cern.ch/sw/x86_64/nweek-02869/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_X_2024-12-22-0000/src/FWCore/ParameterSet/python/Config.py', line 63, code checkImportPermission>, filename='/cvmfs/cms-ib.cern.ch/sw/x86_64/nweek-02869/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_X_2024-12-22-0000/src/FWCore/ParameterSet/python/Config.py', lineno=59, function='checkImportPermission', code_context=['    for item in inspect.stack():\\n'], index=0)\r\n```", "branch": "master", "changed_files": 1, "comments": 6, "commits": 1, "created_at": "1734945737", "deletions": 1, "labels": ["core-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_15_0_X", "number": 47024, "release-notes": [], "review_comments": 0, "state": "open", "title": "ParameterSet/Config.py: Use realpath of  cmssw area to avoid symlink issue", "updated_at": "1734959900", "user": "smuzaffar"}