{"additions": 960, "auther_ref": "SiPhase2BadStripChannel_squashed", "auther_sha": "e068c85e6dfad61b03afd2172915df72dfc6f757", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe purpose of this PR is to adapt the current `SiStripBadStrip` infrastructure to accomodate the needs to simulate bad strips in the PS-s and SS modules of the Phase-2 Outer Tracker.\r\n   * The existing `CondFormat` `SiStripBadStrip` is mostly fine to be used as a container of the bad strip data, though the `decode` and `encode` functions needed to be specialized as the total amount of strips in a phase-2 module (maximally = 2 cols*1016 rows) exceeds the total maximal amount of strips in the Phase-0 Strip tracker modules (6 APV * 128 = 728).\r\n   * A new set of packing constants is introduced at `DataFormats/SiStripCommon/interface/ConstantsForCondObjects.h` and used in the `decodePhase2` and `encodePhase2` methods of `SiStripBadStrip`.\r\n   * A new (dependent) record to hold the bad strip data is introduced (`SiPhase2OuterTrackerBadStripRcd`), together with a novel `ESSource` (`SiPhase2BadStripConfigurableFakeESSource.cc`) that delivers in said record, randomly generated `SiStripBadStrip` data with a configurable fraction of bad components (flatly distributed over all the detector).\r\n   * This `ESource` is included in all existing Phase-2 geometries via the configuration fragment `fakePhase2OuterTrackerConditions_cff`, loaded in the various geometries, and it is at the moment configured in such a way that no bad components are simulated.\r\n   * I add to this PR also sqlite file DB writers and readers in the `CondTools/SiPhase2Tracker` package, together with unit tests to test the payload writing and reading.\r\n   \r\nThis PR is technical and no regressions to existing workflows are expected.\r\n\r\n#### PR validation:\r\n\r\nPerformed following tests:\r\n   * `cmssw` compiles;\r\n   * `scram b runtests`  runs fine;\r\n   * `runTheMatrix.py -l limited --ibeos` runs fine;\r\n   * privately generated samples with the different bad components fractions have been used to develop the corresponding changes in the Phase-2 Tracker digitizer to actually simulate the killing of the bad components. Such changes will be proposed as a separate PR by @suchandradutta once this one is merged.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN/A\r\n\r\ncc: @emiglior @suchandradutta @tsusa \r\n", "branch": "master", "changed_files": 60, "comments": 24, "commits": 1, "created_at": "1648541843", "deletions": 11, "labels": ["geometry-pending", "alca-approved", "reconstruction-approved", "pending-signatures", "tests-approved", "orp-pending", "db-approved", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_12_4_X", "number": 37397, "release-notes": [], "review_comments": 21, "state": "open", "title": "introduce SiPhase2BadStrip format for phase-2 simulation", "updated_at": "1648731199", "user": "mmusich"}