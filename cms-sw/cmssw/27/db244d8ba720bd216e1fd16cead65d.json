{"additions": 328, "auther_ref": "portFrom133XTo132X_puIdFix_nanoDev_jmeNanoV11", "auther_sha": "2afcc44e7ff39751f8d26843b1556a8b2afdbbb2", "author": "nurfikri89", "body": "Backport of #42728 and #42670. This backport is needed for 2022 and 2023 JMENano production with `13_0_X` MiniAODs. I will update here with the JMENano event size later today.\r\n\r\n**Original PR description from #42728:**\r\n\r\nThis PR aims to add changes related to NanoAOD, JMENanoAOD and ensuring consistency of PuppiProducer instances when processing MiniAODs for production and analysis. The following changes are made:\r\n\r\n**NanoAOD**\r\nThese changes are intended to be for the next NanoAOD campaign (`v13`?)\r\n- Add missing `RUN3WINTER22PUPPIrunsBCDEprompt` JetID version for jets.\r\n- Add (puppi-weighted) charged and neutral multiplicities for jets.\r\n- Add HF energy fractions for AK4 jets.\r\n- Add energy fractions for AK8 jets.\r\n- Add jet area for subjets. Fix the documentation of subjet collection.\r\n\r\n**JMENanoAOD**\r\n- Add Run-3 JetIDs.\r\n- Remove AK8CHS jet collection.\r\n- Reduce content for AK4CHS collection by removing PUID/QGL tagger inputs and most flavour-tagging discriminants.\r\n- Increase pT thresholds for AK4CHS, AK4GEN, AK8GEN.\r\n- Rename some branches.\r\n\r\n**PuppiProducer consistency**\r\n- Improve `setupPuppiForPackedPF()` in `jetTools.py` by adding `packedpuppiNoLep` instance.\r\n- In `runMETCorrectionsAndUncertainties.py`, make it optional to provide a different `PuppiProducer` module label rather than stick to a hard-coded label (`puppiNoLep`). Set the previously hard-coded label as the default option.\r\n\r\n**Original PR description from #42670 :**\r\nThis pull request fixes a few typos in the jetsAK4 CHS and Puppi tables:\r\n\r\n(1) Fix to the `btagRobustParTAK4CvB` definition: the previous definition was using the `pfDeepFlavourJetTags` instead of pfParticleTransformerAK4JetTagsfor the `probbb` and `problepb` scores in the denominator. This affects both the CHS and Puppi AK4 jet tables, and probably(?) affects the official production.\r\n\r\n(2) Fix to the `nanoAOD_addDeepInfoAK4()` function in the `jetsAK4_Puppi_cff.py`: this should only affects private/custom productions.\r\n\r\n#### PR validation:\r\n- passes the standard runTheMatrix test: `runTheMatrix.py -l limited -i all --ibeos`\r\n- passes the following NanoAOD workflows: `runTheMatrix.py -i all --ibeos -l 2500.0,2500.001,2500.002,2500.01,2500.011,2500.012,2500.1,2500.2,2500.21,2500.3,2500.31,2500.4`\r\n", "branch": "CMSSW_13_2_X", "changed_files": 10, "comments": 4, "commits": 24, "created_at": "1695808693", "deletions": 258, "labels": ["reconstruction-pending", "pending-signatures", "tests-rejected", "orp-pending", "xpog-pending"], "milestone": "CMSSW_13_2_X", "number": 42887, "release-notes": [], "review_comments": 0, "state": "open", "title": "[NanoAOD, JMENano] Backport of #42728 (Updates for Nano and JMENano) and #42670 (Fix typos in jetsAK4 CHS and Puppi tables) to 13_2_X", "updated_at": "1695823216", "user": "nurfikri89"}