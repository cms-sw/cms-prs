{"additions": 898, "auther_ref": "dqm-restructure-qtests", "auther_sha": "d7c0f0ffce15c76a4126f567eb2b65d02341b267", "author": "schneiml", "body": "#### PR description:\r\n\r\nThis is the second, and main, PR replacing #28316. [It is based on #28375 (functionally required for this to work, separated to reduce the amount of changes to review), and  #28247 (massive conflicts between the two, and  #28247 will probably go in first).] Update: Rebased with both PRs merged to master.\r\n\r\nThis PR covers the reorganization of the DQM QualityTest functionality in CMSSW:\r\n- `QualityTester` becomes a plugin in `DQMServices/Components`, handling all QTest things.\r\n- The XML parsing is now done with `boost::property_tree` rather than `xerces`. Much less code, however more strict (some of the QTest configuration XML used in production was malformed!) and probably worse error reporting.\r\n- The QTest implementation remain in `DQMServices/Core` `QTest.[h|cc]`. However, the *only* place that uses them now is `QualityTester`.\r\n- `QReport`s (results) remain available via the `MonitorElement`, but don't contain pointers to `QCriterion`s (the actual tests) any more.\r\n- `QualityTester` is now a `DQMEDHarvester`, rather than a legacy module.\r\n- The ordering `QualityTester` vs. other harvesters is complicated. Some of the old behaviour was accidental and may be impossible to reproduce, since nothing is guaranteed by the EDM framework with respect to ordering in `endJob` (see #28354). In practice, some of SiStrip Certification output is broken now and there is no way to fix it, but it could also break spontaneously in production and there would be no way to fix it.\r\n\r\nA few changes hitchhike this PR due to the history in #28316 and other requirements:\r\n- The `DQMEDHarvester` base class is updated to the `new DQMStore` version, since some features (`dqmEndRun`, proper dependencies) are needed here.\r\n- `DQMGenericClient` is moved and restructured, to prepare for the removal of the `ClientConfig` package.\r\n- Some more random changes remove dependencies on `ClientConfig`. However, the package remains present and the Tracker modules relying on `DQMParserBase` are unaffected.\r\n\r\n#### PR validation:\r\nSome validation happend in #28316 and the PR test comparison should be clean. This needs re-checking now that the other PRs are part of the baseline.\r\n\r\n\r\n", "branch": "master", "changed_files": 82, "closed_at": "1575658210", "comments": 52, "commits": 28, "created_at": "1573555298", "deletions": 2092, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "generators-pending", "hlt-approved", "l1-pending", "orp-approved", "pending-signatures", "tests-approved"], "merge_commit_sha": "f24efb25382396195fa4a57a8abd546da24cfee7", "merged_at": "1575658210", "merged_by": "cmsbuild", "milestone": "CMSSW_11_1_X", "number": 28379, "release-notes": [], "review_comments": 0, "state": "closed", "title": "DQM: Restructure QTests (v2)", "updated_at": "1575658210", "user": "schneiml"}