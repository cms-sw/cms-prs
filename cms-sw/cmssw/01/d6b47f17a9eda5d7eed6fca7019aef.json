{"additions": 129, "auther_ref": "LLP_FineGrainBits", "auther_sha": "e1a78f6f840cbd0bf7ca473b998c7d43e10a2003", "author": "gk199", "body": "#### PR description:\r\n\r\nSets 6 fine grain bits in HB and HE based on TDC and amplitude, in agreement with the uHTR firmware implementation 2.5.0. 6 bits are set per trigger tower: bit[0] depth / amplitude based, bit[1] and bit[2] reserved MIP bits, bit[3] indicates a prompt cell, bit[4] indicates a slightly delayed cell, bit[5] indicates a very delayed cell. These fine grain bits will be used in the HCAL L1 delayed/displaced jet trigger, to capture LLP decays.\r\n\r\nThe compute function in HcalFinegrainBit is modified to take an array of TDC and ADC values from a tower, and returns 6 bits. Two bits from the initial compute function are saved as the 2 reserved MIP bits. In HcalTriggerPrimitiveAlgo, a container and map to store the TDC and ADC per tower are created, and filled in the new function addUpgradeTDCFG. This map is passed as an argument to compute. \r\n\r\nDocDB with uHTR and fine-grain bit specifications: https://cms-docdb.cern.ch/cgi-bin/PublicDocDB/RetrieveFile?docid=12306&filename=LLPbits_uhtr_spec.pdf&version=21 \r\n\r\n#### PR validation:\r\n\r\nPassed runTheMatrix.py test. Tested in CMSSW_12_0_X. \r\n\r\n", "branch": "master", "changed_files": 4, "closed_at": "1627474925", "comments": 10, "commits": 2, "created_at": "1626980490", "deletions": 10, "labels": ["code-checks-approved", "fully-signed", "l1-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "ca5eab5c29cd85d9827e5b98a84434ce3d45ae0c", "merged_at": "1627474925", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 34600, "release-notes": [], "review_comments": 0, "state": "closed", "title": "HCAL: fine grain bits for timing and depth LLP trigger set", "updated_at": "1627474926", "user": "gk199"}