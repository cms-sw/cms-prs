{"additions": 2, "auther_ref": "xpog/fix-merge-mem-106x", "auther_sha": "4a899daa958f36ef6ca37f73ad60bc0f271e7552", "author": "hqucms", "body": "backport of https://github.com/cms-sw/cmssw/pull/47729\r\n\r\n> #### PR description:\r\n> \r\n> This PR reduces the memory usage in the NANO merge step for samples with a large number of GEN parameter configurations, e.g., the pMSSM scan, by reducing the buffer size (from the default 32000 to 1024 bytes) of the TTree branches storing the sum gen weights in the `Runs` tree (which is typically just a single entry, but the `Runs` tree will contain one branch for each GEN parameter, which could then leads to O(10k) branches in these large scans). \r\n> \r\n> Also fixed a minor memory leak reported in https://github.com/cms-sw/cmssw/issues/47713.\r\n> \r\n> This should fix https://github.com/cms-sw/cmssw/issues/47711 and https://github.com/cms-sw/cmssw/issues/47713.\r\n> \r\n> #### PR validation:\r\n> \r\n> For the merge of the 115 files in https://github.com/cms-sw/cmssw/issues/47711, the peak PSS is reduced from ~9GB to 3.5GB. \r\n> \r\n> #### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n> \r\n> I suppose this needs to be backported to 15_0_X and 10_6_X, but any other releases in between?", "branch": "CMSSW_10_6_X", "changed_files": 2, "comments": 5, "commits": 2, "created_at": "1743410895", "deletions": 2, "labels": ["pending-signatures", "tests-approved", "orp-pending", "backport-ok", "xpog-pending"], "milestone": "CMSSW_10_6_X", "number": 47736, "release-notes": [], "review_comments": 0, "state": "open", "title": "[10_6_X] Reduce memory usage in NANO merge jobs", "updated_at": "1743478624", "user": "hqucms"}