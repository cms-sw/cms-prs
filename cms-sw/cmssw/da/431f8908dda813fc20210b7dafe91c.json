{"additions": 217, "auther_ref": "scouting_nano_dev_eramodifier_15_1_X_IB", "auther_sha": "ca8bea74dfc90b110abec7eb46d8e72be9f4cb1a", "author": "patinkaew", "body": "#### PR description:\r\n\r\nThis PR supersedes [cms-sw/cmssw#47302](https://github.com/cms-sw/cmssw/pull/47302) for era modifier part. Hence, [cms-sw/cmssw#47302](https://github.com/cms-sw/cmssw/pull/47302) is now completely superseded by this PR and [cms-sw/cmssw](https://github.com/cms-sw/cmssw/pull/47739).\r\n\r\nThis PR introduces era modifiers to handle changes in event content in scouting format for 2022-24. Addressed changes are as follows:\r\n\r\n2023:\r\n- Add additional track variables to the Run 3 scouting electron collection for low pT electrons ([cms-sw/cmssw#41025](https://github.com/cms-sw/cmssw/pull/41025))\r\n\r\n2024:\r\n- Add off-diagonal entries of the vertex fit covariance matrix ([cms-sw/cmssw#43758](https://github.com/cms-sw/cmssw/pull/43758))\r\n- Electron and Photon Scouting Data Format Update for 2024 pp Collisions ([cms-sw/cmssw#43744](https://github.com/cms-sw/cmssw/pull/43744))\r\n\r\nCompared to the already-integrated ScoutingNano content, this adds:\r\n\r\n2022:\r\n- add missing attributes in ScoutingElectron (charge, d0, dz)\r\n\r\n2023:\r\n- replace charge, d0, dz added in 2022 with ScoutingElectron's best track parameters introduced in [cms-sw/cmssw#41025](https://github.com/cms-sw/cmssw/pull/41025). Best track is selected by the plugin integrated in [cms-sw/cmssw#47836](https://github.com/cms-sw/cmssw/pull/47836).\r\n\r\n2024:\r\n- add off-diagonal entries of the vertex fir covariance matrix from [cms-sw/cmssw#43758](https://github.com/cms-sw/cmssw/pull/43758) for ScoutingPrimaryVertex, ScoutingMuonNoVtxDisplacedVertex, and ScoutingMuonVtxDisplacedVertex as they are from the same Run3ScoutingVertex format.\r\n- add ScoutingElectron's best track parameters introduced in [cms-sw/cmssw#43744](https://github.com/cms-sw/cmssw/pull/43744).\r\n- add other variables introduced in [cms-sw/cmssw#43744](https://github.com/cms-sw/cmssw/pull/43744) for ScoutingElectron and ScoutingPhoton.\r\n\r\nIn addition, for all years,\r\n- add rechitZeroSuppression for ScoutingElectron and ScoutingPhoton.\r\n- add vtxIndx and HitPattern information for ScoutingMuon (with SimpleCollectionFlatTableProducer added in [cms-sw/cmssw#46702](https://github.com/cms-sw/cmssw/pull/46702).\r\n\r\nAlso, this introduce customisation command for ```cmsDriver.py```:\r\n```\r\n--customise PhysicsTools/NanoAOD/custom_run3scouting_cff.addScoutingElectronTrack\r\n```\r\nThis will include all Scouting Electron Tracks for best track selection optimisation. This customisation mainly targets private production, not central production.\r\n\r\n#### PR validation:\r\n\r\nPass all tests from ```scram b runtests use-ibeos```.\r\nPass all ScoutingNano-related relval_nano workflows from \r\n```\r\nrunTheMatrix.py --ibeos -l 2500.131,2500.227,2500.228,2500.237,2500.238\r\n```\r\n\r\nIn addition, several ```cmsDriver.py``` commands have been tested on data and MC samples documented with the same commands used in [cms-sw/cmssw#47739](https://github.com/cms-sw/cmssw/pull/47739).\r\nIn brief, concerning data:\r\n\r\n- ```@Scout``` works for ScoutingPFRun3 2022-24\r\n- ```@ScoutMonitor``` works for ScoutingPFMonitor 2022-24\r\n- ```@ScoutFromMini``` works for ScoutingPFMonitor 2024 (Scouting objects are in MiniAOD starting in Prompt 2024)\r\n- ```@Prompt+@ScoutMonitor``` works for ScoutingPFMonitor 2023. Input 2022 fails because of Tau.\r\n- ```@Prompt+@ScoutFromMini```works for ScoutingPFMonitor 2024 (Scouting objects are in MiniAOD starting in Prompt 2024)\r\nRelevant test results (python config, root, event content, size report, log) are included in [1]. Summary of size report is in [2] with percentage increase compared to already-integrated ScoutingNano before Scouting GloParT is added [cms-sw/cmssw#47801](https://github.com/cms-sw/cmssw/pull/47801). This is, the increase in size is a combination of Scouting GloParT and attributes added in this PR. For data configuration above, the increase is <7%.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nThis is not a backport, but a backport to 15_0_X will follow as this is necessary for ScoutingNano reprocessing for 2022-24 data (planned with 15_0_X release cycles) and 2025 data-taking.\r\n\r\n[1] https://cernbox.cern.ch/s/pLV0RmwJgUba33c\r\n[2] https://docs.google.com/spreadsheets/d/1FOW-bGCLbNf4zcaZ9zMDca6FiRWwVBNnizFvaGUQ64Q/edit?usp=sharing", "branch": "master", "changed_files": 8, "comments": 1, "commits": 7, "created_at": "1745405711", "deletions": 48, "labels": ["operations-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "xpog-pending"], "milestone": "CMSSW_15_1_X", "number": 47934, "release-notes": [], "review_comments": 0, "state": "open", "title": "ScoutingNano Event Content Changes for 2022-25", "updated_at": "1745405752", "user": "patinkaew"}