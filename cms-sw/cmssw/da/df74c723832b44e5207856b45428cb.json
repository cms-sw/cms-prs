{"additions": 1124, "auther_ref": "devel_DQMOffline_Trigger_11_0_0_pre7", "auther_sha": "ca94a133a7e5c607fdfeeb6feaa80fab85a69549", "author": "missirol", "body": "#### PR description:\r\n\r\nThis PR only affects the `DQMOffline/Trigger` package. It includes a couple of improvements to the source code, and a few simple fixes in the python configuration files (mainly, fixes to the paths of DQM outputs, or Harvesting inputs, to correctly produce the relevant plots).\r\n\r\nThe two main updates are in `TriggerDQMBase.h` (the `fill` method) and `TopMonitor.cc` (a simple generalization of the code to handle multiple InputTags for values of b-tagging discriminants).\r\n\r\nSome changes are expected in the comparisons, mainly due to the addition of plots that were not getting produced before.\r\n\r\nMore detailed descriptions of the changes are provided at the bottom of this message.\r\n\r\n#### PR validation:\r\n\r\nLocal tests suggest the changes work as expected (but only compared outputs with limited stats).\r\n\r\n`runTheMatrix.py`: workflow 250202.181 ran successfully.\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nNot a backport (and the PR itself is not planned to be backported).\r\n\r\n--------------------------------------------------\r\n\r\n* `TriggerDQMBase.h`:\r\n\r\n  - added `ObjME::fill` method in `TriggerDQMBase`,\r\n    to fill denominator and numerator MEs with one call,\r\n    in order to limit the repetition of code\r\n    (for filling denominator and numerator plots) in the plugins;\r\n    see `TopMonitor::analyze()` for an example of how this is applied.\r\n\r\n* `TopMonitor.cc`:\r\n\r\n  - removed hard-coded reference to \"pfDeepCSVJetTags\",\r\n    and replaced members `btagalgo` and `bbtagalgo` (two `InputTag`s) with `btagAlgos` (`VInputTag`):\r\n    the b-tag discriminator of a jet is now computed as the sum of the values from `btagAlgos`\r\n    (use case: sum outputs of a multi-class discriminator, like DeepCSV).\r\n    The logic (i.e. summing the values) is the same as before, only the implementation is a bit more generic.\r\n    The default values in `fillDescriptions` have been updated (to DeepCSV).\r\n\r\n  - the change from `btagalgo` (`InputTag`) to `btagAlgos` (`VInputTag`) required\r\n    to update the syntax in other configuration files that use the `TopMonitor` plugin\r\n    (these are the only changes to `HiggsMonitoring_cf*`, `MssmHbbMonitoring_cf*` and `SusyMonitor_cfi`)\r\n\r\n  - removed internal modification of `enableMETPlot` flag based on value of `metSelection` string\r\n\r\n  - other small updates (mostly polishing code, e.g. removing unused data members)\r\n\r\n* `TopMonitor_cfi.py`:\r\n\r\n  - removed explicit types for the parameters of cloned module `hltTOPmonitoring`\r\n    (no changes to the actual values)\r\n\r\n* `TopMonitoring_Client_cff.py`:\r\n\r\n  - small fixes to plot labels (small change which unfortunately results in large diffs)\r\n\r\n* `SusyMonitoring_Client_cff.py`:\r\n\r\n  - fixed values of `subDirs` parameters -> efficiency plots are now produced\r\n    (-> difference expected in the comparisons: additional plots)\r\n\r\n  - added module `triple_muon_dca_mupt_efficiency` to the Harvesting sequence\r\n    (the module existed already, it just wasn't included in the sequence)\r\n    (-> difference expected in the comparisons: additional plots)\r\n\r\n* `SusyMonitoring_cff.py`:\r\n\r\n  - fixed typos in paths to DQM outputs, to make them consistent with Harvesting inputs defined in `SusyMonitoring_Client_cff`\r\n    (this renaming will create differences in the comparisons,\r\n    and now the new folders will contain the efficiency plots from the Harvesting step)\r\n\r\n* `BTVHLTOfflineSource_cfi.py`:\r\n\r\n  - fixed path name -> two new sub-folders will now be created under `HLT/BTV/`\r\n    (-> difference expected in the comparisons: additional plots)\r\n\r\n* `BTVHLTOfflineSource_cff.py`:\r\n\r\n  - removed, and moved these sequences (unmodified) to `BTaggingMonitoring_cff` to simplify\r\n\r\n* `BTaggingMonitoring_Client_cff.py`:\r\n\r\n  - fix in `BTVEfficiency_TurnOnCurves`, efficiency plots will now be produced\r\n    (-> difference expected in the comparisons: additional plots)\r\n\r\n* `HEP17Monitoring_Client_cff.py`:\r\n\r\n  - fixed path of Harvesting inputs of `hep17Efficiency`\r\n    (-> difference expected in the comparisons: additional plots in `HLT/EGM/HEP17/`)\r\n\r\n* `TrackingMonitoring_Client_cff.py`:\r\n\r\n  - fixed path to Harvesting inputs of `trackingForElectronsEffFromHitPatternHLT`,\r\n    but the client itself is not included in any sequence\r\n    (so no changes in the outputs are expected from this)", "branch": "master", "changed_files": 28, "closed_at": "1570042427", "comments": 13, "commits": 14, "created_at": "1569417672", "deletions": 1288, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "b3365e68cae30c200172a68f9908adbb25235680", "merged_at": "1570042427", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28067, "release-notes": [], "review_comments": 0, "state": "closed", "title": "update to TopMonitor plugin in DQMOffline/Trigger/ (+simple fixes to some DQM outputs)", "updated_at": "1570042428", "user": "missirol"}