{"additions": 36, "auther_ref": "gartung-SA-const-cast-attr", "auther_sha": "5cfcf76700d448499a6cb70b9f0f01b6a3d0c77c", "author": "gartung", "body": "This adds a veto on ConstCastChecker and ConstCastAwayChecker using the CMS_THREAD_SAFETY or CMS_SA_ALLOW attributes at the beginning of statements using const_cast or casting const away.\r\n\r\nFor example \r\n\r\n```\r\n--- a/FWCore/Framework/src/EventSetupRecordIntervalFinder.cc\r\n+++ b/FWCore/Framework/src/EventSetupRecordIntervalFinder.cc\r\n@@ -12,6 +12,7 @@\r\n \r\n #include \"FWCore/Framework/interface/EventSetupRecordIntervalFinder.h\"\r\n #include \"FWCore/Utilities/interface/Likely.h\"\r\n+#include \"FWCore/Utilities/interface/thread_safety_macros.h\"\r\n #include <cassert>\r\n #include <mutex>\r\n \r\n@@ -67,7 +68,7 @@ namespace edm {\r\n   std::set<EventSetupRecordKey> EventSetupRecordIntervalFinder::findingForRecords() const {\r\n     if (intervals_.empty()) {\r\n       //we are delaying our reading\r\n-      const_cast<EventSetupRecordIntervalFinder*>(this)->delaySettingRecords();\r\n+      CMS_SA_ALLOW const_cast<EventSetupRecordIntervalFinder*>(this)->delaySettingRecords();\r\n     }\r\n\r\n```\r\nremoves the warning about the use of const_cast.\r\n\r\nTested locally.", "branch": "master", "changed_files": 2, "comments": 5, "commits": 2, "created_at": "1669823221", "deletions": 0, "labels": ["core-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_13_0_X", "number": 40204, "release-notes": [], "review_comments": 0, "state": "open", "title": "Utilities/StaticAnalyzers: Check for CMS_THREAD_SAFETY or CMS_SA_ALLOW attributes on statments using const_cast and skip warnings.", "updated_at": "1669824350", "user": "gartung"}