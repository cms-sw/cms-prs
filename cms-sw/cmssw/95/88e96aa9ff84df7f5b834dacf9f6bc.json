{"additions": 941, "auther_ref": "mtvGlobal", "auther_sha": "876131e2514ec58069dc37395733d61133e14521", "author": "makortel", "body": "This PR is an exercise to migrate `MultiTrackValidator` to concurrent DQM (=`DQMGlobalEDAnalyzer` and `ConcurrentMonitorElement`).\r\n\r\nI tried first to use `MTVHistoProducerAlgoForTracker` as the \"Histograms\" run cache, but in the end using a separate \"Histograms\" struct and percolating that to everywhere seemed to be less invasive (i.e. easier to migrate to).\r\n\r\nI added two member functions to `ConcurrentMonitorElement` as the `TH1` is no longer accessible\r\n* `fillNoFlow()`: fills under/overflows to the first/last bins\r\n  * if there is a better way, I'm all ears\r\n* `sumw2()`: calls `TH1::Sumw2()`\r\n   * In principle one could construct the histogram object, call Sumw2, and then call `bookND()`, but I felt sumw2 would be common-enough use case to justify a function in the `ConcurrentMonitorElement` interface\r\n\r\nI also had to add additional `operator()` to `RecoTrackSelectorBase` to achieve const interface. In addition, I added alternative makers without `ConsumesCollector` for `TrackingParticleSelector` and `GenParticleCustomSelector`. Strictly speaking these are not needed for this PR, but I had them done already before decided to switch the migration strategy (and they simplify a bit the interfaces, e.g. now it is clear from `MTVHistoProducerAlgo` interface that it does not read anything from the event).\r\n\r\nTested in CMSSW_10_0_X_2017-12-23-1100, no changes expected in results.\r\n\r\nFYI @VinInn @rovere @hajohajo @fwyzard ", "branch": "master", "changed_files": 10, "comments": 10, "commits": 7, "created_at": "1514722851", "deletions": 942, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "dqm-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "simulation-pending", "tests-approved"], "milestone": "CMSSW_10_0_X", "number": 21794, "release-notes": [], "review_comments": 0, "state": "open", "title": "Migrate MultiTrackValidator to concurrent DQM", "updated_at": "1514759635", "user": "makortel"}