{"additions": 20, "auther_ref": "fix_HCAL_GPU_rechit_producer", "auther_sha": "ceec45f2e60f8d1934ea7c5205f9d720ffbddef9", "author": "fwyzard", "body": "#### PR description:\r\n\r\nThis PR consistes of two parts:\r\n  - the GPU code now marks as invalid (setting chi = -9999.) the HCAL channels for which it cannot determine the SOI;\r\n  - the CPU code that converts from SoA to legacy format now skips all invalid channels.\r\n\r\nSee h#39693 for a discussion on the underlying issues.\r\n\r\n#### PR validation:\r\n\r\nTested on top of CMSSW_12_4_10 over the events that caused the HLT to crash in runs 357898, 359998, and 360295.\r\nWithout these changes the original crash can be reproduced in multiple files:\r\n```\r\n----- Begin Fatal Exception 14-Oct-2022 20:27:30 CEST-----------------------\r\nAn exception of category 'Conditions not found' occurred while\r\n   [0] Processing  Event run: 360295 lumi: 174 event: 264575349 stream: 7\r\n   [1] Running path 'Path'\r\n   [2] Calling method for module CaloTowersCreator/'hltTowerMakerForAll'\r\nException Message:\r\nUnavailable Conditions of type HcalChannelQuality for cell (0x0) \r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\n\r\nWith these changes the HLT jobs run to completion on almost all those files (barring one that is affected by a different, ECAL-related crash).\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nTo be backported to CMSSW 12.4.x and 12.5.x for data taking.", "branch": "master", "changed_files": 2, "closed_at": "1666101210", "comments": 36, "commits": 2, "created_at": "1665764894", "deletions": 4, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "urgent", "code-checks-approved", "hcal-dpg-approved"], "merge_commit_sha": "4a2774ee326da41ffa58a40fc3d65726c10e5277", "merged_at": "1666101209", "merged_by": "cmsbuild", "milestone": "CMSSW_12_6_X", "number": 39738, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Skip invalid channels in the GPU HCAL RecHit producer", "updated_at": "1666101210", "user": "fwyzard"}