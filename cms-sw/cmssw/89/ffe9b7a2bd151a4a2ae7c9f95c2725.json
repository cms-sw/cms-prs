{"additions": 1292, "auther_ref": "rntuple-output", "auther_sha": "6fc21a4c45e5ea108e77e378873384bc5d853959", "author": "mxxo", "body": "#### PR description:\r\nThis PR adds a new output module that generates ROOT RNTuple NanoAODs. The new \r\nmodule is based on the existing `TTree` output module class `NanoAODOutputModule`. \r\n\r\nBecause of the RNTuple dependency, the module will likely only be functional\r\nin the ROOT6 master integration branches.\r\n\r\nThe new module is a prototype and is missing some features. In particular, backfilling, \r\n(creating new branches as required and adding them to the output file) is not yet \r\nsupported. The new module also requires unit tests. Some preliminary verification tests have\r\nbeen conducted against the existing output module comparing `Events` tree output data.\r\n\r\nWe have tried to adhere as much as possible to the TTree module conventions \r\nbut there are some differences. For example, collections are a first-class concept \r\nin RNTuple. Instead of requiring the user to define a separate branch `nElectron` \r\nfor the Electron collection, and having branches named `Electron_charge`, the RNTuple\r\nanalogue is to create an Electron collection directly and access fields through dot\r\nnotation (`Electron.charge`). An alias mechanism for branch name discrepancies is \r\nenvisioned to avoid disrupting analysis workflows.\r\n\r\nNote: RNTuple currently prints a stability warning when writing to disk, which was treated\r\nas a fatal error when running `cmsRun` configuration scripts. The current workaround is to \r\ndisable the ROOT error handler in the configuration script:\r\n```python\r\nprocess.add_(cms.Service(\"InitRootHandlers\", ResetRootErrHandler = cms.untracked.bool(False))) \r\n```\r\n\r\nThere is more information about this project here: \r\nhttps://iris-hep.org/assets/pdf/Max_Orok_proposal.pdf\r\nReview comments are greatly appreciated.\r\n\r\ncc @jblomer, @dan131riley\r\n", "branch": "CMSSW_12_0_ROOT6_X", "changed_files": 13, "closed_at": "1627322860", "comments": 25, "commits": 31, "created_at": "1621880035", "deletions": 0, "labels": ["pending-signatures", "tests-pending", "xpog-pending"], "merge_commit_sha": "5078be1a8f068997558b62d6cf886549d31130b2", "merged_at": "1627322860", "merged_by": "smuzaffar", "milestone": "CMSSW_12_0_X", "number": 33825, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[RFC] Add RNTuple NanoAOD output module", "updated_at": "1627322902", "user": "mxxo"}