{"additions": 25, "auther_ref": "FixSaturatedRegressionForRun3", "auther_sha": "10660de2e32486677159b95d5f9f40e6661185f8", "author": "swagata87", "body": "#### PR description:\r\n\r\nThis PR changes the range of BDT output of saturated e/gamma regression. \r\n\r\nLast time when saturated e/gamma regression was trained (several years ago during Run2), the BDT output range for correction factors was  -1 to 3. We have now retrained the regression for Run3, and we have used range 0.2 to 2.0 while training. This is because, \r\n - the normal(as in, non-saturated) e/gamma regression currently use 0.2-2.0 range, so this way everything becomes aligned.\r\n - Also not sure why in the past the range started from negative values of correction factors. The current range makes more sense. \r\n\r\nSince the range was changed in training, a change in CMSSW is also needed. It is done using era modifier, so that Run2 UL still have the old range [-1,3] compatible with old training, and Run3 gets the new range [0.2,2] compatible with new training. The GT update for regression tags should go into the same release as well. That is progressing in parallel. \r\n\r\nRelated github issue: [cms-sw/cmssw#36886](https://github.com/cms-sw/cmssw/issues/36886)\r\nTalk describing the issues that were fixed + the outstanding issues:  https://indico.cern.ch/event/1127851/contributions/4733937/attachments/2390919/4087216/EGM_RegressionTags_Changes.pdf\r\n\r\n#### PR validation:\r\nFrom `CMSSW_12_3_0_pre5`, merged this branch and ran the AOD step[1] on this dataset[2] using updated conditions[3] and then ran the miniAOD step[4] on the output AOD. Then made response plots using genmatched `slimmedElectrons`, and compared that with Run2 regression available in old releases and old GTs. Response looks reasonable and as expected.\r\n\r\n![compare_Saturated_ZPrimeEE_Response_EcalOnly_Barrel](https://user-images.githubusercontent.com/5052706/156187007-8d324547-1a32-4e69-bd12-57793352f8dc.png)\r\n\r\n[1] `cmsDriver.py --filein file:/eos/cms/blah.root  --fileout file:AOD.root --mc --eventcontent AODSIM --runUnscheduled --customise Configuration/DataProcessing/Utils.addMonitoring --datatier AODSIM --conditions 123X_mcRun3_2021_realistic_Candidate_2022_03_01_08_47_07 --step RAW2DIGI,RECO --geometry DB:Extended --era Run3 --python_filename aod_cfg.py --beamspot Run3RoundOptics25ns13TeVLowSigmaZ --no_exec -n -1` \r\n\r\n[2] `/RelValZpToEE_m6000_14TeV/CMSSW_12_3_0_pre5-123X_mcRun3_2021_realistic_v6-v1/GEN-SIM-DIGI-RAW`\r\n\r\n[3] https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/123X_mcRun3_2021_realistic_Candidate_2022_03_01_08_47_07/123X_mcRun3_2021_realistic_v9\r\n\r\n[4] `cmsDriver.py  --filein file:/eos/cms/blah.root  --fileout file:Mini.root --mc --eventcontent MINIAODSIM --runUnscheduled --customise Configuration/DataProcessing/Utils.addMonitoring --datatier MINIAODSIM --conditions 123X_mcRun3_2021_realistic_Candidate_2022_03_01_08_47_07 --step PAT --geometry DB:Extended --era Run3 --python_filename miniaod_cfg.py --beamspot Run3RoundOptics25ns13TeVLowSigmaZ --no_exec -n -1`\r\n\r\nThis PR is not a backport. \r\nA backport to 12_2 is not meaningful anymore, as 12_2 MC production for 0.5B POG samples has already started. So most probably we won't do any backport of this PR.", "branch": "master", "changed_files": 3, "closed_at": "1646313590", "comments": 22, "commits": 2, "created_at": "1646141367", "deletions": 3, "labels": ["operations-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "urgent", "requires-external", "code-checks-approved"], "merge_commit_sha": "238b35f1e3624d63e857fde0a67699ed0397a17c", "merged_at": "1646313590", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 37100, "release-notes": [], "review_comments": 9, "state": "closed", "title": "Adapt to new range for BDT output for Run3 Saturated regression", "updated_at": "1646313591", "user": "swagata87"}