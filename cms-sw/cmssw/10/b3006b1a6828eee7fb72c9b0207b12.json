{"additions": 203, "auther_ref": "updateSiPixeLAPCLWorkflow", "auther_sha": "c54e06e17d6d712189dea39cc47a85f19d7957ef", "author": "mmusich", "body": "#### PR description:\r\n\r\nMiscellanea updates and bug-fixes to the SiPixel LA PCL workflow that are built on top of the replay at https://github.com/dmwm/T0/pull/4635: \r\n   * made the processing much faster by calling `SiPixelTemplate::pushfile` in `dqmBeginRun`  instead of the `analyze` method;\r\n   * add basic accepted tracks monitoring;\r\n   * adding plot titles;\r\n   * re-organize folders to have subfolders: (Top) / (BPix) / etc. ..;\r\n   * actually *do* write to DB the values for the \"new\" modules when they are fit;\r\n   * change the default cut value on the fit probability for writing out the payload from 0.5 to 0.1;\r\n   * fix a bug that was causing populating the lists of \"new\" modules and modules attached to a given \"sector\" multiple times (this was triggering several warnings in the harvesting step when populating the DB about multiple `put`s, see https://github.com/cms-sw/cmssw/pull/36535);\r\n  \r\n#### PR validation:\r\n\r\nRun:\r\n\r\n```\r\n cmsDriver.py testReAlCa -s ALCA:PromptCalibProdSiPixelLorentzAngle --conditions 121X_dataRun3_Express_TIER0_REPLAY_Run2_v1 --scenario pp --data --era Run2_2018 --datatier ALCARECO --eventcontent ALCARECO --processName=ReAlCa -n 100 --dasquery='file dataset=/StreamExpress/Tier0_REPLAY_2021-SiPixelCalSingleMuon-Express-v1/ALCARECO' --customise_commands='process.ALCARECOCalSignleMuonFilterForSiPixelLorentzAngle.TriggerResultsTag = cms.InputTag ( \"TriggerResults\",\"\",\"HLT\" ) ; process.ALCARECOCalSignleMuonFilterForSiPixelLorentzAngle.HLTPaths = [\"*\"]' --nThreads=4 \r\n```\r\n\r\nfollowed by:\r\n\r\n```\r\n cmsDriver.py stepHarvest -s ALCAHARVEST:SiPixelLA --conditions 121X_dataRun3_Express_TIER0_REPLAY_Run2_v1 --scenario pp --data --era Run2_2018 --filein file:PromptCalibProdSiPixelLorentzAngle.root -n -1\r\n```\r\n\r\nthe results are uploaded to a private DQM GUI at  https://tinyurl.com/y4dm6s98:\r\n   * necessitates tunneling (`ssh -NL 8060:localhost:8060 <USER>@lxplus723.cern.ch`). \r\n   \r\nAn example of the result is link to the companion PR to `dmwm`: https://github.com/dmwm/deployment/pull/1118\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot a backport, but might be backported\r\n", "branch": "master", "changed_files": 3, "closed_at": "1640078632", "comments": 25, "commits": 7, "created_at": "1639747005", "deletions": 85, "labels": ["alca-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "51ca27f5959cde8a2667d896208cbfc02121d4f7", "merged_at": "1640078632", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36538, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Several updates to SiPixel LA PCL workflow", "updated_at": "1640078632", "user": "mmusich"}