{"additions": 46, "auther_ref": "JERfractionsFix11X", "auther_sha": "56e606d252a58c724a410867f3079ae79aff2e54", "author": "ahinzmann", "body": "#### PR description:\r\n\r\nAs currently implemented, jet resolution smearing breaks the jet energy fraction variables of pat::Jets.\r\nThis line of code changes the four-vector of a pat::Jet, but not the correction factors stored in the pat::Jet:\r\nhttps://github.com/cms-sw/cmssw/blob/CMSSW_8_0_25/PhysicsTools/PatUtils/interface/SmearedJetProducerT.h#L267\r\nJet energy fraction calculation relies on the fact that one can retried the raw jet energy with the stored correction factors:\r\nhttps://github.com/cms-sw/cmssw/blob/master/DataFormats/PatCandidates/interface/Jet.h#L376\r\n\r\nThis fix to the scaleEnergy method adjusts the stored correction factors, to be able to retrieve the raw jet energy again.\r\n\r\nJet resolution smearing is run during MiniAOD production and also in this test:\r\nhttps://github.com/cms-sw/cmssw/blob/master/PhysicsTools/PatAlgos/test/corMETFromMiniAOD.py\r\n\r\nSmall changes are expected in MET corrections and uncertainties related to jet resolution smearing in MiniAOD.\r\n\r\n#### PR validation:\r\n\r\nIt was checked that jet energy fractions are the same before and after jet energy resolution smearing with this fix.", "branch": "master", "changed_files": 4, "closed_at": "1563290116", "comments": 69, "commits": 10, "created_at": "1562074390", "deletions": 22, "labels": ["analysis-approved", "code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "59942a0f3b89f2eab6c3ff73330aa3857f3deec0", "merged_at": "1563290116", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27428, "release-notes": [], "review_comments": 7, "state": "closed", "title": "Fix jet energy fractions after jet resolution smearing", "updated_at": "1563360304", "user": "ahinzmann"}