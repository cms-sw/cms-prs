{"additions": 38, "auther_ref": "phase2_nodigis_guard", "auther_sha": "779091bcfcb468f714567ce47d25fc6dc12c956e", "author": "AdrianoDee", "body": "#### PR description:\r\n\r\nThis PR adds a guard in `SiPixelPhase2DigiToClusterCUDA` when no pixel digi is recorded in Phase2 tracker. Without this guard the subsequent kernels crashes due to non-sensible configuration parameters. In order to monitor these special conditions, the Patatrack workflows are enabled also for `NuGun` fragments.\r\n\r\n#### PR validation:\r\n\r\nRunning `20861.502` (i.e. `NuGun+2026D88_Patatrack_PixelOnlyGPU`). Without the fix the wf crashes with\r\n\r\n\r\n```\r\nBegin processing the 1st record. Run 1, Event 7, LumiSection 1 on stream 0 at 03-Apr-2023 11:35:31.678 CEST\r\n----- Begin Fatal Exception 03-Apr-2023 11:36:43 CEST-----------------------\r\nAn exception of category 'StdException' occurred while\r\n   [0] Processing  Event run: 1 lumi: 1 event: 7 stream: 0\r\n   [1] Running path 'dqmoffline_step'\r\n   [2] Prefetching for module SiPixelMonitorVertexSoA/'siPixelMonitorVertexSoA'\r\n   [3] Prefetching for module PixelVertexSoAFromCUDA/'pixelVerticesSoA@cuda'\r\n   [4] Prefetching for module PixelVertexProducerCUDAPhase2/'pixelVerticesCUDA'\r\n   [5] Prefetching for module CAHitNtupletCUDAPhase2/'pixelTracksCUDA'\r\n   [6] Prefetching for module SiPixelRecHitCUDAPhase2/'siPixelRecHitsPreSplittingCUDA'\r\n   [7] Calling method for module SiPixelPhase2DigiToClusterCUDA/'siPixelClustersPreSplittingCUDA'\r\nException Message:\r\nA std::exception was thrown.\r\n\r\n/data/cmsbld/jenkins/workspace/auto-builds/CMSSW_13_1_0_pre2-slc7_amd64_gcc11/build/CMSSW_13_1_0_pre2-build/tmp/BUILDROOT/c7a65d060b20ecc5cac26a602544466e/opt/cmssw/slc7_amd64_gcc11/cms/cmssw/CMSSW_13_1_0_pre2/src/RecoLocalTracker/SiPixelClusterizer/plugins/SiPixelRawToClusterGPUKernel.cu, line 735:\r\ncudaCheck(cudaGetLastError());\r\ncudaErrorInvalidConfiguration: invalid configuration argument\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\n\r\nNo back-port needed.\r\n\r\n\r\n", "branch": "master", "changed_files": 5, "comments": 88, "commits": 1, "created_at": "1680508211", "deletions": 11, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-approved", "trk"], "milestone": "CMSSW_14_0_X", "number": 41255, "release-notes": [], "review_comments": 7, "state": "open", "title": "Guard for No Digis for Phase2 and Patatrack `NuGun`", "updated_at": "1705392897", "user": "AdrianoDee"}