{"additions": 169, "auther_ref": "rechitBasedRho_122X", "auther_sha": "3d014b7eb0ef23b178b0acb1b34c62c19959bfca", "author": "swagata87", "body": "#### PR description:\r\n\r\nIn an attempt to phase-out calotowers, this PR adds a new rho producer which is recHit-based. It takes the raw recHits of ECAL and HCAL as input and computes rho using fastjet. The new producer code is kept in `RecoJets/JetProducers/plugins/` because other rho producer codes are also there. But this one is primarily aimed for HLT. According to current plan, egamma and muon HLT can use it in Run3, in order to phase out calotowers. Until Run2, calotower-based rho was used in egamma and muon HLT. \r\n\r\n#### PR validation:\r\n\r\nRan egamma HLT after adding a module for the new rho producer. Relevant part of HLT config is this:\r\n```\r\nprocess.hltRhoNew = cms.EDProducer( \"FixedGridRhoProducerFastjetFromRecHit\",\r\n    hbheRecHitsTag = cms.InputTag( \"hltHbhereco\" ),\r\n    ebRecHitsTag = cms.InputTag( 'hltEcalRecHit','EcalRecHitsEB' ),\r\n    eeRecHitsTag = cms.InputTag( 'hltEcalRecHit','EcalRecHitsEE' ),\r\n    eThresHB = cms.vdouble(0.1, 0.2, 0.3, 0.3),\r\n    eThresHE = cms.vdouble(0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2),\r\n    maxRapidity = cms.double( 2.5 ),\r\n    gridSpacing = cms.double( 0.55 ),\r\n    skipHCAL = cms.bool(False),\r\n    skipECAL = cms.bool(False)\r\n)\r\n```\r\nThen compared calotower-based rho and recHit-based rho, and found that they are fairly close. \r\n\r\n<img width=\"500\" alt=\"Screen Shot 2021-08-31 at 14 08 40 (1)\" src=\"https://user-images.githubusercontent.com/5052706/142257391-91e9c5ec-279a-4560-8fcc-d3f01e14c662.png\">\r\n\r\nNote that an exact match is neither expected, nor required. One reason of the small difference is different noise-cleaning cuts in calotower creation code. \r\n\r\nMuon HLT team validated this producer independently, and found that their HLT performance remain very similar after moving to recHit-based rho. This is discussed in TSG meeting today: https://indico.cern.ch/event/1097086/contributions/4618454/attachments/2347696/4003696/20211117_TSG_MuonHLTIso_DropCaloTower_KPLee_v2.pdf\r\n\r\nThis PR is not a backport. \r\nA backport to `12_1_X` might be needed for HLT studies.\r\n\r\nThanks to Muon POG, in particular @KyeongPil-Lee, for validating the producer in the context of muon HLT. \r\n\r\nWith thanks to @Sam-Harper, for useful discussions. ", "branch": "master", "changed_files": 2, "closed_at": "1637959479", "comments": 33, "commits": 10, "created_at": "1637169551", "deletions": 0, "labels": ["hlt-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "a41acbb4045613568428a237341f2b187a1f01d8", "merged_at": "1637959478", "merged_by": "cmsbuild", "milestone": "CMSSW_12_2_X", "number": 36157, "release-notes": [], "review_comments": 53, "state": "closed", "title": "RecHit-based rho producer for HLT", "updated_at": "1637959479", "user": "swagata87"}