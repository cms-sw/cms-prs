{"additions": 37, "auther_ref": "update-mahidebugger-fix-np-v2", "auther_sha": "f3168d9dff26d6f44a32c37392f66a8839fb733f", "author": "jaehyeok", "body": "This is a cleaner version of https://github.com/cms-sw/cmssw/pull/28193.\r\n\r\nAll comments from Slava in https://github.com/cms-sw/cmssw/pull/28193 have been implemented. \r\n\r\nFor convenience, I copy the description for https://github.com/cms-sw/cmssw/pull/28193 below: \r\n\r\n------\r\n\r\nThis PR consists of two changes.\r\n\r\n(1) update on MahiDebugger\r\n\r\nThe current version of it only stores info for BX=-1,0,1 pulses and baseline because mahi ran with 3 pulses + baseline. Now it runs with 8 pulses, so the debugger should be updated accordingly. This has no impact on the reconstruction because changes are only in the debugger.\r\n\r\n(2) Bug fix in initializing nP variable\r\n\r\nCurrently, nnlsWork_.nP is reset to 0 at every iteration. This turned out to make the fit unstable sometimes (particularly, the BX=+1 pulse became anomalously large). The initialization is now done at the beginning of MahiFit::phase1Apply. The comparison before and after this update is shown in [1] (Fix #2 in the slides corresponds to this update).\r\n\r\nHere I summarize the changes after the update:\r\n\r\nOverall impact on intime energy is small (p4)\r\nThere are changes in BX=-1 and BX=+1 pulses (p5 and p6, respectively). Based on the pulse displays (p21-32), the fit looks much better (BX=+1 pulse looks much more reasonable).\r\nthe chi2 became smaller (p12 and 13)\r\nAll these results have led us to conclude that the fix improves the behavior of the fit. This PR is for Run3.\r\n\r\n[1] https://indico.cern.ch/event/855229/contributions/3597588/attachments/1924959/3188179/Hcal_mahi.pdf", "branch": "master", "changed_files": 3, "closed_at": "1572594269", "comments": 13, "commits": 3, "created_at": "1572410712", "deletions": 41, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "ac3216264a0a439052c2ad61527c17f1941bf74b", "merged_at": "1572594269", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28309, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[HBHE] Update MahiDebugger and fix nP in NNLS (v2)", "updated_at": "1572594269", "user": "jaehyeok"}