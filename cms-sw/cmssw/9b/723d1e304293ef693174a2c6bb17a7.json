{"additions": 52, "auther_ref": "nanoadduint32doubleandrunflattables", "auther_sha": "d7319f8e62b75bf137fb38c59e4ef58c2f653878", "author": "pieterdavid", "body": "#### PR description:\r\n\r\nWhile trying to migrate the SiStrip calibration trees (flat trees produced from ALCARECO by the DPG) to the NanoAOD framework, we ran into a few limitations:\r\n- `nanoaod::FlatTable` can only contain Float, Int, UInt8_t and Bool columns. For calibration purposes UInt32_t (DetId) is also commonly needed, as well as double, for the few cases where the full precision should be kept.\r\n- the NanoAODOutputModule can only handle summary tables for the Runs tree, while flat tables can also be very useful (e.g. to store a few conditions-derived quantities)\r\n\r\nThis PR adds these (the code changes follow the existing code as much as possible). Since the FlatTable dataformat needs additional members for the new types, the class version is updated. I hope that doesn't cause compatibility problems.\r\nThe changes may also be useful for similar efforts in other DPGs and POGs (in case more types need to be added they could be included here).\r\n\r\n#### PR validation:\r\n\r\nImplemented a flat tree with all variables for the measurement of the SiStrip Lorentz angle and backplane correction (based on SiStripCalCosmics), which uses the new types and puts a flat table in the runs tree - full validation is ongoing, but the produced file looks technically sound (the work-in-progress code can be found [here](https://github.com/pieterdavid/cmssw/compare/nanoadduint32doubleandrunflattables...pieterdavid:try_nano_calibtrees_3_1130pre6), the relevant config is [this one](https://github.com/pieterdavid/cmssw/compare/nanoadduint32doubleandrunflattables...pieterdavid:try_nano_calibtrees_3_1130pre6#diff-2c068eefe192ac5d543c9519bf6823fad145c3dffed0d5643138af2be938dde1)).\r\n\r\nCC: @ataliercio @robervalwalsh @mmusich @tsusa @mariadalfonso @gouskos", "branch": "master", "changed_files": 6, "closed_at": "1622720475", "comments": 10, "commits": 2, "created_at": "1619604319", "deletions": 7, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "tests-approved", "xpog-approved"], "merge_commit_sha": "f00fc4aecb2c7c810f666138aa3eb9337b7e8521", "merged_at": "1622720475", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 33565, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Allow storing uint32_t and double in NanoAOD, and flat tables in the Runs tree, for ALCANANO", "updated_at": "1622720475", "user": "pieterdavid"}