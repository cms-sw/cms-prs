{"additions": 1, "auther_ref": "HGCal_NHitCuts_byTrackAlgo", "auther_sha": "f134c7fc1d6660633392d27961dafb154681bb12", "author": "hatakeyamak", "body": "...to be consistent as that for GeneralTracksImporter.\r\n\r\n#### PR description:\r\n\r\nThe sixth entry of\r\nhttps://github.com/cms-sw/cmssw/blob/master/RecoParticleFlow/PFTracking/python/hgcalTrackCollection_cfi.py#L10\r\nhas been known as a nonsensical value. See: https://github.com/cms-sw/cmssw/issues/16914.\r\nI didn't really trace all the history, but I checked how the PF output changes when we set it to a \"reasonable\" value which is consistent as that used for GeneralTrackImporter, and I don't see anything alarming [0].\r\n\r\nFor simPFProducer outputs, after this NHitCuts_byTrackAlgo, I see slightly smaller neutral hadron entries of low pt [1] and a very minor change in PF electrons and photons [2]. I think this is because we are including more tracks (from muonSeededStepInOut/OutIn) in the hgcalTrack collection, and consequently more HGCalHE hits are associated to tracks.\r\n\r\nRemarks: Right now, PF muons are produced from particleFlowTmpBarrel when they are RECO muons, even if the muons are in endcap [3], and simPFProducer skips [4] muons from reco muon collection. While ticl attempts to reconstruct these endcap muons, as expected. When we switch from simPFProducer to pfTICL, it's likely that we will have to do some duplicate removal between pfTICL and particleFlowTmpBarrel at least for muons. I am hoping to address this in a follow-up PR.\r\n\r\n[1] http://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/plots/ZMM_ParticleFlow/PackedCandidates/neutralHadron/neutralHadronEta.pdf\r\n[2] http://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/plots/ZMM_ParticleFlow/PackedCandidates/electron/electronEta.pdf\r\nhttp://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/plots/ZMM_ParticleFlow/PackedCandidates/photon/photonEta.pdf\r\n\r\n[3] because veto skips tracks with muonref:  https://cmssdt.cern.ch/lxr/source/RecoParticleFlow/PFProducer/plugins/importers/GeneralTracksImporterWithVeto.cc#0133\r\n[4] https://cmssdt.cern.ch/lxr/source/RecoParticleFlow/PFSimProducer/plugins/SimPFProducer.cc#0389\r\n\r\n#### PR validation:\r\n\r\nRan PF validation on ZMM with and without PU:\r\n[0] http://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/plots/\r\nPF candidates stay almost identical, as discussed above. The \"offset\" plot is nearly identical:\r\nhttp://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/plots/OffsetStacks/stack_ZMM_NHitCuts3_ref_vs_ZMM_ref.pdf\r\n\r\nSince https://github.com/cms-sw/cmssw/issues/16914 unexpectedly discussed about large reco muon changes, here we checked that slimmedMuons are not affected.\r\n[5] http://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/SlimmedMuonEta_ZMMNoPU.pdf\r\n[6] http://hep.baylor.edu/hatake/PFval/val_11_2_pre6_NHitCuts_byTrackAlgo/SlimmedMuonEta_ZMMPU.pdf\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis is not a backport.\r\n\r\nAtt: @bendavid @rovere @felicepantaleo @kpedro88 ", "branch": "master", "changed_files": 1, "closed_at": "1602557406", "comments": 18, "commits": 1, "created_at": "1601975548", "deletions": 1, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "432c4f50f4ae380c638a1b3373e34c0eaa09684b", "merged_at": "1602557406", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31681, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update NHitCuts_byTrackAlgo for hgcalTrack ", "updated_at": "1602557407", "user": "hatakeyamak"}