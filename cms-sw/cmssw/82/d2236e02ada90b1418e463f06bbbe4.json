{"additions": 121, "auther_ref": "FireworksWithWaferDetIds", "auther_sha": "f6095445ec109cd5d9b8ce483981f69d1de7d3d6", "author": "rovere", "body": "#### PR description:\r\n\r\nThis PR addresses the following point:\r\n\r\n* Improve geometry handling in Fireworks by supporting fully rotated layers in HGCal. The old handling of reconstruction geometry in Fireworks was too decoupled from the tools developed to create and handle the HGCal geometry. Now every aspect of the geometry relevant for a correct rendering is handled while creating the geometry itself, not by homemade code at rendering time. Comments in the single git commits and inside the code are far more explanatory.\r\n* Correctly handle the cells' orientation of the fully rotated layers. The improved handling should be generic enough to be valid for arbitrary rotations, not just the current one at 30 degrees. Comments in the single git commits and inside the code contain more information.\r\n* Correctly pass the thickness of every single cell or tile inside the geometry, so that the `3DRecHits` rendering of the single cells and tiles is properly done. Comments have been added to the code to alert the developer about the downstream effects in case she wants to change the behaviour.\r\n* Update the Fireworks plugins to use the feature that has been added and stored along with the HGCal reconstruction geometry.\r\n\r\n#### PR validation:\r\n\r\nThe code has been tested using `D86` and `D88` geometry. No further bugs nor strange behaviour is observed.\r\nIn particular, layers 28, 30 and 32 show the correct rendering, as shown in the following images:\r\n![Layer28_D86](https://user-images.githubusercontent.com/1169991/169965343-13408abb-b2e7-417a-8d4d-912026d52ff3.png)\r\n![Layer30_D86](https://user-images.githubusercontent.com/1169991/169965341-2fdc29e1-2030-477c-9be3-92f3bd0ac78c.png)\r\n![Layer32_D86](https://user-images.githubusercontent.com/1169991/169965335-fff6de39-83e7-4b87-823a-018ca3ecab91.png)\r\n\r\nMoreover, one can see the different orientations of the single cells within the rotated layers with respect to the default orientation, as shown in this picture:\r\n\r\n![cellsOrientation_28_30_32](https://user-images.githubusercontent.com/1169991/169965640-fd2c254f-16da-4871-9d9a-1e0c8c1545ac.png)\r\n", "branch": "master", "changed_files": 9, "closed_at": "1653560532", "comments": 10, "commits": 6, "created_at": "1653367687", "deletions": 50, "labels": ["geometry-approved", "visualization-approved", "fully-signed", "tests-approved", "orp-approved", "upgrade-approved", "code-checks-approved"], "merge_commit_sha": "6e0ffa65d9ce4f923a3dc17acfd5761c93f43c8b", "merged_at": "1653560532", "merged_by": "cmsbuild", "milestone": "CMSSW_12_5_X", "number": 38054, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Support rotated HGCal Wafers in Fireworks", "updated_at": "1653560532", "user": "rovere"}