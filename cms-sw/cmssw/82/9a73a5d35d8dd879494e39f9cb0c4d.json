{"additions": 256, "auther_ref": "Phase1-HE12", "auther_sha": "bd3254e80b47aca1f1a15eea5387c0e62a4965ef", "author": "kpedro88", "body": "Some arbitrary cutoffs on the ranges of the Y11 and SiPM pulse shapes used in the digi simulation had been present in the code for several years. These cutoffs caused unphysical dropoffs in the output pulses, so they are now removed. Correspondingly, the RECO shape used for M2 is updated to be a full 250ns convolution.\r\n\r\nExtensive investigation of these issues can be found in these slides: [sipm_pulse_study_4.pdf](https://indico.cern.ch/event/591614/contributions/2387530/attachments/1379109/2095655/sipm_pulse_study_4.pdf). Plots of M2 performance are included. Additionally, here is a 50 GeV pion response/resolution plot (\"ref\" corresponds to 810pre16 + #16569, \"new\" is ref + this PR):\r\n![pion plot](http://kjplanet.com/pr/hcal__energy-ecal_he12.png)\r\n\r\nNB: Changing `Y11RANGE` globally will also change HO simulation output for Run1 and Run2. Theoretically this is more accurate, so I think the change should be allowed. If it is not acceptable, as a hack I can reset `Y11RANGE` on a per-channel basis, but I would prefer not to do this.\r\n\r\nPlanned items for followup PRs:\r\n* Further cleanup of SiPM code (remove some unnecessary vars, hardcoded values, reduce duplication, etc.)\r\n* Move Y11 functions into `HcalSiPMShape`\r\n* Move `HcalSiPMShape` into `CalibCalorimetry/HcalAlgos`\r\n* Use `HcalSiPMShape` to calculate numerical convolution for RECO shape on demand (replacing array of values)\r\n* Option to store `vector<CaloSamples>` as event product for easier debugging\r\n\r\nThis PR will be backported to 81X.", "branch": "CMSSW_9_0_X", "changed_files": 3, "closed_at": "1480952439", "comments": 14, "commits": 2, "created_at": "1480532705", "deletions": 136, "labels": ["alca-approved", "comparison-available", "fully-signed", "orp-pending", "simulation-approved", "tests-approved"], "merge_commit_sha": "e84a4bedb6de215861596dca14217a3aec13fef1", "merged_at": "1480952439", "merged_by": "davidlange6", "milestone": "CMSSW_9_0_X", "number": 16825, "release-notes": [], "review_comments": 0, "state": "closed", "title": "SiPM pulse shape fixes", "updated_at": "1480952439", "user": "kpedro88"}