{"additions": 2, "auther_ref": "ubsan-LSTOutputConverter-fix", "auther_sha": "0ffb4c030bd8f02b23e78cfe4a9f75d73605cabc", "author": "smuzaffar", "body": "This should fix the UBSAN runtime error [a]. The issue is that `GlobalTrackingRegion()` gets destroyed after the https://github.com/cms-sw/cmssw/blob/CMSSW_14_2_UBSAN_X_2024-11-20-2300/RecoTracker/LST/plugins/LSTOutputConverter.cc#L198C28-L198C50 call and the pointer to this stored https://github.com/cms-sw/cmssw/blob/CMSSW_14_2_UBSAN_X_2024-11-20-2300/RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc#L55 is invalid when `seedCreator_->makeSeed(seeds, hitsForSeed);` call is make\r\n\r\n[a] https://cmssdt.cern.ch/SDT/jenkins-artifacts/ubsan_logs/CMSSW_14_2_X_2024-11-20-2300/\r\n```\r\n[1 RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:119:48: runtime error: member call on address 0x7ffc2e1a4fb0 which does not point to an object of type 'TrackingRegion'](https://cmssdt.cern.ch/SDT/jenkins-artifacts/ubsan_logs/CMSSW_14_2_X_2024-11-20-2300/logs/e2/e29e8ea225af97ed47471854089ce942/log)\r\n[1 RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:149:48: runtime error: member call on address 0x14f6e55f8680 which does not point to an object of type 'TrackingRegion'](https://cmssdt.cern.ch/SDT/jenkins-artifacts/ubsan_logs/CMSSW_14_2_X_2024-11-20-2300/logs/59/59239ac295c69eb51ea906bb27ee3f55/log)\r\n[1 RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:82:24: runtime error: member call on address 0x14f6e75f7680 which does not point to an object of type 'TrackingRegion'](https://cmssdt.cern.ch/SDT/jenkins-artifacts/ubsan_logs/CMSSW_14_2_X_2024-11-20-2300/logs/a9/a9209aee6ea190192918bd5dde34a8b1/log)\r\n```\r\n\r\n- https://cmssdt.cern.ch/SDT/cgi-bin/logreader/el8_amd64_gcc12/CMSSW_14_2_UBSAN_X_2024-11-20-2300/pyRelValMatrixLogs/run/24834.703_TTbar_14TeV+Run4D98_lstOnCPUIters01TrackingOnly/step3_TTbar_14TeV+Run4D98_lstOnCPUIters01TrackingOnly.log#/\r\n```\r\nsrc/RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:119:48: runtime error: member call on address 0x7ffc2e1a4fb0 which does not point to an object of type 'TrackingRegion'\r\n0x7ffc2e1a4fb0: note: object has invalid vptr\r\n 03 00 00 00  40 4c dc 9c f7 14 00 00  80 4c dc 9c f7 14 00 00  80 4c dc 9c f7 14 00 00  00 00 00 00\r\n    #0 0x14f684bf3e4d in SeedFromConsecutiveHitsCreator::initialKinematic(GlobalTrajectoryParameters&, SeedingHitSet const&) const src/RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:119\r\n    #1 0x14f684c10535 in SeedFromConsecutiveHitsCreator::makeSeed(std::vector<TrajectorySeed, std::allocator<TrajectorySeed> >&, SeedingHitSet const&) src/RecoTracker/TkSeedGenerator/plugins/SeedFromConsecutiveHitsCreator.cc:74\r\n    #2 0x14f683fbf896 in LSTOutputConverter::produce(edm::Event&, edm::EventSetup const&) src/RecoTracker/LST/plugins/LSTOutputConverter.cc:199\r\n    #3 0x14f7d58db29f in edm::stream::EDProducerAdaptorBase::doEvent(edm::EventTransitionInfo const&, edm::ActivityRegistry*, edm::ModuleCallingContext const*) src/FWCore/Framework/src/stream/EDProducerAdaptorBase.cc:83\r\n```\r\n```\r\n", "branch": "master", "changed_files": 1, "closed_at": "1732275380", "comments": 13, "commits": 1, "created_at": "1732224443", "deletions": 2, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "tracking"], "merge_commit_sha": "6ac91328dfdd354f105e7584e40d545232627f83", "merged_at": "1732275380", "merged_by": "cmsbuild", "milestone": "CMSSW_14_2_X", "number": 46758, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[UBSAN][LST]Fix runtime error by keep the region object alive", "updated_at": "1732275381", "user": "smuzaffar"}