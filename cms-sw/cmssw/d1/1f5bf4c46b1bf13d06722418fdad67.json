{"additions": 66, "auther_ref": "HGCalValidatorOnHardScatt", "auther_sha": "f6755e4d8c8d6fa4ba3eef2f1697aa5379ef1f8b", "author": "apsallid", "body": "#### PR description:\r\n\r\nThis PR addresses the issue #27417. We decided (@rovere , @felicepantaleo , @amartelli )\r\nto follow PR #26915 and consider only CaloParticles coming from the hard scatterer, \r\nexcluding the PU contribution. Running the Timing Service on 10 events of workflow 20234.99 \r\nwe see that the timing of the hgcalValidator module is on average 2.88 s/event. \r\n\r\nWe should also note that the hgcalValidator module will for sure be even faster in cooperation \r\nwith TICL multiclusters, since at the moment the number of multiclusters produced is huge \r\n(~10^4 multiclusters per event for wf 20234.99). \r\n\r\nFurthermore, we noted: \r\n\r\n- A duplication of a loop coming from the git rebasing/merging. \r\n- An incorrect initialization of the 3D score, shared energy and shared energy fraction inside the CaloParticles loop.\r\n- An incorrect iteration over the full collection of multiclusters. At that point we should iterate only to the multiclusters that are related to CaloParticles. Iterating over the full multicluster collection contained cases for the score where the numerator and denominator had their initialized values,which is zero and lead to nan's in the histograms. \r\n\r\n#### PR validation:\r\n\r\nWe tested the PR with wf 20234.99 (TTbar with 200PU).\r\n", "branch": "master", "changed_files": 3, "closed_at": "1563126742", "comments": 48, "commits": 7, "created_at": "1562770400", "deletions": 81, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "1721e71facd2688ff67912cbdf59ebca63dc15c2", "merged_at": "1563126742", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27478, "release-notes": [], "review_comments": 8, "state": "closed", "title": "[HGCal] Run HGCalValidator only on the hard scatterer event and correcting the mess from merging", "updated_at": "1563126742", "user": "apsallid"}