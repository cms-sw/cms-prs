{"additions": 2410, "auther_ref": "BSforOnlineHLT_FakeBS_11_2", "auther_sha": "1992d5bbad6c19e13dd96d70217e42a779585dda", "author": "MilanoBicocca-pix", "body": "#### PR description:\r\n- Added one new plugin under DQM/BeamMonitor: `DQM/BeamMonitor/plugins/FakeBeamMonitor.cc`\r\n  - It's almost a copy of the BeamMonitor.cc plugin, except that the BeamSpot is not fitted from tracks and PVs, but is randomly generated using a TRandom3.\r\n  - No change in the undelying logic with respect to the BeamMonitor is added\r\n  - This plugin should be used when tracks/PVs are not available in the event, but a random BeamSpot is still needed (_e.g._ during MWGR)\r\n\r\n- Added two clients (basically a copy of the already existing beamspot clients) that run the new FakeBeamMonitor plugin:\r\n  - `DQM/Integration/python/clients/beamfake_dqm_sourceclient-live_cfg.py`\r\n  - `DQM/Integration/python/clients/beamhltfake_dqm_sourceclient-live_cfg.py`\r\n\r\n#### PR validation:\r\nThe new plugin and clients have been tested \"offline\" by me, @gennai and @ggovi using and \"EmpySource\" and thanks to @smorovic who was running a DAQ with fake runs. \r\nTwo customizations are needed in the clients: \r\n- the parameter `authenticationPath` (lines [358 of `beamfake_dqm_sourceclient-live_cfg.py`](https://github.com/cms-sw/cmssw/compare/master...MilanoBicocca-pix:BSforOnlineHLT_FakeBS_11_2?expand=1#diff-7ef0ceb19db32176634c9c20f1f734e3R358) and [160 of `beamhltfake_dqm_sourceclient-live_cfg.py`](https://github.com/cms-sw/cmssw/compare/master...MilanoBicocca-pix:BSforOnlineHLT_FakeBS_11_2?expand=1#diff-bb2d600bca17d8ba649a5ea73d0631a8R160) ) should contain the path to the `db.key` file, needed for the upload to CondDB. A copy of this key can be found at P5 under `~govi/bs_key/.cms_cond` (@ggovi can confirm). \r\n- the parameter `lastLumiUrl` (lines [367 of `beamfake_dqm_sourceclient-live_cfg.py`](https://github.com/cms-sw/cmssw/compare/master...MilanoBicocca-pix:BSforOnlineHLT_FakeBS_11_2?expand=1#diff-7ef0ceb19db32176634c9c20f1f734e3R367) and [169 of `beamhltfake_dqm_sourceclient-live_cfg.py`](https://github.com/cms-sw/cmssw/compare/master...MilanoBicocca-pix:BSforOnlineHLT_FakeBS_11_2?expand=1#diff-bb2d600bca17d8ba649a5ea73d0631a8R169) ) was working fine at the moment of the test, but should be double checked.\r\n\r\n#### Backporting\r\nA backport to CMSSW_11_1_X might be needed.\r\n", "branch": "master", "changed_files": 6, "closed_at": "1595875280", "comments": 41, "commits": 3, "created_at": "1594749961", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "2e95b4e0138dc6f9df42d48cfb2c77862a76f188", "merged_at": "1595875280", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 30690, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Add DMQ FakeBeamMonitor plugin and clients", "updated_at": "1595875280", "user": "francescobrivio"}