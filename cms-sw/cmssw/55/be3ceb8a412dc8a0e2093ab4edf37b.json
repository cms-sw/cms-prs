{"additions": 66, "auther_ref": "rntupleSecondaryFileIn", "auther_sha": "d673b8277c7fdb30658dfaae544de1905ec0c8bd", "author": "makortel", "body": "#### PR description:\r\n\r\nThis PR makes the `runTheMatrix.py` workflows that use `--secondfilein` and generate premixed pileup on the fly to work with the `RNTupleTemp*` IO components (i.e. with `runTheMatrix.py --use-rntuple`).\r\n\r\nIn the `--secondfilein` case the workflows that use it use files from DAS query, i.e. the files exist already and are in TTree format. Since we can't (presently) use different file formats for primary and secondary input files, this PR makes those workflows use TTree file format until the last step that uses `--secondfilein`.\r\n\r\nIn the premixed pileup case this PR makes the MixingModules to use `EmbeddedRNTupleTempSource`. The way I did it is a hit hacky, but given that the use of `EmbeddedRootSource` is coded in all the `MixingModule` definitions along\r\nhttps://github.com/cms-sw/cmssw/blob/b0efeefd50e1ea7f64083f0aa1af9066f3430e10/SimGeneral/MixingModule/python/HiEventMixing_cff.py#L22\r\nit seemed difficult to do anything else without overhauling lot's of existing code.\r\n\r\nResolves https://github.com/cms-sw/framework-team/issues/1633\r\nResolves https://github.com/cms-sw/framework-team/issues/1728\r\n\r\n#### PR validation:\r\n\r\n`runTheMatrix.py --limited --use-rntuple` succeeded (except for some workflows that had problems in reading their remote input files)", "branch": "master", "changed_files": 3, "comments": 31, "commits": 6, "created_at": "1766082148", "deletions": 18, "labels": ["core-pending", "operations-pending", "pending-signatures", "orp-pending", "pdmv-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_16_1_X", "number": 49674, "release-notes": [], "review_comments": 0, "state": "open", "title": "Make `--secondfilein` and on-the-fly pileup workflows to use RNTuple when `--use-rntuple` is specified", "updated_at": "1768227809", "user": "makortel"}