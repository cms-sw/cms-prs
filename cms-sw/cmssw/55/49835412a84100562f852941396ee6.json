{"additions": 226, "auther_ref": "HCALRecHitsMiniAOD_1020pre5", "auther_sha": "4744dc273b68f6204b18aff3579503c208e91b22", "author": "Sam-Harper", "body": "In order to facilitate studies exploiting the updated HE depth segmentation, we would like to store a selection of interesting rec-hits around electron/photons in the miniAOD. This will make it easier to study how to use it and is a better option than randomly guessing and putting likely variables in the electron/photon.  \r\n\r\nThis is done in the same way for ECAL rec hits. \r\n\r\nBenchmark sample:\r\n/RelValTTbar_13/CMSSW_10_2_0_pre4-PU25ns_102X_upgrade2018_realistic_v1-v1/GEN-SIM-RECO\r\n\r\ncmsDriver command:\r\n```cmsDriver.py PAT -s PAT --datatier MINIAOD --runUnscheduled --nThreads 8 --mc --era Run2_2018 --scenario pp --conditions 102X_upgrade2018_realistic_v1 --eventcontent MINIAOD --filein file:/opt/ppd/month/harper/mcFiles/RelValTTbar_13__CMSSW_10_2_0_pre4__PU25ns_102X_upgrade2018_realistic_v1-v1__GEN-SIM-RECO__6E01D9DC-9861-E811-9D9B-0CC47A4D76A2.root --no_exec```\r\n\r\nusing 1000 events. \r\n\r\nfrom edmEventSize:\r\n```\r\nHBHERecHitsSorted_reducedEgamma_reducedHBHEHits_PAT. 1077.54 595.63\r\nsize per event  (compressed) 66475.7 -> 65956.4  (0.8% increase)\r\n```\r\nfrom \"ls\" a 0.8% increase\r\n```\r\n-rw-r--r-- 1 mjf21517 cms 69197272 Jun  8 14:19 miniAOD_withHCALRecHits.root\r\n-rw-r--r-- 1 mjf21517 cms 68674012 Jun  8 14:33 miniAOD_withoutHCALRecHits.root\r\n```\r\n \r\naverage number of HCAL hits stored : 20.9\r\n![image](https://user-images.githubusercontent.com/5021403/41163691-a6d5a4c8-6b39-11e8-8ab2-aada552feb31.png)\r\n\r\nI cleaned up the code a little in the interesting rec hit selector to avoid any copy pasting. Also we might have to reduce the HCAL thresholds (currently E>0.8 GeV), need to talk to HCAL to find what is sensible here. \r\n", "branch": "master", "changed_files": 10, "closed_at": "1529692302", "comments": 35, "commits": 2, "created_at": "1528468302", "deletions": 104, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "orp-approved", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "ba63c2701a383688e701f83584109fe981596c8f", "merged_at": "1529692302", "merged_by": "cmsbuild", "milestone": "CMSSW_10_2_X", "number": 23540, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Adding HBHE rechits to miniAOD", "updated_at": "1529692307", "user": "Sam-Harper"}