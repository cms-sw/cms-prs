{"additions": 1496, "auther_ref": "topQuarkAnalysisDeprecated", "auther_sha": "002c1f2268474b52410b09df8a841a1a477d7d07", "author": "makortel", "body": "#### PR description:\r\n\r\nPart of https://github.com/cms-sw/cmssw/issues/36404. Modernization includes\r\n* Move contents of plugin headers to source files\r\n* Use thread-efficient EDModule base classes\r\n* Use of `std::unique_ptr` instead of raw pointers\r\n* Use of `Event::get()` instead of `Event::getByToken()` (not everywhere though)\r\n\r\nNotable EDModules left to legacy (of which `TtFullLepKinSolutionProducer.` is being run in IB tests according to https://github.com/cms-sw/cmssw/issues/36404#issuecomment-988271610)\r\n* `TtSemiEvtSolutionMaker`\r\n  * Uses `TtSemiLRJetCombCalc` that uses `LRHelpFunctions` that calls `gStyle->Set...`. Migrating this would need domain knowledge.\r\n* `TtHadEvtSolutionMaker`\r\n  * Uses `TtHadLRJetCombCalc` that uses `LRHelpFunctions` (see above)\r\n* `TtDilepEvtSolutionMaker`\r\n  * Uses `TtHadEvtSolutionMaker` that calls `TF2::Eval()`. The `TF1::Eval()` can be made thread friendly if the `TF1` is not added to the global list of functions (see e.g. https://github.com/cms-sw/cmssw/pull/18636), but quickly I didn't see similar option for `TF2`.\r\n* `TtFullLepKinSolutionProducer.`\r\n  * Calls `TF2::Ecval()` (see above)\r\n\r\nThese are left to be followed up later (I'll probably open a new issue with the information above).\r\n\r\n#### PR validation:\r\n\r\nUnit tests pass.", "branch": "master", "changed_files": 85, "closed_at": "1643020629", "comments": 16, "commits": 12, "created_at": "1641935032", "deletions": 2065, "labels": ["analysis-pending", "pending-signatures", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "a3aa7d08a3ded0a18fa7833fb3d718bc975e5505", "merged_at": "1643020628", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36692, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Modernize most legacy EDModules in TopQuarkAnalysis package", "updated_at": "1643020629", "user": "makortel"}