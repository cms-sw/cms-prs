{"additions": 481, "auther_ref": "Phase2-WF50", "auther_sha": "8879ad54bd45e96460656e05415e76620ca226b1", "author": "kpedro88", "body": "#### PR description:\r\n\r\nI finally got tired of having to edit code in 3 places to add a special workflow or new fragment. This PR does the following:\r\n1. Consolidates code to add special workflows into a class that can be extended as needed. The class methods are automatically called where necessary, so adding a special workflow now only requires editing `upgradeWorkflowComponents.py`. (This works for almost everything, except premixing, which requires more hacks, so is still mostly done in the old way.) This also enables automatic checking that all special workflow offset values are unique.\r\n2. Automate creation of step lists for phase 1 PU workflows, as was already done for phase 2 a while ago.\r\n3. Consolidates code to add generator fragments with number of events and dataset names for relvals. As above, uses a (very simple) class, and now only requires editing one place.\r\n4. Resolves #28139\r\n5. 'ProdLike' workflow writes AODSIM (requested by @slava77)\r\n6. Aging workflows added in matrix, to be tested in IBs (requested several times by various people)\r\n\r\n#### PR validation:\r\n\r\nNo changes expected in any existing workflow. This was confirmed by checking the output of the following commands after step 3 above to ensure identity:\r\n```\r\nrunTheMatrix.py -n\r\nrunTheMatrix.py -w upgrade -n\r\nrunTheMatrix.py -l 1325.0,1325.1,1325.2,1325.3,1325.4,1325.5,1325.51,1325.6,1325.7,1325.8,1325.9,1325.91,10001.0,10002.0,10003.0,10004.0,10005.0,10006.0,10007.0,10008.0,10009.0,10023.0,10024.0,10024.1,10024.2,10024.3,10024.4,10024.5,10025.0,10026.0,10042.0,10059.0,10071.0,10224.0,10225.0,10424.0,10801.0,10802.0,10803.0,10804.0,10805.0,10806.0,10807.0,10808.0,10809.0,10823.0,10824.0,10824.1,10824.5,10824.6,10824.8,10825.0,10826.0,10842.0,10859.0,10871.0,11024.0,11024.6,11025.0,11224.0,11224.6,11634.0,11634.7,11640.0,11646.0,11650.0,11834.0,11834.99,11846.0,12024.0,12434.0,12634.0,12634.99,12834.0,13034.0,13034.99,20034.0,20434.0,20434.1,20434.21,20493.52,20634.21,20634.99,20661.97,20834.0,21234.0,21634.0,22034.0,22434.0,22834.0,23234.0 --dryRun -j 1\r\n```\r\n", "branch": "master", "changed_files": 5, "closed_at": "1572462614", "comments": 14, "commits": 11, "created_at": "1572032938", "deletions": 606, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "pdmv-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "9a46186eea1ef61c1e2f1b690c5c38eee2976ac2", "merged_at": "1572462614", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28281, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Reorganize upgrade matrix code, address issues", "updated_at": "1572462614", "user": "kpedro88"}