{"additions": 23, "auther_ref": "concurrentLumiConfigBuilder", "auther_sha": "ee5fe8884b178dca0abdd3731c7de4cb5ed1a0e0", "author": "makortel", "body": "#### PR description:\r\n\r\nAs discussed in Mattermost https://mattermost.web.cern.ch/cms-o-and-c/pl/sw55fqpr7pna8x581q453wcsne and reported in #37385, it can happen that the job configuration is generated with cmsDriver without specifying the number of threads (i.e. that is 1), and ends up being used with number of threads being overridden. If the number of concurrent lumis/IOVs is set different from the default in such case, that setting would be lost.\r\n\r\nThis PR overrides the `process.options.numberOfConcurrentLuminosityBlocks` and `process.options.eventSetup.numberOfConcurrentIOVs` when they have been changed from their defaults, regardless of the number of threads.\r\n\r\n#### PR validation:\r\n\r\nChecked with `limited,5.2,140.0,521.0,7.0,300.0,140.0,5.5,511.0,281.0,8.1,534.0,281.0,132.0,280.0,120.0` with `runTheMatrix.py` both `-t 2` option and without that the special cases that \"need\" to be explicitly set to use 1 concurrent lumi get that override in both cases. (I used the same set of workflows as in #35302)", "branch": "master", "changed_files": 1, "comments": 3, "commits": 1, "created_at": "1648667363", "deletions": 11, "labels": ["operations-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_12_4_X", "number": 37417, "release-notes": [], "review_comments": 2, "state": "open", "title": "Set concurrent lumis/IOVs in ConfigBuilder if their value is different from default regardless of the number of threads", "updated_at": "1648668478", "user": "makortel"}