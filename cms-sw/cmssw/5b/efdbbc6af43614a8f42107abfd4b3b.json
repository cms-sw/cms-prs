{"additions": 27, "auther_ref": "FixToRunOnHerwigSample", "auther_sha": "ebd707dc7e5d0fba408b2b8fc6a9dc25d2f2a733", "author": "jhgoh", "body": "The GenParticles2HepMCConverter was written assuming the first two particles in the event record are incident protons. This is is not true for Herwig samples and can introduce crash while invoking RivetAnalysis in the ParticleLevelProducer.\r\n\r\nFor an example, GenParticles list from a 80X TTbar herwig sample appears like below:\r\n```\r\n[ParticleListDrawer] analysing particle collection prunedGenParticles\r\n idx  |    ID -       Name |Stat|  Mo1  Mo2  Da1  Da2 |nMo nDa|    pt       eta     phi   |     px         py         pz        m     |\r\n    0 |     6 -          t | 11 |   42   59   15   15 |  2  1 | 103.091     -2.071 -2.243 |    -64.186    -80.671   -402.211  171.651 |\r\n    1 |    -6 -       tbar | 11 |   42   59   16   16 |  2  1 |  99.332     -0.731  1.018 |     52.164     84.533    -79.272  172.378 |\r\n    2 |    21 -          g | 11 |   42   59   19   19 |  2  1 |  12.628     -0.514 -0.311 |     12.023     -3.862     -6.782   -0.000 |\r\n    3 |  2212 -         p+ |  4 |   -1   -1    4    8 |  0  5 |   0.000  29256.000  0.000 |      0.000      0.000   6500.000    0.938 |\r\n    4 |    82 -   rndmflav | 11 |    3    3   27   27 |  1  1 |   0.000     60.618 -0.000 |      0.000     -0.000   6405.248    0.931 |\r\n    5 |    21 -          g | 11 |    3    3   28   29 |  1  2 |   0.957      6.455  0.459 |      0.858      0.424    304.341    0.000 |\r\n```\r\n\r\nWith this PR, GenParticles2HepMCConverter searches for protons with large |eta| and |pz| to assign incident particles and the first vertices in the HepMC.\r\n\r\nThis will not affect the standard production.\r\nNanoAOD was crashing to process herwig samples, and this PR solves the problem.\r\n\r\n@intrepid42 @gpetruc ", "branch": "master", "changed_files": 2, "closed_at": "1512050035", "comments": 22, "commits": 3, "created_at": "1510921343", "deletions": 13, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "876e7addc253a747586107d641fcb018f15f5b73", "merged_at": "1512050035", "merged_by": "cmsbuild", "milestone": "CMSSW_10_0_X", "number": 21349, "release-notes": [], "review_comments": 7, "state": "closed", "title": "Fix GenParticles2HepMCConverter to run on herwig samples", "updated_at": "1512670369", "user": "jhgoh"}