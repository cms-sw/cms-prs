{"additions": 18, "auther_ref": "13_1_X-daqsource-race", "auther_sha": "a2d9782517e1e371c13f75e2c6d7a698c19aef9e", "author": "smorovic", "body": "#### PR description:\r\n\r\nRare, spurious crashes have been obsever in input source initialization in HLT. Analysis points to a possibility of a vector being reallocated to a different heap location while threads wait on a condition variable.\r\n(Not an urgent issue, since it causes minimal impact online and no data loss).\r\n\r\nSolution is to initialize vectors before spawning threads using them.\r\n\r\nAlso, an opportunity was taken to wrap CV variables within a unique pointer instead of having to delete them in destructor and to remove a memory synchronization point, since creation of a thread already is one.\r\n\r\n#### PR validation:\r\n\r\nTested with 13_0_6 in a DAQ test cluster for production FedRawDataInputSource . Also covered by unit tests for both sources.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport of #41668", "branch": "CMSSW_13_1_X", "changed_files": 4, "comments": 4, "commits": 2, "created_at": "1684084004", "deletions": 31, "labels": ["daq-pending", "pending-signatures", "tests-approved", "orp-pending", "backport"], "milestone": "CMSSW_13_1_X", "number": 41669, "release-notes": [], "review_comments": 0, "state": "open", "title": "[DAQ] fix unsafe vector handling in input sources (13_1_X)", "updated_at": "1684092915", "user": "smorovic"}