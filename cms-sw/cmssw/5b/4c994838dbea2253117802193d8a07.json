{"additions": 90, "auther_ref": "mm_dev_SiStripZeroSuppression_crash_v2_14_2_X", "auther_sha": "b789d31a913aef8bdf5d08f854060a133ed2dfa1", "author": "mmusich", "body": "#### PR description:\r\n\r\nThis PR is meant as a patch for the issue described at https://github.com/cms-sw/cmssw/issues/43078, where the fix consists simply in discarding the APVs in which the request of the strip number is higher than the maximum allowed in the module.\r\n\r\n   * 5318f5d1c371fdb0825c96f1f1dfdd1118d17e00: adds a utility method to `SiStripDetId` that returns if the underlying Strip module is connected to 4 or 6 APVs.\r\n   * ca4a99f3ba9d71e6973f88e120b7bc44de431bc3: discard strip digi payloads with unphysical numer of strips in `processHybrid`, using `SiStripDetId::numberOfAPVs()`.\r\n\r\n#### PR validation:\r\n\r\nRun the following script:\r\n\r\n```bash\r\n#!/bin/bash -ex\r\n\r\n# CMSSW_14_1_5_patch1       \r\n                                                                                              \r\nhltGetConfiguration run:388419 \\\r\n  --globaltag 141X_dataRun3_HLT_v1 \\\r\n  --data \\\r\n  --no-prescale \\\r\n  --no-output \\\r\n  --max-events -1 \\\r\n  --input file:converted.root  > hlt.py\r\n\r\n# Define a function to execute each iteration of the loop\r\nprocess_file() {\r\n    inputfile=\"$1\"\r\n    outputfile=\"${inputfile%.root}\"\r\n    cp hlt.py hlt_${outputfile}.py\r\n    sed -i \"s/file:converted\\.root/\\/store\\/group\\/tsg\\/FOG\\/error_stream_root\\/run388419\\/${inputfile}/g\" hlt_${outputfile}.py\r\n    cmsRun hlt_${outputfile}.py &> \"${outputfile}.log\"\r\n}\r\n\r\n# Export the function so it can be used by parallel\r\nexport -f process_file\r\n\r\n# Find the root files and run the function in parallel using GNU Parallel\r\neos ls /eos/cms/store/group/tsg/FOG/error_stream_root/run388419/ | grep '\\.root$' | parallel -j 4 process_file\r\n```\r\n\r\nwhich runs over the list of error stream files from [run-388419](https://cmsoms.cern.ch/cms/runs/report?cms_run=388419) ([elog/1247892](http://cmsonline.cern.ch/cms-elog/1247892)) where we had in excess of 1k HLT crashes, and didn't observe residual crashes. \r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport, if accepted it will be backported to CMSSW_14_1_X for data-taking purposes\r\n\r\n", "branch": "master", "changed_files": 5, "comments": 11, "commits": 2, "created_at": "1731922725", "deletions": 24, "labels": ["reconstruction-pending", "simulation-approved", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "trk"], "milestone": "CMSSW_14_2_X", "number": 46722, "release-notes": [], "review_comments": 0, "state": "open", "title": "`SiStripZeroSupperssion`: discard processing unphysical cluters in `suppressHybridData`", "updated_at": "1731946800", "user": "mmusich"}