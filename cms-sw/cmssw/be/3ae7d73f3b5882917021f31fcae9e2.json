{"additions": 373, "auther_ref": "Phase2-WF65", "auther_sha": "aaf8a4ab542f3ba6380b424d950c495a13393ba6", "author": "kpedro88", "body": "#### PR description:\r\n\r\nThe upgrade premixing workflow setup is reimplemented to use the special workflow approach. This reduces the number of hacks necessary (though a few are still needed). To facilitate this, PU steps are first added to the list and then specialized (this allows changing PU-related parameters).\r\n\r\nThe names of the premix workflows are adjusted slightly to try to keep the length down.\r\n\r\nA new workflow is added for phase2 premixing using PU50 (rather than PU200, to reduce CPU/mem/disk usage). This will automatically generate PR comparison plots, which helps to test and validate PRs that impact Phase 2 premixing. The PU50 scenario used in this workflow only considers bunch crossings -3,3, as with the other phase 2 PU scenarios.\r\n\r\nThe upgrade workflow names are shortened by eliminating unnecessary words from step names (mostly 'Full'), and preventing the key and special workflow suffix (if any) from being repeated in the names. This also entails a small amount of reorganization in the order of information in the names (key and suffix now come first). The directory and display names were originally:\r\n```\r\n23461.999_NuGun+SingleNuE10_2026D49PU_GenSimHLBeamSpotFull_PMXS1S2PR+PREMIX_2026D49PU_PremixHLBeamSpotFullPU_PMXS1S2PR+DigiFullTriggerPU_PMXS1S2PR_2026D49PU+RecoFullGlobalPU_PMXS1S2PR_2026D49PU+HARVESTFullGlobalPU_PMXS1S2PR_2026D49PU\r\n23461.999 SingleNuE10_2026D49PU_GenSimHLBeamSpotFull_PMXS1S2PR+PREMIX_2026D49PU_PremixHLBeamSpotFullPU_PMXS1S2PR+DigiFullTriggerPU_PMXS1S2PR_2026D49PU+RecoFullGlobalPU_PMXS1S2PR_2026D49PU+HARVESTFullGlobalPU_PMXS1S2PR_2026D49PU\r\n```\r\nand are now reduced to:\r\n```\r\n23461.999_NuGun+2026D49PU_PMXS1S2PR+SingleNuE10_GenSimHLBeamSpot+PREMIX_PremixHLBeamSpotPU+DigiTriggerPU+RecoGlobalPU+HARVESTGlobalPU\r\n23461.999 2026D49PU_PMXS1S2PR+SingleNuE10_GenSimHLBeamSpot+PREMIX_PremixHLBeamSpotPU+DigiTriggerPU+RecoGlobalPU+HARVESTGlobalPU \r\n```\r\n\r\n#### PR validation:\r\n\r\nCompared the commands generated by `runTheMatrix.py -w upgrade -l 23461.97,23461.98,23461.99 --dryRun` before and after this PR to see that they contain the same flags. Also tested the commands for 23461.999.\r\n", "branch": "master", "changed_files": 8, "closed_at": "1596562385", "comments": 74, "commits": 8, "created_at": "1596126011", "deletions": 322, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "operations-approved", "orp-approved", "pdmv-approved", "requires-external", "tests-approved", "upgrade-approved"], "merge_commit_sha": "6fb37cdf106cceded008e8273af5b656c8cd0291", "merged_at": "1596562385", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 30988, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Shorten upgrade workflow names, reorganize premixing workflow setup and add to PR tests for phase 2", "updated_at": "1596562386", "user": "kpedro88"}