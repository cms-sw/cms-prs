{"additions": 14, "auther_ref": "gartung-DataFormats-Math-deltaphi-vdt-fix", "auther_sha": "efb5ba5109d2cb5ed9e2e2479b3e24c5aa092219", "author": "gartung", "body": "DataFormats/Math: Check if diff of floats passed to reco::deltaPhi is less than the precision of floats.\r\n\r\nThis should address a segfault seen in Phase2EndcapRing::computeCrossings when running with cmsRunVDT.\r\n\r\n#### PR description:\r\nAttempt to address this segfault seen when running RECO with cmsRunVDT\r\n```\r\nThread 3 (Thread 0x7f6c69152700 (LWP 30111)):\r\n#0  0x00007f6c9c418bed in poll () from /lib64/libc.so.6\r\n#1  0x00007f6c93791947 in full_read.constprop () from /cvmfs/cms-ib.cern.ch/week1/slc7_amd64_gcc900/cms/cmssw/CMSSW_11_1_X_2020-04-19-2300/lib/slc7_amd64_gcc900/pluginFWCoreServicesPlugins.so\r\n#2  0x00007f6c9379205c in edm::service::InitRootHandlers::stacktraceFromThread() () from /cvmfs/cms-ib.cern.ch/week1/slc7_amd64_gcc900/cms/cmssw/CMSSW_11_1_X_2020-04-19-2300/lib/slc7_amd64_gcc900/pluginFWCoreServicesPlugins.so\r\n#3  0x00007f6c93792d84 in sig_dostack_then_abort () from /cvmfs/cms-ib.cern.ch/week1/slc7_amd64_gcc900/cms/cmssw/CMSSW_11_1_X_2020-04-19-2300/lib/slc7_amd64_gcc900/pluginFWCoreServicesPlugins.so\r\n#4  <signal handler called>\r\n#5  0x00007f6c7cc1e2fa in Phase2EndcapRing::computeCrossings (this=this@entry=0x7f6c4a9fd820, startingState=..., propDir=<optimized out>) at /home/users/gartung/CMSSW_11_1_X_2020-04-19-2300/src/DataFormats/Math/interface/deltaPhi.h:32\r\n#6  0x00007f6c7cc1ec55 in Phase2EndcapRing::groupedCompatibleDetsV(TrajectoryStateOnSurface const&, Propagator const&, MeasurementEstimator const&, std::vector<DetGroup, std::allocator<DetGroup> >&) const () at /cvmfs/cms-ib.cern.ch/week1/slc7_amd64_gcc900\r\n/cms/cmssw/CMSSW_11_1_X_2020-04-19-2300/src/TrackingTools/GeomPropagators/interface/Propagator.h:139\r\n```\r\n", "branch": "master", "changed_files": 1, "closed_at": "1587568852", "comments": 9, "commits": 2, "created_at": "1587506453", "deletions": 2, "labels": ["code-checks-approved", "comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-pending"], "milestone": "CMSSW_11_1_X", "number": 29531, "release-notes": [], "review_comments": 7, "state": "closed", "title": "DataFormats/Math: Fix segfault in deltaPhi when run under cmsRunVDT", "updated_at": "1587569924", "user": "gartung"}