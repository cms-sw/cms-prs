{"additions": 721, "auther_ref": "devel_testDataFormatsScouting_130X", "auther_sha": "a777727b82e2e60329c0b6529f0c2b0793fd3a3e", "author": "missirol", "body": "backport of #41093\r\n\r\n#### PR description:\r\n\r\nThis PR adds a unit test to catch non-backward-compatible changes to the Scouting data formats.\r\n\r\nFrom the description of #41093:\r\n\r\n>This PR adds a refined version of the unit test described in https://github.com/cms-sw/cmssw/issues/41040#issuecomment-1470567862 [*]. The aim of the test is to fail whenever non-backward-compatible changes are introduced in the Scouting data formats.\r\n>\r\n>The implementation of the test could certainly be improved (one suggestion is in https://github.com/cms-sw/cmssw/issues/41040#issuecomment-1470689465), but I decided to open a draft PR because I think the test in this PR is better than nothing. (I plan to address https://github.com/cms-sw/cmssw/issues/41040#issuecomment-1470689465, but I don't have an ETA for that.)\r\n>\r\n>[*]\r\n>\r\n>More precisely, there are two unit tests, one for the Run-2 Scouting data formats (\"Scouting*\"), and one for the Run-3 ones (\"Run3Scouting*\"). The two tests have the same structure:\r\n>\r\n> - a 1st step reads O(100) events from an existing EDM file, and writes the Scouting collections to disk (this first step should fail if non-backward-compatible changes are made to the data formats);\r\n>\r\n> - a 2nd step uses FWLite to print to stdout one entry/object for each of the Scouting data formats being tested. To check that the correct values are read, the test compares the output of step-2 to a reference in the form of a text file. This is currently done for 1 object per data format. It might be necessary to check more than 1 object (and/or more than 1 event), because https://github.com/cms-sw/cmssw/pull/41025#issuecomment-1471777700 showed that some issues can only be spotted when checking multiple objects/events.\r\n\r\n#### PR validation:\r\n\r\nThe new unit tests pass locally.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\n#41093\r\n\r\nUnit test for Scouting data formats in the release cycle currently used online.\r\n", "branch": "CMSSW_13_0_X", "changed_files": 7, "closed_at": "1682490504", "comments": 14, "commits": 2, "created_at": "1679641010", "deletions": 0, "labels": ["core-approved", "fully-signed", "tests-approved", "orp-approved", "backport-ok"], "merge_commit_sha": "93abea9e903a08c4e68c92af3f2d27dac414125b", "merged_at": "1682490504", "merged_by": "cmsbuild", "milestone": "CMSSW_13_0_X", "number": 41168, "release-notes": [], "review_comments": 0, "state": "closed", "title": "a first unit test for backward compatibility of Scouting data formats [`13_0_X`]", "updated_at": "1682490546", "user": "missirol"}