{"additions": 1, "auther_ref": "hcal-tp-emul-inputUpgradeLabel-10_2_0_pre1", "auther_sha": "0892139d9ed476a42971aac633cb11816f9b707a", "author": "christopheralanwest", "body": "The HCAL offline DQM runs on the HcalNZS stream, which contains events for which no zero suppression is applied to the HCAL raw data; such events are needed for validating the HCAL trigger primitive (TP) generation. This PR corrects the behavior of the TP emulation in the HCAL offline DQM. Currently the InputTags for digis in the upgraded portion of the HCAL (HE and HF) are not specified. This results in all of the emulated TPs being set to zero (table below, left column). After the change (right column), the emulated TPs are nonzero and good agreement is seen between data and emulated TPs. The setup for the tests can be found below [1], where in the \"after\" case this PR is merged as well.\r\n\r\nSubdetector | Before changes | After changes\r\n-- | ------------------ | -----------\r\nHBHE | [ETCorr_HBHE_beforefix.pdf](https://github.com/cms-sw/cmssw/files/1938800/ETCorr_HBHE_beforefix.pdf) |  [ETCorr_HBHE_afterfix.pdf](https://github.com/cms-sw/cmssw/files/1938805/ETCorr_HBHE_afterfix.pdf)\r\nHF | [ETCorr_HF_beforefix.pdf](https://github.com/cms-sw/cmssw/files/1938806/ETCorr_HF_beforefix.pdf) | [ETCorr_HF_afterfix.pdf](https://github.com/cms-sw/cmssw/files/1938808/ETCorr_HF_afterfix.pdf)\r\n\r\n\r\n\r\n[1]\r\n```\r\ncmsrel CMSSW_10_2_0_pre1\r\ncd CMSSW_10_2_0_pre1/src\r\ncmsenv\r\ngit cms-addpkg Configuration/DataProcessing\r\nscram b -j4\r\npython $CMSSW_BASE/src/Configuration/DataProcessing/test/RunPromptReco.py --scenario hcalnzsEra_Run2_2018 --dqmSeq @common+@hcal --reco --dqmio --global-tag 101X_dataRun2_Prompt_v9 --lfn=file:/eos/cms/store/data/Commissioning2018/HcalNZS/RAW/v1/000/314/473/00000/5C2FF0C0-3742-E811-810B-FA163ED9F81E.root\r\ncmsRun -e RunPromptRecoCfg.py\r\nDQMIO2histo.py -in output_inDQMIO.root -o histos.root\r\n```", "branch": "master", "changed_files": 1, "comments": 0, "commits": 1, "created_at": "1524488989", "deletions": 0, "labels": [], "milestone": "CMSSW_10_2_X", "number": 23039, "release-notes": [], "review_comments": 0, "state": "open", "title": "Specify digi collections for HCAL TP emulation in offline DQM", "updated_at": "1524489004", "user": "christopheralanwest"}