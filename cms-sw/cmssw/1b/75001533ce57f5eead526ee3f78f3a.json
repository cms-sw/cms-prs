{"additions": 105, "auther_ref": "l1t-1017", "auther_sha": "cd9ff1638ad4c0f5a0f90a618a577fb6429ca345", "author": "cecilecaillol", "body": "#### PR description:\r\n\r\nPorting local https://github.com/cms-l1t-offline/cmssw/pull/1017\r\n\r\nThis PR modifies the [L1TrackerEtMissProducer](https://github.com/cms-l1t-offline/cmssw/blob/phase2-l1t-integration-1230pre4/L1Trigger/L1TTrackMatch/plugins/L1TrackerEtMissProducer.cc) and [L1TrackerEtMissEmulatorProducer](https://github.com/cms-l1t-offline/cmssw/blob/phase2-l1t-integration-1230pre4/L1Trigger/L1TTrackMatch/plugins/L1TrackerEtMissEmulatorProducer.cc) codes to rely on the [L1TrackSelectionProducer](https://github.com/cms-l1t-offline/cmssw/blob/l1t-phase2-v3.4.23/L1Trigger/L1TTrackMatch/plugins/L1TrackSelectionProducer.cc) rather than their own internal track selection and vertex association codes.\r\n\r\nThis PR does not depend on any other external changes or PRs.\r\nPR validation:\r\n\r\nMostly the output of the two modules won't change at all. This simply more accurately reflects how the firmware will behave and makes it so that the same track selection code can be used by multiple modules. The simulation results are exactly the same. There is some slight difference in the behavior of the MET emulator, mostly coming from the fact that the minimum pt set for the simulation is 2.0 and for the emulation it was 2.02, but this is now unified at 2.0 for both simulation and emulation. See the cross checks below.\r\n\r\nThe original output of the ntuple values:\r\n\r\nroot [2] eventTree->Scan(\"trueMET:trueTkMET:trkMET:trkMETEmu\")\r\n************************************************************\r\n*    Row   *   trueMET * trueTkMET *    trkMET * trkMETEmu *\r\n************************************************************\r\n*        0 * 2.3996737 * 38.388885 * 57.587577 *        52 *\r\n*        1 * 40.216548 * 19.016733 * 4.4636359 *     4.625 *\r\n*        2 *         0 * 15.146577 * 30.108165 *     31.25 *\r\n*        3 * 42.769996 * 19.578226 * 35.952037 *     35.25 *\r\n*        4 * 0.4338081 * 26.260469 * 65.721168 *     54.25 *\r\n*        5 * 125.65923 * 41.218193 * 37.652301 *      38.5 *\r\n*        6 * 16.149637 * 9.0316028 * 48.163761 *     46.75 *\r\n*        7 * 26.199499 * 25.994577 * 36.374916 *     41.25 *\r\n*        8 * 53.656692 * 14.420878 * 10.569204 *    11.625 *\r\n*        9 *         0 * 102.31497 * 83.241920 *    87.125 *\r\n************************************************************\r\n\r\nThe output after the changes from this PR:\r\n\r\nroot [2] eventTree->Scan(\"trueMET:trueTkMET:trkMET:trkMETEmu\")\r\n************************************************************\r\n*    Row   *   trueMET * trueTkMET *    trkMET * trkMETEmu *\r\n************************************************************\r\n*        0 * 2.3996737 * 38.388885 * 57.587577 *     54.25 *\r\n*        1 * 40.216548 * 19.016733 * 4.4636359 *       6.5 *\r\n*        2 *         0 * 15.146577 * 30.108165 *        30 *\r\n*        3 * 42.769996 * 19.578226 * 35.952037 *    30.375 *\r\n*        4 * 0.4338081 * 26.260469 * 65.721168 *      61.5 *\r\n*        5 * 125.65923 * 41.218193 * 37.652301 *        39 *\r\n*        6 * 16.149637 * 9.0316028 * 48.163761 *     50.75 *\r\n*        7 * 26.199499 * 25.994577 * 36.374916 *        41 *\r\n*        8 * 53.656692 * 14.420878 * 10.569204 *     9.625 *\r\n*        9 *         0 * 102.31497 * 83.241920 *      82.5 *\r\n************************************************************", "branch": "master", "changed_files": 9, "comments": 9, "commits": 8, "created_at": "1654949263", "deletions": 307, "labels": ["l1-approved", "fully-signed", "tests-rejected", "orp-pending", "upgrade-approved", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 38334, "release-notes": [], "review_comments": 2, "state": "open", "title": "[L1T] phase-2, Use the track selector producer for the MET simulation and emulation", "updated_at": "1658915974", "user": "cecilecaillol"}