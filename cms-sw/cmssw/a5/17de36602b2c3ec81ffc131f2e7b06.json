{"additions": 158, "auther_ref": "UpdatedBTagCandidateKinematics_from-CMSSW_8_0_X_2016-01-12-2300", "auther_sha": "95acaeea9e9c757fba3f4c1f72b490a0c1f982df", "author": "cms-btv-pog", "body": "This PR introduces updated handling of candidate kinematics in the b-tagging code with the goal of improving the agreement between discriminators computed from AOD and MiniAOD (problem reported, for example, in https://hypernews.cern.ch/HyperNews/CMS/get/btag/1232.html).\n\nIn AOD PF candidates and tracks linked to them have their own separate momenta defined while in MiniAOD PackedCandidates store track info with the track momentum set to the candidate momentum in order to save some space.  The main change introduced by this PR is the use of the PF candidate momentum instead of the track momentum where possible. This change results in a better agreement between the b-tag discriminators computed from AOD and those computed from MiniAOD. The improved agreement can be seen in the plots attached below.\n\n**MiniAOD vs AOD CVSv2IVF discriminator before the fix:**\n![miniaod_vs_aod_beforefix](https://cloud.githubusercontent.com/assets/4885289/12398854/83e36946-be16-11e5-83f6-c7533cb03cad.png)\n\n**MiniAOD vs AOD CVSv2IVF discriminator after the fix:**\n![miniaod_vs_aod_afterfix](https://cloud.githubusercontent.com/assets/4885289/12398872/a80eef2a-be16-11e5-9abf-23dcf17dbf40.png)\n\nThe introduced changes leave the overall b-tagging performance essentially unchanged, as can be seen from the plots attached below (before: red circles, after: blue triangles).\n\n**CVSv2IVF performance against light jets:**\n![flaveffvsbeff_dusg_pfcsvv2ivf](https://cloud.githubusercontent.com/assets/4885289/12398972/68355b18-be17-11e5-8233-e577d5a77061.png)\n\n**CVSv2IVF performance against c jets:**\n![flaveffvsbeff_c_pfcsvv2ivf](https://cloud.githubusercontent.com/assets/4885289/12398973/6e91a016-be17-11e5-892e-31b98b3a53a1.png)\n", "branch": "CMSSW_8_0_X", "changed_files": 9, "closed_at": "1453387958", "comments": 8, "commits": 8, "created_at": "1453137194", "deletions": 71, "labels": ["comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "f0a63474fed9c87c63ed011ecbb43ec6ca5580df", "merged_at": "1453387958", "merged_by": "cmsbuild", "milestone": "CMSSW_8_0_X", "number": 12984, "release-notes": [], "review_comments": 3, "state": "closed", "title": "Updated b-tag candidate kinematics", "updated_at": "1453388647", "user": "ferencek"}