{"additions": 2, "auther_ref": "fixNanoAODEraCustomization", "auther_sha": "0a6af20349bf029e763ef897cde88e0eaf4b0dc9", "author": "makortel", "body": "The customizations\r\nhttps://github.com/cms-sw/cmssw/blob/4fdeedc0118aba13987ce237aab0bc9c4b12165f/PhysicsTools/NanoAOD/python/nano_cff.py#L275-L276\r\nand\r\nhttps://github.com/cms-sw/cmssw/blob/4fdeedc0118aba13987ce237aab0bc9c4b12165f/PhysicsTools/NanoAOD/python/nano_cff.py#L282-L283\r\nwere introduced in #25373. The code look like the intention was to call `nanoAOD_runMETfixEE2017()` only if `run2_nanoAOD_94XMiniAODv1` or `run2_nanoAOD_94XMiniAODv2` modifiers are turned on.\r\n\r\nThe actual behavior is, however, different. The lines 276 and 283 contain a *call* to `nanoAOD_runMETfixEE2017()` function (instead of a function \"object\" to be called by `toModify()`), so it is called regardless of the status of the two modifiers (and twice because of the loop). The function itself\r\nhttps://github.com/cms-sw/cmssw/blob/4fdeedc0118aba13987ce237aab0bc9c4b12165f/PhysicsTools/NanoAOD/python/nano_cff.py#L236-L241\r\ndoes not explicitly return anything, so the return value is `None`. The `Modifier` then interprets that\r\nhttps://github.com/cms-sw/cmssw/blob/4fdeedc0118aba13987ce237aab0bc9c4b12165f/FWCore/ParameterSet/python/Config.py#L1354\r\nsuch that the `func` argument is `None`, and there are no keyword arguments, so it has nothing to do.\r\n\r\nIf my guess above on the intention is correct, this PR suggests to fix the behavior to the intended one.\r\n\r\nTested in 10_4_0.", "branch": "master", "changed_files": 1, "comments": 10, "commits": 1, "created_at": "1546618693", "deletions": 2, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "orp-pending", "pending-signatures", "tests-approved", "xpog-pending"], "milestone": "CMSSW_10_5_X", "number": 25587, "release-notes": [], "review_comments": 0, "state": "open", "title": "[RFC] Call nanoAOD_runMETfixEE2017() only if the modifiers are chosen", "updated_at": "1546638148", "user": "makortel"}