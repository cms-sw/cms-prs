{"additions": 2496, "auther_ref": "mlpfproducer", "auther_sha": "e99db9cb8cbe4654e3312cc5046137d597e0ab92", "author": "jpata", "body": "#### PR description:\r\n\r\nThis PR introduces an EDProducer using the MLPF approach, which create `reco::PFCandidates`, which **can be used successfully in downstream CMSSW reconstruction, e.g. AK4 jet clustering**.\r\n\r\nIt's not enabled by default, so nothing should be affected in standard workflows.\r\n\r\nHere's an overview of the changes:\r\n- in RecoParticleFlow/PFProducer, we add **MLPFProducer using TensorFlow-CPU**, (enabled only with the `mlpf` modifier, does not affect standard reco outputs even if enabled)\r\n- the training & sample generation code is located in RecoParticleFlow/PFProducer/test/mlpf_training/\r\n- in Validation/RecoParticleFlow, we modify the PFAnalysisNtuplizer, which was developed for and is currently used only by MLPF to generate training samples\r\n- We add a process modifier `mlpf` and a new workflow `11834.13` where the TF-cpu evaluator of MLPF runs after standard PF and produces a new collection of PFCandidates in the RECO output.\r\n\r\nFurther work is planned to improve the reconstruction quality by retraining the model, and by integrating the ML-produced PFCandidates further with downstream reconstruction. The goal of this PR is to make the MLPF reconstruction approach easily testable and reviewable by the PF group & CMS more widely.\r\n\r\n#### PR validation:\r\n\r\nThe latest status slides are here: https://indico.cern.ch/event/963885/#18-update-on-mlpf.\r\n\r\nCan be validated using\r\n```\r\n$ runTheMatrix.py -l 11834.13\r\n...\r\n$ edmDumpEventContent --all 11834.13_*/step3_inRECOSIM.root | grep 'recoPFCandidates_mlpf'\r\nvector<reco::PFCandidate>             \"mlpfProducer\"              \"\"                \"RECO\"         recoPFCandidates_mlpfProducer__RECO\r\n```\r\nNeeds cms-data/RecoParticleFlow-PFProducer#2.", "branch": "master", "changed_files": 18, "closed_at": "1609770636", "comments": 77, "commits": 6, "created_at": "1604671023", "deletions": 101, "labels": ["code-checks-approved", "dqm-approved", "fully-signed", "operations-approved", "orp-approved", "pdmv-approved", "reconstruction-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "b1eb848eea0229b53887019d5c2953a289d68890", "merged_at": "1609770636", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32048, "release-notes": [], "review_comments": 59, "state": "closed", "title": "MLPF: first integration of EDProducer and training code", "updated_at": "1609770636", "user": "jpata"}