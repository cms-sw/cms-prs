{"additions": 62, "auther_ref": "from-CMSSW_10_1_X_2018-02-14-1100-LCT-BX-shift", "auther_sha": "a44cc35038725c700416de02a90aaba8656a9d73", "author": "dildick", "body": "# Summary:\r\n\r\nThe CSC ALCT/CLCT and LCT central bunch crossing numbers (BX0) are known to have distinct values in the simulation and in the firmware.\r\n\r\nIn the firmware, the conventions are as follows for the central bunch crossing:\r\n* ALCT: BX0 = 3\r\n* CLCT: BX0 = 7\r\n* LCT: BX0 = 8\r\n\r\nIn the simulation however, the conventions were until now:\r\n* ALCT: BX0 = 6\r\n* CLCT: BX0 = 6\r\n* LCT: BX0 = 6\r\n\r\nThis pull request modifies the timing in simulation for the CSC local trigger, CSCTF, EMTF and OMTF to match the firmware.\r\n\r\n# Details:\r\n* This pull request is 3/3 in a series following:\r\n  - 1/3 https://github.com/cms-sw/cmssw/pull/22099\r\n  - 2/3 https://github.com/cms-sw/cmssw/pull/22102\r\n* ALCTs constructed with the ALCT processor will have BX0=8 throughout the simulation. However, right before they are read out, their BX0's are shifted by -5 BX to BX0=3 so that they agree with the firmware. \r\n* CLCTs constructed with the CLCT processor will have BX0=7. However, when CLCTs are used in the\r\nCSCMotherboard to be correlated to ALCTs, their BX0's are shifted by +1 BX to BX0=8. That ensures that ALCT and CLCT timing follow the same definition in the correlation algorithm.\r\n* LCTs constructed with the CSCMotherboard will have BX0=8. This new convention has been communicated with MTF experts. A global constant in CSCConstants `LCT_CENTRAL_BX` and `CSCInputBXShift` in the EMTF configuration ensure that the track-finders are modified accordingly.\r\n* With these changes, the CSC local trigger will no longer need a special option to re-emulate from real data.\r\n\r\nValidation plots can be found here:\r\nhttps://indico.cern.ch/event/707700/contributions/2905136/attachments/1604505/2545291/CSCEmulation20180221.pdf\r\n\r\nRecent results can be found here: https://indico.cern.ch/event/728612/contributions/3001880/attachments/1647291/2633339/180509_csc_dpg.pdf\r\n\r\nFYI @tahuang1991 @ptcox @abrinke1 ", "branch": "master", "changed_files": 14, "closed_at": "1523946454", "comments": 42, "commits": 2, "created_at": "1519236119", "deletions": 33, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "l1-approved", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "1be87b7ead2cf217fd4c92bae94da4fea3da4a95", "merged_at": "1523946454", "merged_by": "cmsbuild", "milestone": "CMSSW_10_2_X", "number": 22288, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Shift the CSC LCT BX0 from 6 to 8 in simulation", "updated_at": "1544497837", "user": "dildick"}