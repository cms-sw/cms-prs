{"additions": 10, "auther_ref": "CMSSW_11_2_X_tau-pog_PVrefitFixForTauRecoAtMini", "auther_sha": "8ae31ec250918012bfbfb137c8105a2f183e7890", "author": "cms-tau-pog", "body": "\r\n#### PR description:\r\n\r\nAs title says; in miniAOD samples (recent 94X/102X productions) there are rare tracks within pat:PackedCandidates (mainly lostTracks collection) with ill-defined momenta, i.e. pt being inf and/or eta nan. Those tracks used to (re)fit tau vertex result with a vertex with an undefined position (reco::Vertex::Point(nan,nan,nan)), but claiming to be a valid transient vertex. This PR protects against such issues - ill-defined tracks are not used for the fit and vertices with invalid position are not used for further processing.\r\n\r\nThis PR has not impact on official workflows, while it fixes issue causing failures in the tauReco@mini (unoffical) workflow.\r\n\r\nWe foresee a backport to 10_6_X release series.\r\n\r\nIt was not checked if the ill-defined momenta are feature introduced in creation of pat::PackedCandidates (it can be caused either by compression or forcing a given mass of a candidate) or already original reco::Tracks are affected => probably should be followed up by XPOG. An example of problematic pat::PackedCandidate can be found in /store/mc/RunIIAutumn18MiniAOD/TauGun_Pt-15to3000_13TeV_pythia8/MINIAODSIM/102X_upgrade2018_realistic_v15-v1/120000/1C5E6BED-FAFA-BC49-AC3C-DDBCC35CBE24.root, Run 1, Event 1556024, LumiSection 1557.\r\n\r\n\r\n#### PR validation:\r\n\r\n* Validated with tauReco@mini (unofficial) workflow that failures observed with original code are fixed.\r\n* Matrix tests (`runTheMatrix.py -l limited -i all --ibeos`) successful.\r\n\r\n", "branch": "master", "changed_files": 2, "closed_at": "1601703285", "comments": 22, "commits": 2, "created_at": "1601042464", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "5afbe348771efa15c31c4bffc45742ba177b5202", "merged_at": "1601703284", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31582, "release-notes": [], "review_comments": 5, "state": "closed", "title": "Protect against ill-defined track momenta and reffited tau vertices for tauReco@mini", "updated_at": "1601703285", "user": "mbluj"}