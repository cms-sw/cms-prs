{"additions": 0, "auther_ref": "tensorflowRemoveLogging", "auther_sha": "bafd04e3d12cac062820dba9139434e52a8e0cbe", "author": "makortel", "body": "#### PR description:\r\n\r\nThe `setLogging()` calls `setenv()`, which is not required to be thread safe, and specifically in glibc leads to a race condition with any concurrent `getenv()` calls. For more information see https://github.com/cms-sw/cmssw/issues/46002#issuecomment-2361846551. There is circumstantial evidence these specific `setenv()` calls could be causing the rare crash reported in https://github.com/cms-sw/cmssw/issues/44659.\r\n\r\nThis PR should probably be accompanied with a PR to cmsdist setting `TF_CPP_MIN_LOG_LEVEL=3` in the Tensorflow toolfile.\r\n\r\n#### PR validation:\r\n\r\nCode compiles, and tracing (with gdb) `setenv()` calls in workflow 12861.0 step2 no longer shows `setenv()` calls called in the framework's parallel section.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nGood question if this should be backported. The race condition exists in earlier releases, but we haven't seen crash reports from production. Maybe 14_1_X and 14_0_X could still be useful?", "branch": "master", "changed_files": 19, "comments": 3, "commits": 1, "created_at": "1726763060", "deletions": 34, "labels": ["reconstruction-pending", "dqm-pending", "l1-pending", "hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "upgrade-pending", "code-checks-approved", "ml-pending"], "milestone": "CMSSW_14_2_X", "number": 46065, "release-notes": [], "review_comments": 0, "state": "open", "title": "Remove `tensorflow::setLogging()` as thread-unsafe", "updated_at": "1726763181", "user": "makortel"}