{"additions": 43, "auther_ref": "CMSSW_10_3_0_pre5/sign1049/hitPairLimit", "auther_sha": "a55ba60a4209d3dd16dc190115fc16e5bbc7ced0", "author": "slava77", "body": "This PR is somewhat inspired by issues reported in https://hypernews.cern.ch/HyperNews/CMS/get/tier0-Ops/2014.html\r\n\r\nThe target module(s) in this PR are of HitPairEDProducer kind.\r\nTo define a limit I used a somewhat ad-hoc limit of \\~0.5 GB of output data per event.\r\nThis leads to \r\n- a limit of 50M pairs for produceIntermediateHitDoublets = True (producing 2 ints per entry)\r\n- a limit of 12M pairs for produceSeedingHitSets = True (producing 4 rechit pointers per entry)\r\n\r\nAs a specific case test, I used PromptReco_Run323420_EGamma from the HN thread and find that with this PR the job is expected to be processable:\r\n- single thread RSS peak moves down from 22GB to 7GB\r\n    - 8-thread RSS peak with this PR is around 13GB\r\n\r\nNote that I made a guess for a bottom-up limit: for 10K real particles in an event (PU200 has about 10K tracking particles with pt>0.5 GeV and |eta|<4), for at worst \\~50 layer pairs (as a still sensible large number)\r\n- 12M limit would correspond to \\~4% purity in created pairs\r\n- 50M limit would correspond to \\~1% purity in created pairs\r\n\r\nThis sounds safe enough from these \"first principles\".\r\n\r\n\r\n@makortel @rovere @VinInn \r\nplease let me know if you have any indications that these limits can actually be exceeded in processing of events with sensible physics content.\r\nIf such phase space exists and has to be tracked, perhaps some more creative configuration in the seeding can be made instead.\r\n\r\n", "branch": "master", "changed_files": 22, "closed_at": "1539930160", "comments": 16, "commits": 5, "created_at": "1538896393", "deletions": 24, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "a3e6eb3a9732f39996b8dfb00a3447aa725ffc09", "merged_at": "1539930160", "merged_by": "cmsbuild", "milestone": "CMSSW_10_4_X", "number": 24818, "release-notes": [], "review_comments": 0, "state": "closed", "title": "(re)introduce hit pair limit in iterative tracking seeding", "updated_at": "1539930160", "user": "slava77"}