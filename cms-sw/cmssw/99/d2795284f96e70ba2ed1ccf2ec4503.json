{"additions": 87, "auther_ref": "alca-tkStatusDCS_12_3_X", "auther_sha": "7b27e36f10241daa87bf02c760a58c683cedcb88", "author": "francescobrivio", "body": "#### PR description:\r\nModernize the `DQM/BeamMonitor/plugins/TKStatus` plugin to use `DCSRecord` token in case the DCS information from SCAL is not available (i.e. from Run3 onwards).\r\n\r\nI'm testing this with:\r\n```\r\ncmsRun DQM/Integration/python/clients/beam_dqm_sourceclient-live_cfg.py unitTest=True\r\n```\r\nbut I get the following error:\r\n```\r\n----- Begin Fatal Exception 11-Mar-2022 16:14:59 CET-----------------------\r\nAn exception of category 'ProductNotFound' occurred while\r\n   [0] Processing  Event run: 344518 lumi: 2 event: 31571 stream: 0\r\n   [1] Running path 'p'\r\n   [2] Calling method for module TKStatus/'dqmTKStatus'\r\nException Message:\r\nPrincipal::getByToken: Found zero products matching all criteria\r\nLooking for type: DCSRecord\r\nLooking for module label: onlineMetaDataDigis\r\nLooking for productInstanceName: \r\n\r\n   Additional Info:\r\n      [a] If you wish to continue processing events after a ProductNotFound exception,\r\nadd \"SkipEvent = cms.untracked.vstring('ProductNotFound')\" to the \"options\" PSet in the configuration.\r\n\r\n----- End Fatal Exception -------------------------------------------------\r\n\r\n```\r\neven though I have checked that the product is present in the event with:\r\n```\r\nedmDumpEventContent /eos/cms/store/express/Commissioning2021/ExpressCosmics/FEVT/Express-v1/000/344/518/00000/8ae6d6f6-7859-4089-84dd-4a5d89deb5df.root\r\n```\r\nwhich results in\r\n```\r\nType                                  Module                      Label             Process   \r\n----------------------------------------------------------------------------------------------\r\nGlobalObjectMapRecord                 \"hltGtStage2ObjectMap\"      \"\"                \"HLT\"     \r\nedm::TriggerResults                   \"TriggerResults\"            \"\"                \"HLT\"     \r\ntrigger::TriggerEvent                 \"hltTriggerSummaryAOD\"      \"\"                \"HLT\"     \r\nFEDRawDataCollection                  \"rawDataCollector\"          \"\"                \"LHC\"     \r\nCSCTriggerContainer<csctf::TrackStub>    \"csctfDigis\"                \"DT\"              \"RECO\"    \r\nCTPPSRecord                           \"onlineMetaDataDigis\"       \"\"                \"RECO\"    \r\nDCSRecord                             \"onlineMetaDataDigis\"       \"\"                \"RECO\"    \r\n....\r\n```\r\nWhat am I something/doing wrong? \r\nFYI @mmusich\r\n\r\n----\r\nI'll add a better description once the error is fixed and the PR is complete\r\n", "branch": "master", "changed_files": 3, "comments": 0, "commits": 1, "created_at": "1647008459", "deletions": 73, "labels": ["dqm-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_12_4_X", "number": 37214, "release-notes": [], "review_comments": 0, "state": "open", "title": "[RFC] Modernize `DQM/BeamMonitor/plugins/TKStatus` plugin", "updated_at": "1647008483", "user": "francescobrivio"}