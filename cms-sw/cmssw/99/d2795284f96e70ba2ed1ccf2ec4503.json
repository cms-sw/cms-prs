{"additions": 117, "auther_ref": "alca-tkStatusDCS_12_3_X", "auther_sha": "fab8b2b56bf7116096e3dcf9da32bae8e500653a", "author": "francescobrivio", "body": "#### PR description:\r\nIn the same spirit of #29198, #35782 and #37084, this PR modernizes the `DQM/BeamMonitor/plugins/TKStatus` plugin to use `DCSRecord` token in case the DCS information from SCAL is not available (i.e. from Run3 onwards).\r\nChanges:\r\n - unified `TKStatus.cc` and `TKStatus.h`\r\n - added `DCSRecord` consumption (and a logic to choose between it and `DCSstatus`)\r\n - added `process.onlineMetaDataDigis` unpacker in the only DQM client running in production that uses TkStatus\r\n - added `process.onlineMetaDataDigis` unpacker to a bunch of configs under `DQM/BeamMonitor/test` that were importing and using TkStatus\r\n\r\n#### PR validation:\r\nCode compiles.\r\nTested by running on run `348490`:\r\n```\r\ncmsRun DQM/Integration/python/clients/beam_dqm_sourceclient-live_cfg.py unitTest=True dataset='/ExpressCosmics/Commissioning2022-Express-v1/FEVT' runNumber=348490\r\n```\r\nwhich has only Pixels ON.\r\nAnd by running on run `348587`:\r\n```\r\ncmsRun DQM/Integration/python/clients/beam_dqm_sourceclient-live_cfg.py unitTest=True dataset='/ExpressCosmics/Commissioning2022-Express-v1/FEVT' runNumber=348587\r\n```\r\nwhich has both Pixel and Strips ON.\r\n\r\n#### Backport\r\nA backport to 12_3_X is provided in #37223\r\nA backport to 12_2_X is provided in #37224", "branch": "master", "changed_files": 12, "closed_at": "1647258908", "comments": 12, "commits": 1, "created_at": "1647008459", "deletions": 74, "labels": ["dqm-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "689d470d0efe7691546d2aa4606ac60c68c2e13e", "merged_at": "1647258908", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 37214, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Modernize `DQM/BeamMonitor/plugins/TKStatus` plugin", "updated_at": "1647258908", "user": "francescobrivio"}