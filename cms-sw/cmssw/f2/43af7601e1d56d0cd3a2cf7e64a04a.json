{"additions": 711, "auther_ref": "pvSorting-from740p3-enabled", "auther_sha": "e6fa6d30c689174004e02e7311f18d8e111b7394", "author": "arizzi", "body": "This PR is NOT YET FINAL but it can be used to track the discussion on this new feature.\n\nA new producer is introduced to sort PV with clustered pt2 instead of single track pt2.\nTracks or PFCands are first assigned to PV using different criteria (including BTV jetAxis distance) and then the per-PV objects are clustered into jets.\n\nThe final sum pt2 is obtained summing up the pt^2 of\n- leptons (only in PF case, otherwise they are handled as normal tracks)\n- jets (removing 20% of their pt to account for their resolution)\n- vertex tk met (removing 2*sqrt(sumPt) to account for the resolution)\n\nIn this PR the \"track\" (non PF) version of the sorted is also inserted as a replacement of the standard offlinePrimaryVertex.\n\nMore tests will follow, but preliminary numbers show a recovery of half of the inefficiency in critical samples (e.g. ZH with ZtoNuNu and HtoBB ) and no degradation if samples where pv[0] is the correct one in >99% of the cases.\n\nIn the plot below you can see in red the efficiency of pv[0] while the other colors represents different setup (all very similar) of the new sorting.\n\n![plot_all_vspt_aodout-zh_htobb_ztonunu_m-125_13tev_powheg-herwigpp-pu40bx25_phys14_25_v1-v1-40778748-2072-e411-8840-00266cfefe1c root](https://cloud.githubusercontent.com/assets/5022358/5821630/de6e663e-a0cd-11e4-8571-582c8a9706ab.png)\n\n@ferencek @VinInn @rovere @pvmulder @silviodonato\n", "branch": "CMSSW_7_4_X", "changed_files": 16, "closed_at": "1422297176", "comments": 24, "commits": 11, "created_at": "1421769670", "deletions": 6, "labels": ["comparison-available", "fastsim-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "86f9fa6d82f754de5e63119ce037863d47f1411b", "merged_at": "1422297176", "merged_by": "davidlange6", "milestone": "Next CMSSW_7_4_X", "number": 7285, "release-notes": [], "review_comments": 4, "state": "closed", "title": "Introduce better PV sorting ", "updated_at": "1422354444", "user": "arizzi"}