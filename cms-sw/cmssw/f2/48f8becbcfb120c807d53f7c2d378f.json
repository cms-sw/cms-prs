{"additions": 20, "auther_ref": "fix_default_VtxSmearing", "auther_sha": "142a0ab5cc31e5fc52ff68adf29b9f19051abffe", "author": "francescobrivio", "body": "#### PR description:\r\nAddressing issue https://github.com/cms-sw/cmssw/issues/47182.\r\n\r\nIn this PR I'm updating the ConfigBuilder script to make sure that an exception is raised in case a cmsDriver command for MC is launched without the `--beamspot` parameter in the GEN-SIM step.\r\nAdditionally I:\r\n- Unified the `VtxSmearedDefaultKey` and `VtxSmearedHIDefaultKey` default values to be `DBrealistic`\r\n- Updated the TSG MC addOnTests with `--beamspot DBrealistic`\r\n\r\n#### PR validation:\r\nI have tested this PR in multiple conditions (Data,MC) x (pp,HI,cosmics) and verified that it behaves as expected with:\r\n```\r\nrunTheMatrix.py -l 16834.0,312.0,8.0,145.713,4.22,142.0 -j 12 --ibeos\r\naddOnTests.py\r\n```\r\n\r\nAdditionally I verified that the command:\r\n```\r\ncmsDriver.py Configuration/GenProduction/python/GEN-Run3Winter25wmLHEGS-00006-fragment.py \\\r\n  --python_filename test_1_GS_MC.py \\\r\n  --eventcontent RAWSIM,LHE --customise Configuration/DataProcessing/Utils.addMonitoring \\\r\n  --datatier GEN-SIM,LHE --fileout file:GEN-Run3Winter25wmLHEGS-00006.root \\\r\n  --conditions 142X_mcRun3_2025_realistic_v4 \\\r\n  --customise_commands process.RandomNumberGeneratorService.externalLHEProducer.initialSeed=\"int(${SEED})\"\\\\nprocess.source.numberEventsInLuminosityBlock=\"cms.untracked.uint32(100)\" \\\r\n  --step LHE,GEN,SIM --geometry DB:Extended \\\r\n  --era Run3_2024 --no_exec --mc -n 1\r\n```\r\n(where the `--beamspot` option is missing) raises the following exception:\r\n```\r\nLHE,GEN,SIM,ENDJOB\r\nTraceback (most recent call last):\r\n  File \"/afs/cern.ch/work/f/fbrivio/beamSpot/2025/fix_default_VtxSmearing/CMSSW_15_0_X_2025-01-26-0000/bin/el9_amd64_gcc12/cmsDriver.py\", line 40, in <module>\r\n    run()\r\n  File \"/afs/cern.ch/work/f/fbrivio/beamSpot/2025/fix_default_VtxSmearing/CMSSW_15_0_X_2025-01-26-0000/bin/el9_amd64_gcc12/cmsDriver.py\", line 14, in run\r\n    configBuilder = ConfigBuilder(options, with_output = True, with_input = True)\r\n  File \"/afs/cern.ch/work/f/fbrivio/beamSpot/2025/fix_default_VtxSmearing/CMSSW_15_0_X_2025-01-26-0000/src/Configuration/Applications/python/ConfigBuilder.py\", line 258, in __init__\r\n    self.define_Configs()\r\n  File \"/afs/cern.ch/work/f/fbrivio/beamSpot/2025/fix_default_VtxSmearing/CMSSW_15_0_X_2025-01-26-0000/src/Configuration/Applications/python/ConfigBuilder.py\", line 1064, in define_Configs\r\n    raise Exception(\"Missing \\'--beamspot\\' option in the cmsDriver command!\")\r\nException: Missing '--beamspot' option in the cmsDriver command!\r\n```\r\n\r\n#### Backport:\r\nNot a backport, but backports can be opened in case @cms-sw/pdmv-l2 experts think it could be useful.", "branch": "master", "changed_files": 4, "comments": 29, "commits": 4, "created_at": "1737908077", "deletions": 14, "labels": ["hlt-pending", "operations-pending", "pending-signatures", "orp-pending", "pdmv-pending", "tests-started", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_15_0_X", "number": 47188, "release-notes": [], "review_comments": 4, "state": "open", "title": "Update beamspot option in ConfigBuilder", "updated_at": "1738067287", "user": "francescobrivio"}