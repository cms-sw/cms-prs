{"additions": 584, "auther_ref": "SlimPFHit81", "auther_sha": "fe93fd73c76925293edb6d2a18584132bfffbd94", "author": "VinInn", "body": "made on top of #14058 to avoid merge conflicts.\n\nWhat has been done?\nremoved all positional content\nadd a pointer to the corresponding CaloCell (itself improved to satifly PF needs)\nforward all positional access methods to caloCell\nmade neighebours a single vector (transient, so just index in the collection)\nmove to float for energy and time\n\nCaveat:\nThis would have been all trivial if was not for the depth correctiion in EF.\nhttps://github.com/cms-sw/cmssw/compare/CMSSW_8_1_X...VinInn:SlimPFHit81#diff-4a5cef800feb39968287c389658617bcL85\nWhat I did is simply to double the geometry of EF: now each IdealZPrism owns a copy of itslelf with PF depth-correction applied (as magic numbers)\nhttps://github.com/cms-sw/cmssw/compare/CMSSW_8_1_X...VinInn:SlimPFHit81#diff-1a95dcb4933ebfc4bbc6f2bf984cc933R47\n\nwhat will not work?\nanybody accessing positional content of PFRecHIt from reco-files w/o protection.\nIn the released code this affects only  FWPFCandidateDetailView (note that instead FWPFCandidateWithHitsProxyBuilder works out of the box, so a solution internal to FireWorks exists\nas acknowledged by Alja)\nvalidate.C will require to drop few histos (eta/phi of PFRecHit)\nas already noted no DQM/Validatation code exists for PF, so no problem there ;-)\n\nwhat we gain?\na solid 6% of total time of HLT above what already gained so far.\n\nminor regression observed most probably related to numerics\nhttp://innocent.home.cern.ch/innocent/regress/pu35_SlimPFHit3/\n", "branch": "CMSSW_8_1_X", "changed_files": 46, "closed_at": "1461750606", "comments": 53, "commits": 15, "created_at": "1461076496", "deletions": 873, "labels": ["comparison-available", "core-approved", "db-pending", "geometry-approved", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved", "visualization-approved"], "merge_commit_sha": "8f622e0dd743afebecb40d70f0a75bab608c875a", "merged_at": "1461750606", "merged_by": "davidlange6", "milestone": "Next CMSSW_8_1_X", "number": 14151, "release-notes": [], "review_comments": 17, "state": "closed", "title": "Slim down PFRecHit", "updated_at": "1461750606", "user": "VinInn"}