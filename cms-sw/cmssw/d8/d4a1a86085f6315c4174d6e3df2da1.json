{"additions": 43, "auther_ref": "CMSSW_10_2_5_patch1/sign1049/hitPairLimit", "auther_sha": "fcc45273cd02a2f429e56912a40814ec3a944b22", "author": "slava77", "body": "backport of #24818\r\n\r\ncopy-paste of the description in 104X follows:\r\n\r\nThis PR is somewhat inspired by issues reported in https://hypernews.cern.ch/HyperNews/CMS/get/tier0-Ops/2014.html\r\n\r\nThe target module(s) in this PR are of HitPairEDProducer kind.\r\nTo define a limit I used a somewhat ad-hoc limit of \\~0.5 GB of output data per event.\r\nThis leads to \r\n- a limit of 50M pairs for produceIntermediateHitDoublets = True (producing 2 ints per entry)\r\n- a limit of 12M pairs for produceSeedingHitSets = True (producing 4 rechit pointers per entry)\r\n\r\nAs a specific case test, I used PromptReco_Run323420_EGamma from the HN thread and find that with this PR the job is expected to be processable:\r\n- single thread RSS peak moves down from 22GB to 7GB\r\n    - 8-thread RSS peak with this PR is around 13GB\r\n\r\nNote that I made a guess for a bottom-up limit: for 10K real particles in an event (PU200 has about 10K tracking particles with pt>0.5 GeV and |eta|<4), for at worst \\~50 layer pairs (as a still sensible large number)\r\n- 12M limit would correspond to \\~4% purity in created pairs\r\n- 50M limit would correspond to \\~1% purity in created pairs\r\n\r\nThis sounds safe enough from these \"first principles\".\r\n", "branch": "CMSSW_10_2_X", "changed_files": 22, "closed_at": "1545054215", "comments": 32, "commits": 5, "created_at": "1539945329", "deletions": 24, "labels": ["backport-ok", "comparison-available", "hold", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "milestone": "CMSSW_10_2_X", "number": 24942, "release-notes": [], "review_comments": 0, "state": "closed", "title": "(re)introduce hit pair limit in iterative tracking seeding (port of #24818 )", "updated_at": "1545054216", "user": "slava77"}