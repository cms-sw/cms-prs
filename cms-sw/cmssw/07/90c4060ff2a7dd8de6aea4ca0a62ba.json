{"additions": 5, "auther_ref": "XrdRequestManager-traceroute-safety", "auther_sha": "87e247088216be3817e91c5d945ab9005b6bb4c6", "author": "dan131riley", "body": "#### PR description:\r\n\r\nThis PR adds pointer safety tests to the `tracerouteRedirections()` function, which is called to report xrootd open failures.  Prior to this, tests (from Cornell) were segfaulting due to empty responses for items to be reported:\r\n```\r\n(gdb) p auth_method\r\n$3 = std::unique_ptr<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >> = {\r\n  get() = 0x0\r\n}\r\n(gdb) p stack_ip_method\r\n$4 = std::unique_ptr<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >> = {\r\n  get() = 0x0\r\n}\r\n(gdb) p ip_method\r\n$5 = std::unique_ptr<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >> = {\r\n  get() = 0x0\r\n}\r\n(gdb) p hostname_method\r\n$6 = std::unique_ptr<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >> = {\r\n  get() = 0x0\r\n}\r\n(gdb) p host\r\n$7 = (const XrdCl::HostInfo &) @0x7f25fbe2b5c8: {\r\n  flags = 3610247169,\r\n  protocol = 1297,\r\n  loadBalancer = false,\r\n  url = {\r\n    pHostId = \"cmsxrootd-site2.fnal.gov:1093\",\r\n    pProtocol = \"root\",\r\n    pUserName = \"\",\r\n    pPassword = \"\",\r\n    pHostName = \"cmsxrootd-site2.fnal.gov\",\r\n    pPort = 1093,\r\n    pPath = \"\",\r\n    pParams = std::map with 1 element = {\r\n      [\"xrdcl.requuid\"] = \"b8f755b2-a314-48cd-a6e4-c7459fa9cdf3\"\r\n    },\r\n    pURL = \"root://cmsxrootd-site2.fnal.gov:1093/?xrdcl.requuid=b8f755b2-a314-48cd-a6e4-c7459fa9cdf3\"\r\n  }\r\n}\r\n```\r\n\r\n#### PR validation:\r\n\r\nTrivial technical fix.  Test jobs that previously failed xrootd file opens fairly frequently and segfaulted now consistently report the error and exit properly.", "branch": "master", "changed_files": 1, "comments": 7, "commits": 1, "created_at": "1766766765", "deletions": 4, "labels": ["core-pending", "pending-signatures", "tests-rejected", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_16_1_X", "number": 49704, "release-notes": [], "review_comments": 0, "state": "open", "title": "Pointer safety protection in XrdAdaptor error reporting", "updated_at": "1767022055", "user": "dan131riley"}