{"additions": 1435, "auther_ref": "dev_SiStripLorentzAngleMonitor_13_2_X_backport", "auther_sha": "5566c71636896c74935259881a1e24ce1d0ab2ec", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/42574\r\nbackport of https://github.com/cms-sw/cmssw/pull/42680\r\n\r\nFrom the original PRs:\r\n\r\n#### PR description:\r\n\r\nThis PR introduces a PCL-like workflow for SiStrip Lorentz Angle Monitoring (and potentially calibration), by using the `SiStripCalCosmics` dataset in input. The setup closesly resemble the one presented multiple times (see e.g. [this talk](https://indico.cern.ch/event/1271467/contributions/5350054/attachments/2624636/4538685/20230404_RWalsh_StripsCalibLA.pdf)) in which the hall mobility of the strips modules (only TIB and TOB for the time being, grouped in regions sharing same layer / module type) is estimated by fitting the distribution of the Strip cluster multiplicity as a function of the track grazing angle.  \r\nThe  `SiStripCalCosmics`  AlCaReco producer is added to the `ExpressCosmics` PD in `autoAlCa` while the new `PromptCalibProdSiStripLA` ALCAPrompt producer is introduced in several configuration files in  `Configuration/StandardSequences`  package. \r\nAs a minimal follow-up, in order to be able to support uploads from the Prompt Calibration Loop:\r\n   * updated `DropBoxMetaData` writer and reader configuration files\r\n   * provided steering meta-data for upload to prod / prep and for the multi-run harvesting case\r\n   * added `SiStripLorentzAngle` workflow to `Calibration/TkAlCaRecoProducers/test/testPCLAlCaHarvesting.py`\r\n   \r\n#### PR validation:\r\n   \r\nRun the following command:\r\n\r\n```\r\ncmsDriver.py testReAlCa -s ALCA:PromptCalibProdSiStripLA --conditions 130X_dataRun3_Prompt_v2 --scenario cosmics --data --era Run3_2023 --datatier ALCARECO --eventcontent ALCARECO --processName=ReAlCa -n 100000 --dasquery='file dataset=/Cosmics/Commissioning2023-SiStripCalCosmics-PromptReco-v1/ALCARECO run=364141' --nThreads=4 \r\n```\r\nfollowed by:\r\n\r\n```\r\ncmsDriver.py stepHarvest -s ALCAHARVEST:SiStripLA --conditions 130X_dataRun3_Prompt_v2 --scenario pp --data --era Run3_2023 -n -1 --filein file:PromptCalibProdSiStripLA.root\r\n```\r\n\r\nand obtained reasonable output DQM and db files.\r\nAlso run successfully the augmented relval wf 1005.0 (`runTheMatrix.py -l 1005.0 -t 4 -j 8 --ibeos`.  \r\n   \r\n`scram b runtests` runs fine.   \r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nCombined backport of https://github.com/cms-sw/cmssw/pull/42574 and https://github.com/cms-sw/cmssw/pull/42680\r\nWhile this PR is not strictly needed for the rest of the 2023 data-taking ppRef / HI runs, it would be nice to have it included in the next 13.2.X (if that's possible) in order to profit of the testing machinery setup at Tier-0, in order to ask for a dedicated replay. ", "branch": "CMSSW_13_2_X", "changed_files": 28, "comments": 4, "commits": 4, "created_at": "1693382833", "deletions": 16, "labels": ["alca-pending", "db-pending", "operations-pending", "pending-signatures", "tests-approved", "orp-pending", "pdmv-pending", "upgrade-pending", "backport-ok", "trk"], "milestone": "CMSSW_13_2_X", "number": 42683, "release-notes": [], "review_comments": 0, "state": "open", "title": "[13.2.X] Introduce PCL-like workflows for SiStrip Lorentz Angle Monitoring (and potentially calibration)", "updated_at": "1693399435", "user": "mmusich"}