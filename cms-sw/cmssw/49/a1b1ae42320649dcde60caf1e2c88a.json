{"additions": 94, "auther_ref": "DQMRootSource-fallback-file", "auther_sha": "d443bebe88dffa7312898afa8fc30d356a9a3584", "author": "dan131riley", "body": "#### PR description:\r\n\r\nThis PR adds AAA fallback file open logic to the DQMRootSource, resolving issue #27724.  The logic is patterned on RootInputFileSequence, which is structurally very similar.  There is some annoying code repetition because of slight differences in the logic for the main and fallback case.\r\n\r\n#### PR validation:\r\n\r\nThe fallback logic was tested with the test case from #27724.  Fallback logic worked as expected:\r\n```\r\n24-Sep-2019 17:02:14 CEST  Initiating request to open file root://eoscms.cern.ch//eos/cms/store/data/Run2018D/ZeroBias/DQMIO/PromptReco-v2/000/323/940/00000/9F411A2F-9C94-D54F-894B-83D60BF55C41.root\r\n%MSG-w XrdAdaptorInternal:  AfterModBeginStream 24-Sep-2019 17:02:16 CEST  BeforeEvents\r\nFailed to open file at URL root://eoscms.cern.ch:1094//eos/cms/store/data/Run2018D/ZeroBias/DQMIO/PromptReco-v2/000/323/940/00000/9F411A2F-9C94-D54F-894B-83D60BF55C41.root.\r\n%MSG\r\n%MSG-w XrdAdaptorInternal:  AfterModBeginStream 24-Sep-2019 17:02:16 CEST  BeforeEvents\r\nFailed to open file at URL root://eoscms.cern.ch:1094//eos/cms/store/data/Run2018D/ZeroBias/DQMIO/PromptReco-v2/000/323/940/00000/9F411A2F-9C94-D54F-894B-83D60BF55C41.root?tried=.\r\n%MSG\r\n24-Sep-2019 17:02:16 CEST  Initiating request to open fallback file root://xrootd-cms.infn.it//store/data/Run2018D/ZeroBias/DQMIO/PromptReco-v2/000/323/940/00000/9F411A2F-9C94-D54F-894B-83D60BF55C41.root\r\n%MSG-w XrdAdaptor:  AfterModBeginStream 24-Sep-2019 17:02:18 CEST BeforeEvents\r\nData is served from T2_ES_IFCA instead of original site infn.it\r\n%MSG\r\n24-Sep-2019 17:02:20 CEST  Successfully opened fallback file root://xrootd-cms.infn.it//store/data/Run2018D/ZeroBias/DQMIO/PromptReco-v2/000/323/940/00000/9F411A2F-9C94-D54F-894B-83D60BF55C41.root\r\n```\r\nand it was confirmed that the FJR contained the correct fallback PFN.\r\n\r\nA limited matrix is in process, but no regressions are expected as the matrix test cases do not use remote DQM files so the fallback logic would not be engaged.", "branch": "master", "changed_files": 1, "closed_at": "1569436109", "comments": 11, "commits": 3, "created_at": "1569332087", "deletions": 27, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "4c0913fabe8081975cee9b0683d6906338a7da3f", "merged_at": "1569436109", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28064, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Add AAA fallback to DQMRootSource", "updated_at": "1569436109", "user": "dan131riley"}