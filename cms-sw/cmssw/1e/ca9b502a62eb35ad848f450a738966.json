{"additions": 56, "auther_ref": "fix_Phase2_ITReco_11_3_X", "auther_sha": "b6b3a4c9de5df9f7035c62fdf368b831a0dc88d7", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe purpose of this PR is to update the conditions and customizations used to deal with the Phase-2 Inner tracker local reconstruction.\r\nWith respect to last update (PR https://github.com/cms-sw/cmssw/pull/32220) it has been found that:\r\n   1) a later version of pixel templates and GenError payloads was produced with enhanced angular span in cot and cot, \r\n   2) the template reconstruction for the square pixels (geometry T22) is sub-optimal at the physical edges of modules and at very high rapidity (||>2.5) (see more details [here](https://indico.cern.ch/event/988835/contributions/4196673/attachments/2176549/3675455/2021_01_22_SimulationPlanarSensorResolution.pdf)). These effects are due to some limitation to the pixel template reconstruction code in presence of 50um long cells in the longitudinal direction. As it seems - at this point - unlikely to instrument the phase-2 inner tracker with 50x50 pixels especially at high rapidity due to low resilience to radiation damage, it has been instead preferred to avoid changing the reconstruction code and use the generic reconstruction instead, within the limited scope of producing reference resolution results in the not-irradiated simulation case.\r\n   \r\nThe first point is addressed in commit 5e2562c  by updating the `autoCondPhase2.py` file, while the second is addressed by introducing two `Era`s be used on top of the `PixelCPEGeneric` process modifier (**N.B. its name has been changed since now is generic enough not to entail only phase2**):\r\n   * `Phase2C11T23` (targeting geometry T23, and 3D pixels in general) removes any usage of template / genError payloads from the reconstruction, as those are not yet available for 3D pixels\r\n   * `Phase2C11T22` (targeting geometry T22 and square pixels in general) allows to use genErrors in the seeding step (when no track angles are available). This is needed because hardcoded errors in https://github.com/cms-sw/cmssw/blob/master/RecoLocalTracker/SiPixelRecHits/src/PixelCPEGeneric.cc#L113 have been optimized for rectangular 25x100 pixels, and in the current generic reco setup we use hardcoded errors for the first tracking pass (see PR https://github.com/cms-sw/cmssw/pull/29783)\r\n\r\n#### PR validation:\r\n\r\nRun successfully `runTheMatrix.py --what upgrade -l 29806.0,30606.0,30206.0` to test technical soundness of the code changes.\r\nPrivate internal validation of the new setup is available here: https://dinardo.web.cern.ch/dinardo/TMPshare/\r\nIn particular the pulls for the track parameters for T22 have changed from:\r\n\r\n| Before this PR  | With this PR |\r\n| ------------- | ------------- |\r\n| ![image](https://user-images.githubusercontent.com/5082376/106575142-04ecc100-653c-11eb-8b3f-0cd9d2e73729.png) | ![image](https://user-images.githubusercontent.com/5082376/106575235-2352bc80-653c-11eb-8b59-a706c4020409.png) |\r\n\r\nIn blue is T22 (with generic CPE) while in red is T21 (with template CPE, baseline).\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis PR is not a backport and no backport is needed.\r\ncc:\r\n@emiglior @tsusa @OzAmram @tvami @gennai @dinardo \r\n\r\n", "branch": "master", "changed_files": 12, "closed_at": "1612876863", "comments": 30, "commits": 3, "created_at": "1612257480", "deletions": 26, "labels": ["alca-approved", "code-checks-approved", "fully-signed", "geometry-approved", "operations-approved", "orp-approved", "pdmv-approved", "reconstruction-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "2d67e1eb50c1f48446f1de201bda6eb779c6efc1", "merged_at": "1612876863", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32789, "release-notes": [], "review_comments": 21, "state": "closed", "title": "Phase-2 Inner Tracker local reconstruction configuration updates", "updated_at": "1612876863", "user": "mmusich"}