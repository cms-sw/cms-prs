{"additions": 14, "auther_ref": "fixAlignmentWriting_12_3_X", "auther_sha": "eb88897be33787e172d70127d3183517fca57498", "author": "mmusich", "body": "backport of  #37925\r\n\r\n#### PR description:\r\n\r\nThe goal of this PR is to fix a bug inadvertently introduced at https://github.com/cms-sw/cmssw/pull/36076 (aimed to migrate Alignment codes to new `PoolDBOutputService` methods).\r\nMoving to usage of instances instead of pointers led to the `GeometryAligner::removeGlobalTransform` call (to remove global roto-translations after computation of the alignment corrections) to be ineffective. This in turn lead to large spurious rotations and shifts of the alignment output geometry with respect to the input one.\r\nThis is fixed here in commit eb88897be33787e172d70127d3183517fca57498.\r\n\r\n#### PR validation:\r\n\r\nRun a small alignment campaign (copied from `mp3495`) and compared the output payloads with respect to the input one. Results (obtained from the payload inspector) are collected:\r\n   * [here](http://musich.web.cern.ch/musich/display/comparison_PromptVsAlignmentCRAFT22/old/): before the fix\r\n   * [here](http://musich.web.cern.ch/musich/display/comparison_PromptVsAlignmentCRAFT22/fixed/): after the fix\r\n   \r\nHere is a couple of plots selected from the folders above (**notice the scale**).   \r\n\r\n| Before the fix | After the fix |\r\n| ------------- | ------------- |\r\n|  ![image](https://user-images.githubusercontent.com/5082376/168073606-f38cb43b-312a-45ca-8d5d-57a48b3c8ec8.png) | ![image](https://user-images.githubusercontent.com/5082376/168073732-57d41695-e253-4b12-a674-c06e26ed70a6.png) |\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\npartial backport of #37925", "branch": "CMSSW_12_3_X", "changed_files": 1, "closed_at": "1652483287", "comments": 9, "commits": 1, "created_at": "1652352400", "deletions": 8, "labels": ["alca-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "urgent", "backport-ok", "trk"], "merge_commit_sha": "96ae7b060f24345a16e8b30d551cd845fcd45351", "merged_at": "1652483287", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 37926, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12.3.X] Fix Tracker Alignment Payload writing", "updated_at": "1652483287", "user": "mmusich"}