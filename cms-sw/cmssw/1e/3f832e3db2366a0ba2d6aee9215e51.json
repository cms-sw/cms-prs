{"additions": 268, "auther_ref": "from-CMSSW_16_0_X_2025-11-18-2300", "auther_sha": "fa5e6ebec31f2992effca0918444fef754f5ce98", "author": "sbein", "body": "This PR re-sorts the Jet_* branches in FastSim NANO in descending order of refined jet pT and propagates the refined jet pT as a Type-1 correction to the PUPPI MET. It is a direct follow-up of the refinement implemented in https://github.com/cms-sw/cmssw/pull/48587#issuecomment-3151196024. \r\n\r\nThe only expected changes to DQM are to PuppiMET_pt and PuppiMET_phi. \r\n\r\nThe PR creates additional backup branches: PuppiMET_pt_unrefined and PuppiMET_phi_unrefined in case anything goes wrong with the refined jets in some unanticipated corner of phase space. \r\n\r\nThe Type-1 correction was implemented independently in stand-alone code and compared to the results in the NANO product:\r\n\r\nEvent 0\r\n  PuppiMET (stored refined):   pt=  11.600, phi=  -2.089\r\n  PuppiMET (recomputed T1):    pt=  11.627, phi=  -2.086\r\n  Differences: dpt=   0.027, dphi=   0.003\r\n\r\nEvent 1\r\n  PuppiMET (stored refined):   pt=  37.961, phi=   0.613\r\n  PuppiMET (recomputed T1):    pt=  37.973, phi=   0.612\r\n  Differences: dpt=   0.013, dphi=  -0.000\r\n\r\nEvent 2\r\n  PuppiMET (stored refined):   pt=  10.061, phi=  -1.397\r\n  PuppiMET (recomputed T1):    pt=  10.073, phi=  -1.401\r\n  Differences: dpt=   0.012, dphi=  -0.004\r\n\r\nEvent 3\r\n  PuppiMET (stored refined):   pt=  38.431, phi=   1.609\r\n  PuppiMET (recomputed T1):    pt=  38.430, phi=   1.608\r\n  Differences: dpt=  -0.001, dphi=  -0.001\r\n\r\nThe differences are very small and consistent with the floating point precisoin=10. Setting precision=20 caused the difference to vanish. \r\n", "branch": "master", "changed_files": 3, "comments": 15, "commits": 2, "created_at": "1763674847", "deletions": 35, "labels": ["pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "xpog-pending"], "milestone": "CMSSW_16_0_X", "number": 49429, "release-notes": [], "review_comments": 6, "state": "open", "title": "Refined pT-based sorting of FastSim jets in NANO, Type-1 MET correction", "updated_at": "1764093944", "user": "sbein"}