{"additions": 394, "auther_ref": "Alpaka_CachingAllocator_debug_140x", "auther_sha": "3830ca70e89274b7374835313f6ebe43644dc6bb", "author": "fwyzard", "body": "#### PR description:\r\n\r\nExtend the alpaka `CachingAllocator` to optionally fill with a configurable value all memory blocks that are: allocated, cached for re-use, re-used, or deallocated.\r\n    \r\nExtend the AlpakaService to configure the host and device `CachingAllocator`s.\r\n\r\nAdd a simple test to load the `AlpakaService`.\r\n\r\n---\r\n\r\nTo fill the NVIDIA GPU memory before every allocation or reuse with `0xA5`, you can now use\r\n```python\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillAllocations = True\r\n```\r\n\r\nTo fill the NVIDIA GPU memory before every deallocation or caching with `0x5A`, you can now use\r\n```python\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillDeallocations = True\r\n```\r\n\r\nTo use different values and combination for allocations, deallocation, caching, and reuse, the full options are\r\n```python\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillAllocations = True,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillAllocationValue = 0xA5,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillReallocations = True,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillReallocationValue = 0x69,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillDeallocations = True,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillDeallocationValue = 0x5A,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillCaches = True,\r\nprocess.AlpakaServiceCudaAsync.deviceAllocator.fillCacheValue = 0x96\r\n```\r\n\r\nTo do the same for the pinned host memory used in the GPU transfers, `process.AlpakaServiceCudaAsync.hostAllocator` accepts the same options.\r\n\r\nTo do the same for AMD GPUs, replace `AlpakaServiceCudaAsync` with `AlpakaServiceROCmAsync`.\r\n\r\nTo do the same for the CPU memory used by the alpaka modules running on the host, replace `AlpakaServiceCudaAsync` with `AlpakaServiceSerialSync`.\r\n\r\n\r\n#### PR validation:\r\n\r\nThe new unit tests pass.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport of #45341 to 14.0.x for data taking.", "branch": "CMSSW_14_0_X", "changed_files": 9, "comments": 7, "commits": 2, "created_at": "1719578534", "deletions": 66, "labels": ["fully-signed", "orp-pending", "tests-started", "backport", "heterogeneous-approved"], "milestone": "CMSSW_14_0_X", "number": 45342, "release-notes": [], "review_comments": 0, "state": "open", "title": "Add debugging capabilities to the CachingAllocator [14.0.x]", "updated_at": "1719579052", "user": "fwyzard"}