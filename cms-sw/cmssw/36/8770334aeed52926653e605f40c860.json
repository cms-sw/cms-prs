{"additions": 1358, "auther_ref": "dqm-remove-clientconfig", "auther_sha": "7add316de292eb7bedb44b39d1bfc2a99688803b", "author": "schneiml", "body": "#### PR description:\r\n\r\nThis PR aims to clean up the way QTests are handled in DQM. Rather than spreading the logic all over the place, it is now all in a single module.\r\n- `QualityTester` becomes a plugin in `DQMServices/Components`, handling all QTest things.\r\n- The `DQMServices/ClientConfig` package disappears without replacement.\r\n- Some useful parts of `ClientConfig` are rescued over to `Components`, most prominently `DQMGenericClient`.\r\n- Some modules that used to use the XML parsing helpers from `ClientConfig` are now stubbed out (`SiPixelMonitorClient`/`SiStripMonitorClient`/`SiStripCommissioningClients`). Subsystem contacted to see if they need to be/can be ported.\r\n- The XML parsing is now done with `boost::property_tree` rather than `xerces`. Much less code, however more strict (some of the QTest configuration XML used in production was malformed!) and probably worse error reporting.\r\n- The QTest implementation remain in `DQMServices/Core` `QTest.[h|cc]`. However, the *only* place that uses them now is `QualityTester`.\r\n- `QReport`s (results) remain available via the `MonitorElement`, but don't contain pointers to `QCriterion`s (the actual tests) any more.\r\n- `QualityTester` is now a `DQMEDHarvester`, rather than a legacy module.\r\n- The ordering `QualityTester` vs. other harvesters is not enforced by dependencies. This may need to be fixed.\r\n\r\n#### PR validation:\r\n\r\nRuns a simple workflow. Opening this PR for more validation, while some functionality is still missing (XML parsing for tracker clients).\r\n\r\nNeed detailed comparisons over many workflows to see if all QTests are still applied in the same way There might be XML parsing differences, and the pattern matching is different in the new code (now using POSIX `fnmatch` rather than `classlib`).\r\n", "branch": "master", "changed_files": 253, "closed_at": "1573555508", "comments": 78, "commits": 36, "created_at": "1572449639", "deletions": 3488, "labels": ["alca-pending", "analysis-pending", "code-checks-approved", "comparison-available", "dqm-pending", "generators-pending", "hlt-pending", "l1-pending", "orp-pending", "pending-signatures", "tests-approved", "xpog-pending"], "milestone": "CMSSW_11_0_X", "number": 28316, "release-notes": [], "review_comments": 0, "state": "closed", "title": "DQM: Restructure QTests", "updated_at": "1573555508", "user": "schneiml"}