{"additions": 5, "auther_ref": "T3_profiling_study", "auther_sha": "ed66493f3605fe984d0c0f404d2eb375a91be273", "author": "SegmentLinking", "body": "#### PR description:\r\nThis is the study focusing on threads and blocks allocation of T3 kernels. In the original LST code, the max_blocks const is used for many block allocations. And the number of the const is set to 80, which is capable for the number of SMs of Nvidia v100 machine. The number is not optimal for other later machines. However, we can find a block allocation which is agnostic to the machine backends and have more physics motivation. The block size are now set to be the size of non-zero modules.\r\n\r\n#### PR validation:\r\nThis PR was tested on CPU and GPU in the standalone configuration and runs without issue. Physics performance does not change. \r\nAfter the PR, the T3 kernel time is improved by ~60% on L4 machine, and overall timing improved by ~17% on single stream. Test on L40 and A30 machine, the timing also improves. \r\nTiming comparison on L4 is below.\r\n<img width=\"820\" alt=\"Screenshot 2025-05-14 at 5 50 08PM\" src=\"https://github.com/user-attachments/assets/5051d52c-0141-4f06-b33c-070c741d57c2\" />\r\n", "branch": "master", "changed_files": 2, "comments": 8, "commits": 1, "created_at": "1747225864", "deletions": 5, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-pending", "code-checks-approved", "tracking"], "milestone": "CMSSW_15_1_X", "number": 48079, "release-notes": [], "review_comments": 0, "state": "open", "title": "optimize LST T3 kernel block size and rearrange T3 kernel functions", "updated_at": "1747238250", "user": "YonsiG"}