{"additions": 93, "auther_ref": "gem-db-payload-fix-backport", "auther_sha": "09b91f257daea691a6b21e35185c77e32dc6b7fd", "author": "cvuosalo", "body": "PR #36835 fixed the building of the GEM reco geometry for DD4hep, but it caused a problem for building the DDD GEM reco geometry DB payload. Technically, an unreliable DDFilteredView copy constructor had been used, which caused the original DDFilteredView to be changed when the copy was altered. The solution is to create a separate, identical DDFilteredView that can be iterated through without altering the original.\r\n\r\nNote that this PR only affects the manual process of creating the DDD GEM reco geometry DB payload, which is done by an expert. This code is never used in any workflow.\r\n\r\nPR validation:\r\n\r\nA correct DDD GEM reco geometry DB payload was created successfully with this PR, whereas previously the creation program crashed.\r\n\r\nif this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nOriginal PR is #36869. For completeness and consistency, this PR could be backported to 12_2, but it is not strictly necessary. There shouldn't be a need to create geometry DB payloads in 12_2, since the latest 12_3 tags are the ones that should be used with 12_2_1.", "branch": "CMSSW_12_2_X", "changed_files": 2, "comments": 18, "commits": 1, "created_at": "1643840901", "deletions": 33, "labels": ["geometry-approved", "fully-signed", "tests-approved", "orp-pending", "bug-fix", "upgrade-approved", "requires-external", "backport-ok"], "milestone": "CMSSW_12_2_X", "number": 36870, "release-notes": [], "review_comments": 0, "state": "open", "title": "[DDD] Fix building of DDD GEM reco geometry DB payload, backport of #36869", "updated_at": "1643972877", "user": "cvuosalo"}