{"additions": 43, "auther_ref": "adding_stxs_1p3_variables", "auther_sha": "b66d4ed5a6b696fd2fd1aa6f6743758b714ada05", "author": "jonathon-langford", "body": "#### PR description:\r\n\r\nTemporary fix to HTXS classification Rivet to enable (planned) STXS 1.3 categorisation on-the-fly using nanoAOD. This will avoid a re-nano campaign of Higgs boson signal MC for STXS Run 3 analyses. Added four new variables to nanoAOD output:\r\n* `HTXS_V_pt`: vector-boson transverse momentum for VH production mode events with precision=14. Default value of -999 for non-VH events.\r\n* `HTXS_Mjj`: dijet invariant mass for events with at-least two jets (pT>30 GeV), with precision=14. Default value of -999 for events without a valid dijet system.\r\n* `HTXS_ptHjj`: transverse momentum of dijet-plus-higgs system for events with at-least two jets (pT>30 GeV), with precision=14. Default value of -999 for events without a valid dijet system.\r\n* `HTXS_dPhijj`: delta-phi between two jets in dijet system for events with at-least two jets (pT>30 GeV), with precision=12. Variables is defined in range [-PI,PI). Default value of -999 for events without a valid dijet system.\r\n\r\nWith these variables in nanoAOD, we can re-categorise Higgs signal events into the proposed STXS 1.3 bins. The latest slides documenting the 1.3 binning scheme can be found [here](https://indico.cern.ch/event/1424812/contributions/5992689/attachments/2873998/5032645/STXS_1.3_v4.pdf).\r\n\r\n#### PR validation:\r\n\r\nTested in `CMSSW_13_3_1_patch1` as used for nanoAOD v13 production.\r\n\r\nRan cmsDriver.py command to privately produce nanoAOD for four main production modes. For example ggH:\r\n```\r\ncmsDriver.py  --python_filename ggH_cfg.py --eventcontent NANOAODSIM --customise Configuration/DataProcessing/Utils.addMonitoring --datatier NANOAODSIM --fileout file:ggH.root --conditions 133X_mcRun3_2022_realistic_postEE_ForNanov13_v1 --step NANO --scenario pp --filein \"dbs:/GluGluHtoGG_M-125_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/Run3Summer22EEMiniAODv4-130X_mcRun3_2022_realistic_postEE_v6-v2/MINIAODSIM\" --era Run3 --no_exec --mc -n -200\r\n```\r\n\r\nChecked outputs for 200 events in each production mode to confirm that the four new variables match for the STXS 1.2 identifier (`HTXS_stage1_2_cat_pTjet30GeV`).\r\n\r\n#### PR backport\r\n\r\nThis PR will need to be backported into the release cycles which are used for nanoAOD production:\r\n* v13: `CMSSW_13_3_1_patch1`\r\n* v14: `CMSSW_14_0_6_patch1`\r\n", "branch": "master", "changed_files": 3, "comments": 4, "commits": 2, "created_at": "1728573142", "deletions": 0, "labels": ["generators-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved", "xpog-pending"], "milestone": "CMSSW_14_2_X", "number": 46343, "release-notes": [], "review_comments": 0, "state": "open", "title": "Adding HTXS variables to nanoAOD for on-the-fly 1.3 categorisation", "updated_at": "1728904334", "user": "jonathon-langford"}