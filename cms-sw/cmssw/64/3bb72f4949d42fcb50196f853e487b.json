{"additions": 7, "auther_ref": "FixIssue37970_12_4_X", "auther_sha": "0435d746a03689ac3a35ce68f721bd534176325a", "author": "mmusich", "body": "resolves #37970\r\n\r\n#### PR description:\r\n\r\nThis PR addresses issue https://github.com/cms-sw/cmssw/issues/37970.\r\n\r\nIn the cand level DNN run after MkFit the output is undetermined if the propagation to the beamline is invalid. This happens in 0.1% of cases at most.\r\n\r\nThis behaviour is flagged and the output set to -1 (i.e. failing the selection).\r\n\r\nI also added a check on ndof > 0 (used to divide chi2), which didn't create problems so far.\r\n\r\n#### PR validation:\r\n\r\nExample of difference in workflow 12434\r\n\r\nno PR https://github.com/cms-sw/cmssw/pull/37918 ------ | with PR https://github.com/cms-sw/cmssw/pull/37918 ----- | fixed\r\n\r\n0.951501 the output | 0.951501 the output | 0.951501 the output\r\n0.931231 the output | 0.931231 the output | 0.931231 the output\r\n0.877139 the output | 0.877139 the output | 0.877139 the output\r\n0.557774 the output | 0.557774 the output | 0.557774 the output\r\n0.97176 the output | 0.97176 the output | 0.97176 the output\r\n0.761749 the output | -nan the output | -1 the output\r\n0.485212 the output | 0.485212 the output | 0.485212 the output\r\n-0.888864 the output | -0.888864 the output | -0.888864 the output\r\n0.990027 the output | 0.990027 the output | 0.990027 the output\r\n0.769534 the output | 0.769534 the output | 0.769534 the output\r\n0.962413 the output | 0.962413 the output | 0.962413 the output\r\n\r\nThe physics changes in MTV validation are almost zero, as expected.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nverbatim backport of https://github.com/cms-sw/cmssw/pull/38004\r\n", "branch": "CMSSW_12_4_X", "changed_files": 1, "closed_at": "1653055730", "comments": 8, "commits": 1, "created_at": "1652947425", "deletions": 1, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "backport-ok"], "merge_commit_sha": "e21da00132ccaf80d1deb8a10a3f4d27a445cb78", "merged_at": "1653055730", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 38011, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12.4.X] address undef output of dnn - for issue #37970", "updated_at": "1653055730", "user": "mmusich"}