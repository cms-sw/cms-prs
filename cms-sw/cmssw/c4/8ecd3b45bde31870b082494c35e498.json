{"additions": 200, "auther_ref": "RECO_SIM_vertexMatch", "auther_sha": "ec2c8dac3ea51540ac6c8cc0bdcfc9b0a30782eb", "author": "rdelliga", "body": "PR description:\r\nThis PR updates the Primary4DVertexValidation class [1], in particular the matchReco2Sim function. \r\nMatching between reco and sim vertices is performed based on a Private code from Wolfram Erdmann, which was ported on CMSSW with some issues that the present PR aims to handle. More details are given in the presentation [2].\r\nThe cut on MVA in matchReco2Sim [3], that select for RECO-SIM vertex matchingonly tracks with good time information, was moved in the use of time information to define weights.\r\nFurthermore, a bug was fixed in the one-to-one match at lines 1766 [4], where the indices of the reco vertices dominated via wos by that simulated vertex are stored with a push back of the index of the recovertex, which not only saves the simulated event corresponding to the wosmatch (i.e. the higher contribution to the wos), but also the lower ones that comes early in the loop, and this happens because saving information about wosmatch and pushing-back the wos_dominated_recv are done at the same time.\r\nIn this new version of the code, wos_dominated_recv is correctly filled outside simevent loop, after filling information about wosmatch.\r\n\r\nPR validation:\r\nThe code was tested on the workflowTTbar_PU_14TeV\r\n\r\n[1]https://github.com/cms-sw/cmssw/blob/master/Validation/MtdValidation/plugins/Primary4DVertexValidation.cc\r\n[2]https://indico.cern.ch/event/1428838/contributions/6010350/attachments/2882474/5050701/MTD_DPG_June_DelliGatti.pdf\r\n[3]https://github.com/cms-sw/cmssw/blob/master/Validation/MtdValidation/plugins/Primary4DVertexValidation.cc#L1744\r\n[4]https://github.com/cms-sw/cmssw/blob/master/Validation/MtdValidation/plugins/Primary4DVertexValidation.cc#L1766 \r\n", "branch": "master", "changed_files": 1, "comments": 1, "commits": 4, "created_at": "1719582841", "deletions": 138, "labels": ["dqm-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_14_1_X", "number": 45343, "release-notes": [], "review_comments": 0, "state": "open", "title": "Update of MTD validation: 4D vertices association with truth", "updated_at": "1719582863", "user": "rdelliga"}