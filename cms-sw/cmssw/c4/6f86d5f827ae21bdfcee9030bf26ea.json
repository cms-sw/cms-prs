{"additions": 475, "auther_ref": "CMSSW_12_6_X_tau-pog_deepTauPh2", "auther_sha": "46cd11a9fc363b5be371ca794e5d8ad316337548", "author": "cms-tau-pog", "body": "#### PR description:\r\n\r\nThis PR adds code for a phase-2 version of DeepTau discriminator; it is a backport of https://github.com/cms-sw/cmssw/pull/40622.\r\nThe neural network structure of the new phase-2 version is identical to that of Run-2/3 DeepTau v2p5, therefore code modifications are small. The changes include:\r\n* Adding scaling parameters and working points for the new training;\r\n* A new \"year\" identifier introduced to separate this new phase-2 training and current Run-2/3 v2p5 (2026 vs 2018);\r\n* The electron input collection used for the new phase2 deepTauID is sum of two collections: `slimmedElectrons` (gsfElectrons in EB) and `slimmedElectronsHGC` (HGCal electrons in endcaps). Notes: 1. The latter collection is called `slimmedElectronsFromMultiCl` in older CMSSW release series (and samples produced with them) which can cause some problems with running on old samples; 2. The same merged electron collection is used by old-style anti-electron tau discriminant for phase-2;\r\n\r\nThe performance of this new phase-2 DeepTau discriminator is documented in [AN-22-090](https://icms.cern.ch/tools-api/restplus/relay/piggyback/notes/AN/2022/90/files/3/download).\r\n\r\nThe new data-model was merged to cms-data in the following PR: https://github.com/cms-data/RecoTauTag-TrainingFiles/pull/11\r\n\r\nThis PR allows to run the new version of DeepTau discriminator in private workflows (to analyse phase-2 samples with 12_5_X), but **it does not enable the new version of DeepTau in official workflows**.  Therefore, differences in outputs are not expected.\r\n\r\nTo run standalone test, one can run the configuration file `RecoTauTag/RecoTau/test/runDeepTauIDsOnMiniAOD.py` after setting the flag `phase2 = True` in that file.\r\n\r\n#### PR validation:\r\n\r\nValidated with the standalone test mentioned above and with miniAOD workflows.\r\n\r\n#### Backport PR\r\n\r\nThis is backport of https://github.com/cms-sw/cmssw/pull/40622 to 12_6_X to facilitate tau studies for phase-2 with 12_5_X samples. \r\n", "branch": "CMSSW_12_6_X", "changed_files": 8, "closed_at": "1676045612", "comments": 15, "commits": 12, "created_at": "1675857714", "deletions": 27, "labels": ["reconstruction-approved", "fully-signed", "tests-rejected", "orp-approved", "requires-external", "xpog-approved"], "merge_commit_sha": "21c5ec427a437dc2133fcbba70f028b884d9d633", "merged_at": "1676045612", "merged_by": "cmsbuild", "milestone": "CMSSW_12_6_X", "number": 40724, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Code to process phase2 version of deepTauID v2p5 [12_6_X]", "updated_at": "1676045612", "user": "mbluj"}