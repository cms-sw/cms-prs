{"additions": 2, "auther_ref": "fixBugInHcalDigisClientAgain", "auther_sha": "4963fb285a17c2bbf0d2a5b7bee473ae84d04465", "author": "mark-grimes", "body": "This bug shows up as a seg fault in HcalDigisClient during harvesting:\n\n```\n#5  0x00002b7c734c1a74 in MonitorElement::Fill(double, double) () from /afs/cern.ch/cms/sw/ReleaseCandidates/vol0/slc5_amd64_gcc472/cms/cmssw/CMSSW_6_2_X_SLHC_2014-03-18-0200/lib/slc5_amd64_gcc472/libDQMServicesCore.so\n#6  0x00002b7c831fbcb4 in HcalDigisClient::HcalDigisEndjob(std::vector<MonitorElement*, std::allocator<MonitorElement*> > const&, std::string) () from /afs/cern.ch/cms/sw/ReleaseCandidates/vol0/slc5_amd64_gcc472/cms/cmssw/CMSSW_6_2_X_SLHC_2014-03-18-0200/lib/slc5_amd64_gcc472/pluginValidationHcalDigis.so\n#7  0x00002b7c831fc8d8 in HcalDigisClient::runClient() () from /afs/cern.ch/cms/sw/ReleaseCandidates/vol0/slc5_amd64_gcc472/cms/cmssw/CMSSW_6_2_X_SLHC_2014-03-18-0200/lib/slc5_amd64_gcc472/pluginValidationHcalDigis.so\n#8  0x00002b7c64b7d330 in edm::EDAnalyzer::doEndRun(edm::RunPrincipal const&, edm::EventSetup const&, edm::CurrentProcessingContext const*) () from /afs/cern.ch/cms/sw/ReleaseCandidates/vol0/slc5_amd64_gcc472/cms/cmssw/CMSSW_6_2_X_SLHC_2014-03-18-0200/lib/slc5_amd64_gcc472/libFWCoreFramework.so\n```\n\nHistograms are only booked if an un-intialised boolean is true.  The histograms are filled if the boolean is true, but this is after the variable has been properly initialised.  Hence there is a 50/50 chance that the code will either run as expected or seg fault, depending on the previous memory contents of the variable.\nThis was previously fixed in #2483 but was then broken again by #2833.\n", "branch": "CMSSW_6_2_X_SLHC", "changed_files": 1, "closed_at": "1395237249", "comments": 2, "commits": 1, "created_at": "1395236596", "deletions": 2, "labels": ["dqm-pending", "orp-pending", "pending-signatures", "tests-pending"], "merge_commit_sha": "4028a57ae14ca531cf83fa4646b9f10637b24704", "merged_at": "1395237249", "merged_by": "cmsbuild", "milestone": "Next CMSSW_6_2_X_SLHC", "number": 2933, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix crash in HcalDigisClient (again)", "updated_at": "1396865597", "user": "mark-grimes"}