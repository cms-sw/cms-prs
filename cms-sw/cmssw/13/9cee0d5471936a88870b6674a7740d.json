{"additions": 174, "auther_ref": "perfConditionalTask_12_4_x", "auther_sha": "dc7837b248e23e647d20a5208b77aacdb6b4ea8b", "author": "makortel", "body": "#### PR description:\r\n\r\nBackport of #38730. Quoting the description of the original PR\r\n\r\n> Profiling https://github.com/cms-sw/cmssw/issues/38725 in https://mkortela.web.cern.ch/mkortela/cgi-bin/navigator/issue38725/hlt_ConditionalTask_06_perf/12 showed that a lot of time in an HLT job was spent in `edm::ParameterSet::getParameter<edm::ParameterSet>()` and `edm::detail::processEDAliases()`. These seemed to be caused by the processing of EDAliases and SwitchProducers for ConditionalTasks being repeated for all the Paths of the HLT menu (e.g. the SwitchProducer loop has N(paths) x N(modules)  overall complexity).\r\n> \r\n> This PR attempts to speed up the job startup time by processing the EDAliases and SwitchProducers for ConditionalTasks only once for all Paths, leading to > 10x improvement in the `StreamSchedule` constructor\r\n> https://mkortela.web.cern.ch/mkortela/cgi-bin/navigator/issue38725/hlt_ConditionalTask_36_perf/12\r\n> bringing the time close to what it would be if the HLT menu would use Tasks instead of ConditionalTasks\r\n> https://mkortela.web.cern.ch/mkortela/cgi-bin/navigator/issue38725/hlt_Task_06_perf/12\r\n\r\n#### PR validation:\r\n\r\nFramework unit tests pass.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport of #38730 to 12_4_X.", "branch": "CMSSW_12_4_X", "changed_files": 2, "closed_at": "1657906247", "comments": 11, "commits": 1, "created_at": "1657738582", "deletions": 95, "labels": ["core-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "urgent", "backport-ok"], "merge_commit_sha": "748c6de0c83f2a8c1bbfe2efe50fc1231b4caff9", "merged_at": "1657906247", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 38731, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12_4_X] Preprocess EDAlias and SwitchProducer information for ConditionalTask", "updated_at": "1657906248", "user": "makortel"}