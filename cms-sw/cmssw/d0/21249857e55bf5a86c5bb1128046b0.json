{"additions": 12, "auther_ref": "iarspider-patch-20240817-8", "auther_sha": "917d36f1e24533647eaff38bcf4400794d7fac13", "author": "iarspider", "body": "#### PR description:\r\n\r\nIn GCC13 IB the following warnings are emitted:\r\n\r\n```\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc: In member function 'HcalChannelPropertiesEP::ReturnType1 HcalChannelPropertiesEP::produce1(const HcalChannelPropertiesAuxRecord&)':\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:56:25: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    56 |     const HcalTopology& htopo = rcd.getRecord<HcalRecNumberingRecord>().get(topoToken_);\r\n      |                         ^~~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:56:76: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = HcalRecNumberingRecord; RecordT = HcalChannelPropertiesAuxRecord; ListT = edm::mpl::Vector<HcalRecNumberingRecord, HcalRecoParamsRcd>]().HcalRecNumberingRecord::<anonymous>.edm::eventsetup::DependentRecordImplementation<HcalRecNumberingRecord, edm::mpl::Vector<IdealGeometryRecord, HcalParametersRcd, HcalSimNumberingRecord> >::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<HcalRecNumberingRecord>::get<HcalTopology>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::topoToken_)'\r\n   56 |     const HcalTopology& htopo = rcd.getRecord<HcalRecNumberingRecord>().get(topoToken_);\r\n      |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:57:27: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    57 |     const HcalRecoParams& params = rcd.getRecord<HcalRecoParamsRcd>().get(paramsToken_);\r\n      |                           ^~~~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:57:74: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = HcalRecoParamsRcd; RecordT = HcalChannelPropertiesAuxRecord; ListT = edm::mpl::Vector<HcalRecNumberingRecord, HcalRecoParamsRcd>]().HcalRecoParamsRcd::<anonymous>.edm::eventsetup::DependentRecordImplementation<HcalRecoParamsRcd, edm::mpl::Vector<HcalRecNumberingRecord, IdealGeometryRecord> >::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<HcalRecoParamsRcd>::get<HcalRecoParams>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::paramsToken_)'\r\n   57 |     const HcalRecoParams& params = rcd.getRecord<HcalRecoParamsRcd>().get(paramsToken_);\r\n      |                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc: In member function 'HcalChannelPropertiesEP::ReturnType2 HcalChannelPropertiesEP::produce2(const HcalChannelPropertiesRecord&)':\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:75:27: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    75 |     const HcalRecoParams& params = rcd.getRecord<HcalChannelPropertiesAuxRecord>().get(myParamsToken_);\r\n      |                           ^~~~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:75:87: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = HcalChannelPropertiesAuxRecord; RecordT = HcalChannelPropertiesRecord; ListT = edm::mpl::Vector<CaloGeometryRecord, HcalDbRecord, HcalSeverityLevelComputerRcd, HcalChannelPropertiesAuxRecord>]().HcalChannelPropertiesAuxRecord::<anonymous>.edm::eventsetup::DependentRecordImplementation<HcalChannelPropertiesAuxRecord, edm::mpl::Vector<HcalRecNumberingRecord, HcalRecoParamsRcd> >::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<HcalChannelPropertiesAuxRecord>::get<HcalRecoParams>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::myParamsToken_)'\r\n   75 |     const HcalRecoParams& params = rcd.getRecord<HcalChannelPropertiesAuxRecord>().get(myParamsToken_);\r\n      |                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:76:38: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    76 |     const HcalSeverityLevelComputer& severity = rcd.getRecord<HcalSeverityLevelComputerRcd>().get(sevToken_);\r\n      |                                      ^~~~~~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:76:98: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = HcalSeverityLevelComputerRcd; RecordT = HcalChannelPropertiesRecord; ListT = edm::mpl::Vector<CaloGeometryRecord, HcalDbRecord, HcalSeverityLevelComputerRcd, HcalChannelPropertiesAuxRecord>]().HcalSeverityLevelComputerRcd::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<HcalSeverityLevelComputerRcd>::get<HcalSeverityLevelComputer>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::sevToken_)'\r\n   76 |     const HcalSeverityLevelComputer& severity = rcd.getRecord<HcalSeverityLevelComputerRcd>().get(sevToken_);\r\n      |                                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:77:31: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    77 |     const HcalChannelQuality& qual = dbRecord.getRecord<HcalChannelQualityRcd>().get(qualToken_);\r\n      |                               ^~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:77:85: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = HcalChannelQualityRcd; RecordT = HcalDbRecord; ListT = edm::mpl::Vector<HcalRecNumberingRecord, IdealGeometryRecord, HcalPedestalsRcd, HcalPedestalWidthsRcd, HcalGainsRcd, HcalGainWidthsRcd, HcalQIEDataRcd, HcalQIETypesRcd, HcalChannelQualityRcd, HcalZSThresholdsRcd, HcalRespCorrsRcd, HcalL1TriggerObjectsRcd, HcalElectronicsMapRcd, HcalTimeCorrsRcd, HcalLUTCorrsRcd, HcalPFCorrsRcd, HcalFrontEndMapRcd, HcalSiPMCharacteristicsRcd, HcalSiPMParametersRcd, HcalTPParametersRcd, HcalTPChannelParametersRcd, HcalLutMetadataRcd, HcalMCParamsRcd, HcalRecoParamsRcd, HcalTimeSlewRecord>]().HcalChannelQualityRcd::<anonymous>.edm::eventsetup::DependentRecordImplementation<HcalChannelQualityRcd, edm::mpl::Vector<HcalRecNumberingRecord, IdealGeometryRecord> >::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<HcalChannelQualityRcd>::get<HcalChannelQuality>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::qualToken_)'\r\n   77 |     const HcalChannelQuality& qual = dbRecord.getRecord<HcalChannelQualityRcd>().get(qualToken_);\r\n      |                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~\r\n  src/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:78:25: warning: possibly dangling reference to a temporary [-Wdangling-reference]\r\n    78 |     const CaloGeometry& geom = rcd.getRecord<CaloGeometryRecord>().get(geomToken_);\r\n      |                         ^~~~\r\nsrc/RecoLocalCalo/HcalRecAlgos/plugins/HcalChannelPropertiesEP.cc:78:71: note: the temporary was destroyed at the end of the full expression 'edm::eventsetup::DependentRecordImplementation<RecordT, ListT>::getRecord() const [with DepRecordT = CaloGeometryRecord; RecordT = HcalChannelPropertiesRecord; ListT = edm::mpl::Vector<CaloGeometryRecord, HcalDbRecord, HcalSeverityLevelComputerRcd, HcalChannelPropertiesAuxRecord>]().CaloGeometryRecord::<anonymous>.edm::eventsetup::DependentRecordImplementation<CaloGeometryRecord, edm::mpl::Vector<IdealGeometryRecord, EcalBarrelGeometryRecord, EcalEndcapGeometryRecord, EcalPreshowerGeometryRecord, HcalParametersRcd, HcalSimNumberingRecord, HcalRecNumberingRecord, HcalGeometryRecord, HGCalGeometryRecord, CaloTowerGeometryRecord, CastorGeometryRecord, ZDCGeometryRecord> >::<anonymous>.edm::eventsetup::EventSetupRecordImplementation<CaloGeometryRecord>::get<CaloGeometry>(((HcalChannelPropertiesEP*)this)->HcalChannelPropertiesEP::geomToken_)'\r\n   78 |     const CaloGeometry& geom = rcd.getRecord<CaloGeometryRecord>().get(geomToken_);\r\n      |                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~\r\n```\r\n#### PR validation:\r\n\r\nBot tests\r\n\r\n", "branch": "master", "changed_files": 1, "comments": 9, "commits": 1, "created_at": "1723911054", "deletions": 6, "labels": ["reconstruction-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_14_1_X", "number": 45735, "release-notes": [], "review_comments": 0, "state": "open", "title": "[GCC13] Avoid Wdangling-reference in HcalChannelPropertiesEP", "updated_at": "1724035726", "user": "iarspider"}