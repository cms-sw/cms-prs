{"additions": 1, "auther_ref": "gcc13-array-bound-fix", "auther_sha": "abeb70674ce2ec2ef234f9c82557d80817fc143a", "author": "smuzaffar", "body": "In GCC13 IBs, we are build time error [a]. This looks like a bug in GCC \r\n\r\n- https://gcc.gnu.org/bugzilla/show_bug.cgi?id=106247\r\n- https://gitlab.com/libeigen/eigen/-/issues/2506\r\n\r\nCompiling this unit tests with `-O2` seems to avoid this error, so this PR proposes to use `-O2` for building/linking this test \r\n\r\n[a] https://cmssdt.cern.ch/SDT/cgi-bin/buildlogs/el9_amd64_gcc13/CMSSW_15_0_X_2025-01-17-2300/RecoTracker/PixelTrackFitting\r\n```\r\nIn function '_mm256_loadu_pd',\r\n    inlined from 'ploadu' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/arch/AVX/PacketMath.h:884:129,\r\n    inlined from 'ploadt' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/GenericPacketMath.h:1092:26,\r\n    inlined from 'packet' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/CoreEvaluators.h:240:42,\r\n    inlined from 'assignPacket' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:676:116,\r\n    inlined from 'assignPacketByOuterInner' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:690:48,\r\n    inlined from 'run' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:573:86,\r\n    inlined from 'call_dense_assignment_loop' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:786:37,\r\n    inlined from 'run' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:955:31,\r\n    inlined from 'call_assignment_no_alias' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:891:49,\r\n    inlined from 'call_assignment' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:859:27,\r\n    inlined from 'call_assignment' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/AssignEvaluator.h:837:18,\r\n    inlined from 'operator=' at /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/eigen/3bb6a48d8c171cf20b5f8e48bfb4e424fbd4f79e-777da7040cb89c68e8201affdcbf2aca/include/eigen3/Eigen/src/Core/Assign.h:68:28,\r\n    inlined from 'circleFit.constprop' at src/RecoTracker/PixelTrackFitting/interface/RiemannFit.h:732:34:\r\n  /data/cmsbld/jenkins/workspace/build-any-ib/w/el9_amd64_gcc13/external/gcc/13.2.0-b4f157aad5ba3fefd6a4401833585549/lib/gcc/x86_64-redhat-linux-gnu/13.2.0/include/avxintrin.h:893:24: error: array subscript '__m256d_u[0]' is partly outside array bounds of 'struct Vector3d[1]' [-Werror=array-bounds=]\r\n   893 |   return *(__m256d_u *)__P;\r\n      |                        ^\r\nsrc/RecoTracker/PixelTrackFitting/interface/RiemannFit.h: In function 'circleFit.constprop':\r\nsrc/RecoTracker/PixelTrackFitting/interface/RiemannFit.h:730:18: note: object 't1' of size 24\r\n  730 |         Vector3d t1 = -t0 * r0;\r\n```", "branch": "master", "changed_files": 1, "closed_at": "1737472885", "comments": 12, "commits": 1, "created_at": "1737362952", "deletions": 1, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "tracking"], "merge_commit_sha": "16dfca998ae627abd80d500646621cfb8a035313", "merged_at": "1737472885", "merged_by": "cmsbuild", "milestone": "CMSSW_15_0_X", "number": 47141, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[GCC13]Workaround to avoid false-positive partly outside array bounds", "updated_at": "1737472886", "user": "smuzaffar"}