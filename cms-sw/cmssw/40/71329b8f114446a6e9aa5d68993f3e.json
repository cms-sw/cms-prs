{"additions": 82, "auther_ref": "Basic2DClusterForEachSeed", "auther_sha": "58628c7a81eea4926651bf1721f70c909f134265", "author": "hatakeyamak", "body": "#### PR description:\r\n\r\nAs discussed here: https://indico.cern.ch/event/926508/#9-review-of-pf-layer-clusterin\r\nwe often effectively create PFClusters directly from PFRecHit seed passing the seeds threshold for HF (e.g. at HLT). However, in the current code and configuration setup, we still go through the topo clustering step and iterative clustering step without doing actual clustering, and wasting sizable time.\r\n\r\nWith this new cluster producer from individual seeds, we get basically identical physics outputs (except tiny mismatches due to limited numerical precision in the current setup). And, this step becomes faster by a factor of 6-7 (check HF line below).\r\n\r\nUsing Run2018D/EphemeralHLTPhysics data:\r\n\r\nBefore this PR\r\n```\r\nFastReport   CPU time avg.      when run  Real time avg.      when run     Alloc. avg.      when run   Dealloc. avg.      when run  Modules\r\nFastReport         1.3 ms         1.3 ms         1.3 ms         1.3 ms        +710 kB        +710 kB        -599 kB        -599 kB    hltParticleFlowClusterECALUncorrectedUnseeded\r\nFastReport         5.6 ms         5.6 ms         5.6 ms         5.6 ms       +3659 kB       +3659 kB       -2886 kB       -2886 kB    hltParticleFlowClusterPSUnseeded\r\nFastReport         4.9 ms         4.9 ms         4.9 ms         4.9 ms        +122 kB        +122 kB         -30 kB         -30 kB    hltParticleFlowClusterECALUnseeded\r\nFastReport         3.0 ms         3.0 ms         3.0 ms         3.0 ms        +671 kB        +671 kB        -587 kB        -587 kB    hltParticleFlowClusterHBHE\r\nFastReport         0.4 ms         0.4 ms         0.4 ms         0.4 ms        +274 kB        +274 kB        -197 kB        -197 kB    hltParticleFlowClusterHCAL\r\nFastReport         5.2 ms         5.2 ms         5.2 ms         5.2 ms       +1670 kB       +1670 kB       -1247 kB       -1247 kB    hltParticleFlowClusterHF\r\n```\r\n\r\nWith this PR\r\n```\r\nFastReport         1.3 ms         1.3 ms         1.3 ms         1.3 ms        +710 kB        +710 kB        -599 kB        -599 kB    hltParticleFlowClusterECALUncorrectedUnseeded\r\nFastReport         5.6 ms         5.6 ms         5.6 ms         5.6 ms       +3659 kB       +3659 kB       -2886 kB       -2886 kB    hltParticleFlowClusterPSUnseeded\r\nFastReport         4.9 ms         4.9 ms         4.9 ms         4.9 ms        +122 kB        +122 kB         -30 kB         -30 kB    hltParticleFlowClusterECALUnseeded\r\nFastReport         3.0 ms         3.0 ms         3.0 ms         3.0 ms        +671 kB        +671 kB        -587 kB        -587 kB    hltParticleFlowClusterHBHE\r\nFastReport         0.4 ms         0.4 ms         0.4 ms         0.4 ms        +274 kB        +274 kB        -197 kB        -197 kB    hltParticleFlowClusterHCAL\r\nFastReport         0.7 ms         0.7 ms         0.7 ms         0.7 ms       +1154 kB       +1154 kB        -886 kB        -886 kB    hltParticleFlowClusterHF\r\n```\r\n\r\n#### PR validation:\r\n\r\nChecked with with Run2018D/EphemeralHLTPhysics data 100 events that, HLT PF cluster and PF candidates stay the same within numerical precision.\r\nCheck with matrix tests: 10824.0, 11634.0, 23234.0, and 140.53 that they run fine.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis is not backport.\r\n\r\n@bendavid @jsalfeld @dimkarasav", "branch": "master", "changed_files": 3, "closed_at": "1597644324", "comments": 30, "commits": 8, "created_at": "1597118821", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "hlt-approved", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "53524972211b99f3fd333407e0ea23f8c8583201", "merged_at": "1597644324", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31115, "release-notes": [], "review_comments": 7, "state": "closed", "title": "Basic2D PFCluster for each rechit seed", "updated_at": "1597644325", "user": "hatakeyamak"}