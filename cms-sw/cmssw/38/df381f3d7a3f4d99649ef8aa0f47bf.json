{"additions": 3, "auther_ref": "FixReflectionIntegrity", "auther_sha": "08b8aa43c9e3ae66c22d07fc7f9fee652884f1c0", "author": "abhih1", "body": "#### PR description:\r\n\r\nAn issue with the Integrity quality summary plot was presented here [1], where the problematic tower mappings were \"reflected\" relative to the FE Status plot which showed the correct mapping.\r\nThe following plots were affected with this issue:\r\n1) Integrity Quality Summary, EB+ side only [2]\r\n2) Integrity Quality by SM, all EB+ plots [3] \r\n3) Integrity Error Occupancy maps by SM, all EB+ plots, tower-level integrity errors only: TTIdErrors [4], BlockSizeErrors (empty for this run) [5]\r\n\r\nThe error appears to be with a wrong binning set up for the filling of the histogram which is done here [6], where it was assumed that for EB+ supermodules there will be a reflection or flip of the tower y binning, when in fact it remains the same as for EB-. The flip only happens when using iphi coordinates to define the y binning, not the tower id which has been used in this case.\r\n\r\nWe have fixed this by removing the separate condition for EB+, and making it the same as for EB-. \r\n\r\n#### PR validation:\r\nWe redid the plots with an offline ecal dqm workflow on 2018 runs (T0 turned off for offending run) by introducing integrity errors on EB+. Using a test GUI we found that it now shows the correct tower positions. We also made sure that if the error happened on EB- this still gave the correct tower mapping, and no other plots were affected. \r\n\r\n#### A backport of this PR is submitted to CMSSW_11_2_X here: #32334 \r\n\r\n[1] http://cmsonline.cern.ch/cms-elog/1112563\r\n[2] https://cmsweb.cern.ch/dqm/online/start?runnr=338628;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Ecal;size=M;root=Ecal/Layouts/01%20Raw%20Data;focus=EcalBarrel/EBSummaryClient/EBIT%20integrity%20quality%20summary;zoom=yes;\r\n[3] https://cmsweb.cern.ch/dqm/online/start?runnr=338628;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Ecal;size=M;root=Ecal/Layouts/01%20Raw%20Data/By%20SuperModule/Integrity%20Quality;focus=;zoom=no;\r\n[4] https://cmsweb.cern.ch/dqm/online/start?runnr=338628;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Ecal;size=M;root=EcalBarrel/EBIntegrityTask/TTId;focus=;zoom=no;\r\n[5] https://cmsweb.cern.ch/dqm/online/start?runnr=338628;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Ecal;size=M;root=EcalBarrel/EBIntegrityTask/TTBlockSize;focus=;zoom=no;\r\n[6] : https://github.com/cms-sw/cmssw/blob/master/DQM/EcalCommon/src/MESetBinningUtils2.cc#L733\r\n", "branch": "master", "changed_files": 1, "closed_at": "1606728756", "comments": 22, "commits": 2, "created_at": "1606417344", "deletions": 1, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "d70ccd2cd703fa9ff7c81c3a1694a3efebeca323", "merged_at": "1606728756", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32305, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix reflection in tower mapping in Integrity error plots", "updated_at": "1606752688", "user": "abhih1"}