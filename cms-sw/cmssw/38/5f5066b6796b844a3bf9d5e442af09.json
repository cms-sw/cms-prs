{"additions": 9, "auther_ref": "PFEGammaAlgoCastTypeFix", "auther_sha": "7f059afdce33a5901bfb4b54a08797a9fb6af7e5", "author": "hatakeyamak", "body": "#### PR description:\r\n\r\nThis is meant to address: #27553.\r\nThe problem was happening when, for a given KF track, we look for ECAL elements not used or closer to a GSF track for linking, as far as I understand. The casting of PFBlockElement has been done assuming GSF track even for a KF track. Now, for a KF track, we perform casting assuming a KF track.\r\n\r\n#### PR validation:\r\n\r\nUnder CMSSW_11_3_UBSAN_X_2021-01-22-2300, I made sure we no longer get the error reported in #27553.\r\nBefore this change, _float trk_pin = elemasgsf->Pin().P();_ was giving non-sensible numbers because of bad cast. Now, we get realistic trk_pin. At the end, it looks like no change in electrons, because of a very loose EoverP cut used in elementNotCloserToOther.\r\n\r\nI checked 1000 ZEE events, and didn't see any change in electrons in miniaod.\r\nAlso, jenkins test see no change.\r\n\r\n@guitargeek @lgray how does this proposed update look for you?\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot backport.\r\n\r\n@bendavid @guitargeek @Dr15Jones @jainshilpi @zeratul87\r\n", "branch": "master", "changed_files": 1, "closed_at": "1612266294", "comments": 23, "commits": 3, "created_at": "1611581975", "deletions": 10, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "380a3021aa856bd6b63169f2d36f4b606b605922", "merged_at": "1612266294", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32733, "release-notes": [], "review_comments": 7, "state": "closed", "title": "Fix the PFBlockElement casting in PFEGammaAlgo (use the right element type)", "updated_at": "1612266294", "user": "hatakeyamak"}