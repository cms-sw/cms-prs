{"additions": 87, "auther_ref": "mc-simBTL-OOT", "auther_sha": "8e1583792abbe3ce4559116d7cca9e67ff6c4bf2", "author": "casarsa", "body": "#### PR description:\r\n\r\nThis PR modifies the BTL digitization to include the effects on time resolution due to the photon tails of earlier OOT hits in the same crystal. It implements the model proposed by A. Ledovskoy ([slides](https://indico.cern.ch/event/782676/contributions/3289163/attachments/1783938/2903520/190123_mtd_ledovskoy.pdf)). (@pmeridian @parbol )\r\n\r\nThe size of MTDSimHitData had to be increased in order for the information of previous BXs \r\nfor both bar sides to be available in the BTLElectronicSim. The premixing configuration has been updated accordingly. (@makortel )\r\n\r\n\r\n#### PR validation:\r\n\r\nThe new code has been tested in CMSSW_11_0_X_2019-11-18-2300 with the TTbar WF 22234 (PU200):\r\n\r\n**step 2:**\r\n\r\nMemoryReport> Peak virtual size 6280.26 Mbytes\r\n Key events increasing vsize: \r\n[0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n[1] run: 1 lumi: 1 event: 1  vsize = 4296.21 deltaVsize = 0 rss = 3077.83 delta = 0\r\n[3] run: 1 lumi: 1 event: 3  vsize = 5128.21 deltaVsize = 832 rss = 3166.95 delta = 89.1211\r\n[88] run: 1 lumi: 1 event: 88  vsize = 6280.26 deltaVsize = 640 rss = 3146.59 delta = -20.3594\r\n[12] run: 1 lumi: 1 event: 12  vsize = 5640.25 deltaVsize = 512.008 rss = 3204.43 delta = 37.4727\r\n[90] run: 1 lumi: 1 event: 90  vsize = 6280.26 deltaVsize = 0 rss = 3078.7 delta = -67.8984\r\n[89] run: 1 lumi: 1 event: 89  vsize = 6280.26 deltaVsize = 0 rss = 3203.86 delta = 57.2656\r\n[88] run: 1 lumi: 1 event: 88  vsize = 6280.26 deltaVsize = 640 rss = 3146.59 delta = -34.625\r\nTimeReport> Time report complete in 10911.9 seconds\r\nTime Summary: \r\n - Min event:   80.4885\r\n - Max event:   128.658\r\n - Avg event:   107.631\r\n - Total loop:  10882.3\r\n - Total init:  29.3701\r\n - Total job:   10911.9\r\n - EventSetup Lock:   0.00013113\r\n - EventSetup Get:   83.4706\r\n Event Throughput: 0.00918923 ev/s\r\n CPU Summary: \r\n - Total loop:  9314.68\r\n - Total init:  13.381\r\n - Total extra: 0\r\n - Total job:   9328.3\r\n\r\n \r\n**step 3**\r\n\r\n MemoryReport> Peak virtual size 10161.6 Mbytes\r\n Key events increasing vsize: \r\n[8] run: 1 lumi: 1 event: 8  vsize = 9139.4 deltaVsize = 32.0586 rss = 6650.14 delta = 89.9492\r\n[3] run: 1 lumi: 1 event: 3  vsize = 9107.34 deltaVsize = 900.121 rss = 6560.19 delta = 155.914\r\n[42] run: 1 lumi: 1 event: 42  vsize = 10161.6 deltaVsize = 1022.13 rss = 6870.45 delta = 310.262\r\n[0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n[0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n[44] run: 1 lumi: 1 event: 44  vsize = 10161.6 deltaVsize = 0 rss = 6714.96 delta = -155.488\r\n[43] run: 1 lumi: 1 event: 43  vsize = 10161.6 deltaVsize = 0 rss = 6831.04 delta = -39.4141\r\n[42] run: 1 lumi: 1 event: 42  vsize = 10161.6 deltaVsize = 1022.13 rss = 6870.45 delta = 68.0742\r\nTimeReport> Time report complete in 24287.1 seconds\r\n Time Summary: \r\n - Min event:   145.066\r\n - Max event:   412.86\r\n - Avg event:   237.186\r\n - Total loop:  24138\r\n - Total init:  138.612\r\n - Total job:   24287.1\r\n - EventSetup Lock:   0.000231981\r\n - EventSetup Get:   95.3623\r\n Event Throughput: 0.00414284 ev/s\r\n CPU Summary: \r\n - Total loop:  20984.7\r\n - Total init:  101.39\r\n - Total extra: 0\r\n - Total job:   21096.3\r\n", "branch": "master", "changed_files": 8, "closed_at": "1574927110", "comments": 31, "commits": 4, "created_at": "1574245701", "deletions": 43, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "d6ac250696bd20b9a6ba04c7393b90db9b4d57c8", "merged_at": "1574927110", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28433, "release-notes": [], "review_comments": 14, "state": "closed", "title": "BTL simulation: OOT effects", "updated_at": "1574927110", "user": "casarsa"}