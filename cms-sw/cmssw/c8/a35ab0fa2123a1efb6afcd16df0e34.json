{"additions": 15, "auther_ref": "PhotonIDValueMapSpeedup1050pre2", "auther_sha": "7e4ae4cda12ef1fbe04fcaa799f3c7c188759f8d", "author": "Sam-Harper", "body": "#### PR description:\r\n\r\nThe PhotonIDValueMap producer is a known slow module. Part of this is that it does expensive dxy/dz corrections (calling the slow ones too in miniAOD but thats another story).\r\n\r\nThis is a simple fix which speeds it up by doing a dR match first rather than a slow dxy./dz cut. Further optimisations are more than possible, however this is already significant and is obvious that it is safe.\r\n\r\nI'm going to request this back to 102X because it'll speed up analysis user jobs significantly\r\n\r\n#### PR validation:\r\n\r\nA simple test job on running on (I think) EGamma Run2018 AOD and MINIAOD. This just running VID & scale and smearing in a job and writing out the result. So a typical analysis job.\r\nAOD:\r\nhttp://sharper.web.cern.ch/sharper/cgi-bin/igprof-navigator/forPRs/aodVIDRef\r\nhttp://sharper.web.cern.ch/sharper/cgi-bin/igprof-navigator/forPRs/aodVIDSpeedup\r\ntime counts PhotonIDValueMapProducer::produce 186.44 -> 81.66\r\nMINIAOD:\r\nhttp://sharper.web.cern.ch/sharper/cgi-bin/igprof-navigator/forPRs/worstIsolRef\r\nhttp://sharper.web.cern.ch/sharper/cgi-bin/igprof-navigator/forPRs/worstIsolSpeedup\r\ntime counts of PhotonIDValueMapProducer::produce 3,379.67 -> 433.96\r\n\r\n", "branch": "master", "changed_files": 1, "comments": 11, "commits": 2, "created_at": "1554825260", "deletions": 11, "labels": ["code-checks-approved", "comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-pending"], "milestone": "CMSSW_10_6_X", "number": 26409, "release-notes": [], "review_comments": 4, "state": "open", "title": "swapping order of cuts to avoid expensive dxy/dz calc", "updated_at": "1554891053", "user": "Sam-Harper"}