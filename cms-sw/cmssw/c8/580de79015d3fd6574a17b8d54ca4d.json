{"additions": 21, "auther_ref": "PrefiringDec2020_1130pre2", "auther_sha": "bba2ce31aa84ba92006511743854d48e46abecc1", "author": "lathomas", "body": "#### PR description:\r\n\r\nThis PR provides updates the L1 prefiring weight producer. \r\nThis is a revised version of https://github.com/cms-sw/cmssw/pull/32542 that includes some update and fixes conflicts with recent commits. \r\n\r\n1. Protection against muon jets ( PhysicsTools/PatUtils/plugins/L1ECALPrefiringWeightProducer.cc )\r\nIn the L1 prefiring weight producer, a customized protection is added to veto jets mostly made of muons that have very little chance to prefire (since prefiring is related to the jet EM energy). \r\nThe default setting considers only jets with a muon energy fraction <0.5. A value of -1 can be used to switch off the protection.\r\nPhysics wise, the change has often a negligible impact, except for (very) precise measurements including muons in the final states (e.g. Wmass) or final states involving high pt forward muons (e.g. Z'->mumu).\r\n\r\n2. Link to new UL2017 maps and enabling/disabling the muon jet protection. (PhysicsTools/NanoAOD/python/triggerObjects_cff.py)  \r\n- New prefiring maps for Ultra Legacy 2017 are now available and merged in:  \r\nhttps://github.com/cms-data/PhysicsTools-PatUtils/pull/1\r\n- The updated UL2017 maps and the muon jet protection are used by default for next campaigns. \r\n- Earlier configurations can be retrieved through modifiers. \r\n- I still have issue figuring out how to properly configure the producer for the modifier \"run2_nanoAOD_106Xv1\" (since different maps need to be used for 2016 and 2017). \r\n\r\n \r\n#### PR validation:\r\n\r\nValidation of the muon protection (setting JetMaxMuonFraction = 0.5) was performed on a QCD and a high mass Z->mumu samples. \r\nQCD is untouched, prefiring weights increase as expected in ZMuMu. \r\n![prefQCDHT500To700](https://user-images.githubusercontent.com/4995867/102618627-6c40e400-413b-11eb-8ddd-8829bc64f7ee.png)\r\n![prefPRzmumum400to800](https://user-images.githubusercontent.com/4995867/102618628-6cd97a80-413b-11eb-9f84-b6102f2d85d4.png)\r\n\r\nThe new maps were presented at this meeting: \r\nhttps://indico.cern.ch/event/985369/#3-ul2017-prefiring-maps-tbc\r\n\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot a backport. I understand a backport is needed for 10_6_X. Do we also need one for 11_2? Thanks ! \r\n", "branch": "master", "changed_files": 3, "closed_at": "1612449011", "comments": 15, "commits": 4, "created_at": "1611525304", "deletions": 6, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "reconstruction-approved", "requires-external", "tests-approved", "xpog-approved"], "merge_commit_sha": "11213325977c1a6c1c6be8ddd8cf1e1d9a6ef071", "merged_at": "1612449011", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32728, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Updates to the L1 prefiring weight producer ", "updated_at": "1612449011", "user": "lathomas"}