{"additions": 1172, "auther_ref": "mc-btlnewdigi_squash", "auther_sha": "0350e43eb3fa7e4496863f4f354b0508a7570dab", "author": "casarsa", "body": "#### PR description:\r\n\r\nThis PR introduces an updated digitization model for the BTL detector, derived from parameterizations of the TOFHiR response based on testbeam and laboratory measurements. To ensure compatibility with this new model, some modifications had to be made also to the reconstruction code. Specifically, the time-walk correction was updated, and the parameterization of the RecHit error was revised.\r\n\r\nThe new BTL digitization model is documented in the CMS note [CMS DN-2025/013](cms.cern.ch/iCMS/user/noteinfo?cmsnoteid=CMS%20DN-2025/013) and was presented in the MTD DPG Meetings on [24/01/2025](https://indico.cern.ch/event/1498383/contributions/6311175/attachments/3002509/5312752/casarsa_BTLdigitization.pdf) and [10/10/2025](https://indico.cern.ch/event/1597247/contributions/6731800/attachments/3152519/5598505/casarsa_BTLdigitization_1.pdf).\r\n\r\n#### PR validation:\r\n\r\nThe updated code was validated using the runTheMatrix workflows 34434.0 and 34634.0, compiled against both CMSSW_15_1_0_pre5 and CMSSW_16_0_0_pre1. WF 34634.99 was tested successfully in CMSSW_15_1_0_pre5.\r\n\r\nThe performance of both the new and existing code was also evaluated:\r\n\r\n### new code\r\n\r\n**WF 34434.0**\r\n\r\nstep2:\r\n\r\n> TimeReport> Time report complete in 359.063 seconds\r\n>  Time Summary: \r\n>  - Min event:   5.49725\r\n>  - Max event:   21.327\r\n>  - Avg event:   7.72135\r\n>  - Total loop:  144.639\r\n>  - Total init:  214.423\r\n>  - Total job:   359.063\r\n>  - Total EventSetup: 39.103\r\n>  - Total non-module: 26.6364\r\n>  Event Throughput: 0.0691378 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     124.473\r\n>  - Total init:     62.1638\r\n>  - Total extra:    0\r\n>  - Total children: 0.309533\r\n>  - Total job:      186.638\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 5764.84 Mbytes, RSS 3401.21 Mbytes, PSS 3401.59 MBytes, Private 3401.57\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 4337.12 Mbytes (VSize), 2925.13 MBytes (RSS)\r\n>  mmapped file pages 1427.07 Mbytes (VSize), 475.816 MBytes (RSS)\r\n>   of which .so's 1107.23 Mbytes (VSize), 318.465 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 156.902 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.449219 MBytes (RSS)\r\n>  Jemalloc allocated 2761.92 MBytes, active 2801.77 MBytes\r\n>   resident 3198.94 Mbytes, mapped 3221.84 Mbytes\r\n>   metadata 43.1884 Mbytes\r\n> MemoryReport> Peak virtual size 5764.84 Mbytes (RSS 3534.42)\r\n>  Jemalloc allocated 3282.43 active 3333.12 resident 3397.15 mapped 3420.05 metadata 43.1884\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 5302.83 deltaVsize = 0 rss = 3467.82 delta = 0 allocated = 3263.97 active = 3313.7\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 5764.83 deltaVsize = 462 rss = 3521.99 delta = 54.1719 allocated = 3280.23 active = 3330.71\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5764.84 deltaVsize = 0.0117188 rss = 3534.42 delta = 12.4336 allocated = 3282.43 active = 3333.12\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 5764.84 deltaVsize = 0 rss = 3518.76 delta = -15.6641 allocated = 3252.22 active = 3304.46\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5764.84 deltaVsize = 0 rss = 3539.84 delta = 5.42188 allocated = 3275.19 active = 3326.84\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5764.84 deltaVsize = 0.0117188 rss = 3534.42 delta = 12.4336 allocated = 3282.43 active = 3333.12\r\n> MemoryReport> Peak rss size 3539.84 Mbytes (VSIZE 5764.84)\r\n>  Jemalloc allocated 3275.19 active 3326.84 resident 3401.95 mapped 3424.85 metadata 43.1884\r\n>  Key events increasing rss:\r\n> [5] run: 1 lumi: 1 event: 5  vsize = 5764.83 deltaVsize = 0 rss = 3524.86 delta = 2.87109 allocated = 3271.8 active = 3322.55\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5764.84 deltaVsize = 0.0117188 rss = 3534.42 delta = 9.5625 allocated = 3282.43 active = 3333.12\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5764.84 deltaVsize = 0 rss = 3539.84 delta = 5.42188 allocated = 3275.19 active = 3326.84\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5764.84 deltaVsize = 0 rss = 3539.84 delta = 5.42188 allocated = 3275.19 active = 3326.84\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5764.84 deltaVsize = 0.0117188 rss = 3534.42 delta = 9.5625 allocated = 3282.43 active = 3333.12\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 5764.83 deltaVsize = 462 rss = 3521.99 delta = 54.1719 allocated = 3280.23 active = 3330.71\r\n\r\nstep3:\r\n \r\n> TimeReport> Time report complete in 380.431 seconds\r\n>  Time Summary: \r\n>  - Min event:   2.44118\r\n>  - Max event:   15.0109\r\n>  - Avg event:   5.38594\r\n>  - Total loop:  105.008\r\n>  - Total init:  275.421\r\n>  - Total job:   380.431\r\n>  - Total EventSetup: 34.9639\r\n>  - Total non-module: 2.11923e+08\r\n>  Event Throughput: 0.0952306 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     88.2355\r\n>  - Total init:     195.271\r\n>  - Total extra:    0\r\n>  - Total children: 0.289704\r\n>  - Total job:      283.508\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 7812.23 Mbytes, RSS 5042.26 Mbytes, PSS 5042.65 MBytes, Private 5042.63\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 6300.87 Mbytes (VSize), 4516.33 MBytes (RSS)\r\n>  mmapped file pages 1510.68 Mbytes (VSize), 525.664 MBytes (RSS)\r\n>   of which .so's 1190.84 Mbytes (VSize), 358.84 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 166.375 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.449219 MBytes (RSS)\r\n>  Jemalloc allocated 4377.01 MBytes, active 4477.87 MBytes\r\n>   resident 4937.07 Mbytes, mapped 4947.36 Mbytes\r\n>   metadata 55.8063 Mbytes\r\n> MemoryReport> Peak virtual size 7812.2 Mbytes (RSS 5180.32)\r\n>  Jemalloc allocated 4918.63 active 5033.42 resident 5116.26 mapped 5127.05 metadata 55.3062\r\n>  Key events increasing vsize: \r\n> [1] run: 1 lumi: 1 event: 1  vsize = 7811.93 deltaVsize = 0 rss = 5143.53 delta = 0 allocated = 4909.3 active = 5022.68\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7811.94 deltaVsize = 0.0117188 rss = 5217.19 delta = 73.6562 allocated = 4975.5 active = 5089.69\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 7812.2 deltaVsize = 0.257812 rss = 5180.32 delta = -36.8672 allocated = 4918.63 active = 5033.42\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [6] run: 1 lumi: 1 event: 6  vsize = 7812.2 deltaVsize = 0 rss = 5192.02 delta = 11.7031 allocated = 4921.58 active = 5037.11\r\n> [5] run: 1 lumi: 1 event: 5  vsize = 7812.2 deltaVsize = 0 rss = 5198.68 delta = 18.3555 allocated = 4960.92 active = 5075.41\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 7812.2 deltaVsize = 0.257812 rss = 5180.32 delta = -36.8672 allocated = 4918.63 active = 5033.42\r\n> MemoryReport> Peak rss size 5228.22 Mbytes (VSIZE 7812.2)\r\n>  Jemalloc allocated 4987.75 active 5101.77 resident 5167.43 mapped 5178.22 metadata 55.3062\r\n>  Key events increasing rss:\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7811.94 deltaVsize = 0.0117188 rss = 5217.19 delta = 73.6562 allocated = 4975.5 active = 5089.69\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 7812.2 deltaVsize = 0 rss = 5220.33 delta = -7.89062 allocated = 4967.19 active = 5082\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 7812.2 deltaVsize = 0 rss = 5228.22 delta = 11.0312 allocated = 4987.75 active = 5101.77\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 7811.93 deltaVsize = 0 rss = 5143.53 delta = 0 allocated = 4909.3 active = 5022.68\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 7812.2 deltaVsize = 0 rss = 5228.22 delta = 11.0312 allocated = 4987.75 active = 5101.77\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7811.94 deltaVsize = 0.0117188 rss = 5217.19 delta = 73.6562 allocated = 4975.5 active = 5089.69\r\n> \r\n\r\n**WF 34634.0**\r\n\r\nstep2:\r\n\r\n> TimeReport> Time report complete in 952.013 seconds\r\n>  Time Summary: \r\n>  - Min event:   74.4032\r\n>  - Max event:   91.267\r\n>  - Avg event:   81.5496\r\n>  - Total loop:  891.496\r\n>  - Total init:  60.5148\r\n>  - Total job:   952.013\r\n>  - Total EventSetup: 37.7103\r\n>  - Total non-module: 35.6813\r\n>  Event Throughput: 0.0112171 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     857.874\r\n>  - Total init:     51.0842\r\n>  - Total extra:    0\r\n>  - Total children: 0.251329\r\n>  - Total job:      908.96\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 10024.1 Mbytes, RSS 4484.42 Mbytes, PSS 4466.07 MBytes, Private 4447.29\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 8596.36 Mbytes (VSize), 4391.38 MBytes (RSS)\r\n>  mmapped file pages 1427.07 Mbytes (VSize), 92.8398 MBytes (RSS)\r\n>   of which .so's 1107.23 Mbytes (VSize), 91.1523 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 1.64844 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.0390625 MBytes (RSS)\r\n>  Jemalloc allocated 3239.22 MBytes, active 3346.47 MBytes\r\n>   resident 4682.01 Mbytes, mapped 4705.85 Mbytes\r\n>   metadata 78.2559 Mbytes\r\n> MemoryReport> Peak virtual size 10024.1 Mbytes (RSS 6375.16)\r\n>  Jemalloc allocated 6622.54 active 6780.8 resident 6902.95 mapped 6929.3 metadata 75.7393\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 9236.09 deltaVsize = 0 rss = 6181.71 delta = 0 allocated = 6631.48 active = 6706.14\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10024.1 deltaVsize = 788 rss = 6375.16 delta = 193.441 allocated = 6622.54 active = 6780.8\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 10024.1 deltaVsize = 0 rss = 6130.57 delta = -244.582 allocated = 6510.48 active = 6672.88\r\n> [3] run: 1 lumi: 1 event: 3  vsize = 10024.1 deltaVsize = 0 rss = 6167.18 delta = -207.98 allocated = 6400.37 active = 6559.91\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10024.1 deltaVsize = 788 rss = 6375.16 delta = 193.441 allocated = 6622.54 active = 6780.8\r\n> MemoryReport> Peak rss size 6375.16 Mbytes (VSIZE 10024.1)\r\n>  Jemalloc allocated 6622.54 active 6780.8 resident 6902.95 mapped 6929.3 metadata 75.7393\r\n>  Key events increasing rss:\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 10024.1 deltaVsize = 0 rss = 6354.02 delta = -21.1406 allocated = 6706.86 active = 6874.25\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 10024.1 deltaVsize = 0 rss = 6369.13 delta = -6.02344 allocated = 6710.92 active = 6877.94\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10024.1 deltaVsize = 788 rss = 6375.16 delta = 193.441 allocated = 6622.54 active = 6780.8\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 9236.09 deltaVsize = 0 rss = 6181.71 delta = 0 allocated = 6631.48 active = 6706.14\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10024.1 deltaVsize = 788 rss = 6375.16 delta = 193.441 allocated = 6622.54 active = 6780.8\r\n\r\nstep3:\r\n\r\n> TimeReport> Time report complete in 1646.23 seconds\r\n>  Time Summary: \r\n>  - Min event:   103.907\r\n>  - Max event:   190.794\r\n>  - Avg event:   140.346\r\n>  - Total loop:  1473.77\r\n>  - Total init:  172.455\r\n>  - Total job:   1646.23\r\n>  - Total EventSetup: 32.0388\r\n>  - Total non-module: 4.21399e+09\r\n>  Event Throughput: 0.00678531 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     1409.27\r\n>  - Total init:     163.929\r\n>  - Total extra:    0\r\n>  - Total children: 0.14007\r\n>  - Total job:      1573.2\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 13358.8 Mbytes, RSS 5578.61 Mbytes, PSS 5578.51 MBytes, Private 5578.26\r\n>  AnonHugePages 2 Mbytes\r\n>  mmapped memory pages 11843.4 Mbytes (VSize), 5006.38 MBytes (RSS)\r\n>  mmapped file pages 1510.68 Mbytes (VSize), 569 MBytes (RSS)\r\n>   of which .so's 1190.84 Mbytes (VSize), 402.16 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 166.375 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.464844 MBytes (RSS)\r\n>  Jemalloc allocated 4727.41 MBytes, active 4858.62 MBytes\r\n>   resident 5522.86 Mbytes, mapped 5555.25 Mbytes\r\n>   metadata 93.6972 Mbytes\r\n> MemoryReport> Peak virtual size 13358.8 Mbytes (RSS 9867.04)\r\n>  Jemalloc allocated 9889.22 active 10051.9 resident 10156.9 mapped 10189.3 metadata 93.6972\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 12430.4 deltaVsize = 0 rss = 9470.92 delta = 0 allocated = 9589.64 active = 9748.64\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 13334.4 deltaVsize = 904 rss = 9646.25 delta = 175.328 allocated = 9737.63 active = 9893.46\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13358.8 deltaVsize = 24.0508 rss = 9914.41 delta = 268.156 allocated = 9921.35 active = 10083.9\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 13334.7 deltaVsize = 0.253906 rss = 9604.01 delta = -42.2383 allocated = 9660.05 active = 9821.44\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13358.8 deltaVsize = 24.0508 rss = 9914.41 delta = 546.02 allocated = 9921.35 active = 10083.9\r\n> [10] run: 1 lumi: 1 event: 10  vsize = 13358.8 deltaVsize = 0 rss = 9642.3 delta = -224.734 allocated = 9649.61 active = 9808.99\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 13358.8 deltaVsize = 0.0078125 rss = 9867.04 delta = -47.3672 allocated = 9889.22 active = 10051.9\r\n> MemoryReport> Peak rss size 9914.41 Mbytes (VSIZE 13358.8)\r\n>  Jemalloc allocated 9921.35 active 10083.9 resident 10189.2 mapped 10222.1 metadata 93.1971\r\n>  Key events increasing rss:\r\n> [5] run: 1 lumi: 1 event: 5  vsize = 13334.7 deltaVsize = 0 rss = 9705.54 delta = 59.2852 allocated = 9731.42 active = 9892.84\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 13358.8 deltaVsize = 0.0078125 rss = 9867.04 delta = -47.3672 allocated = 9889.22 active = 10051.9\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13358.8 deltaVsize = 24.0508 rss = 9914.41 delta = 208.871 allocated = 9921.35 active = 10083.9\r\n> [5] run: 1 lumi: 1 event: 5  vsize = 13334.7 deltaVsize = 0 rss = 9705.54 delta = 59.2852 allocated = 9731.42 active = 9892.84\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 13334.4 deltaVsize = 904 rss = 9646.25 delta = 175.328 allocated = 9737.63 active = 9893.46\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13358.8 deltaVsize = 24.0508 rss = 9914.41 delta = 208.871 allocated = 9921.35 active = 10083.9\r\n> \r\n\r\n### current code\r\n\r\n**WF 34434.0**\r\n\r\nstep2:\r\n\r\n> TimeReport> Time report complete in 209.282 seconds\r\n>  Time Summary: \r\n>  - Min event:   6.71515\r\n>  - Max event:   16.1988\r\n>  - Avg event:   8.19631\r\n>  - Total loop:  146.214\r\n>  - Total init:  63.0658\r\n>  - Total job:   209.282\r\n>  - Total EventSetup: 36.4081\r\n>  - Total non-module: 28.731\r\n>  Event Throughput: 0.0683927 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     135.223\r\n>  - Total init:     52.9835\r\n>  - Total extra:    0\r\n>  - Total children: 0.23298\r\n>  - Total job:      188.208\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 5765.34 Mbytes, RSS 3387.84 Mbytes, PSS 3359.44 MBytes, Private 3330.68\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 4337.62 Mbytes (VSize), 2911.83 MBytes (RSS)\r\n>  mmapped file pages 1427.06 Mbytes (VSize), 475.742 MBytes (RSS)\r\n>   of which .so's 1107.23 Mbytes (VSize), 318.391 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 156.902 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.449219 MBytes (RSS)\r\n>  Jemalloc allocated 2762.42 MBytes, active 2802.26 MBytes\r\n>   resident 3174.88 Mbytes, mapped 3196.85 Mbytes\r\n>   metadata 44.1184 Mbytes\r\n> MemoryReport> Peak virtual size 5765.34 Mbytes (RSS 3522.34)\r\n>  Jemalloc allocated 3281.91 active 3332.64 resident 3386.37 mapped 3408.35 metadata 44.1184\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 5303.33 deltaVsize = 0 rss = 3471.89 delta = 0 allocated = 3263.27 active = 3313.05\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 5765.33 deltaVsize = 462 rss = 3533.48 delta = 61.582 allocated = 3281.08 active = 3331.75\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5765.34 deltaVsize = 0.0117188 rss = 3522.34 delta = -11.1367 allocated = 3281.91 active = 3332.64\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 5765.34 deltaVsize = 0 rss = 3505.97 delta = -16.3672 allocated = 3251.77 active = 3304.11\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5765.34 deltaVsize = 0 rss = 3546.32 delta = 23.9766 allocated = 3275.05 active = 3326.71\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 5765.34 deltaVsize = 0.0117188 rss = 3522.34 delta = -11.1367 allocated = 3281.91 active = 3332.64\r\n> MemoryReport> Peak rss size 3546.32 Mbytes (VSIZE 5765.34)\r\n>  Jemalloc allocated 3275.05 active 3326.71 resident 3407.64 mapped 3429.61 metadata 44.1184\r\n>  Key events increasing rss:\r\n> [10] run: 1 lumi: 1 event: 10  vsize = 5765.34 deltaVsize = 0 rss = 3529.32 delta = -16.9922 allocated = 3267.13 active = 3318.74\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 5765.33 deltaVsize = 462 rss = 3533.48 delta = 61.582 allocated = 3281.08 active = 3331.75\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5765.34 deltaVsize = 0 rss = 3546.32 delta = 12.8398 allocated = 3275.05 active = 3326.71\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 5303.33 deltaVsize = 0 rss = 3471.89 delta = 0 allocated = 3263.27 active = 3313.05\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 5765.34 deltaVsize = 0 rss = 3546.32 delta = 12.8398 allocated = 3275.05 active = 3326.71\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 5765.33 deltaVsize = 462 rss = 3533.48 delta = 61.582 allocated = 3281.08 active = 3331.75\r\n\r\nstep3:\r\n\r\n> TimeReport> Time report complete in 264.591 seconds\r\n>  Time Summary: \r\n>  - Min event:   2.62059\r\n>  - Max event:   11.6885\r\n>  - Avg event:   5.46101\r\n>  - Total loop:  105.659\r\n>  - Total init:  158.931\r\n>  - Total job:   264.591\r\n>  - Total EventSetup: 35.4576\r\n>  - Total non-module: 2.22483e+08\r\n>  Event Throughput: 0.0946443 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     92.57\r\n>  - Total init:     140.514\r\n>  - Total extra:    0\r\n>  - Total children: 0.268215\r\n>  - Total job:      233.084\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 7812.73 Mbytes, RSS 5038.78 Mbytes, PSS 5039.14 MBytes, Private 5039.08\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 6301.37 Mbytes (VSize), 4513.23 MBytes (RSS)\r\n>  mmapped file pages 1510.68 Mbytes (VSize), 525.301 MBytes (RSS)\r\n>   of which .so's 1190.84 Mbytes (VSize), 358.477 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 166.375 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.449219 MBytes (RSS)\r\n>  Jemalloc allocated 4373.04 MBytes, active 4474.26 MBytes\r\n>   resident 4910.62 Mbytes, mapped 4921.46 Mbytes\r\n>   metadata 55.2542 Mbytes\r\n> MemoryReport> Peak virtual size 7812.7 Mbytes (RSS 5170.06)\r\n>  Jemalloc allocated 4914.52 active 5029.17 resident 5099.59 mapped 5110.47 metadata 55.2129\r\n>  Key events increasing vsize: \r\n> [1] run: 1 lumi: 1 event: 1  vsize = 7812.43 deltaVsize = 0 rss = 5145.29 delta = 0 allocated = 4905.87 active = 5019.11\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7812.44 deltaVsize = 0.0117188 rss = 5216.16 delta = 70.8711 allocated = 4971.57 active = 5085.81\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 7812.7 deltaVsize = 0.257812 rss = 5170.06 delta = -46.0977 allocated = 4914.52 active = 5029.17\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [6] run: 1 lumi: 1 event: 6  vsize = 7812.7 deltaVsize = 0 rss = 5198.07 delta = 28.0156 allocated = 4917.08 active = 5032.37\r\n> [5] run: 1 lumi: 1 event: 5  vsize = 7812.7 deltaVsize = 0 rss = 5200.33 delta = 30.2734 allocated = 4955.51 active = 5069.99\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 7812.7 deltaVsize = 0.257812 rss = 5170.06 delta = -46.0977 allocated = 4914.52 active = 5029.17\r\n> MemoryReport> Peak rss size 5229.39 Mbytes (VSIZE 7812.7)\r\n>  Jemalloc allocated 4984.43 active 5098.37 resident 5162.59 mapped 5173.43 metadata 55.254\r\n>  Key events increasing rss:\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7812.44 deltaVsize = 0.0117188 rss = 5216.16 delta = 70.8711 allocated = 4971.57 active = 5085.81\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 7812.7 deltaVsize = 0 rss = 5228.87 delta = -0.519531 allocated = 4965.22 active = 5079.92\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 7812.7 deltaVsize = 0 rss = 5229.39 delta = 13.2344 allocated = 4984.43 active = 5098.37\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 7812.43 deltaVsize = 0 rss = 5145.29 delta = 0 allocated = 4905.87 active = 5019.11\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 7812.7 deltaVsize = 0 rss = 5229.39 delta = 13.2344 allocated = 4984.43 active = 5098.37\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 7812.44 deltaVsize = 0.0117188 rss = 5216.16 delta = 70.8711 allocated = 4971.57 active = 5085.81\r\n\r\n**WF 34634.0**\r\n\r\nstep2:\r\n\r\n> TimeReport> Time report complete in 1131.58 seconds\r\n>  Time Summary: \r\n>  - Min event:   87.9561\r\n>  - Max event:   113.274\r\n>  - Avg event:   97.929\r\n>  - Total loop:  1068.92\r\n>  - Total init:  62.654\r\n>  - Total job:   1131.58\r\n>  - Total EventSetup: 45.9732\r\n>  - Total non-module: 42.7303\r\n>  Event Throughput: 0.00935523 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     1030.79\r\n>  - Total init:     51.8137\r\n>  - Total extra:    0\r\n>  - Total children: 0.243355\r\n>  - Total job:      1082.61\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 10025.8 Mbytes, RSS 4878.72 Mbytes, PSS 4879.06 MBytes, Private 4879\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 8598.11 Mbytes (VSize), 4403.17 MBytes (RSS)\r\n>  mmapped file pages 1427.06 Mbytes (VSize), 475.32 MBytes (RSS)\r\n>   of which .so's 1107.23 Mbytes (VSize), 317.969 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 156.902 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.449219 MBytes (RSS)\r\n>  Jemalloc allocated 3235.97 MBytes, active 3346.5 MBytes\r\n>   resident 4667.55 Mbytes, mapped 4689.3 Mbytes\r\n>   metadata 80.347 Mbytes\r\n> MemoryReport> Peak virtual size 10025.8 Mbytes (RSS 6520.79)\r\n>  Jemalloc allocated 6472.68 active 6637.82 resident 6757.52 mapped 6783.6 metadata 76.0108\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 9257.83 deltaVsize = 0 rss = 6675.96 delta = 0 allocated = 6906.73 active = 6982.79\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10025.8 deltaVsize = 768 rss = 6520.79 delta = -155.168 allocated = 6472.68 active = 6637.82\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 10025.8 deltaVsize = 0 rss = 6536.94 delta = 16.1523 allocated = 6528.42 active = 6692.44\r\n> [3] run: 1 lumi: 1 event: 3  vsize = 10025.8 deltaVsize = 0 rss = 6462.14 delta = -58.6445 allocated = 6461.96 active = 6621.07\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 10025.8 deltaVsize = 768 rss = 6520.79 delta = -155.168 allocated = 6472.68 active = 6637.82\r\n> MemoryReport> Peak rss size 6938.06 Mbytes (VSIZE 10025.8)\r\n>  Jemalloc allocated 6914.64 active 7080.66 resident 7181.88 mapped 7204.12 metadata 79.8468\r\n>  Key events increasing rss:\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 10025.8 deltaVsize = 0 rss = 6852.44 delta = 176.484 allocated = 6822.63 active = 6992.02\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 10025.8 deltaVsize = 0 rss = 6878.41 delta = -59.6445 allocated = 6840.5 active = 7009.02\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 10025.8 deltaVsize = 0 rss = 6938.06 delta = 85.6172 allocated = 6914.64 active = 7080.66\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 9257.83 deltaVsize = 0 rss = 6675.96 delta = 0 allocated = 6906.73 active = 6982.79\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 10025.8 deltaVsize = 0 rss = 6938.06 delta = 85.6172 allocated = 6914.64 active = 7080.66\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 10025.8 deltaVsize = 0 rss = 6852.44 delta = 176.484 allocated = 6822.63 active = 6992.02\r\n> \r\n\r\nstep3:\r\n\r\n> TimeReport> Time report complete in 3050.05 seconds\r\n>  Time Summary: \r\n>  - Min event:   125.086\r\n>  - Max event:   201.681\r\n>  - Avg event:   160.713\r\n>  - Total loop:  1958.77\r\n>  - Total init:  1091.29\r\n>  - Total job:   3050.05\r\n>  - Total EventSetup: 308.065\r\n>  - Total non-module: 4.61459e+09\r\n>  Event Throughput: 0.00510526 ev/s\r\n>  CPU Summary: \r\n>  - Total loop:     1595.1\r\n>  - Total init:     170.583\r\n>  - Total extra:    0\r\n>  - Total children: 0.156349\r\n>  - Total job:      1765.69\r\n>  Processing Summary: \r\n>  - Number of Events:  10\r\n>  - Number of Global Begin Lumi Calls:  1\r\n>  - Number of Global Begin Run Calls: 1\r\n> \r\n> MemoryReport> EndJob: virtual size 13359.2 Mbytes, RSS 5200.06 Mbytes, PSS 5200.08 MBytes, Private 5199.83\r\n>  AnonHugePages 0 Mbytes\r\n>  mmapped memory pages 11843.4 Mbytes (VSize), 4979.23 MBytes (RSS)\r\n>  mmapped file pages 1510.68 Mbytes (VSize), 217.16 MBytes (RSS)\r\n>   of which .so's 1190.84 Mbytes (VSize), 182.902 MBytes (RSS)\r\n>   of which PCM's 319.359 Mbytes (VSize), 33.9258 MBytes (RSS)\r\n>   of which other 0.472656 Mbytes (VSize), 0.332031 MBytes (RSS)\r\n>  Jemalloc allocated 4612.68 MBytes, active 4746.95 MBytes\r\n>   resident 5434.71 Mbytes, mapped 5463.49 Mbytes\r\n>   metadata 97.3148 Mbytes\r\n> MemoryReport> Peak virtual size 13359.1 Mbytes (RSS 9756.34)\r\n>  Jemalloc allocated 10111.8 active 10277.5 resident 10393.9 mapped 10423.4 metadata 96.5356\r\n>  Key events increasing vsize: \r\n> [0] run: 0 lumi: 0 event: 0  vsize = 0 deltaVsize = 0 rss = 0 delta = 0\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 13326.3 deltaVsize = 0 rss = 9388.9 delta = 0 allocated = 9794.21 active = 9955.02\r\n> [2] run: 1 lumi: 1 event: 2  vsize = 13358.4 deltaVsize = 32.1562 rss = 9252.11 delta = -136.797 allocated = 9577.96 active = 9740.27\r\n> [4] run: 1 lumi: 1 event: 4  vsize = 13359 deltaVsize = 0.570312 rss = 9299.01 delta = 46.9023 allocated = 9673.72 active = 9836.34\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 13359.1 deltaVsize = 0.140625 rss = 9756.34 delta = 457.336 allocated = 10111.8 active = 10277.5\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 13359.1 deltaVsize = 0 rss = 9732.85 delta = -23.4922 allocated = 10095 active = 10260.3\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13359.1 deltaVsize = 0 rss = 9802.33 delta = 45.9844 allocated = 10144.4 active = 10312.3\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 13359.1 deltaVsize = 0.140625 rss = 9756.34 delta = 457.336 allocated = 10111.8 active = 10277.5\r\n> MemoryReport> Peak rss size 9802.33 Mbytes (VSIZE 13359.1)\r\n>  Jemalloc allocated 10144.4 active 10312.3 resident 10416.1 mapped 10444.9 metadata 97.3148\r\n>  Key events increasing rss:\r\n> [9] run: 1 lumi: 1 event: 9  vsize = 13359.1 deltaVsize = 0 rss = 9732.85 delta = -69.4766 allocated = 10095 active = 10260.3\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 13359.1 deltaVsize = 0.140625 rss = 9756.34 delta = 367.441 allocated = 10111.8 active = 10277.5\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13359.1 deltaVsize = 0 rss = 9802.33 delta = 45.9844 allocated = 10144.4 active = 10312.3\r\n> [1] run: 1 lumi: 1 event: 1  vsize = 13326.3 deltaVsize = 0 rss = 9388.9 delta = 0 allocated = 9794.21 active = 9955.02\r\n> [8] run: 1 lumi: 1 event: 8  vsize = 13359.1 deltaVsize = 0 rss = 9802.33 delta = 45.9844 allocated = 10144.4 active = 10312.3\r\n> [7] run: 1 lumi: 1 event: 7  vsize = 13359.1 deltaVsize = 0.140625 rss = 9756.34 delta = 367.441 allocated = 10111.8 active = 10277.5\r\n> ", "branch": "master", "changed_files": 19, "comments": 6, "commits": 1, "created_at": "1761567694", "deletions": 917, "labels": ["reconstruction-pending", "simulation-pending", "dqm-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_16_0_X", "number": 49221, "release-notes": [], "review_comments": 0, "state": "open", "title": "Update of the BTL digitization model", "updated_at": "1761585493", "user": "casarsa"}