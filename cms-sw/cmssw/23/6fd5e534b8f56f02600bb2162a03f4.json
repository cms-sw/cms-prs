{"additions": 376, "auther_ref": "CMSSW_14_2_0_pre4_singleIter_LST_HLT", "auther_sha": "f7f4f007f368dd4fd2b216162472f8fca29ce7d8", "author": "SegmentLinking", "body": "### PR description\r\n\r\nThis is a procModifier-based implementation of LST in HLT. It reuses the `trackingLST` procModifier to enable LST track building, and it introduces a new one, `seedingLST`, which is not too useful for the HLT currently but it may become useful also for the offline setup in the near future.\r\n\r\nAnother modifier, `singleIterPatatrack` is introduced and it allows HLT to run only one iteration of tracking based on Patatrack pixel seeds. It works both with CKF and with LST building (when combined with the procModifier above).\r\n\r\nThree new variations of the HLT timing workflow are also added (single iteration, single iteration LST, LST).\r\n\r\nThe most important results have been summarized in [this presentation](https://indico.cern.ch/event/1482695/#7-lst-in-phase-2-hlt-configura).\r\n\r\n<details><summary>Instructions on how to run</summary>\r\n\r\n```sh\r\ncmsrel CMSSW_14_2_0_pre4\r\ncd CMSSW_14_2_0_pre4/src\r\ncmsenv\r\ngit cms-init\r\ngit cms-addpkg Configuration HLTrigger\r\ngit remote add SegLink git@github.com:SegmentLinking/cmssw.git\r\ngit fetch SegLink\r\ngit checkout CMSSW_14_2_0_pre4_singleIter_LST_HLT\r\nscram b -j 16\r\n\r\n# Rerun L1, needed because the HLT samples I am using are produced with 14_0_X\r\ncmsDriver.py Phase2 -s L1,L1TrackTrigger \\\r\n--conditions auto:phase2_realistic_T33 \\\r\n--geometry ExtendedRun4D110 \\\r\n--era Phase2C17I13M9 \\\r\n--eventcontent FEVTDEBUGHLT \\\r\n--datatier GEN-SIM-DIGI-RAW-MINIAOD \\\r\n--customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000,Configuration/DataProcessing/Utils.addMonitoring,L1Trigger/Configuration/customisePhase2FEVTDEBUGHLT.customisePhase2FEVTDEBUGHLT,L1Trigger/Configuration/customisePhase2TTOn110.customisePhase2TTOn110 \\\r\n--filein /store/mc/Phase2Spring24DIGIRECOMiniAOD/TT_TuneCP5_14TeV-powheg-pythia8/GEN-SIM-DIGI-RAW-MINIAOD/PU200_AllTP_140X_mcRun4_realistic_v4-v1/2560000/11d1f6f0-5f03-421e-90c7-b5815197fc85.root \\\r\n--fileout file:output_Phase2_L1T.root \\\r\n--inputCommands=\"keep *, drop l1tPFJets_*_*_*, drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" \\\r\n--outputCommands=\"drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" \\\r\n--mc -n 100 --nThreads 10\r\n\r\n# Rerun L1 emulator + HLT (needed for any sample)\r\n# In terms of procModifiers:\r\n#    None -> Legacy seeding, CKF building\r\n#    alpaka -> Patatrack seeding\r\n#    singleIterPatatrack -> Single iteration tracking\r\n#    trackingLST -> LST building for the initialStep\r\n#    seedingLST -> LST seeding for the hightPtTripletStep\r\ncmsDriver.py Phase2 -s L1P2GT,HLT:75e33 --processName=HLTX \\\r\n--conditions auto:phase2_realistic_T33 \\\r\n--geometry ExtendedRun4D110 \\\r\n--era Phase2C17I13M9 \\\r\n--eventcontent FEVTDEBUGHLT \\\r\n--customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000 \\\r\n--filein file:output_Phase2_L1T.root \\\r\n--fileout file:Phase2_L1P2GT_HLT.root \\\r\n--inputCommands=\"keep *, drop *_hlt*_*_HLT, drop triggerTriggerFilterObjectWithRefs_l1t*_*_HLT\" \\\r\n--outputCommands='keep *_*InitialStepTrack*LST*_*_*, keep *_*HighPtTripletStepTrack*_*_*' \\\r\n-n 100 --nThreads 10 \\\r\n--procModifiers alpaka,trackingLST,seedingLST\r\n\r\ncmsDriver.py DQM -s VALIDATION:hltMultiTrackValidation \\\r\n--conditions auto:phase2_realistic_T33 \\\r\n--geometry ExtendedRun4D110 \\\r\n--era Phase2C17I13M9 \\\r\n--datatier DQMIO \\\r\n--eventcontent DQM \\\r\n--filein file:Phase2_L1P2GT_HLT.root \\\r\n--hltProcess HLTX \\\r\n--fileout DQM.root \\\r\n-n 100 --nThreads 10\r\n\r\ncmsDriver.py HARVEST -s HARVESTING:@trackingOnlyValidation+@trackingOnlyDQM+postProcessorHLTtrackingSequence \\\r\n--filein file:DQM.root \\\r\n--scenario pp \\\r\n--filetype DQM \\\r\n--conditions auto:phase2_realistic_T33 \\\r\n--mc -n 100\r\n\r\nmv DQM_V0001_R000000001__Global__CMSSW_X_Y_Z__RECO.root configName.root\r\nmakeTrackValidationPlots.py configName.root --extended\r\n```\r\n\r\n</details>\r\n\r\nFYI @slava77 @rovere @lguzzi ", "branch": "master", "changed_files": 34, "comments": 5, "commits": 2, "created_at": "1732888614", "deletions": 6, "labels": ["reconstruction-pending", "hlt-pending", "operations-pending", "pending-signatures", "tests-pending", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-pending", "tracking"], "milestone": "CMSSW_15_0_X", "number": 46828, "release-notes": [], "review_comments": 6, "state": "open", "title": "Addition of single iteration Patatrack and LST HLT configurations and workflows", "updated_at": "1732898406", "user": "VourMa"}