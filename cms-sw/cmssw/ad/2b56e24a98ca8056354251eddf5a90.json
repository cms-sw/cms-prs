{"additions": 881, "auther_ref": "xml_records_migration", "auther_sha": "71f51f6316b65b998415f6bac910aa6d92a3e7b6", "author": "CTPPS", "body": "#### PR description:\r\n\r\nThis PR is a first step in a way to resolve an issue from https://github.com/cms-sw/cmssw/pull/40765 - Transfer of all PPS detectors' mappings from XML to CondDB.\r\n\r\nIn this PR:\r\n* Introduction of new record: [TotemAnalysisMaskRcd.cc](https://github.com/CTPPS/cmssw/pull/79/files#diff-8e15d43975e75857b41d01b6bfd950e6e7a2a87b203ea58acce2cad3100e8490) - separated from TotemReadoutRcd;\r\n* Serialization of classes which objects are intended to be placed in the CondDB (and inner classes of those) - [TotemAnalysisMask.h](https://github.com/CTPPS/cmssw/pull/79/files#diff-0266d70e3769fc2f3d773fb4a84ae048b23986dcff928e5a65d104dfd87770b9), [TotemDAQMapping.h](https://github.com/CTPPS/cmssw/pull/79/files#diff-c70098b419b2deac1b51936061ac94c788496fa4724139ff74c276006e161b56), [TotemFramePosition.h](https://github.com/CTPPS/cmssw/pull/79/files#diff-a64176b2f94eec46393738ac968202e6055cc1795695836c6f5f28c62dd63e7b), [TotemSymbId.h](https://github.com/CTPPS/cmssw/pull/79/files#diff-d3e99bdc9a0a36bab8559221eb41b4797245dd34799c91c6aced88e3ce6853d4));\r\n* Writer plugin ([WriteCTPPSTotemDAQMappingMask.cc](https://github.com/CTPPS/cmssw/pull/79/files#diff-140c17cd5e469a3e3692f7f3e397d10512b8b9e95d1038ac986f3737902f8475)) and config ([write-ctpps-totem_daqmap_cfg.py](https://github.com/CTPPS/cmssw/pull/79/files#diff-e836bfb51a0ad8796ba77e01102e7487caaedfa09c9d56a28f7b1c59d4b8b5d0)) for reading CTPPS XML files with mappings and placing objects made from those in SQLite;\r\n* Updates of printer plugin ([PrintTotemDAQMapping.cc](https://github.com/CTPPS/cmssw/pull/79/files#diff-2f22f8e72a591e6be95ba3f5388a9a837648b9153fb5ba8e7bfec2b1cc2211ff)) which prints records (TotemReadoutRcd, TotemAnalysisMaskRcd) content;\r\n\r\n#### PR validation:\r\n\r\nValidation has been made with use of new plugin ([CalibPPS/ESProducers/plugins/WriteTotemDAQMapping.cc](https://github.com/CTPPS/cmssw/pull/79/files#diff-276299009e7ad4e9336945c66d7cfcb5b6ec85d7835707bcd3096bcfb382c7dc)) which reads data from SQLite/XML file and drops them to text file.\r\nAll data from XML was dropped to SQLite in separate records and with different IOVs.\r\n```\r\npython3 CondTools/CTPPS/test/script-ctpps-write-many-XML-to-SQLite.py\r\n```\r\nThen (using new plugin) objects were read from SQLite and dropped to text file.\r\n```\r\npython3 CalibPPS/ESProducers/test/script_test_many_writeTotemDAQMapping.py\r\n```\r\nAlso data from XML files was read and dropped to other text file (change flag inside script and then run).\r\n```\r\npython3 CalibPPS/ESProducers/test/script_test_many_writeTotemDAQMapping.py\r\n```\r\nThen files were compared and their content was the same, as expected eg.:\r\n``` \r\ndiff all_diamonds_db.txt all_diamonds_xml.txt\r\n```\r\n\r\n---\r\n\r\n@grzanka for your attention\r\n", "branch": "master", "changed_files": 23, "comments": 23, "commits": 5, "created_at": "1691153124", "deletions": 55, "labels": ["alca-pending", "db-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_13_3_X", "number": 42471, "release-notes": [], "review_comments": 10, "state": "open", "title": "PPS detector mapping records separation and serialization", "updated_at": "1692372472", "user": "brzozia"}