{"additions": 16, "auther_ref": "141x-max-to-infinity", "auther_sha": "3d04e1fe2e90d6037b71b176198f75375f61ee69", "author": "smuzaffar", "body": "Fixes https://github.com/cms-sw/cmssw/issues/45181\r\n\r\nAs proposed in https://github.com/cms-sw/cmssw/issues/45181#issuecomment-2182474727 , this PR replaces `std::numeric_limits<float>::infinity()` with `std::numeric_limits<float>::max()` . This should fix the compilation warnings in CLANG IBs. \r\n\r\n[a] \r\n- https://cmssdt.cern.ch/SDT/cgi-bin/buildlogs/el8_amd64_gcc12/CMSSW_14_1_CLANG_X_2024-07-17-1700/RecoEgamma/EgammaPhotonAlgos\r\n```\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:115:46: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   115 |     void setNegAttributes(const float dRZ2 = std::numeric_limits<float>::infinity(),\r\n      |                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:116:47: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   116 |                           const float dPhi2 = std::numeric_limits<float>::infinity(),\r\n      |                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:117:46: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   117 |                           const float dRZ1 = std::numeric_limits<float>::infinity(),\r\n      |                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:118:47: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   118 |                           const float dPhi1 = std::numeric_limits<float>::infinity());\r\n      |                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:119:46: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   119 |     void setPosAttributes(const float dRZ2 = std::numeric_limits<float>::infinity(),\r\n      |                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:120:47: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   120 |                           const float dPhi2 = std::numeric_limits<float>::infinity(),\r\n      |                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:121:46: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   121 |                           const float dRZ1 = std::numeric_limits<float>::infinity(),\r\n      |                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:122:47: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   122 |                           const float dPhi1 = std::numeric_limits<float>::infinity());\r\n      |                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:143:63: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   143 |       return hitNr < hitInfo_.size() ? hitInfo_[hitNr].*val : std::numeric_limits<T>::infinity();\r\n      |                                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nsrc/DataFormats/EgammaReco/interface/ElectronSeed.h:102:48: note: in instantiation of function template specialization 'reco::ElectronSeed::getVal<float>' requested here\r\n  102 |     float dPhiNeg(size_t hitNr) const { return getVal(hitNr, &PMVars::dPhiNeg); }\r\n      |                                                ^\r\n  src/DataFormats/EgammaReco/interface/ElectronSeed.h:143:63: warning: use of infinity is undefined behavior due to the currently enabled floating-point options [-Wnan-infinity-disabled]\r\n   143 |       return hitNr < hitInfo_.size() ? hitInfo_[hitNr].*val : std::numeric_limits<T>::infinity();\r\n```", "branch": "master", "changed_files": 3, "closed_at": "1721319029", "comments": 15, "commits": 1, "created_at": "1721281875", "deletions": 16, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "a18756f225a65c2dd5cc41a73ea965faf783414c", "merged_at": "1721319029", "merged_by": "cmsbuild", "milestone": "CMSSW_14_1_X", "number": 45488, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Use max instead if infinity which hasundefined behavior", "updated_at": "1721319031", "user": "smuzaffar"}