{"additions": 132, "auther_ref": "replaceSwapWithMove", "auther_sha": "ef15111f325b7a63ff35df45d14a54ec756a238d", "author": "makortel", "body": "This PR suggests to replace `swap_or_assign()` with move assignment in the constructor of `edm::Wrapper<T>` in order to benefit from compiler-generated move constructor+assignment operator for move-only products instead of having to explicitly write the `swap()` method every time (I got annoyed and after consultation with @Dr15Jones proceeded for a PR). Here the `swap()` was anyway used for a \"move\" before C++11.\r\n\r\nI had to add the move constructor and assignment operators to handful of classes because they were not generated automatically by the compiler (mostly because of deleted copy constructor+assignment operator). There were a few more complex cases:\r\n* `edmNew::DetSetVectorTrans` needed explicit move constructor+assignment operator because of atomic member variable (which are not movable), logic is as in `swap()`\r\n* `MeasurementTrackerEvent` needed explicit move constructor+assignment operator because of the use of a boolean member variable to denote ownership of pointers\r\n* ~~In~~ `LHEEventProduct` ~~I replaced `auto_ptr<PDF>` member with `unique_ptr<PTR>`, after which the compiler-generated move constructor+assignment operator work out of the box~~ needed explicit move constructor+assignment operator because of `auto_ptr`\r\n   * ~~and anyway `auto_ptr` was deprecated in C++11 and removed in C++17~~\r\n\r\nFor all touched product classes I removed the `swap()` as unnecessary, except for `edmNew::DetSetVector(Trans)` where the `swap()` is used also elsewhere (and `swap()` is still part of the `std::vector` interface so for interface compatibility it makes sense to keep it).\r\n\r\n\r\nTested with limited matrix in 10_0_0, no changes expected.", "branch": "master", "changed_files": 21, "comments": 18, "commits": 16, "created_at": "1517477571", "deletions": 208, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "core-pending", "generators-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "simulation-pending", "tests-approved"], "milestone": "CMSSW_10_1_X", "number": 22069, "release-notes": [], "review_comments": 11, "state": "open", "title": "Replace swap_or_assign with move in edm::Wrapper<T> constructor", "updated_at": "1517563528", "user": "makortel"}