{"additions": 1, "auther_ref": "fixDuplicateCustomise", "auther_sha": "efa4fa8fa2cb1d92fb549f0c907b557d17f5800d", "author": "kpedro88", "body": "For a while, I've noticed that using `customise_commands` in `cmsDriver` resulted in the commands being printed twice at the end of the generated config. The handling of this was changed most recently in #6492.\n\nI finally found the cause of the duplication: the second call to `addCustomise()` for unscheduled mode was in the wrong block for the current logic. The fixed version works for both the example in #6492 and regular (scheduled) examples, e.g.:\n\n```\ncmsDriver.py SinglePiE50HCAL_pythia8_cfi --python_filename run_step1_noCT.py --conditions auto:phase1_2017_design -n 10 --era Run2_2017 --geometry Configuration.Geometry.GeometryExtended2017dev_cff,Configuration.Geometry.GeometryExtended2017devReco_cff --eventcontent FEVTDEBUGHLT -s GEN,SIM,DIGI:pdigi_valid --datatier GEN-SIM-DIGI-RAW-HLTDEBUG --beamspot Realistic50ns13TeVCollision --fileout file:step1_noCT.root --customise SLHCUpgradeSimulations/Configuration/HCalCustoms.customise_Hcal2017Full --customise_commands \"process.mix.digitizers.hcal.he.sipmCrossTalk = cms.double(0)\" --no_exec\n```\n", "branch": "CMSSW_8_1_X", "changed_files": 1, "closed_at": "1470935846", "comments": 6, "commits": 1, "created_at": "1470841849", "deletions": 1, "labels": ["comparison-available", "operations-pending", "orp-pending", "pending-signatures", "tests-approved"], "milestone": "Next CMSSW_8_1_X", "number": 15418, "release-notes": [], "review_comments": 0, "state": "closed", "title": "fix duplicate customise_commands in cmsDriver", "updated_at": "1470935847", "user": "kpedro88"}