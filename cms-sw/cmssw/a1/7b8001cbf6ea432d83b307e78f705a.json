{"additions": 25, "auther_ref": "mm_refurbish_HLT_DQM", "auther_sha": "3c5e8feb080649abfa860d8ac44d7746174871e6", "author": "mmusich", "body": "#### PR description:\r\n\r\nThis PR bundles together a couple of fixes for the HLT online DQM:\r\n   * I noticed looking at the [Pixel residuals @HLT plots](https://cmsweb.cern.ch/dqm/online/start?runnr=386554;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Everything;size=M;root=HLT/Pixel/Tracks/PXBarrel;focus=;zoom=no;) in recent runs that they were empty. Looking at the [dqm-square log](https://cmsweb.cern.ch/dqm/dqm-square/api?what=get_logs&id=dqm-source-state-run386554-hostdqmfu-c2b03-45-01-pid2856735&db=production) for that run, I also saw a bunch of errors of the type:\r\n   ```\r\n   %MSG-w TrackProducerBase:  TrackRefitter:hltrefittedForPixelDQM  03-Oct-2024 22:56:25 CEST Run: 386554 Event: 2607599\r\n BeamSpot is not valid\r\n%MSG\r\n%MSG-e TrackRefitter:  TrackRefitter:hltrefittedForPixelDQM  03-Oct-2024 22:56:25 CEST Run: 386554 Event: 2607599\r\n BeamSpot is (0,0,0), it is probably because is not valid in the event\r\n%MSG\r\n   ```\r\n   I believe the issue is that the current `hltrefittedForPixelDQM` instance clones the one used for offline (`refittedForPixelDQM`) which ultimately clones the template with the offline parameters:\r\n   \r\n   https://github.com/cms-sw/cmssw/blob/180e6a5c307a65a434208d7d55abda866eb9094e/RecoTracker/TrackProducer/python/TrackRefitter_cfi.py#L5\r\n   \r\n   * secondly, also looking at the [HLT quick collection](https://cmsweb.cern.ch/dqm/online/start?runnr=386554;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=HLT;size=M;root=Quick%20collection;focus=;zoom=no;) many of the plots are empty, I believe due the usage of deprecated trigger paths in input \r\n   \r\nThe two issues are addressed at 3bf61e34e8f99a0d8831549443f179e9b6c985e4 and 17e3bf7da1fad35f9fd58d073eebeebdc4f68349 respectively. \r\n   \r\n#### PR validation:\r\n\r\nNone, will need to be tested via DQM replay\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport, might backport to 14.1.x and 14.0.x for 2024 data-taking purposes.", "branch": "master", "changed_files": 4, "comments": 5, "commits": 2, "created_at": "1728018722", "deletions": 24, "labels": ["dqm-pending", "hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_14_2_X", "number": 46245, "release-notes": [], "review_comments": 0, "state": "open", "title": "Miscellaneous fixes for HLT online DQM ", "updated_at": "1728030599", "user": "mmusich"}