{"additions": 805, "auther_ref": "LowPtElectrons_userFloats", "auther_sha": "c5e2d0466fbbf75f038b4dc37611ba6d1bd6c1f6", "author": "bainbrid", "body": "**This PR builds on a previous PR: cms-sw/cmssw#31080**\r\n\r\n**This PR requires: cms-data/RecoEgamma-ElectronIdentification#15**\r\n\r\n**Updated and embedded electron ID**\r\n- Embeds the ID score to the userFloats of the pat::Electron with the key 'ID'.\r\n- In the case of the `run2_miniAOD_UL` modifier, the LowPtGsfElectronIDProducer module is rerun as part of the PAT producersLayer sequence.\r\n- Adds support for a ROOT file format to store the GBRForest that describes the BDT models, based on [this](https://github.com/cms-sw/cmssw/compare/master...guitargeek:MVAUtils_GBRForest_root_1) development from @guitargeek and potentially fixes [this](https://github.com/cms-sw/cmssw/issues/28780) issue.\r\n- Relies on cms-data/RecoEgamma-ElectronIdentification#15, which contains a placeholder model (to be updated soon) in the ROOT file format.\r\n\r\n**Embedded ElectronSeed BDT scores**\r\n- Schedules the LowPtGsfElectronSeedValueMapProducer to run as part of the default RECO sequence (and within PAT producersLayer1 for the `run2_miniAOD_UL` modifier). This producer rekeys two floatValueMaps by reco::GsfElectron such that the BDT scores can be embedded in the pat::Electron\r\n- The contents of these two ValueMaps are embedded via the electronIDSources PSet with the keys 'unbiased' and 'ptbiased'.\r\n\r\n**Embedded reco::CandidatePtr to provide provenance information**\r\n- Schedules the LowPtGSFToPackedCandidateLinker module to run as part of the slimming sequence.\r\n- The Linker module has been adapted to provide a ValueMap of edm::PackedCandidatePtrs such that the low-pT pat::Electron can be linked to a PFCandidate object via the following provenance chain pat::Electron-->reco::GsfTrack-->reco::Track and reco::PFCandidate-->reco::Track.\r\n\r\n**Selects electrons based on the ID score**\r\n- Selector string: `cut = cms.string(\"pt>1. && electronID('ID')>1.5\")`, which gives an efficiency / fake rate of 90% / 10%\r\n\r\n**Miscellaneous**\r\n- Embeds the ID and the two ElectronSeed BDT scores in the pat::Electron\r\n- Embeds related RECO quantities (GsfTrack, etc) in  the pat::Electron\r\n- Drops all unnecessary RECO collections from the MINIAOD Event Content\r\n- Add protection for run2_miniAOD_94XFall17 and run2_miniAOD_80XLegacy (no low-pT electrons in existing AOD)\r\n\r\n@slava77 @guitargeek @crovelli @afiqaize @SohamBhattacharya @jpata @jainshilpi @lsoffi", "branch": "master", "changed_files": 26, "closed_at": "1606922098", "comments": 264, "commits": 10, "created_at": "1598294381", "deletions": 408, "labels": ["analysis-approved", "code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "requires-external", "tests-approved", "xpog-approved"], "merge_commit_sha": "2b2a8bb6fdb03868c5e9b679ed5fd7e654a12018", "merged_at": "1606922098", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 31220, "release-notes": [], "review_comments": 184, "state": "closed", "title": "Add low-pT electrons to MINIAOD, update ID, improve end user experience", "updated_at": "1606922098", "user": "bainbrid"}