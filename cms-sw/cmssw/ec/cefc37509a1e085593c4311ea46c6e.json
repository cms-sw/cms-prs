{"additions": 454, "auther_ref": "devel_l1tZDCEtSumsEmul", "auther_sha": "94a8190c0d83ebd9bc2ec1ebdfce4f914fa2ca8e", "author": "missirol", "body": "#### PR description:\r\n\r\nhttps://github.com/cms-sw/cmssw/issues/43214#issuecomment-3262871544 shows that the emulation of the L1T ZDC EtSums is currently inaccurate, due to\r\n - (a) the relevant iEt values of ZDC trigger primitives (TPs) not being restricted (or capped) to a 10-bit integer, and\r\n - (b) the ZDC-iEtSums TPs ($|i\\eta| = 42$, $i\\phi = 99$) occasionally missing from the unpacked HCAL digis.\r\n\r\nThe root cause of (b) is not understood yet. This PR fixes (a), and works around (b) by re-computing the relevant iEtSums values from the other (non-iEtSum) ZDC TPs, i.e. those with $|i\\eta| = 42$ and $i\\phi \\neq 99$.\r\n\r\nThe PR includes a few additional changes, as detailed below (see the list of commits).\r\n - Cleanup of the `L1Trigger/L1TZDC` package, removing several files which are unused and, imho, not really useful anymore.\r\n - Fixes for the emulation of the ZDC L1T EtSums as described above, plus renaming the `L1TZDC{Producer,Analyzer}` plugins to `L1TZDCEtSums{Producer,Analyzer}` for clarity.\r\n - Addition of `L1TEtSumsPrinter`, a simple `EDAnalyzer` to print out the content of `l1t:EtSum` objects.\r\n - Addition of a unit test for `L1TZDCEtSumsProducer`, including a check on the values of the emulated L1T ZDC EtSums for a few events of 2024 PbPb data.\r\n\r\n#### PR validation:\r\n\r\nLooking at the logs of the new unit test, one can verify that the emulated L1T ZDC EtSums (\"l1tZDCEtSumsPrinter2\") are now in agreement with the L1T ZDC EtSums unpacked from the L1-uGT data (\"l1tZDCEtSumsPrinter1\"). For more context, see https://github.com/cms-sw/cmssw/issues/43214#issuecomment-3262871544 and subsequent comments.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\nIf merged, this change will be backported at least to the `CMSSW_15_1_X` cycle, since it is relevant to the 2025 PbPb run (although not strictly necessary for data-taking purposes).\r\n", "branch": "master", "changed_files": 17, "closed_at": "1759041293", "comments": 18, "commits": 4, "created_at": "1758387666", "deletions": 711, "labels": ["dqm-approved", "l1-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "code-checks-approved"], "merge_commit_sha": "41e844635244dda398c7867cbc4c7e38b7216cf9", "merged_at": "1759041292", "merged_by": "cmsbuild", "milestone": "CMSSW_16_0_X", "number": 48963, "release-notes": [], "review_comments": 1, "state": "closed", "title": "fix emulation of L1T ZDC EtSums", "updated_at": "1759041294", "user": "missirol"}