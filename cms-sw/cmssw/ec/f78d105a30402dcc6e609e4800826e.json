{"additions": 54, "auther_ref": "fix-cmsLHEtoEOSManager", "auther_sha": "e689655c3300c5867f4d42c672ff1e9508487b52", "author": "smuzaffar", "body": "As reported https://hypernews.cern.ch/HyperNews/CMS/get/prep-ops/7320/1.html , cmsLHEtoEOSManager.py does not work for uploading the lhe files. This PR should fix the following issues\r\n- checking of existence of file\r\n- uploading the new LHE file\r\n- fix the checksum commands use `xrdfs query checksum` instead of `eos checksum`\r\n\r\nAlso added the unit test to make sure that various commands for this scripts properly works. Unit test does the following\r\n- list an existing LHE file and copy it locally\r\n- copy a tmp copy of this file in to cmsbuild eos area\r\n- update  the existing tmp copy\r\n- Do not fail if adler32 is not available from AFS. For IBs and PR tests we do not have access to AFS, so unit test should not fail if it can ot run adler32. Looks like checksum checking is an optional thing https://github.com/cms-sw/cmssw/blob/master/GeneratorInterface/LHEInterface/scripts/cmsLHEtoEOSManager.py#L90-L97\r\n\r\nNote that unit test only runs it user has `cmsbuild` token (so it should work for IBs and PR tests)", "branch": "master", "changed_files": 3, "closed_at": "1603472232", "comments": 24, "commits": 3, "created_at": "1603450436", "deletions": 10, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "0dd6a2718c73b7e7a4f7e84d0960190e2632970c", "merged_at": "1603472232", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31922, "release-notes": [], "review_comments": 0, "state": "closed", "title": "fixed cmsLHEtoEOSManager and added unit test to test it", "updated_at": "1603472233", "user": "smuzaffar"}