{"additions": 8, "auther_ref": "PATLeptonTimeLifeInfoProducer-fix", "auther_sha": "ca2110120efb58b25880e7631fc7f931e2a368eb", "author": "kandrosov", "body": "#### PR description:\r\n\r\nVertexException was occurring in PATLeptonTimeLifeInfoProducer when fitVertex failed. This PR fixes the issue by catching such exceptions in the fitVertex method and returning false.\r\nHow to reproduce exception:\r\n```\r\nedmCopyPickMerge outputFile=mini.root inputFiles=/store/mc/Run3Summer22MiniAODv4/DYto2L-2Jets_MLL-50_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/MINIAODSIM/130X_mcRun3_2022_realistic_v5-v2/30000/d8195b83-9e92-4dd4-b286-dc358ec9568a.root eventsToProcess=1:26427:49708440\r\ncmsDriver.py nano --filein file:mini.root --fileout file:nano.root --eventcontent NANOAODSIM --datatier NANOAODSIM --step NANO --nThreads 1 --conditions auto:phase1_2022_realistic --era Run3 --mc -n -1\r\n```\r\nException message:\r\n```\r\n----- Begin Fatal Exception 06-Jul-2024 07:38:06 CEST-----------------------\r\nAn exception of category 'VertexException' occurred while\r\n   [0] Processing  Event run: 1 lumi: 26427 event: 49708440 stream: 0\r\n   [1] Running path 'NANOAODSIMoutput_step'\r\n   [2] Prefetching for module NanoAODOutputModule/'NANOAODSIMoutput'\r\n   [3] Prefetching for module SimplePATTau2TrackTimeLifeInfoFlatTableProducer/'tauTimeLifeInfoTable'\r\n   [4] Calling method for module PATTauTimeLifeInfoProducer/'tauTimeLifeInfos'\r\nException Message:\r\nBasicSingleVertexState::could not invert weight matrix\r\n----- End Fatal Exception -------------------------------------------------\r\n\r\n```\r\nNo changes to the output are expected.\r\n\r\n#### PR validation:\r\n\r\nValidated on several miniAOD files in `CMSSW_14_0_6_patch1` and `CMSSW_14_1_0_pre5` releases, for which the processing was originally failing due to the exception described above.\r\n\r\nFYI @mbluj ", "branch": "master", "changed_files": 1, "comments": 1, "commits": 1, "created_at": "1720238388", "deletions": 3, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "xpog-pending"], "milestone": "CMSSW_14_1_X", "number": 45393, "release-notes": [], "review_comments": 0, "state": "open", "title": "Catch VertexException in PATLeptonTimeLifeInfoProducer when fitVertex fails", "updated_at": "1720238414", "user": "kandrosov"}