{"additions": 304, "auther_ref": "91X_SiPixelAliThresholds_CC", "auther_sha": "9495d8e4ced1f1054d141c5693dd408907d1a92e", "author": "mmusich", "body": " Greeting, \r\nthis is a follow-up Pull Request to #18087. The Pixel Alignment Prompt Calibration Loop consumer code in `/Alignment/MillePedeAlignmentAlgorithm` is changed to use thresholds for payload creation from DataBase instead that from python configuration file.\r\nThe two main areas affected are:\r\n   * `Alignment/MillePedeAlignmentAlgorithm/interface(src)/MillePedeFileReader.h(cc)` class that presides to the checking of the payload features. \r\n   * `Alignment/MillePedeAlignmentAlgorithm/plugins/MillePedeDQMModule.h(cc)` class that provides the DQM monitoring at the `AlCaHarvesting` stage.\r\n\r\nTo let PR tests run (since the new `AlignPCLThresholds` payload is not yet integrated) I am providing the needed conditions via `ESSource` in \r\n   * `AlCaSkimming` (`ALCARECOPromptCalibProdSiPixelAli_cff.py`) \r\n   * `AlCaHarvesting` (`AlcaSiPixelAliHarvester_cff.py`)  \r\n\r\nI will remove the external sources when the payload will be integrated in Global Tag (requests in the Conditon Data Browser are [here](https://cms-conddb.cern.ch/cmsDbBrowser/requests_management/Prod/tag/SiPixelAliThresholds_express_v0/AlignPCLThresholdsRcd) and [here](https://cms-conddb.cern.ch/cmsDbBrowser/requests_management/Prod/tag/SiPixelAliThresholds_offline_v0/AlignPCLThresholdsRcd) ).\r\nOnce merged a follow-up Pull Request to https://github.com/dmwm/deployment will be issued to fix the DQMGUI rendering plugin.\r\n\r\nI attach here an example of how it will look like once finally integrated (using the payload at `/afs/cern.ch/user/m/musich/public/AlCa/AlignPCLThresholds_Payload/mythresholds.db`, that features thresholds dependent on the alignable partition).\r\n\r\n![screenshot 2017-04-04 17 43 54](https://cloud.githubusercontent.com/assets/5082376/24666745/7f04e02e-1961-11e7-99ff-a011485c81ef.png)\r\n\r\nattn: @mschrode @meng-xiao \r\n", "branch": "master", "changed_files": 11, "closed_at": "1491491602", "comments": 23, "commits": 18, "created_at": "1491315040", "deletions": 128, "labels": ["alca-approved", "comparison-available", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "a2b3bb953fbf533ef65ebcb5edd96385e0701476", "merged_at": "1491491602", "merged_by": "cmsbuild", "milestone": "CMSSW_9_1_X", "number": 18196, "release-notes": [], "review_comments": 10, "state": "closed", "title": "[91X] SiPixelAli PCL payload creation thresholds from db - Consumer Code", "updated_at": "1491491602", "user": "mmusich"}