{"additions": 2668, "auther_ref": "tracks_and_hits_portable_squash", "auther_sha": "d1e7bcdeb3e7fa5ad2d89d06aef87385cdebaee4", "author": "PixelTracksAlpaka", "body": "Co-authored-by: Adriano DiFlorio <adriano.diflorio@ba.infn.it>\r\nCo-authored-by: Breno Orzari <breno.orzari@hotmail.com>\r\nCo-authored-by: Dimitris Papagiannis <nothingface0@gmail.com>\r\n\r\n#### PR description:\r\n\r\nA joint work from  @borzari, @nothingface0 and @AdrianoDee.\r\n\r\nThis PR proposes moving the data structures used for the pixel local and track reconstruction to the `Portable{Host,Device}Collection` logic. This includes moving all the methods used in the chain to make use. The modifications are all technical and no change in performance observed nor expected. **This is the first of two steps towards the pixel track reconstruction CUDA to Alpaka port.** \r\n\r\n#### Physics Performance\r\n\r\n##### Local SiPixel Reco\r\n\r\nNo difference shown. Posting `FDisk -2` hit charge as an example. \r\n\r\n![image](https://user-images.githubusercontent.com/16901146/211536776-7c16b2c7-9c67-4fdb-a6f9-691501408528.png)\r\n\r\nFurther plots [here](https://adiflori.web.cern.ch/adiflori/portable_soas_pr/gpu_relvals_plots/).\r\n\r\n##### Pixel Track Reco\r\n\r\nNo difference shown. Posting pixel track efficiencies and vertices RecoVsSim as examples. The four perfectly overlapping trends compare the GPU vs CPU and PR (`PixelPortableDataFormats`) vs `CMSSW_13_0_X_2023-01-09-2300`.\r\n\r\n<img width=\"255\" alt=\"image\" src=\"https://user-images.githubusercontent.com/16901146/211574154-975ff06b-652c-49f2-966d-fb620a2ddc0b.png\"> <img width=\"260\" alt=\"image\" src=\"https://user-images.githubusercontent.com/16901146/211574519-24a65bc9-652b-44a6-afd7-336a8ac200d3.png\">\r\n\r\n\r\nFurther MTV plots [here](https://adiflori.web.cern.ch/adiflori/portable_soas_pr/plots/).\r\n\r\n#### Computational Performance\r\n\r\n`/EphemeralHLTPhysics1/Run2018D-v1/RAW run=323775 lumi=53`\r\n\r\nEvaluated on `fu-c2a02-37-02` T4@P5 via patatrack-scripts.\r\n\r\n![](https://adiflori.web.cern.ch/adiflori/zoom-136_885502.png)\r\n\r\n#### Further references\r\n\r\n- [HLT developments with GPUs](https://indico.cern.ch/event/1192258/contributions/5146503/attachments/2551445/4395339/Status%20report_20221121_PixelTrack.pdf)\r\n\r\n", "branch": "master", "changed_files": 106, "comments": 45, "commits": 21, "created_at": "1673357821", "deletions": 2713, "labels": ["reconstruction-pending", "dqm-pending", "hlt-pending", "geometry-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "heterogeneous-pending"], "milestone": "CMSSW_13_0_X", "number": 40465, "release-notes": [], "review_comments": 130, "state": "open", "title": "Portable Data Formats for Pixel Track Reconstruction", "updated_at": "1673864997", "user": "nothingface0"}