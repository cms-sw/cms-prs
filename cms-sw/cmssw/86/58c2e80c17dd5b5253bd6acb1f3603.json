{"additions": 2211, "auther_ref": "15_0_X-source-improvements-2", "auther_sha": "06fdce0a8c87a9f6be1982c07fbc5eec0fb047e0", "author": "smorovic", "body": "#### PR description:\r\n\r\nAdds several major features for FedRawDataSource and/or DAQSource:\r\n- deletion of files moves to fileDeleter thread with new throttling check to limit number of files that are not yet deleted. Reworked also (complementary) end-of-LS detection using tbb concurrent hash map and tracking lumisections having files being processed.\r\n- DAQSource: DTH unpacking (raw format, currently not containing FRD-style headers). Inncluding dummy data generator and an unit test\r\n- DTH Phase2 format definitions (*preliminary*). The format is not yet final and at the moment definition will remain in EventFilter/Utilities. When finalized and tested with real payload, it will be be moved to DataFormats.\r\n- DAQSource: FRDPreUnpack mode which moves event unpacking into I/O threads and reducing time spent in read event which is serialized  for all CMSSW streams.\r\n- dropping support for very old (pre-Run3) FRD format versions (any such files can be read and converted with an older CMSSW version). Unused single-buffer source support was also dropped.\r\n- improved directory handling and run number detection in file list mode\r\n- improved synchronization (less sleeping) between data fetching and main (framework) thread in sources\r\n\r\n#### PR validation:\r\n- new unit tests added\r\n- tested in a small scale DAQ F3 test setup (3 BU/FU VMs)\r\n\r\n", "branch": "master", "changed_files": 29, "comments": 14, "commits": 20, "created_at": "1736432066", "deletions": 723, "labels": ["daq-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_15_0_X", "number": 47068, "release-notes": [], "review_comments": 0, "state": "open", "title": "[DAQ] Input source improvements and initial Phase-2 DTH format support", "updated_at": "1736457306", "user": "smorovic"}