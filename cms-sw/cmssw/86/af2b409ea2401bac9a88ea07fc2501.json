{"additions": 2, "auther_ref": "fixBL_linFit_15_1_X", "auther_sha": "5f9b6ad3d7ce44a46999675a7d9ce4017b461df4", "author": "cms-ngt-hlt", "body": "#### PR description:\r\n\r\nAs per title.\r\nThis PR is meant to fix a bug in the broken-line fit implementation that is mainly relevant for phase-2, with tilted modules in the Outer Tracker when pixel ntuplets are extended there (phase-2 \"CA extension\").\r\nThis was reported by @JanGerritSchulz and @rovere in [this presentation](https://indico.cern.ch/event/1561539/contributions/6577957/attachments/3092112/5477051/HLTUpgradeMeeting_25-06-24.pdf)\r\n\r\nFor phase-1 pixel (HLT) tracking, the impact is expected to be ~zero, and this was confirmed from private tracking validations (see below).\r\nHowever, we prefer to have a consistent, correct code in the releases in use for phase-1, too.\r\nThere might be a follow-up to include the fix also for the Riemann-fit case (that is not used in production in any scenario).\r\n\r\n#### PR validation:\r\n\r\n[here](https://musich.web.cern.ch/NGT/Task-3.1.1/plots_brokenLineFix_hightStat/) there is a high statistics comparison w.r.t. the current master branch done using:\r\n\r\n```bash\r\n#!/bin/bash -ex\r\n\r\ncmsDriver.py step2 -s HLT:@relval2025,VALIDATION:hltMultiTrackValidation \\\r\n         --conditions auto:phase1_2025_realistic \\\r\n         --datatier DQMIO \\\r\n         -n 1000 \\\r\n         --eventcontent DQMIO \\\r\n         --geometry DB:Extended \\\r\n         --era Run3_2025 \\\r\n         --filein file:/eos/cms/store/relval/CMSSW_15_1_0_pre3/RelValTTbar_14TeV/GEN-SIM-DIGI-RAW/PU_150X_mcRun3_2025_realistic_v3_STD_2025_PU-v3/2590000/04cc6ed0-e6aa-4e4a-b232-05e10f57e6ab.root  \\\r\n         --fileout file:step2.root \\\r\n         --nThreads 24 \\\r\n         --process HLTX \\\r\n         --inputCommands='keep *, drop *_hlt*_*_HLT, drop triggerTriggerFilterObjectWithRefs_l1t*_*_HLT' \\\r\n         > step2.log  2>&1\r\n\r\ncmsDriver.py step3 -s HARVESTING:postProcessorHLTtrackingSequence \\\r\n         --conditions auto:phase1_2025_realistic  \\\r\n         --mc \\\r\n         --geometry DB:Extended \\\r\n         --scenario pp \\\r\n         --filetype DQM \\\r\n         --era Run3_2025 \\\r\n         -n 1000  \\\r\n         --filein file:step2.root \\\r\n         --fileout file:step3.root > step3.log  2>&1\r\n```\r\nand comparing the resulting DQM files in outputs.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport, it will be backported to CMSSW_15_0_X for data-taking purposes.", "branch": "master", "changed_files": 1, "closed_at": "1750933037", "comments": 15, "commits": 1, "created_at": "1750859766", "deletions": 2, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "code-checks-approved", "tracking-pog-approved", "tracking", "ngt"], "merge_commit_sha": "3c9125e2eab1a559037a9bc56b190ad25a194c4d", "merged_at": "1750933037", "merged_by": "cmsbuild", "milestone": "CMSSW_15_1_X", "number": 48410, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix Jacobian for linefit in Brokenline.", "updated_at": "1750933038", "user": "mmusich"}