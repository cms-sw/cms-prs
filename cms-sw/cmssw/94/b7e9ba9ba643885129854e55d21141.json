{"additions": 1234, "auther_ref": "cq_btldigisoa_btlnewdigi_v2_squash", "auther_sha": "e6d5298a9011c555adccfd7e7b6b6f012b98443c", "author": "cquarant", "body": "#### PR description:\r\nFirst implementation of a new Digi format for the Barrel Timing Layer (BTL).\r\n\r\nThis PR introduces a new data format, **BTLDigiSoA**, designed to better reflect the expected detector raw data compared to the current **BTLDigi**, which is primarily simulation-oriented. The new format is implemented as a **Structure of Arrays (SoA)** using the **SoALayout** template class, enabling portability across heterogeneous architectures (CPU/GPU) and between different hosts/devices.\r\n\r\nThe new class and design choices were presented at the *CMS developments with GPU* meeting on **15/12/2025**:\r\n- https://indico.cern.ch/event/1617447/#2-updates-on-btl-data-formats\r\n\r\nTo produce the new format from simulation, the **MTDDigitizer.h** plugin and the **BTLElectronicsSim.h** class have been updated to fill **BTLDigiSoA**.\r\n\r\nFor backward compatibility, the existing digi format is **still maintained**, since the downstream reconstruction chain continues to depend on it. As a consequence, **Phase-2 `step2.root`** currently contains **both** digi formats. In addition, **DQM** has been extended to include new quality plots for **BTLDigiSoA**.\r\n\r\n**Dependencies:**\r\n- None (standalone implementation; no external PR dependencies are required for this first integration).\r\n\r\n#### PR validation:\r\nThe code has been validated by running two standard Phase-2 simulation workflows:\r\n- **34407.0 (SingleMu)**\r\n- **34424.0 (TTbar)**\r\n\r\nThe **step2** output was verified to behave as expected, including:\r\n- correctness of the **SimHit  BTLDigiSoA** translation during digitization\r\n- validation of the newly introduced **DQM** plots for the new digi format.\r\n", "branch": "master", "changed_files": 27, "comments": 6, "commits": 1, "created_at": "1770968916", "deletions": 62, "labels": ["simulation-pending", "dqm-pending", "geometry-pending", "pending-signatures", "tests-approved", "orp-pending", "new-package-pending", "code-checks-approved", "changes-dataformats"], "milestone": "CMSSW_16_1_X", "number": 50130, "release-notes": [], "review_comments": 10, "state": "open", "title": "New Dataformat: BTLDigiSoA", "updated_at": "1771509904", "user": "cquarant"}