{"additions": 9, "auther_ref": "fix-ngHE-emulator-rounding-92X", "auther_sha": "31e8c39e75ddc1df4d0ea4e7762ebd213db76a07", "author": "christopheralanwest", "body": "This PR changes the order of the operations in the HCAL trigger primitive emulation to match what is done in firmware for the readout of the upgraded HEP17. In the ieta range 21-28, the segmentation of the HCAL is 10 degrees, but the energy is split evenly into two 5-degree trigger towers in order to maintain the same granularity for the trigger. In the current emulation code, the energy in each channel contributing to the sum is divided by two before performing the sum. With this PR, energies would be divided by two only after calculating the sum.\r\n\r\nThis PR fixes the differences between firmware and emulation due to rounding, as shown in the attachments.\r\n\r\nOnly MC that includes the upgraded HEP17 should be affected by this change.\r\n\r\n[run293300_HEP17_doublephi.pdf](https://github.com/cms-sw/cmssw/files/986935/run293300_HEP17_doublephi.pdf)\r\n[run293300_HEP17_doublephi_fixed.pdf](https://github.com/cms-sw/cmssw/files/986937/run293300_HEP17_doublephi_fixed.pdf)\r\n\r\n ", "branch": "master", "changed_files": 1, "closed_at": "1494945117", "comments": 9, "commits": 1, "created_at": "1494333028", "deletions": 4, "labels": ["comparison-available", "l1-pending", "orp-pending", "pending-signatures", "tests-approved"], "merge_commit_sha": "f7d35f962939103a3a20e1b6c5799bab399691f3", "merged_at": "1494945117", "merged_by": "davidlange6", "milestone": "CMSSW_9_2_X", "number": 18635, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Move division by 2 to match ngHE uhtr firmware", "updated_at": "1494945117", "user": "christopheralanwest"}