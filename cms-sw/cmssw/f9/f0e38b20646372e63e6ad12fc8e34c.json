{"additions": 79, "auther_ref": "125_NanoInFastSim", "auther_sha": "26b433b3f5bdfd3d1333676cfbf2fc7c2f6265d1", "author": "srimanob", "body": "#### PR description:\r\n\r\nThis PR updates the FastSim steps in `runTheMatrix` following the presentation at the [SIM meeting on July 15](https://indico.cern.ch/event/1182398/) by\r\n- Adding NANO step\r\n   - By doing this, we need to split GEN step out from the main FastSim sequence. This PR then allows to reuse GEN datasets in future for FastSim validation (few lines of code needed to be enable when datasets are available). \r\n- Adding MiniAOD validation (as in https://github.com/cms-sw/cmssw/pull/38736, closed)\r\n   - Few modifications on POG validation sequences are needed to support FastSim without HLT\r\n- Adding NanoAOD validation\r\n- Updating harvesting step to get less complain on missing histograms in FastSim\r\n\r\nNote that this PR can take over https://github.com/cms-sw/cmssw/pull/38736\r\n\r\nExamples of DQM from this PR: https://tinyurl.com/2yb7zl22\r\n- MiniAOD and NanoAOD folders appears as expected. However, POG experts should check if something is missing.\r\n- Compare to https://tinyurl.com/2ykx26v2 which come without this PR.\r\n\r\nNote:\r\n- There is a warning from JetMET analyzer as it looks for HLT. I assume this is a task of JetMET to modify the code to accept NoHLT from FastSim.\r\n```\r\n%MSG-e HLTConfigProvider:   JetAnalyzer:jetDQMAnalyzerAk4PFCHSPuppiCleanedMiniAOD@streamBeginRun  23-Jul-2022 14:31:36 CEST Run: 1 Stream: 0\r\nFalling back to ProcessName-only init using ProcessName 'HLT' !\r\n```\r\n- This PR removes the following sequences from Tau validation sequence when `fastsim` era is used, to support FastSim/MC. This should be reviewed by Tau expert.\r\n```\r\ntauValidationMiniAODRealData,tauValidationMiniAODRealElectronsData,tauValidationMiniAODRealMuonsData\r\nproduceDenominatorRealData,produceDenominatorRealElectronsData,produceDenominatorRealMuonsData\r\n```\r\n- The follow issue should be followed up, to review how to use validation and dqm sequences in MC relvals, https://github.com/cms-sw/cmssw/issues/38828\r\n\r\n#### PR validation:\r\n- Run the following configs our from `runTheMatrix` give expected results:\r\n`runTheMatrix.py --what upgrade -l 13234.0,13434.0,13240.303  -t 8 --wm init`\r\n- DQM harvesting output is uploaded to GUI, to check.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\nNo need of backport.", "branch": "master", "changed_files": 8, "closed_at": "1659509314", "comments": 25, "commits": 4, "created_at": "1658508978", "deletions": 21, "labels": ["dqm-approved", "fastsim-approved", "operations-approved", "fully-signed", "tests-approved", "pdmv-approved", "orp-approved", "upgrade-approved", "code-checks-approved"], "merge_commit_sha": "20d46ab9fce37965c88059ef426a6effa75cbdfd", "merged_at": "1659509314", "merged_by": "cmsbuild", "milestone": "CMSSW_12_5_X", "number": 38834, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Add NANO step and Mini+Nano validations to FastSim workflows", "updated_at": "1659509314", "user": "srimanob"}