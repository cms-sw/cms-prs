{"additions": 4, "auther_ref": "asanCTPPSProtonReconstructionPlotter", "auther_sha": "b0541695aab0495ec99f8abeac4f57e2e26e2110", "author": "makortel", "body": "#### PR description:\r\n\r\nBuild of CMSSW_14_1_ASAN_X_2024-08-21-2300 failed with\r\n```\r\nIn file included from src/DataFormats/Common/interface/RefVector.h:18,\r\n                 from src/DataFormats/ProtonReco/interface/ForwardProton.h:14,\r\n                 from src/Validation/CTPPS/plugins/CTPPSProtonReconstructionPlotter.cc:20:\r\nIn member function 'edm::RefVectorIterator<C, T, F>::reference edm::RefVectorIterator<C, T, F>::operator*() const [with C = std::vector<CTPPSLocalTrackLite>; T = CTPPSLocalTrackLite; F = edm::refhelper::FindUsingAdvance<std::vector<CTPPSLocalTrackLite>, CTPPSLocalTrackLite>]',\r\n    inlined from 'virtual void CTPPSProtonReconstructionPlotter::analyze(const edm::Event&, const edm::EventSetup&)' at src/Validation/CTPPS/plugins/CTPPSProtonReconstructionPlotter.cc:627:22:\r\n  src/DataFormats/Common/interface/RefVectorIterator.h:49:39: error: 'this' pointer is null [-Werror=nonnull]\r\n    49 |       return (*nestedRefVector_)[iter_];\r\n      |                                       ^\r\nsrc/DataFormats/Common/interface/RefVector.h: In member function 'virtual void CTPPSProtonReconstructionPlotter::analyze(const edm::Event&, const edm::EventSetup&)':\r\nsrc/DataFormats/Common/interface/RefVector.h:70:22: note: in a call to non-static member function 'const edm::RefVector<C, T, F>::value_type edm::RefVector<C, T, F>::operator[](size_type) const [with C = edm::RefVector<std::vector<CTPPSLocalTrackLite> >; T = CTPPSLocalTrackLite; F = edm::refhelper::FindRefVectorUsingAdvance<edm::RefVector<std::vector<CTPPSLocalTrackLite> > >]'\r\n   70 |     value_type const operator[](size_type idx) const {\r\n      |                      ^~~~~~~~\r\nIn member function 'edm::RefVectorIterator<C, T, F>::reference edm::RefVectorIterator<C, T, F>::operator*() const [with C = std::vector<CTPPSLocalTrackLite>; T = CTPPSLocalTrackLite; F = edm::refhelper::FindUsingAdvance<std::vector<CTPPSLocalTrackLite>, CTPPSLocalTrackLite>]',\r\n    inlined from 'virtual void CTPPSProtonReconstructionPlotter::analyze(const edm::Event&, const edm::EventSetup&)' at src/Validation/CTPPS/plugins/CTPPSProtonReconstructionPlotter.cc:725:24:\r\n  src/DataFormats/Common/interface/RefVectorIterator.h:49:39: error: 'this' pointer is null [-Werror=nonnull]\r\n    49 |       return (*nestedRefVector_)[iter_];\r\n      |                                       ^\r\nsrc/DataFormats/Common/interface/RefVector.h: In member function 'virtual void CTPPSProtonReconstructionPlotter::analyze(const edm::Event&, const edm::EventSetup&)':\r\nsrc/DataFormats/Common/interface/RefVector.h:70:22: note: in a call to non-static member function 'const edm::RefVector<C, T, F>::value_type edm::RefVector<C, T, F>::operator[](size_type) const [with C = edm::RefVector<std::vector<CTPPSLocalTrackLite> >; T = CTPPSLocalTrackLite; F = edm::refhelper::FindRefVectorUsingAdvance<edm::RefVector<std::vector<CTPPSLocalTrackLite> > >]'\r\n   70 |     value_type const operator[](size_type idx) const {\r\n      |                      ^~~~~~~~\r\ncc1plus: some warnings being treated as errors\r\n```\r\n\r\nwhich is the same error as noted in https://github.com/cms-sw/cmssw/issues/44931#issuecomment-2134850535 and worked around in https://github.com/cms-sw/cmssw/issues/44931#issuecomment-2176186031 and https://github.com/cms-sw/cmssw/pull/45304. This PR applies the same workaround to other part in this code.\r\n\r\nResolves https://github.com/cms-sw/framework-team/issues/1004\r\n\r\n#### PR validation:\r\n\r\nCode compiles in CMSSW_14_1_ASAN_X_2024-08-21-2300", "branch": "master", "changed_files": 1, "closed_at": "1725605110", "comments": 16, "commits": 1, "created_at": "1724436933", "deletions": 1, "labels": ["dqm-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "tests-ib-failure"], "merge_commit_sha": "d79a87788ce8b6a91c377db2c8403e0e3ff70591", "merged_at": "1725605110", "merged_by": "cmsbuild", "milestone": "CMSSW_14_2_X", "number": 45786, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Another workaround for -O3 ASAN compilation issue in CTPPSProtonReconstructionPlotter", "updated_at": "1725605111", "user": "makortel"}