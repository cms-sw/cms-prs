{"additions": 23, "auther_ref": "fc-Ph2SteppingAction20231027", "auther_sha": "33e5008d7099ed8e6002bb9f2a6aed0ad398b45f", "author": "fabiocos", "body": "#### PR description:\r\n\r\nThis PR adapts, within the ```Phase2SteppingAction``` class, the  tracking mechanism for particles back-scattered from CALO volumes into the Tracker, introduced for BTL studies in #42455 , to the new situation produced by #43133 . In order to allow the code to work in a similar way both with CALO and Tracker volumes separated by CMSE, and when they are adjacent, the transition check is made more complex (to be removed as soon as we standardize on one choice only). A further check is added in the case of CALO -> CMSE transition, in order to ensure that it happens towards the inner part of the detector: this is done by testing the distance of the preStep and postStep position from the CMS origin.\r\n\r\nI also took the freedom to move a debug preprocessor statement to the CMS standard flag EDM_ML_DEBUG, as usually done elsewhere.\r\n\r\n#### PR validation:\r\n\r\nCode compiles, runs, and debugging statements show the desired behaviour:\r\n\r\n```\r\n   53    85.15    69.58    296.8  0.003477        0     21.6      40.5                  CALOECTSFront Transportation\r\n   54    85.09    69.49    296.5  0.003477        0     2.91      40.8                         CALOEC Transportation\r\n%MSG-d SimG4CoreApplication:  (NoModuleName) 28-Oct-2023 15:42:40 CEST  pre-events Phase2SteppingAction.cc:213\r\nSetting flag for backscattering from CALO 1\r\n%MSG\r\n   55     84.4     68.5    293.5  0.003477        0     32.3      44.1                           CALO Transportation\r\n   56    80.58       63    276.9  0.003477        0      179        62                           CMSE Transportation\r\n   57    78.55    60.07    268.1  0.003477        0     95.3      71.5                Phase2OTForward Transportation\r\n```", "branch": "master", "changed_files": 1, "comments": 3, "commits": 2, "created_at": "1698494893", "deletions": 13, "labels": ["simulation-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_13_3_X", "number": 43142, "release-notes": [], "review_comments": 0, "state": "open", "title": "Simulation: adapt Phase2SteppingAction to the Tracker-CALO direct boundary for back-scattering detection", "updated_at": "1698496080", "user": "fabiocos"}