{"additions": 438, "auther_ref": "mayConsumeVolumeBasedMagneticFieldESProducerFromDB", "auther_sha": "9d98541b376d85770bc4e3f05afa00bce37ad878", "author": "Dr15Jones", "body": "#### PR description:\r\n\r\nThe module decides which geometry to read from the database by reading the value stored in the MagFieldConfig EventSetup object. The decision cannot be made at module configuration time, only at run time. Therefore mayConsumes must be used.\r\n\r\nUnit tests were added to guarantee the module's behavior is the same after this change.\r\n\r\n#### PR validation:\r\n\r\n- Ran a slightly modified version of MagneticField/Engine/test/testMagneticFieldDB.py where the comparison field map file was copied from afs and read locally. This test showed no changes.\r\n- Created a host of new unit tests which check the field value at `(0,0,0)` for all different configurations of VolumeBasedMagneticFieldESProducerFromDB. The comparison values were obtained from running the tests on the orginal version of the module. All the new unit tests pass.\r\n\r\n", "branch": "master", "changed_files": 9, "closed_at": "1571549413", "comments": 54, "commits": 6, "created_at": "1570451286", "deletions": 75, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "db-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "bee8b7af5c8f349387b13527ed804d2431ad9d8d", "merged_at": "1571549413", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28120, "release-notes": [], "review_comments": 13, "state": "closed", "title": "Use mayConsumes in VolumeBasedMagneticFieldESProducerFromDB", "updated_at": "1571549413", "user": "Dr15Jones"}