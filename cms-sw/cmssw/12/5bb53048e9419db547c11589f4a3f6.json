{"additions": 2, "auther_ref": "patch-13", "auther_sha": "da571c4f71dc9c8de064dcf68e1cda157eb2280b", "author": "schneiml", "body": "#### PR description:\r\n\r\nThis is an attempt to fix #29743.\r\n\r\nI added these calls as a precaution (there might be cases where user can can see invalid MEs otherwise) and got the code from `DQMOneEDAnalyzer`. Except `DQMEDAnalyzer` needs a different definition of moduleid... And screwing that up could lead to a thread safety problem like observed, since now we get enter/init lumi on different threads for the same MEs, and depending on the interleaving the set of MEs might have changed between initLumi and enterLumi, leading to the assertion failure.\r\n\r\nThis is a theory only though.\r\n\r\n#### PR validation:\r\n\r\nNone, so far.\r\n\r\nI can't reproduce the issue in #29743, so I can't tell if this fixes the issue. But it is very obviously a bug, and fixing it should not hurt.", "branch": "master", "changed_files": 1, "closed_at": "1588753696", "comments": 13, "commits": 1, "created_at": "1588747069", "deletions": 2, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "27c8eebad51e18d6b319ebecf746a72aed680f3f", "merged_at": "1588753695", "merged_by": "cmsbuild", "milestone": "CMSSW_11_1_X", "number": 29745, "release-notes": [], "review_comments": 0, "state": "closed", "title": "DQM: Use correct local MEs in DQMEDAnalyzer", "updated_at": "1588777557", "user": "schneiml"}