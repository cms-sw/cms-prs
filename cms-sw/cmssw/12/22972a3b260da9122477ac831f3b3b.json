{"additions": 269, "auther_ref": "dev-madgraph-multithread", "auther_sha": "180a0d889fcbad29d5159fcb32ac738544031f81", "author": "colizz", "body": "#### PR description:\r\n\r\nImplementing multi-thread support for MadGraph LO process.\r\nThe `script run_generic_tarball_cvmfs_madgraphLO_multithread.sh` script is designed as a replacement of `run_generic_tarball_cvmfs.sh` to enable the internal multithreading method of MadGraph. Another file is a patch that works together with this script.\r\nMore details can be found [**in the slides**](https://indico.cern.ch/event/894534/contributions/3827059/attachments/2031408/3400041/20.05.04_GEN_Multi-thread_support_for_MadGraph.pdf).\r\n\r\n#### PR validation:\r\n\r\nThis PR does not touch the CMSSW framework.\r\n[Various gridpacks](https://indico.cern.ch/event/894534/#preview:3430238) have been tested with this script for validation.\r\n\r\n**(A quick test)**\r\n```shell\r\ncmsrel CMSSW_11_2_X_2020-05-28-1100\r\ncd CMSSW_11_2_X_2020-05-28-1100/src/\r\ncmsenv\r\ngit cms-addpkg GeneratorInterface/LHEInterface\r\ngit cms-merge-topic colizz:dev-madgraph-multithread\r\n\r\ncurl -s --insecure https://cms-pdmv.cern.ch/mcm/public/restapi/requests/get_fragment/SMP-RunIISummer19UL17wmLHEGEN-00001 --retry 2 --create-dirs -o Configuration/GenProduction/python/SMP-RunIISummer19UL17wmLHEGEN-00001-fragment.py\r\nscram b -j 8\r\ncd ../..\r\ncmsDriver.py Configuration/GenProduction/python/SMP-RunIISummer19UL17wmLHEGEN-00001-fragment.py --fileout file:SMP-RunIISummer19UL17wmLHEGEN-00001.root --mc --eventcontent RAWSIM,LHE --datatier GEN,LHE --conditions 106X_mc2017_realistic_v6 --beamspot Realistic25ns13TeVEarly2017Collision --step LHE,GEN --geometry DB:Extended --era Run2_2017 --python_filename SMP-RunIISummer19UL17wmLHEGEN-00001_1_cfg.py --no_exec --customise Configuration/DataProcessing/Utils.addMonitoring --customise_commands process.source.numberEventsInLuminosityBlock=\"cms.untracked.uint32(2222)\" -n 1200 --nThreads 4\r\nsed -i \"s/run_generic_tarball_cvmfs/run_generic_tarball_cvmfs_madgraphLO_multithread/g\" SMP-RunIISummer19UL17wmLHEGEN-00001_1_cfg.py\r\ncmsRun -e -j SMP-RunIISummer19UL17wmLHEGEN-00001_rt.xml SMP-RunIISummer19UL17wmLHEGEN-00001_1_cfg.py\r\n```", "branch": "master", "changed_files": 2, "closed_at": "1590756845", "comments": 12, "commits": 1, "created_at": "1590682377", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "11ad26823690b3fab149b95ff9ca32c0a6823cfa", "merged_at": "1590756845", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 30029, "release-notes": [], "review_comments": 0, "state": "closed", "title": "multi-thread support for MadGraph LO process", "updated_at": "1590756846", "user": "colizz"}