{"additions": 5, "auther_ref": "HcalTopologyIeta16and29", "auther_sha": "1561a1d1d5d95a1b76954f4c94f1af8e0fe9def7", "author": "hatakeyamak", "body": "#### PR description:\r\n\r\nUpdate HcalTopology for the ieta neighbor search of |ieta|=16 and 29, i.e. HB-HE boundary and HE-HF boundaries. These two |ieta| values correspind to both HB&HE towers and HE&HF towers. With this update, we specify different behaviors depending on if the tower belongs to HB or HE or to HE or HF [1].\r\n\r\nThe update will have implications on CaloTopoogy used in PF's navigator for HCAL.\r\nhttps://cmssdt.cern.ch/lxr/source/RecoParticleFlow/PFClusterProducer/interface/PFHCALDenseIdNavigator.h\r\nBefore this update, some 2D layer-wise clusters consisted of rechits of different depths [2]. This will no longer happen with this update [3].\r\n\r\nThis unexpected behavior was attributed to the HcalTopology behavior as discussed above. In case one is interested in further details: for example, when we are looking for a lower ieta tower of HE ieta=29, we will want to simply decrease ieta by 1 while keeping depth. But, currently, regardless of HF or HE, ieta=29 invokes the special neighbor search which sets the neighborss depth to 1. Similarly, for example, when we are looking for the higher ieta for HF ieta=29, we will want to simply increase ieta by 1 while keeping depth. However, currently, regardless of HE or HF, ieta=29 invokes the special neighbor search which sets the neighbors depth to 1. These resulted in 2D layer-wise clusters with mixed depth before this PR.\r\n\r\nWe consulted with @bsunanda (primary author of HcalTopolgy) before this PR was made.\r\n\r\n[1] for example, https://cms-docdb.cern.ch/cgi-bin/DocDB/RetrieveFile?docid=12962&filename=HCAL-Depth-Segmentation-Phase1-HE-HBOption1.pdf&version=6\r\n[2] https://indico.cern.ch/event/949951/#12-studies-on-pf-clusters-in-h page-4, 18, 19\r\n[3] https://indico.cern.ch/event/949951/contributions/3991032/attachments/2092837/3527202/plot_PFclusterSize_HFHAD.pdf\r\n\r\n@bendavid @bsunanda @abdoulline @garvitaa @iashvili @jsalfeld\r\n\r\n#### PR validation:\r\n\r\nThe validation is already discussed above. Also checked this update with matrix: 12634.99_TTbar_14TeV (2023PU) and 23434.99_TTbar (2026D49PU) to make sure it runs fine.\r\n\r\nThis PR creates widespread small changes related to the HE-HF and HB-HE boundaries to many reconstructed quantities.\r\n\r\nThe PF validation results can be found at:\r\nhttp://hep.baylor.edu/hatake/PFval/HcalTopologyIeta16And29/\r\n[Highlights]\r\nhttp://hep.baylor.edu/hatake/PFval/HcalTopologyIeta16And29/OffsetStacks/stack_NuGun_test_vs_NuGun_ref.pdf\r\nshow changes consistent with the jenkin's test. Neutral hadrons have largest differences at |eta|=2.7-3.0, and it looks like they are a little more pulled toward loer |eta|. I think this is expected given no (unintended) energy sharing between depths at the 2D clustering stage, which is addressed in this PR.\r\nhttp://hep.baylor.edu/hatake/PFval/HcalTopologyIeta16And29/FlatQCD_PU_2021_ParticleFlow/JetResponse/slimmedJetsPuppi/noJEC/reso_pt_rms.pdf\r\nJet energy resolution is either not negatively impacted or slightly improved at the high |eta| endcap.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot backport.\r\n", "branch": "master", "changed_files": 1, "closed_at": "1600105976", "comments": 19, "commits": 3, "created_at": "1599494437", "deletions": 5, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "geometry-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "a03967f75354ffb8c46b2106ba84a327423b340f", "merged_at": "1600105976", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31384, "release-notes": [], "review_comments": 0, "state": "closed", "title": "HCalTopology revision of HE-HF and HB-HE boundaries for |ieta|=16 and 29", "updated_at": "1600105977", "user": "hatakeyamak"}