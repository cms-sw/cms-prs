{"additions": 6197, "auther_ref": "fc-mtd-dd4hep", "auther_sha": "de8e05eab8c92932a8e3762b14317ac6638fe1e8", "author": "fabiocos", "body": "#### PR description:\r\n\r\nInitial development to migrate the MTD geometry description to the DD4hep backend. In this PR:\r\n\r\n- a new phase 2 scenario D50 is introduced to reorganize the geometry components configuration in a cleaner and more standard way, both for the old and new backend. The geometry description obtained in this way is equivalent to D46 (last MTD geometry cleaning) and should serve also as the baseline for the integration of the new ETL description based on the MTD TDR. Materials are reorganized but the definition is kept unchanged for the time being;\r\n\r\n- the initial DD4hep test configuration provided by @ianna is refreshed to have it fully operational, and a tracker mother volume is defined to avoid all the internal tracker complications. This volume has been verified to be equal to the one of D47;\r\n\r\n- the two test analyzers TestMTDNumbering and TestMTDPosition have been rewritten for DD4hep, and the output compared with the original versions based on DetectorDescription. The numbering is equal (outputs differ only for the use of namespaces in the legacy volume paths), the reference positions appear identical in BTL, with the only differences being in rototranslation dumps:\r\n\r\n```\r\n< Translation vector and Rotation components: ,   1173.3774,     79.9841,     17.9438,     -0.1199,     -0.0000,      0.9928,      0.9928,     -0.0000,      0.1199,     -0.0000,      1.0000,     -0.0000\r\n---\r\n> Translation vector and Rotation components: ,   1173.3774,     79.9841,     17.9437,     -0.1199,     -0.0000,      0.9928,      0.9928,     -0.0000,      0.1199,     -0.0000,      1.0000,     -0.0000\r\n```\r\n\r\nwhile in ETL some reference positions appear different due to an issue with translations (z coordinate of ETL, to be further investigated):\r\n\r\n```\r\n< Translation vector and Rotation components: ,    313.5000,      0.0000,   3043.5000,      0.0000,     -1.0000,      0.0000,      1.0000,      0.0000,     -0.0000,     -0.0000,      0.0000,      1.0000\r\n< Center global   =     313.500000      0.000000   3043.500000 r =     313.500000 phi =       0.000000\r\n---\r\n> Translation vector and Rotation components: ,    313.5000,     -0.0000,   3017.8500,     -0.0000,     -1.0000,     -0.0000,      1.0000,      0.0000,     -0.0000,     -0.0000,      0.0000,      1.0000\r\n> Center global   =     313.500000     -0.000000   3017.850000 r =     313.500000 phi =      -0.000000\r\n24c24\r\n< Corner 1 global =     266.000000     24.500000   3043.650000 DeltaR =      53.446445\r\n---\r\n> Corner 1 global =     266.000000     24.500000   3018.000000 DeltaR =      53.446445\r\n```\r\n\r\nThis code serves as a basis for any further debugging/development.\r\n\r\n\r\n#### PR validation:\r\n\r\nCode compiles and run, analyzers produce output that can be compared with the older versions.", "branch": "master", "changed_files": 21, "closed_at": "1574193899", "comments": 59, "commits": 18, "created_at": "1573924439", "deletions": 29, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "geometry-approved", "operations-approved", "orp-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "5bfb0ea4a5287d7344828155d29a0436ff62c9ed", "merged_at": "1574193898", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28412, "release-notes": [], "review_comments": 0, "state": "closed", "title": "MTD geometry migration to DD4hep: test configuration and basic test analyzers", "updated_at": "1574193899", "user": "fabiocos"}