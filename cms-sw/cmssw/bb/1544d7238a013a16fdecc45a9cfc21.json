{"additions": 40, "auther_ref": "EMTF_addDataProtectionToPrimSel_Jul22_12_4", "auther_sha": "ccfd8681f4f4aed5e3ad8325ae88b3e60fa7ce1e", "author": "eyigitba", "body": "#### PR description:\r\n\r\nDuring the tests of https://github.com/cms-sw/cmssw/pull/38373 we realized that EMTF `PrimitiveSelection.cc` was missing protection against invalid CSC data that is enabled with Run 3 flags `useRun3CCLUT_OTMB` and `useRun3CCLUT_TMB`. \r\n\r\nThis protection is necessary for Run 3 CSC TPs when CCLUT is not running correctly at P5 which was the case before June 2022. \r\n\r\nThe slope variable is a `uint16_t` and it exists for Run 2 or Run 3 CSC TPs. We only use this variable if `useRun3CCLUT_OTMB` or `useRun3CCLUT_TMB` is enabled. That's why I left the max value as 65536 if these flags are disabled. \r\n\r\n\r\n<!-- Please replace this text with a description of the feature proposed or problem addressed, specifying:\r\n  - what changes are expected in the output if any, \r\n  - what other PRs or externals it depends upon if any,\r\n  - link to any additional material useful to provide a documentation for this PR (slides, JIRA tickets, related pull requestes, hypernews, TWiki or Indico pages)  -->\r\n\r\n#### PR validation:\r\n\r\nValidated by checking failed workflows from https://github.com/cms-sw/cmssw/pull/38722. We see correct behaviour of rejecting these \"corrupt\" LCTs and it doesn't change the outcome of the correct LCTs.\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport of https://github.com/cms-sw/cmssw/pull/38775\r\n\r\n<!-- Please replace this text with any link to the master PR, or the intended backport release cycle numbers -->\r\n\r\n<!-- Please delete the text above after you verified all points of the checklist  -->\r\n", "branch": "CMSSW_12_4_X", "changed_files": 5, "closed_at": "1658391874", "comments": 7, "commits": 1, "created_at": "1658298340", "deletions": 3, "labels": ["l1-approved", "fully-signed", "tests-approved", "orp-approved", "backport-ok"], "merge_commit_sha": "6c0dcca0c1f7908755a62f4067d15cfc74e8f9a2", "merged_at": "1658391874", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 38794, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12_4_X] Adding extra protection against invalid data to EMTF PrimitiveSelection", "updated_at": "1658391875", "user": "eyigitba"}