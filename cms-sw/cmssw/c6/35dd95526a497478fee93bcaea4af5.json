{"additions": 258, "auther_ref": "from-CMSSW_14_1_X_2024-05-22-2300_KBv1", "auther_sha": "948fd546f27c1de7a31d2acc101fec20b9a89774", "author": "kbunkow", "body": "#### PR description:\r\n\r\nThis PR adds the possibility of configuring the OMTF emulator directly from the config XML, without using the L1TMuonOverlapPhase1ParamsESProducer. It should allow to avoid problems with the OMTF emulator that appeared in the https://github.com/cms-sw/cmssw/pull/44498 - as discussed in the https://github.com/cms-sw/cmssw/pull/44498#issuecomment-2126564586.\r\n\r\n#### PR validation:\r\nThe PR was validated with the workflow 141.044 (`runTheMatrix.py -l 141.044 -i all --ibeos`). The OMTF plots look good.\r\n\r\nThis PR is not a backport.\r\n\r\n#### Details of changes:\r\n\r\nOMTFReconstruction.h and OMTFReconstruction.cc\r\nThe possibility of configuring the OMTF emulator directly from the config XML is added. When both patternsXMLFile and configXMLFile are given from the python config of the simOmtfDigis or simOmtfPhase2Digis, the L1TMuonOverlapParams are read directly from these files, and the L1TMuonOverlapPhase1ParamsESProducer is not needed. Otherwise, the L1TMuonOverlapParams are obtained from the eventSetup (so from the DB, or from the L1TMuonOverlapPhase1ParamsESProducer- if it is defined).\r\n\r\nL1Trigger/L1TMuonOverlapPhase2/python/fakeOmtfParamsPhase2_cff.py is removed, as when it is used, the L1TMuonOverlapPhase1 gets this config as well.\r\n\r\nL1Trigger/L1TMuonOverlapPhase2/python/simOmtfPhase2Digis_extrapol_cfi.py is moved to\r\nsimOmtfPhase2Digis_cfi.py, as this is the default configuration (besides, there should be only one cfi for a given module).\r\n\r\nL1Trigger/L1TMuonOverlapPhase1/src/Omtf/OMTFProcessor.cc line\r\ntrackAddr[3] = myCand->getGpResultUnconstr().getPdfSumUnconstr(); is removed, as uGMT expects 3 entries in the TrackAddress (when there were 4, uGMT was generating a warning).\r\n\r\nL1Trigger/L1TMuonOverlapPhase2/test - runMuonOverlap*.py are corrected", "branch": "master", "changed_files": 11, "comments": 3, "commits": 1, "created_at": "1716480624", "deletions": 395, "labels": ["l1-pending", "pending-signatures", "tests-pending", "orp-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_14_1_X", "number": 45032, "release-notes": [], "review_comments": 0, "state": "open", "title": "possibility of configuring the OMTF emulator directly from XMLs", "updated_at": "1716480985", "user": "kbunkow"}