{"additions": 108, "auther_ref": "121_runTheMatrixGPUWorkflow", "auther_sha": "7d8f0624d20154594bae6b5d6445514197498adc", "author": "srimanob", "body": "#### PR description:\r\nThe original PR/discussion is https://github.com/cms-sw/cmssw/pull/33057 and https://github.com/dmwm/WMCore/issues/10388 from the WMCore side.\r\n\r\nThis PR is to add GPU workflow to `runTheMatrix`.\r\n\r\nWhat to be done with this PR:\r\n- How can I get the `CUDARuntime` for each release, to be the default value? @makortel @fwyzard @smuzaffar \r\n- In this PR, I assume that the defined stepname in [relval_step](https://github.com/cms-sw/cmssw/blob/master/Configuration/PyReleaseValidation/python/relval_steps.py) or [upgradeWorkflowComponents](https://github.com/cms-sw/cmssw/blob/master/Configuration/PyReleaseValidation/python/upgradeWorkflowComponents.py) will contain GPU if that step uses GPU. OK?\r\n- Is `GPUParams` as expected from WMCore? I just use `jsons.dump(the dictionary)` as suggested. @amaltaro\r\n\r\nThanks.\r\n\r\nFYI @dpiparo @davidlange6 @justinasr \r\n\r\n#### PR validation:\r\nUsing `runTheMatrix.py --what upgrade -l 11650.502 -t 8 --RequiresGPU required --wm init` you will get\r\n```\r\n           'GPUParams': '{\"GPUMemoryMB\": \"8000\", \"CUDACapabilities\": [\"6.0\", '\r\n                        '\"6.1\", \"6.2\", \"7.0\", \"7.2\", \"7.5\"], \"CUDARuntime\": '\r\n                        '\"11.2\", \"GPUName\": \"\", \"CUDADriverVersion\": \"\", '\r\n                        '\"CUDARuntimeVersion\": \"\"}',\r\n           'RequiresGPU': 'required',\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\nThis PR is not a backport.\r\n", "branch": "master", "changed_files": 2, "comments": 6, "commits": 2, "created_at": "1631609547", "deletions": 9, "labels": ["pending-signatures", "tests-approved", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_12_1_X", "number": 35263, "release-notes": [], "review_comments": 5, "state": "open", "title": "Add GPU workflow to runTheMatrix", "updated_at": "1631621979", "user": "srimanob"}