{"additions": 287, "auther_ref": "121_runTheMatrixGPUWorkflow", "auther_sha": "b7862c5bcb7b714c8f22380ec274006a01cf2021", "author": "srimanob", "body": "#### PR description:\r\nThe original PR/discussion is https://github.com/cms-sw/cmssw/pull/33057 and https://github.com/dmwm/WMCore/issues/10388 from the WMCore side.\r\n\r\nThis PR is to add GPU workflow to `runTheMatrix`.\r\n\r\nWhat to be done with this PR:\r\n- How can I get the `CUDARuntime` for each release, to be the default value? @makortel @fwyzard @smuzaffar \r\n- In this PR, I assume that the defined stepname in [relval_step](https://github.com/cms-sw/cmssw/blob/master/Configuration/PyReleaseValidation/python/relval_steps.py) or [upgradeWorkflowComponents](https://github.com/cms-sw/cmssw/blob/master/Configuration/PyReleaseValidation/python/upgradeWorkflowComponents.py) will contain GPU if that step uses GPU. OK?\r\n- Is `GPUParams` as expected from WMCore? I just use `jsons.dump(the dictionary)` as suggested. @amaltaro (Confirmed)\r\n\r\nThanks.\r\n\r\nFYI @dpiparo @davidlange6 @justinasr \r\n\r\n#### PR validation:\r\nUsing \r\n`runTheMatrix.py --what upgrade -l 11650.502 -t 8 --requires-gpu required --wm init` \r\nor\r\n`runTheMatrix.py --what upgrade -l 11650.502 -t 8 --gpu --wm init` \r\nyou will get\r\n```\r\n'GPUParams': '{\"GPUMemoryMB\": 8000, \"CUDACapabilities\": [\"6.0\", '\r\n                        '\"6.1\", \"6.2\", \"7.0\", \"7.2\", \"7.5\"], \"CUDARuntime\": '\r\n                        '\"11.2\"}',\r\n'RequiresGPU': 'required',\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\nThis PR is not a backport.\r\n", "branch": "master", "changed_files": 2, "comments": 22, "commits": 6, "created_at": "1631609547", "deletions": 206, "labels": ["pending-signatures", "tests-pending", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-approved", "heterogeneous-pending"], "milestone": "CMSSW_12_1_X", "number": 35263, "release-notes": [], "review_comments": 21, "state": "open", "title": "Add GPU workflow to runTheMatrix", "updated_at": "1631690065", "user": "srimanob"}