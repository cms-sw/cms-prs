{"additions": 100, "auther_ref": "rpcConcurrentIOVs", "auther_sha": "aa9aa16cabe28983a363eaa3663314b74e92d997", "author": "wddgit", "body": "Currently the Framework only allows one EventSetup IOV (Interval of Validity) to be processed at a time, but we are preparing to change this in the future and allow multiple concurrent IOVs. This PR modifies the ESProducers related to RPCs in preparation for this change.\r\n\r\nPrior to this, the ESProducer held a pointer to a single produced object. After this PR it will use the ReusableObjectHolder class to manage multiple objects, one for each concurrent IOV. The objects needs to hold different content for different IOVs and the ESProducer needs to modify them during its produce call in a thread safe manner.\r\n\r\nThe dependsOn feature of the EventSetup has difficulty communicating with these different objects in the callbacks and produce function calls. The usage of the dependsOn feature is replaced by usage of the new ESProductHost class. It has a similar purpose, but works better when there are multiple IOVs because its interface allows direct communication via arguments between the produce methods and the lambda function that gets called when the dependent record changes.\r\n\r\nNote, I could not find anything in CMSSW that actually uses these modules. (It is possible they are not needed at all.) The standard tests I tried do not run them, so to test I manually created a test configuration that runs them and stepped through in the debugger to see they were performing as I expected.", "branch": "master", "changed_files": 8, "comments": 1, "commits": 1, "created_at": "1536692287", "deletions": 36, "labels": ["code-checks-pending", "comparison-pending", "db-pending", "orp-pending", "pending-signatures", "tests-pending"], "milestone": "CMSSW_10_3_X", "number": 24511, "release-notes": [], "review_comments": 0, "state": "open", "title": "Prepare RPCInverse ESProducers for concurrent IOVs", "updated_at": "1536692305", "user": "wddgit"}