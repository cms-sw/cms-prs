{"additions": 54, "auther_ref": "PulseContainment_12_0", "auther_sha": "927d90342772001185a9c95e83dc0ac8ba4c79a3", "author": "mseidel42", "body": "#### PR description:\r\n\r\nWe found that the containment correction is too large when used to correct the charge from a single time slice with default parameters. It turns out that the old algorithm has some additional shift (time0shift) and reversed behaviour of the timePhase parameter wrt simulation.\r\nThis PR allows for timePhase definition in HcalPulseContainment similar to SIM step, i.e., shift goes in the same direction so that parameters can be synchronized.\r\n\r\n* So far, the change is only activated in the HcalPulseContainmentTest\r\n  * NB: this falls back to the default pulse shape right now, as it cannot connect to the HcalDbService. Needs to be migrated to esConsumes? Tests were done with hard-coded reco shape 208, however\r\n* It will be applied to PF1' scheme within HcaluLUTTPGCoder in a later PR\r\n* Application in M0 and ZDC reco to be discussed\r\n\r\n#### PR validation:\r\n\r\nContainment correction for a single TS is now calculated within 6 - 31 ns of the pulse shape, similar to first TS in simulation.\r\nThe correction is the correct 1.56 instead of 2.18 for large pulses (see https://its.cern.ch/jira/browse/HCALDPG-18).\r\n\r\n", "branch": "master", "changed_files": 11, "closed_at": "1628075815", "comments": 21, "commits": 3, "created_at": "1626844691", "deletions": 25, "labels": ["alca-approved", "code-checks-approved", "fully-signed", "l1-approved", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "82d279ee46b43fac37c20d65a9e9f340b6875ac0", "merged_at": "1628075814", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 34572, "release-notes": [], "review_comments": 4, "state": "closed", "title": "Allow HcalPulseContainment timePhase definition as in SIM", "updated_at": "1628075815", "user": "mseidel42"}