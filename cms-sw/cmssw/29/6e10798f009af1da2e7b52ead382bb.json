{"additions": 440, "auther_ref": "MiniAODSubstructurePiecesAugmented", "auther_sha": "e9e245688bf62fa13b4d47011d9421f4bf6583d9", "author": "rappoccio", "body": "Rebasing #7659 and adding updates from @gpetruc to add constituents that are groomed away to rerun clusterings of other types. The original PR was mangled somehow so this is a clean rebase on 74x. \n\n(Note : this needs a git merge and many checked out packages to test correctly). \n\nHere is the original PR text, modified to add the new content : \n\n====== EVENT Content =======\nThe AK8 jet content is therefore :\n\nAdd all AK8 jets for pt > 50 GeV\nIf AK8 jet pt > 200:\nAdd top-tagging and soft drop tagger info.\nRun b-tagging and JECs on subjets\nSo if the AK8 jet has pt between 50 and 200 GeV, the substructure algorithms are not run. If pt > 200 GeV, The subjets are written along with the \"fat\" jets in the BoostedJetMerger, and then are rekeyed accordingly with the JetSubstructurePacker. The slimming is done upstream on the pat::Jets made for the substructure algorithms, and so downstream this is no longer necessary to re-slim.\n\nThe jet content is (on 9000 events without pileup):\n\npatJets_slimmedJets__PAT 1.00 1.00 1.00 4.8%\npatJets_packedPatJetsAK8__PAT 1.00 0.58 0.58 2.8%\nrecoGenJets_slimmedGenJets__PAT 1.00 0.46 0.46 2.2%\nrecoGenJets_slimmedGenJetsAK8__PAT 1.00 0.45 0.45 2.2%\npatJets_slimmedJetsCMSTopTagCHSPacked_SubJets_PAT 1.00 0.16 0.16 0.8%\npatJets_slimmedJetsAK8PFCHSSoftDropPacked_SubJets_PAT 1.00 0.14 0.14 0.7%\n\nSo the additional collections (the subjets) are about 1.5% of the total miniAOD size.\n\n====== CPU usage =====\nThe additional CPU usage here is negligible because the workflow is not running any algorithms, but instead taking the values directly from the RECO collections upstream and rekeying the information :\n\nTimeReport 0.000074 0.000074 0.000074 caTopTagInfos\nTimeReport 0.000041 0.000041 0.000041 caTopTagInfosPAT\nTimeReport 0.000100 0.000100 0.000100 slimmedGenJets\nTimeReport 0.000128 0.000128 0.000128 slimmedGenJetsAK8\nTimeReport 0.000131 0.000131 0.000131 slimmedJets\nTimeReport 0.000000 0.000000 0.000000 slimmedJetsAK8\nTimeReport 0.000041 0.000041 0.000041 slimmedJetsAK8PFCHSSoftDropPacked\nTimeReport 0.000051 0.000051 0.000051 slimmedJetsAK8PFCHSSoftDropSubjets\nTimeReport 0.000048 0.000048 0.000048 slimmedJetsCMSTopTagCHSPacked\nTimeReport 0.000056 0.000056 0.000056 slimmedJetsCMSTopTagCHSSubjets\nTimeReport 0.000095 0.000095 0.000095 packedPatJetsAK8\n\n==== Testing ====\nTests are checking out (thanks to @ianna for providing the correct recipe so quickly, I've merged in that PR, and apologies to @ferencek since I had to revert out the genJetsNoNu for the b-tagging sequence, to be discussed at an upcoming JMAR meeting).\n\n==== For posterity, here is the original PR message : ====\n\nWith @arizzi and @ferencek : we've added substructure into miniAOD in a slightly more natural way to allow for multiple interpretations of the jet. This will now be accessed through the \"subjet\" methods. They can take string or integer access similar to the JECs. I have also adjusted pt thresholds so that they are sensible given common user preferences. This makes the total of the AK8 jets (including two subjet collections) 3.8% of the total miniAOD size.\n\nThe nice additions are :\n\nSubjets from soft drop and the CMS top tagger are stored as lists of pat::Jets.\nJet corrections are applied to subjets.\nSubjet b-tagging is being run.\n", "branch": "CMSSW_7_4_X", "changed_files": 13, "closed_at": "1426418598", "comments": 9, "commits": 17, "created_at": "1425995178", "deletions": 51, "labels": ["analysis-approved", "comparison-available", "fully-signed", "tests-approved"], "merge_commit_sha": "6e55d3d834cb35e6825b3fa9f4e03a9a5023bf75", "merged_at": "1426418598", "merged_by": "cmsbuild", "milestone": "Next CMSSW_7_4_X", "number": 8175, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Mini aod substructure pieces overhaul, rebase of #7659", "updated_at": "1429721083", "user": "rappoccio"}