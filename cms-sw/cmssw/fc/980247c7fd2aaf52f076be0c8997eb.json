{"additions": 12, "auther_ref": "fix-condTestRegression", "auther_sha": "614996e217b1f0bafcf5d406233aaff8f574be6d", "author": "smuzaffar", "body": "This fixes the condTestRegression unit test\r\n- use python3 instead of python. On `el9`, this tests fails as we do not instlal system python(2)\r\n- Use the correct singularity ciontainers for old releases e.g. slc6 based cmssw releases. Unit test fails under `el9` with error [a]. This is because we tryto run `slc6` base cmssw binaries under `el9`. This PR should now run the old releases binaries under corrent cms env.\r\n\r\n[a]\r\n```\r\n===== Test \"condTestRegression\" ====\r\n/cvmfs/cms.cern.ch/slc6_amd64_gcc630/cms/cmssw/CMSSW_9_0_1/test/slc6_amd64_gcc630/testReadWritePayloads: error while loading shared libraries: libcrypt.so.1: cannot open shared object file: No such file or directory\r\n\r\n__init__() took 0.559 ms\r\n\r\n================================================================================\r\ngoing to write DBs ...\r\n\r\nrunSelf(write) took 3659.459 ms\r\n\r\nTraceback (most recent call last):\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 254, in <module>\r\n    crt.runAll()\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 58, in wrapper\r\n    res = func(*arg)\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 215, in runAll\r\n    self.run(rel, arch, 'write', dbName)\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 58, in wrapper\r\n    res = func(*arg)\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 160, in run\r\n    raise e\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 157, in run\r\n    res = check_output(cmd, shell=True, universal_newlines=True, env={}, stdin=subprocess.PIPE, stdout=subprocess.PIPE)\r\n  File \"/build/razumov/cmssw/CMSSW_12_5_X_2022-06-06-2300/src/CondCore/CondDB/test/condTestRegression.py\", line 48, in check_output\r\n    raise subprocess.CalledProcessError(returnCode, cmd+msg)\r\n```", "branch": "master", "changed_files": 1, "comments": 3, "commits": 1, "created_at": "1654583606", "deletions": 1, "labels": ["db-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 38269, "release-notes": [], "review_comments": 0, "state": "open", "title": "condTestRegression: Use correct singularity container for old cmssw release", "updated_at": "1654583942", "user": "smuzaffar"}