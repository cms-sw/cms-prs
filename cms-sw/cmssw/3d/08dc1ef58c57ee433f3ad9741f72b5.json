{"additions": 64, "auther_ref": "geometry-test-enhancement", "auther_sha": "9df67a7b48a5331c062b08b299c48505e7dfbf30", "author": "cvuosalo", "body": "`runDDDvsDBGeometryValidation.sh` is a special test to be run by experts to compare the geometry in a local database and the Conditions database. One test in the script is to compare the concatenated geometry XML files in each database. These files may actually differ, or they may only appear to differ because of different ordering of some of the content of the files.\r\n\r\nI added a two more tests to the script to try to help the expert determine whether there are real differences in the two geometry XML files or whether the apparent differences are due to minor re-ordering. The overall problem of definitively determining whether two big XML files are functionally identical even if their parts are in different orders is still not solved, though the enhancements in this PR are a step in that direction. Maybe this issue can be fully resolved in a later PR.\r\n\r\nOne file in this PR is unrelated to the others. `splitExtended2021Database.sh` is used for creating payloads. The DB group requested that I update the command used in the script from \r\n`conddb_import`, which is intended to be decommissioned, to `conddb`.\r\n\r\n#### PR validation:\r\n\r\nThe scripts run and produce informative output. They have no effect on production workflows or unit tests.\r\n\r\n`splitExtended2021Database.sh` continues to work and create payloads. With the change in command, I noticed that the comment field in the payload changed. For example, the old `conddb_import` created the following payload. Note the Description field.\r\n```\r\nName                    TimeType  ObjectType     Synchronisation  EndOfValidity  Insertion_time              Description                                                             \r\n----------------------  --------  -------------  ---------------  -------------  --------------------------  ---------------------------------------------------------------------   \r\nTKRECO_Geometry_111YV1  Run       PGeometricDet  any              -1             2020-03-02 17:49:31.613191  Created copying tag TKRECO_Geometry_111YV1 from sqlite_file:myfile.db   \r\n```\r\nThe new `conddb` created almost the same payload:\r\n```\r\nName                    TimeType  ObjectType     Synchronisation  EndOfValidity  Insertion_time              Description   \r\n----------------------  --------  -------------  ---------------  -------------  --------------------------  -----------   \r\nTKRECO_Geometry_111YV1  Run       PGeometricDet  any              -1             2020-03-21 02:58:08.136170  New Tag       \r\n```\r\nNote that Description field is different. I assume this difference is harmless.\r\n\r\nNo backport is needed for this PR.", "branch": "master", "changed_files": 4, "closed_at": "1585072191", "comments": 14, "commits": 2, "created_at": "1584992538", "deletions": 18, "labels": ["code-checks-approved", "comparison-available", "db-approved", "dqm-approved", "fully-signed", "geometry-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "9c24d0c51aca960bb69dc39a419ce148ec47e43e", "merged_at": "1585072191", "merged_by": "cmsbuild", "milestone": "CMSSW_11_1_X", "number": 29278, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Minor enhancements to special geometry comparison test", "updated_at": "1585072192", "user": "cvuosalo"}