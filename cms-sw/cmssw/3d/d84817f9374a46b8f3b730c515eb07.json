{"additions": 4, "auther_ref": "Fix_ZdcRecAlgo", "auther_sha": "033b7a38c30a0e3a532c684529ac55c362cf766e", "author": "matt2275", "body": "#### PR description:\r\n\r\nFixed an issue where if statement checking wrong variable to guard against seg fault. Fixed issue by updating associated for loop condition to be less than `digi_size`. I also updated the `ChargeWeightedTime` to check for potential NAN which will now be set to -99.0\r\n\r\nThis issue is not critical for 2024 HI data taking. The issue was noticed when running on outdated conditions where the signal Timeslices included 6 which caused the bad if statement to skip the calculation of the `ChargeWeightedTime` variable since the number of samples in the digi is 6. When the conditions are updated for the signal TS to be 2 and the noise TS to be 1, the if statement will be false and ChargeWeightedTime will be calculated correctly. The [for loop](https://github.com/matt2275/cmssw/blob/Fix_ZdcRecAlgo/RecoLocalCalo/HcalRecAlgos/src/ZdcSimpleRecAlgo_Run3.cc#L226) will be unchanged since` nTS_ = digi_size = 6`. There is a small risk of seg fault if nTS_ is updated in [ZdcHitReconstructorRun3](https://github.com/matt2275/cmssw/blob/Fix_ZdcRecAlgo/RecoLocalCalo/HcalRecProducers/plugins/ZdcHitReconstructor_Run3.cc#L220) to be greater than the `digi_size` but that would not occur on global reconstructor, only local running if the user happens to update that value incorrectly. \r\n\r\n\r\n#### PR validation:\r\n\r\nFor testing, I ran on [this script ](https://github.com/hjbossi/ZDCOnlineMonitoring/blob/main/python/run2024ZDCReco.py) where previously, the values of the ChargeWeightedTime were NAN and now are positive floats from 0 to 125 ns. \r\n", "branch": "master", "changed_files": 1, "closed_at": "1728408455", "comments": 12, "commits": 1, "created_at": "1728335444", "deletions": 5, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "45e883d07884360b66a4958b1e727eed160439e1", "merged_at": "1728408455", "merged_by": "cmsbuild", "milestone": "CMSSW_14_2_X", "number": 46295, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update ZdcSimpleRecAlgo_Run3.cc", "updated_at": "1728408456", "user": "matt2275"}