{"additions": 348, "auther_ref": "DNN-Integration", "auther_sha": "26625ca55111596cff3d8f819f664da4efdf8e5c", "author": "minxiyang", "body": "#### PR description:\r\nThis is continuation of PR #31682, integrating the DNN for track selection. We addressed most of the code comments received on the previous PR.\r\n\r\nSome comments we could not fully address because we ran into problems and would like to get some feedback on it:\r\n\r\n@makortel About https://github.com/cms-sw/cmssw/pull/31682#discussion_r505543115. In class TfGraphDefWrapper, we cannot set variables to be constant, because in https://github.com/minxiyang/cmssw/blob/f98002ab54de04c615cf53140d4105f41911124b/RecoTracker/FinalTrackSelectors/plugins/TrackTfClassifier.cc#L49, createSession only take non-constant input.\r\nWe also cannot use unique_ptr in https://github.com/cms-sw/cmssw/pull/31682#discussion_r505544711, since graphDef_ will be unique and copy or transfer it would cause the implicit deletion of the member of TfGraphDefWrapper.\r\nAbout https://github.com/cms-sw/cmssw/pull/31682#discussion_r505547945, not using `new TfDnnCache()` results in a crash at runtime, which we currently don't understand.\r\n\r\n@jpata About https://github.com/cms-sw/cmssw/pull/31682#discussion_r504604289. We don't see a particular reason to use struct instead of class. Is there any preference to use one or the other in CMSSW?\r\n\r\n@makortel https://github.com/cms-sw/cmssw/pull/31682#discussion_r505550386. We haven't started to address the issues with how TensorFlow is used here yet, we will look at it once we address the question of sessions and memory usage.\r\n\r\nWe have tested the code after the changes made and there is no change in the output.\r\n\r\n \r\n\r\n", "branch": "master", "changed_files": 26, "closed_at": "1613491763", "comments": 144, "commits": 32, "created_at": "1605213506", "deletions": 54, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "pdmv-approved", "reconstruction-approved", "requires-external", "tests-approved", "upgrade-approved"], "merge_commit_sha": "139b33d9a651808d441fef2371d939fefc7f8feb", "merged_at": "1613491763", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32128, "release-notes": [], "review_comments": 41, "state": "closed", "title": "Track classifier using TensorFlow - continuation", "updated_at": "1613491763", "user": "minxiyang"}