{"additions": 90, "auther_ref": "fasttimer-tbb-task-group-2", "auther_sha": "f646cb6e7e81c0790fcdb3389db2219530fd1358", "author": "dan131riley", "body": "#### PR description:\r\n\r\nWith the new task_group interfaces, global thread observers cause crashes at the end of the job, and the interface for global thread observers is being removed in the latest versions of TBB.  This PR modifies the FastTimerService to use a local thread observer on the primary framework arena to register threads, and then tracks individual threads using lower level pthreads interfaces instead of the TBB enumerable_thread_specific (which, under the hood, uses the same pthread mechanisms).  In the normal case, this should reproduce the results of the FastTimerService with a global observer and account for any threads that are added to the arena.\r\n\r\n#### PR validation:\r\n\r\nTested on one workflow (136.885501) that it produces results consistent with the results with the global thread observer, and doesn't crash on exit.", "branch": "master", "changed_files": 2, "closed_at": "1616768954", "comments": 12, "commits": 4, "created_at": "1616606257", "deletions": 11, "labels": ["code-checks-approved", "fully-signed", "hlt-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "64658eea9b7d05f12c52b0431da6f1efbfa3c14d", "merged_at": "1616768954", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 33261, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Switch FastTimerService to using a local thread observer", "updated_at": "1616768954", "user": "dan131riley"}