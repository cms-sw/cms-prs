{"additions": 43, "auther_ref": "from-CMSSW_8_1_X_2016-05-04-2300-bugfixes-to-CSC-TP-Run2-settings-data", "auther_sha": "53cf53ad6a34c9c4ebee00f5ef022ce29b366489", "author": "dildick", "body": "@ptcox @jrorie @tahuang @pakhotin\n\nThis pull request corrects known issues in the configuration of the CSC trigger primitive emulator for Run2. The era customizations should be cleaned up as well (it's a bit of a mess). Allow me to do this in another pull request. Fixing the settings is more urgent right now. \n\nI validated these changes by running on 2016B data using /store/user/abrinke1/EMTF/Run2016B/2016_04_29/RAW/ZeroBias1/272012/. \n\nI compared the BX of the LCT types:\n- simCscTriggerPrimitiveDigis: emulated RAW data\n- simCscTriggerPrimitiveDigis_MPCSORTED: emulated RAW data after sorting in the MPC\n- csctfDigis: unpacked RAW data from CSC TrackFinder\n- muonCSCDigis: : unpacked RAW data from Muon TrackFinder\n\nI tuned the configuration so that simCscTriggerPrimitiveDigis_MPCSORTED would correspond better to csctfDigis. Results are shown below:\n\n1) situation as it is in CMSSW 81X\n![comparison_lct_bx_2016b_original](https://cloud.githubusercontent.com/assets/4134786/15058520/54e59e0e-12e2-11e6-941b-b7603b3c66e1.png)\n\n2) after the changes from https://github.com/cms-sw/cmssw/pull/14391/commits/f1d5d4c4af8570a2bc36039171023db33c2de152\n![comparison_lct_bx_2016b_mpclct18_nosorting_nosmart](https://cloud.githubusercontent.com/assets/4134786/15058564/96bf5f36-12e2-11e6-93f5-048cacf11368.png)\n\n3) after shifting the BX of simCscTriggerPrimitiveDigis and simCscTriggerPrimitiveDigis_MPCSORTED by 2 to compare with csctfDigis\n![comparison_lct_bx_2016b_mpclct18_nosorting_nosmart_bxshift2](https://cloud.githubusercontent.com/assets/4134786/15058566/9c4f65fe-12e2-11e6-943e-ba17f43da8d9.png)\n\n4) after the changes up to https://github.com/cms-sw/cmssw/pull/14391/commits/3e1dbd92393250918cc041d36c3495971d0e5528. Again, the BX of simCscTriggerPrimitiveDigis and simCscTriggerPrimitiveDigis_MPCSORTED is downshifted by 2 to compare with csctfDigis - the actual readout window is thus [5,11] for data LCTs. As can be seen the agreement between data and emulator is ~1.5%.\n![comparison_lct_bx_2016b_mpclct18_nosorting_nosmart_bxshift2_changereadout5to11_v2](https://cloud.githubusercontent.com/assets/4134786/15090573/2389ffe8-13f1-11e6-80f9-209efb97098b.png)\n", "branch": "CMSSW_8_1_X", "changed_files": 8, "closed_at": "1463242329", "comments": 29, "commits": 5, "created_at": "1462478320", "deletions": 13, "labels": ["comparison-available", "fully-signed", "l1-approved", "orp-pending", "tests-approved"], "merge_commit_sha": "3176ca26ca46201101600b6afc8c6d40cf10e6c4", "merged_at": "1463242329", "merged_by": "davidlange6", "milestone": "Next CMSSW_8_1_X", "number": 14391, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Correctly configure CSC trigger primitive emulator for Run2 (81X)", "updated_at": "1463664613", "user": "dildick"}