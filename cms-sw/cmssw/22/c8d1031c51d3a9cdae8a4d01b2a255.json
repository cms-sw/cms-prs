{"additions": 43, "auther_ref": "messageLoggerFormatCpp20", "auther_sha": "6319b8ed15a5b2bd1fd1380e6d545afac8cc33da", "author": "makortel", "body": "#### PR description:\r\n\r\nhttps://github.com/cms-sw/cmsdist/pull/8233#issuecomment-1572210519 showed that the MessageLogger's `format()` doesn't compile with C++20 enabled. The reason is that both the C++20 `std::format()` as well as the fmt's `fmt::format()` when C++20 is enabled require the format string to be a constant expression, what `std::string_view` is not. This PR makes MessageLogger's `format()` to require the format string to be a constant expression, and adds `vformat()` for a runtime-defined format string with similar interface as `std::vformat()`  and `fmt::vformat()`.\r\n\r\nFor `format()` I had to use the `fmt::format_string<T...>` in the \"front line\" interface (that `fmt::format()` uses itself) because apparently perfect forwarding is not sufficient to provide \"constant expression\".\r\n\r\n\r\n#### PR validation:\r\n\r\nCompiles in a C++20-enabled build (as provided by https://github.com/cms-sw/cmsdist/pull/8233#issuecomment-1572210519). The `fmt_test.cppunit` test runs in the same build. I did not exercise the MessageLogger unit tests as I didn't want to build the universe and otherwise the tests fail because of a lot of code failed to build in https://github.com/cms-sw/cmsdist/pull/8233#issuecomment-1572210519. ", "branch": "master", "changed_files": 6, "comments": 5, "commits": 1, "created_at": "1686116558", "deletions": 15, "labels": ["core-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_13_2_X", "number": 41888, "release-notes": [], "review_comments": 0, "state": "open", "title": "Make MessageLogger format() to be compatible with C++20, and add vformat() for runtime format string", "updated_at": "1686236589", "user": "makortel"}