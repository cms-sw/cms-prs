{"additions": 484, "auther_ref": "esConsumesGeometryCaloEventSetup", "auther_sha": "d310afd7b004e70b4c3765c41e38d06b8bbbb22f", "author": "makortel", "body": "#### PR description:\r\n\r\nThis PR migrates all ES and ED modules in `Geometry/CaloEventSetup` to EventSetup consumes (#26584).\r\n\r\nIn `CaloGeometryBuilder` I replaced the \"for-switch\" structure in `produceAligned()` with searches done at the constructor. Also now in case of superfluous geometry components the constructor throws an exception instead of issuing LogWarnings.\r\n\r\nThe `CaloGeometryDBEP` required a bit more work because the `CaloGeometryDBEP::produceAligned()` is specialized for various geometry types, and those specializations used additional ESProducts. I added a mechanism (employing class templace specialization as well) to call consumes() to get ESGetTokens for such products.\r\n\r\n#### PR validation:\r\n\r\nLimited matrix runs.", "branch": "master", "changed_files": 24, "closed_at": "1557944663", "comments": 24, "commits": 9, "created_at": "1556556324", "deletions": 477, "labels": ["code-checks-approved", "comparison-available", "db-approved", "fully-signed", "geometry-approved", "orp-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "c3eb51d4e6b945e57a5e15547d13a6e631040318", "merged_at": "1557944663", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 26571, "release-notes": [], "review_comments": 11, "state": "closed", "title": "Migrate Geometry/CaloEventSetup to EventSetup consumes", "updated_at": "1557944663", "user": "makortel"}