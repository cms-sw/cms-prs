{"additions": 1288, "auther_ref": "EgammaID_9_4_12_minimal", "auther_sha": "d42a785ff9b09cf9425316b51f7229c5014a1eaa", "author": "guitargeek", "body": "Hi all,\r\n\r\nthis PR aims to backport the following Fall17 V2 IDs:\r\n* Electron cut based (from https://github.com/cms-sw/cmssw/pull/23477)\r\n* Electron MVA (from https://github.com/cms-sw/cmssw/pull/23700)\r\n* Photon cut based and MVA (from https://github.com/cms-sw/cmssw/pull/25293)\r\n\r\n__This PR depends on__ https://github.com/cms-sw/cmsdist/pull/4546 for updated weight files.\r\n\r\nThis backport is done in a \"minimal\" fashion, meaning the goal was just to get the same ID functionality as in master and not backporting the full list of technical improvements between 9_4_X and master.\r\n\r\nFor the cut based IDs, backporting with cherry-picks was trivial, while the MVAs were more involved with renamed weight files for all past MVAs. For this reason, all value maps produced by the Egamma MVA machinery were validated. As a reference, the most recent 10_4_X integration build was used for the Fall17 V2 MVAs and 9_4_12 for all other MVAs. All Egamma MVAs which can be possible configured in 9_4_X were validated, not only the ones activated in the MVAValueMapProducers.\r\n\r\nIntegrating the V2 electron MVA was not as trivial as expected as variables were ordered and defined slightly different compared to V1. For now, this was solved with branchings in the ElectronMVAEstimatorFall17 class.\r\n\r\nValidation plots for all photon ID value maps:\r\nhttps://rembserj.web.cern.ch/rembserj/plots/CMSSW_PRs/25408/\r\n\r\n  * target: CMSSW_9_4_12 plus this PR and the external PR\r\n  * reference: CMSSW_10_4_0_pre2 and CMSSW_9_4_12\r\n\r\nValidation workflow:\r\n\r\n  * Dump all relevant ID value maps to ROOT file with this configuration [1a,1b], running on DY+Jets\r\n  * Compare ROOT file from reference and target with this script [2]\r\n\r\n[1a] https://github.com/guitargeek/cmssw/blob/EgammaID_validation/RecoEgamma/EgammaTools/test/testElectronIDs_cfg.py\r\n[1b] https://github.com/guitargeek/cmssw/blob/EgammaID_validation/RecoEgamma/EgammaTools/test/testPhotonIDs_cfg.py\r\n[2] https://github.com/guitargeek/cmssw/blob/EgammaID_validation/RecoEgamma/EgammaTools/test/compare_columns.py", "branch": "CMSSW_9_4_X", "changed_files": 52, "comments": 29, "commits": 12, "created_at": "1543907972", "deletions": 364, "labels": ["analysis-pending", "comparison-available", "orp-pending", "pending-signatures", "reconstruction-rejected", "requires-external", "tests-approved"], "milestone": "CMSSW_9_4_X", "number": 25408, "release-notes": [], "review_comments": 0, "state": "open", "title": "[9_4_X] Egamma Fall17 V2 IDs", "updated_at": "1544254935", "user": "guitargeek"}