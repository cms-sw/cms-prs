{"additions": 25, "auther_ref": "Fix_ProcessCallGraph_and_NVProfilerService", "auther_sha": "ae5949e8f9796d88c8874222dc66c46afa83da06", "author": "fwyzard", "body": "#### PR description:\r\n\r\nImplement a couple of fixes for the `ProcessCallGraph`:\r\n  - check that the `Source` module is added exactly once to the `ProcessCallGraph`;\r\n  - avoid static variables, that would result in invalid process ids when multiple\r\n    `ProcessCallGraph` instances are used _e.g._ by different Services.\r\n\r\nFix the `NVProfilerService` to for the case where the number of modules in the current process is not a valid indicator of the highest module id, for example if some modules have been destroyed because they cannot be part of any schedule. Instead, use a `ProcessCallGraph` to get the highest possible module id.\r\n\r\n\r\n#### PR validation:\r\n\r\nWith these changes, adding the `NVProfilerService` to complex configurations (_e.g._ a full HLT menu) works, instead of failing with an assertion.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nTo be backported to 12.4.x and 12.5.x for data taking.", "branch": "master", "changed_files": 4, "comments": 6, "commits": 3, "created_at": "1663233338", "deletions": 16, "labels": ["hlt-pending", "pending-signatures", "tests-approved", "orp-pending", "bug-fix", "code-checks-approved", "heterogeneous-approved"], "milestone": "CMSSW_12_6_X", "number": 39398, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix the `NVProfilerService` and `ProcessCallGraph`", "updated_at": "1663251199", "user": "fwyzard"}