{"additions": 11, "auther_ref": "91X_SiStripCommonUpdate", "auther_sha": "6fd37acbd3b90a57598ceb09ce2a6f8f39f19aa8", "author": "mmusich", "body": "Greetings, \r\nthis PR fixes the problem introduced in #17570, which unfortunately breaks the mode in which `ALCA:PromptCalibProdSiStripGainsAfterAbortGap` is invoked to run on existing `ALCARECO` datasets (e.g. 2016 ones) that don't have the LumiScalers collection. At present:\r\n```\r\ncmsDriver.py step3 --datatier ALCARECO --conditions auto:run2_data -s ALCA:PromptCalibProdSiStripGainsAfterAbortGap --eventcontent ALCARECO --runUnscheduled --process ALCAPROMPT --data -n 100 --dasquery='file dataset=/StreamExpress/Run2016H-SiStripCalMinBiasAfterAbortGap-Express-v2/ALCARECO run=282917' --fileout file:step3.root\r\n```\r\nfails with: \r\n```\r\n----- Begin Fatal Exception 18-Mar-2017 10:32:06 CET-----------------------\r\nAn exception of category 'ProductNotFound' occurred while\r\n   [0] Processing run: 282917 lumi: 119 event: 63362406\r\n   [1] Running path 'pathALCARECOPromptCalibProdSiStripGainsAfterAbortGap'\r\n   [2] Prefetching for module SiStripGainFromCalibTree/'ALCARECOSiStripCalibAfterAbortGap'\r\n   [3] Calling method for module ShallowEventDataProducer/'ALCARECOShallowEventRunAAG'\r\nException Message:\r\nPrincipal::getByToken: Found zero products matching all criteria\r\nLooking for type: std::vector<LumiScalers>\r\nLooking for module label: scalersRawToDigi\r\nLooking for productInstanceName: \r\n\r\n   Additional Info:\r\n      [a] If you wish to continue processing events after a ProductNotFound exception,\r\nadd \"SkipEvent = cms.untracked.vstring('ProductNotFound')\" to the \"options\" PSet in the configuration.\r\n\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\nThis running mode (which is __NOT__ the one used at Tier-0) is anyway needed for large statistics study in view of improving the monitoring for 2017. \r\n\r\nAfter internal discussions, in the same PR we propose to add `LumiScalers` and `DcsStatus` collections also in the `SiStripCalMinBiasAfterAbortGap` ALCARECO (as it was done for regular `SiStripCalMinBias` in #17419) an effective increase of ~135b/evt.\r\n", "branch": "master", "changed_files": 2, "closed_at": "1490111405", "comments": 11, "commits": 2, "created_at": "1489828854", "deletions": 3, "labels": ["alca-approved", "comparison-available", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "a8fd6b13888adf9aa86234d3482a78dd6a7abeb7", "merged_at": "1490111405", "merged_by": "cmsbuild", "milestone": "CMSSW_9_1_X", "number": 17981, "release-notes": ["protects SiStripGains PCL algorithm when analyzing ALCARECO data produced with versions not containing #17419"], "review_comments": 0, "state": "closed", "title": "[91X] fix ShallowEventDataProducer to allow running SiStripGain PCL producers from 2016 ALCARECO  ", "updated_at": "1490111950", "user": "mmusich"}