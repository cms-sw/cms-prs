{"additions": 11, "auther_ref": "Fix-ele-photon-Mass", "auther_sha": "c401a228569e9e8abaf72d79666073c514b145f4", "author": "rgoldouz", "body": "#### PR description:\r\n\r\nHello,\r\nThe electron and photon mass are not saved properly and nanoAOD users reported that many times. It is not related to nanoAOD. The problem is available in miniAOD too.\r\nYou can check the printout here\r\nhttp://dalfonso.web.cern.ch/dalfonso/NANO/massDump.txt\r\n\r\nI checked and found that the problem is not from the EGamma code but from TLorentzVector root class. I found that the TLorentz vector is set via pxpypzE for all object candidates. It seems fine but when I tested locally for a particle with pxpypzE=(1,1,1,sqrt(3)) I did not get the mass==0. You can easily reproduce it \r\nroot -l\r\nroot [1] typedef ROOT::Math::LorentzVector<ROOT::Math::PxPyPzE4D<double> > XYZTLorentzVectorD\r\nroot [2] XYZTLorentzVectorD newP4(1,1,1,sqrt(3));\r\nroot [3] newP4.M()\r\n(double) -2.1073424e-08\r\n\r\nIt is because of the precision problem in TLorentz vector and it is recommended to use PxPyPzM to have correct masses for low mass objects.\r\nhttps://root.cern.ch/doc/master/classROOT_1_1Math_1_1PxPyPzM4D.html \r\n\r\nSo I set the electron and photon masses by hand to 0.0005 and 0 GeV , respectively.\r\n\r\n#### PR validation:\r\n\r\nI generated electron and photon up to reco level using fastsim cmsDriver command and checked the photon and electron mass before and after this fix. Wrong mass values before the fix are corrected after the fix.\r\n\r\n\r\nplease let me know if you have any question.\r\nThanks ,\r\nReza\r\n", "branch": "master", "changed_files": 3, "closed_at": "1644839201", "comments": 13, "commits": 3, "created_at": "1643991485", "deletions": 0, "labels": ["reconstruction-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_12_3_X", "number": 36889, "release-notes": [], "review_comments": 5, "state": "closed", "title": "ele/ph mass fix", "updated_at": "1644839201", "user": "rgoldouz"}