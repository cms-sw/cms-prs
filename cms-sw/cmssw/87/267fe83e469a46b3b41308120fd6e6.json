{"additions": 205, "auther_ref": "recycle_and_checks_runthematrix", "auther_sha": "37dbec2d2eadaed2dc67759358c80ef1392c3445", "author": "AdrianoDee", "body": "#### PR description:\r\n\r\nThis PR proposes a few modifications to `runTheMatrix.py` and correlated packages. It would add the possibility to:\r\n\r\n1. check if the default samples for the workflows requested are actually defined. This is done via the `-c`/`--checkInputs` flag. This should solve https://github.com/cms-sw/cmssw/issues/46910 if in the routine PR tests one runs `runTheMatrix.py -n -c`;\r\n\r\n2. have a workflow start from a specific step (`GEN`, `SIM`, `DIGI, ...) with the option `--startFrom STEP`. This will remove all the steps before the one with a `cmsDriver.py` with `-s STEP, [...]`;\r\n\r\n3. use a different file as input with `--recycle`. This is intended to be used either together with `--startFrom` either on wfs that, as first step, use a pre-existing input. Together with 2;\r\n\r\n4.  have duplicate wfs in input with option `-l WF, WF, WF [...]`. Each wf would run in a different job (if specified) and `_jobX` is appended to the work area to avoid using the same folder;\r\n\r\nAnd when running with the `-gpu` option and multiple jobs with `-j N` now each job would be assigned to a different GPU. Available GPUs may be also selected on the basis of the compute capability (only for NVIDIA) with the already existing `--cuda-capabilities` or by name with the already existing `--force-gpu-name`. If more jobs than available GPUs are requested, the job to GPU assignment will restart from the first GPU available until completion. So, e.g., with 8 jobs and 3 GPUs:\r\n\r\n- GPU 0 -> jobs  `[0, 3, 6]`  \r\n- GPU 1 -> jobs `[1, 4,  7]`\r\n- GPU 2 -> jobs `[2, 5]`\r\n\r\nThis should solve https://github.com/cms-sw/cmssw/issues/47337", "branch": "master", "changed_files": 7, "comments": 5, "commits": 5, "created_at": "1739806060", "deletions": 36, "labels": ["pending-signatures", "tests-pending", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_15_1_X", "number": 47377, "release-notes": [], "review_comments": 0, "state": "open", "title": "Updates for `runTheMatrix.py`: input checks, GPUs repartition, input recycling", "updated_at": "1739806198", "user": "AdrianoDee"}