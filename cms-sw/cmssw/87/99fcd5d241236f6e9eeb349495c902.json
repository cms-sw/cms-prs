{"additions": 54, "auther_ref": "13_1_X_support_hlt_tracks_in_alignment_validation", "auther_sha": "1f2d6b20a79f7dd2f3836f7bb8536bae498a0517", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/42302\r\n\r\n#### PR description:\r\n\r\nIt is in the plans to start using `hltMergedTracks` from the `SteamHLTMonitor` PD in the tracker alignment procedure in order to minimize the drift between the derived alignment correction / validations and their actual usage in production (at the HLT).\r\nThis PR proposes a couple of minimal fixes in order to be able to run the standard setup.\r\nThere are two commits:\r\n   *  9ade9e6c45a3930af0606c1043260e429091e2d6 supports the `hltMergedTracks` collection in the common track selection and refitting sequence\r\n   * 1f2d6b20a79f7dd2f3836f7bb8536bae498a0517 supports the `SiStripMatchedRecHit2D` and `ProjectedSiStripRecHit2D` collections in `TrackerTrackHitFilter`. Encountering hits from either of these two collections was leading to a runtime exception of the type:\r\n   \r\n```   \r\n----- Begin Fatal Exception 05-Jul-2023 19:33:49 CEST-----------------------\r\nAn exception of category 'Unknown RecHit Type' occurred while\r\n   [0] Processing  Event run: 370102 lumi: 668 event: 1557577232 stream: 0\r\n   [1] Running path 'p'\r\n   [2] Calling method for module TrackerTrackHitFilter/'TrackerTrackHitFilter'\r\n   \r\nException Message:\r\nRecHit of type 22SiStripMatchedRecHit2D not supported. (use c++filt to demangle the name)\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\nThese two collections (as the previously stated in the removed comment) did not happen anymore since CMSSW > 2_0_X because of hit splitting in stereo modules in offline reconstruction, but in HLT tracking stereo hit splitting is not performed.\r\nIn order to cope with the  `SiStripMatchedRecHit2D`, the cut on the S/N is performed by taking the average of the stereo and mono hits.\r\n\r\n#### PR validation:\r\n\r\nTested the minimal configuration provided by @henriettepetersen (available [here](https://gist.github.com/mmusich/ff4d8ba8d9b852e67ffad514dc026cbf)).\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nVerbatim backport of  https://github.com/cms-sw/cmssw/pull/42302", "branch": "CMSSW_13_1_X", "changed_files": 2, "closed_at": "1690530637", "comments": 8, "commits": 2, "created_at": "1690294318", "deletions": 13, "labels": ["alca-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "backport-ok", "tracking"], "merge_commit_sha": "8a9bdb3b0930cb01e1b43791e2afc680158c8ed5", "merged_at": "1690530637", "merged_by": "cmsbuild", "milestone": "CMSSW_13_1_X", "number": 42368, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[13.1.X] Support HLT tracks in alignment validation", "updated_at": "1690530638", "user": "mmusich"}