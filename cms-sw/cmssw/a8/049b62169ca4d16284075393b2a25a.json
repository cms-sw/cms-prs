{"additions": 1587, "auther_ref": "implement_HeterogeneousTest_Alpaka_alt", "auther_sha": "33c945a8ba3c85e635a33cdf14130bc4857f82a9", "author": "fwyzard", "body": "#### PR description:\r\n\r\nThis is an alternative version of #44622 that uses the explicit accelerator types in alpaka device code:\r\n  - move all alpaka device code to the `ALPAKA_ACCELERATOR_NAMESPACE` namespace;\r\n  - use the explicit accelerator types, like `Acc1D` or `Acc2D`, instead of the generic `TAcc` template argument;\r\n  - move the definition of the device code to .dev.cc files and build them as libraries, instead of using a header-only approach.\r\n\r\n\r\n#### PR validation:\r\n\r\nThe new `HeterogeneousTest` unit tests pass:\r\n```\r\nCreating test log file logs/el8_amd64_gcc12/testing.log\r\nSkip    0s ... HeterogeneousTest/ROCmWrapper/testRocmDeviceAdditionWrapper (Failed to run rocmIsEnabled)\r\nSkip    0s ... HeterogeneousTest/AlpakaDevice/testAlpakaDeviceAdditionROCmAsync (Failed to run rocmIsEnabled)\r\nSkip    0s ... HeterogeneousTest/AlpakaKernel/testAlpakaDeviceAdditionKernelROCmAsync (Failed to run rocmIsEnabled)\r\nSkip    0s ... HeterogeneousTest/AlpakaOpaque/testAlpakaDeviceAdditionOpaqueROCmAsync (Failed to run rocmIsEnabled)\r\nSkip    0s ... HeterogeneousTest/AlpakaWrapper/testAlpakaDeviceAdditionWrapperROCmAsync (Failed to run rocmIsEnabled)\r\nPass    0s ... HeterogeneousTest/ROCmDevice/testRocmDeviceAddition\r\nPass    0s ... HeterogeneousTest/ROCmOpaque/testRocmDeviceAdditionOpaque\r\nPass    0s ... HeterogeneousTest/ROCmKernel/testRocmDeviceAdditionKernel\r\nPass    0s ... HeterogeneousTest/AlpakaOpaque/testAlpakaDeviceAdditionOpaqueSerialSync\r\nPass    0s ... HeterogeneousTest/AlpakaDevice/testAlpakaDeviceAdditionSerialSync\r\nPass    0s ... HeterogeneousTest/AlpakaKernel/testAlpakaDeviceAdditionKernelSerialSync\r\nPass    0s ... HeterogeneousTest/AlpakaWrapper/testAlpakaDeviceAdditionWrapperSerialSync\r\nPass    4s ... HeterogeneousTest/ROCmDevice/testROCmTestDeviceAdditionModule\r\nPass    5s ... HeterogeneousTest/ROCmOpaque/testROCmTestOpaqueAdditionModule\r\nPass    5s ... HeterogeneousTest/ROCmWrapper/testROCmTestWrapperAdditionModule\r\nPass    5s ... HeterogeneousTest/ROCmOpaque/testROCmTestAdditionModules\r\nPass    5s ... HeterogeneousTest/ROCmKernel/testROCmTestKernelAdditionModule\r\nPass    9s ... HeterogeneousTest/CUDAWrapper/testCudaDeviceAdditionWrapper\r\nPass    9s ... HeterogeneousTest/AlpakaWrapper/testAlpakaDeviceAdditionWrapperCudaAsync\r\nPass    9s ... HeterogeneousTest/AlpakaOpaque/testAlpakaDeviceAdditionOpaqueCudaAsync\r\nPass    9s ... HeterogeneousTest/CUDAOpaque/testCudaDeviceAdditionOpaque\r\nPass    9s ... HeterogeneousTest/AlpakaDevice/testAlpakaDeviceAdditionCudaAsync\r\nPass    9s ... HeterogeneousTest/CUDAKernel/testCudaDeviceAdditionKernel\r\nPass    9s ... HeterogeneousTest/CUDADevice/testCudaDeviceAddition\r\nPass    9s ... HeterogeneousTest/AlpakaKernel/testAlpakaDeviceAdditionKernelCudaAsync\r\nPass   18s ... HeterogeneousTest/CUDAOpaque/testCUDATestOpaqueAdditionModule\r\nPass   18s ... HeterogeneousTest/CUDADevice/testCUDATestDeviceAdditionModule\r\nPass   18s ... HeterogeneousTest/AlpakaDevice/testAlpakaTestDeviceAdditionModule\r\nPass   18s ... HeterogeneousTest/CUDAWrapper/testCUDATestWrapperAdditionModule\r\nPass   17s ... HeterogeneousTest/AlpakaWrapper/testAlpakaTestWrapperAdditionModule\r\nPass   17s ... HeterogeneousTest/AlpakaKernel/testAlpakaTestKernelAdditionModule\r\nPass   17s ... HeterogeneousTest/AlpakaOpaque/testAlpakaTestOpaqueAdditionModule\r\nPass   17s ... HeterogeneousTest/CUDAKernel/testCUDATestKernelAdditionModule\r\nPass   18s ... HeterogeneousTest/CUDAOpaque/testCUDATestAdditionModules\r\nPass   17s ... HeterogeneousTest/AlpakaOpaque/testAlpakaTestAdditionModules\r\n>> Test sequence completed for CMSSW CMSSW_14_1_X_2024-04-04-1100\r\n```", "branch": "master", "changed_files": 63, "comments": 13, "commits": 6, "created_at": "1712325793", "deletions": 44, "labels": ["pending-signatures", "tests-rejected", "orp-pending", "requires-external", "code-checks-approved", "heterogeneous-pending"], "milestone": "CMSSW_14_1_X", "number": 44636, "release-notes": [], "review_comments": 0, "state": "open", "title": "Use explicit accelerator types in alpaka device code", "updated_at": "1712347998", "user": "fwyzard"}