{"additions": 5382, "auther_ref": "ecal_double_weight_emulator_11_3_latest", "auther_sha": "dc1dd859c4d69accbf0c794cacc134ae670fb4fb", "author": "CMS-ECAL-Trigger-Group", "body": "#### PR description:\r\n\r\nThis is the second Pull Request by the ECAL Trigger Team as part of an update to the emulated ECAL Trigger Primitive Generation. The first (now merged) PR contained DB condition classes [1], and this PR contains updates to the ECAL emulator which allow for full configuration flexibility in order to emulate any configuration available in the physical ECAL electronics, to be configured via Global Tags, mainly handled by the EcalTPGTPMode record [2]. This configuration flexibility includes the option to emulate with a second set of Level 1 weights [3], whose inclusion in CMSSW would allow for tests of the impact of potential double weights configurations on the full CMS data and trigger paths. \r\n\r\nThis PR also includes the O2O scripts necessary for online to offline translation of DB tables.\r\n\r\n#### PR validation:\r\n\r\nChecks on the expected functionality of the individual electronics configuration flags have been performed [4], with everything working as expected. In addition, a backwards compatibility check has been performed which demonstrates that running the updated emulator in \"Run 2\" mode returns ECAL Trigger Primitives identical to those output from a previous CMSSW release without any of the updates contained in this PR [5]. This means one can always run the ECAL TPG with the Run2 configuration and expect nothing to change. Additional checks with different TPG configurations show that all outputs behave as expected [6] [7]. \r\n\r\n## **IMPORTANT:** \r\n\r\n**For all runTheMatrix tests to pass successfully, a new Global Tag is required containing the record for newly introduced classes, including \"EcalTPGOddWeightIdMapRcd\". The creation of this Global Tag has been requested and is in progress [8]. Before this GT is available, tests are expected to fail.** \r\n\r\n--------\r\n\r\n[1] https://github.com/cms-sw/cmssw/pull/33220\r\n[2] https://indico.cern.ch/event/992787/contributions/4175467/attachments/2171693/3666566/21_01_14%20-%20ECAL%20Trigger%20meeting%20-%20Emulator%20configuration.pdf\r\n[3] https://indico.cern.ch/event/970795/contributions/4087021/attachments/2134950/3596016/2_November_2020_ECAL_L1_DoubleWeights_forL1TP%20%281%29.pdf\r\n[4] https://indico.cern.ch/event/1006391/contributions/4224923/attachments/2188836/3698964/3_Feb_2021_Double_Weights_Emulator_Checks.pdf\r\n[5] https://indico.cern.ch/event/1018703/contributions/4275330/attachments/2211619/3743022/18_March_2021_Emulator_Update.pdf\r\n[6] https://indico.cern.ch/event/1016426/contributions/4265538/attachments/2207130/3734595/12_March_2021_Emulator_Update.pdf\r\n[7] https://indico.cern.ch/event/1011064/contributions/4242928/attachments/2197549/3715700/25_Feb_2021_Emulator_Update.pdf\r\n[8] https://hypernews.cern.ch/HyperNews/CMS/get/calibrations/4387.html", "branch": "master", "changed_files": 59, "closed_at": "1618334759", "comments": 47, "commits": 27, "created_at": "1617728951", "deletions": 441, "labels": ["code-checks-approved", "db-approved", "fully-signed", "l1-approved", "orp-approved", "requires-external", "tests-approved"], "merge_commit_sha": "6d2f66057131baacc2fcbdd203588c41c885b42c", "merged_at": "1618334759", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 33349, "release-notes": [], "review_comments": 49, "state": "closed", "title": "ECAL Emulator Update: Full Configuration Flexibility including L1 Double Weights", "updated_at": "1618335387", "user": "atishelmanch"}