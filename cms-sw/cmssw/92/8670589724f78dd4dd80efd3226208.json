{"additions": 76, "auther_ref": "MoreTritonOptions", "auther_sha": "832f6baeba297fb5b207c0c0a0cfd1ef8d68c281", "author": "kpedro88", "body": "#### PR description:\r\n\r\n1. The current default Triton server (used for CPU fallback) is several years old and needed updating to resolve shared memory issues and recent CVEs. The server build is now documented at https://github.com/fastmachinelearning/build_triton.\r\n2. Updating to the latest server version also incorporates previous updates to the PyTorch backend, which allow enabling thread controls for models that use PyTorch. This *should* ameliorate the timeout issues observed in #37767, #42032, which were likely at least partially caused by contention from oversubscription. (But it is hard to say for sure, because those issues were very difficult to reproduce reliably.)\r\n3. Expose an extra configuration option to test new server versions more easily.\r\n4. Propagate the `ServiceToken` fix from #46703 to `TritonException`, which can interact with the `TritonService`.\r\n5. Avoid calling `cudaMalloc()` for a size zero array, which results in an error in newer versions of CUDA.\r\n6. Remove a bunch of old workarounds that are no longer needed.\r\n\r\nThe Triton server update also required https://github.com/cms-data/RecoEgamma-EgammaPhotonProducers/pull/6, which is now merged.\r\n\r\n#### PR validation:\r\n\r\nTests pass. Matrix workflows run successfully.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport. Not planned to be backported.\r\n", "branch": "master", "changed_files": 15, "closed_at": "1766004248", "comments": 15, "commits": 11, "created_at": "1764976150", "deletions": 85, "labels": ["fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "heterogeneous-approved"], "merge_commit_sha": "15749d05b1735ba4a8f4b7c7a83595ffdb73e915", "merged_at": "1766004248", "merged_by": "cmsbuild", "milestone": "CMSSW_16_0_X", "number": 49564, "release-notes": [], "review_comments": 4, "state": "closed", "title": "Triton server updates + client improvements and bug fixes", "updated_at": "1766004249", "user": "kpedro88"}