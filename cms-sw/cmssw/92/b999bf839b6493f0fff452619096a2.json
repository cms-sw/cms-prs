{"additions": 8, "auther_ref": "avoidDeadlockByTakingSharedResourceLockFirst", "auther_sha": "f17cf26316238c4378f31901ab7189d58fac8cc1", "author": "Dr15Jones", "body": "Tests running unscheduled workflows found a deadlock do to a legacy\nmodule doing an unscheduled get from another legacy module while another\nthread was trying to run the second legacy module. This caused the order\nof locks (module lock then legacy lock) to be changed for the second\nmodule which lead to the deadlock.\n\nThis change is a temporary workaround in which we take the legacy lock\nbefore the module lock. This work most of the time but still can cause\na deadlock for the case of two 'one' modules both with different shared\nresources but one of them calling a legacy module (which tries to take\nlocks to all resources). A complete fix is forth coming.\n", "branch": "CMSSW_7_4_X", "changed_files": 2, "closed_at": "1433587581", "comments": 11, "commits": 1, "created_at": "1433531156", "deletions": 4, "labels": ["comparison-available", "core-approved", "fully-signed", "tests-approved"], "merge_commit_sha": "f3ea77614685cd9ed3e742386a51b255e391da8f", "merged_at": "1433587581", "merged_by": "cmsbuild", "milestone": "Next CMSSW_7_4_X", "number": 9483, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Avoid deadlock by taking SharedResource lock first", "updated_at": "1439570111", "user": "Dr15Jones"}