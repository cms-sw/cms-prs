{"additions": 20, "auther_ref": "PF_caloFracFix", "auther_sha": "04583652c3808cc1374f8b9945c78ee5a9e23cde", "author": "hatakeyamak", "body": "#### PR description:\r\n\r\nBased on recent discussion in the PF meeting, the following changes are being implemented:\r\n+ Improve rawE(H)CalEnergy definitions for neutral hadrons.\r\n   - Neutral hadrons (photons) from \"loop hcal\" are not associated with ECAL (HCAL) clusters, as they are defined based on excess energies in HCAL (ECAL) energies only. rawE(H)CalEnergy is now set to zero for neutral hadrons (photons), as done for corrected energies to avoid confusions.\r\n+ protect against the major source of negative ecal energy for charged hadrons.\r\n   - Occasionally ecal energy for charged hadrons went negative, when photons are also created and the ecal energy corrected by PF hadron calibration is smaller than ecal energy from egamma's ecal cluster calibration. Now this is protected against going negative.\r\n+ also protect against negative energy scaling.\r\n   - Very rarely, charged hadron momentum scaling went negative, after rejecting of \"bad\" tracks. Now we protect against it as well. \r\n\r\nhttps://indico.cern.ch/event/832017/contributions/3485635/attachments/1871517/3102604/PF_NeutralHadron_CaloFractions_v4.pdf\r\nfor further information.\r\n\r\n#### PR validation:\r\n\r\nIt compiles. Also, some validation plots in the above pdf file.\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis is not a backport.\r\n\r\n@bendavid @zdemirag @ahinzmann ", "branch": "master", "changed_files": 1, "closed_at": "1564604209", "comments": 29, "commits": 3, "created_at": "1563439057", "deletions": 22, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "17978f8a458eabf620b594e4e5b41906234ee49c", "merged_at": "1564604208", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27550, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Updates to E(H)CalEnergy definitions for PF hadrons.", "updated_at": "1564604209", "user": "hatakeyamak"}