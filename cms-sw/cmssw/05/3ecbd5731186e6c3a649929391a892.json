{"additions": 54, "auther_ref": "support_hlt_tracks_in_alignment_validation", "auther_sha": "f3d75bb72f52e9fb44f3b62453fb5558aa1786d0", "author": "mmusich", "body": "#### PR description:\r\n\r\nIt is in the plans to start using `hltMergedTracks` from the `SteamHLTMonitor` PD in the tracker alignment procedure in order to minimize the drift between the derived alignment correction / validations and their actual usage in production (at the HLT).\r\nThis PR proposes a couple of minimal fixes in order to be able to run the standard setup.\r\nThere are two commits:\r\n   *  7e521a44196748b3992e44a4ebd6827a31181510 supports the `hltMergedTracks` collection in the common track selection and refitting sequence\r\n   * 158027538da53cbef4db0c3d750aa283384a5bd8 supports the `SiStripMatchedRecHit2D` and `ProjectedSiStripRecHit2D` collections in `TrackerTrackHitFilter`. Encountering hits from either of these two collections was leading to a runtime exception of the type:\r\n   \r\n```   \r\n----- Begin Fatal Exception 05-Jul-2023 19:33:49 CEST-----------------------\r\nAn exception of category 'Unknown RecHit Type' occurred while\r\n   [0] Processing  Event run: 370102 lumi: 668 event: 1557577232 stream: 0\r\n   [1] Running path 'p'\r\n   [2] Calling method for module TrackerTrackHitFilter/'TrackerTrackHitFilter'\r\n   \r\nException Message:\r\nRecHit of type 22SiStripMatchedRecHit2D not supported. (use c++filt to demangle the name)\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\nThese two collections (as the previously stated in the removed comment) did not happen anymore since CMSSW > 2_0_X because of hit splitting in stereo modules in offline reconstruction, but in HLT tracking stereo hit splitting is not performed.\r\nIn order to cope with the  `SiStripMatchedRecHit2D`, the cut on the S/N is performed by taking the average of the stereo and mono hits.\r\n\r\n#### PR validation:\r\n\r\nTested the minimal configuration provided by @henriettepetersen (available [here](https://gist.github.com/mmusich/ff4d8ba8d9b852e67ffad514dc026cbf)).\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport. Not clear at this point if a backport for 2023 to 13.0.X is useful or not.\r\n", "branch": "master", "changed_files": 2, "closed_at": "1690199772", "comments": 14, "commits": 2, "created_at": "1689750725", "deletions": 13, "labels": ["alca-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "tracking"], "merge_commit_sha": "ce3807931fecb00eb309d545968dcc026da390f3", "merged_at": "1690199772", "merged_by": "cmsbuild", "milestone": "CMSSW_13_3_X", "number": 42302, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Support HLT tracks in alignment validation", "updated_at": "1690199772", "user": "mmusich"}