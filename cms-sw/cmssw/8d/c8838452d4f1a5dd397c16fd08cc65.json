{"additions": 60, "auther_ref": "activate_SiStripAPVsimulation_UL2016", "auther_sha": "5413741b39130d1c82b029760ea8dd03abb93df6", "author": "CMSTrackerDPG", "body": "#### PR description:\r\n\r\nThis PR is a follow-up of PRs https://github.com/cms-sw/cmssw/pull/27823, https://github.com/cms-sw/cmssw/pull/27941, https://github.com/cms-sw/cmssw/pull/28028 and https://github.com/cms-sw/cmssw/pull/28081. \r\nIn this PR the SiStrip APV saturation simulation is activated [**EDIT: assuming the 2 MC samples solution is used**]\r\n   * on  ~~53%~~ 100% of the events (ratio of the 2016 luminosity affected by the APV saturation vs the total is 53%).  \r\n   * providing the needed conditions of the APV baselines in the Global Tag (adding to the `run2_mc` & `run2_mc_cosmics` autoCond keys the appropriate tag: `SiStripApvSimulationParameters_2016preVFP_v1`) This corresponds to the APV baselines stored in https://patch-diff.githubusercontent.com/raw/cms-data/SimTracker-SiStripDigitizer/pull/2.patch.\r\n   * introducing an era modifier `strips_vfp30_2016`which is used in `Era_Run2_2016_HIPM` ~~and excluded in `Era_Run2_2016_pA` and `Era_Run2_2017`~~\r\n   * the parameter `includeAPVSimulation` is turned off in the premix stage-1 in accordance to what done for the special relval workflows introduced in  https://github.com/cms-sw/cmssw/pull/28024\r\n\r\n#### PR validation:\r\n\r\nExtensive technical validation has been carried out by the DPG (see presentation e.g. [here](https://indico.cern.ch/event/841672/contributions/3541970/attachments/1898878/3133702/Emyr_28082019.pdf)) and through production of dedicated RelVals (see [PDMVRELVALS-59]( https://its.cern.ch/jira/projects/PDMVRELVALS/issues/PDMVRELVALS-59)).\r\nI report here few MC / MC comparisons in which 9k TTBar MC events produced with vanilla `CMSSW_11_0_0_pre10` (**black**) are compared with events in which the APV saturation simulation is run on 100% of the cases (**blue**) and with events in which the APV saturation simulation is run together with the HIP mitigation (**orange**). \r\n\r\n![image](https://user-images.githubusercontent.com/5082376/68317844-1be3ff80-00bc-11ea-8208-db7a770048a5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/5082376/68317908-35854700-00bc-11ea-8437-d20a4a16d853.png)\r\n\r\n![image](https://user-images.githubusercontent.com/5082376/68317975-5352ac00-00bc-11ea-979a-b7aba90af8da.png)\r\n\r\n####  Follow-up still needed: \r\n\r\nAt the moment of the submitting this PR a detailed Data/MC comparison at Tracking level is not yet available (subject to unavailability of the samples requested in [PDMVRELVALS-59](https://its.cern.ch/jira/projects/PDMVRELVALS/issues/PDMVRELVALS-59)), though a very rough data/mc comparison has been compiled [here](https://tinyurl.com/yygthm9n) for the part of the data affected by the issue. Also it is not yet decided if it is necessary or not to run the tracking HIP mitigation over all or part of the events - though this decision shall be taken in agreement to Tracking / other POG preferences.  \r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis PR is not a backport, but the commits proposed here will need to be included in PR https://github.com/cms-sw/cmssw/pull/28160 (or in a subsequent follow-up if that one is merged first.)\r\ncc:\r\n@pieterdavid @robervalwalsh  @EmyrClement @mtosi @JanFSchulte @tsusa \r\n\r\n", "branch": "master", "changed_files": 11, "closed_at": "1574367600", "comments": 93, "commits": 16, "created_at": "1573055565", "deletions": 9, "labels": ["alca-approved", "analysis-approved", "code-checks-approved", "comparison-available", "fully-signed", "operations-approved", "orp-approved", "pdmv-approved", "reconstruction-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "abf01264b16d0ef12ce6d8d7862b959fee9546c8", "merged_at": "1574367600", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28355, "release-notes": [], "review_comments": 37, "state": "closed", "title": "Activate SiStrip APV Simulation for 2016 MC", "updated_at": "1574714399", "user": "mmusich"}