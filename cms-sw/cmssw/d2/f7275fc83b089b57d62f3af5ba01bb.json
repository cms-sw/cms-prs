{"additions": 50, "auther_ref": "ecalCalibCrashFix_12_5_X", "auther_sha": "bece5b88b06f17ce1c6dd3c89c2715f384374862", "author": "alejands", "body": "#### PR description:\r\n\r\nThis is an **urgent** fix and needs to be included in the production version at P5 as soon as possible.\r\n\r\nThis PR fixes an issue causing the client `DQM/Integration/python/clients/ecalcalib_dqm_sourceclient-live_cfg.py` to crash when there is no calibration data available as shown here: https://cmsweb.cern.ch/dqm/dqm-square/tmp/content_parser_productionPARSER_run354309. \r\n\r\nSee error log file here: https://cmsweb.cern.ch/dqm/dqm-square/tmp/tmp/content_parser_productionPARSER_run354309PARSER_job9.log\r\n\r\n```\r\n%MSG-e EcalDQM:  EcalDQMonitorClient:ecalCalibMonitorClient@endProcessBlock  24-Jun-2022 02:45:57 CEST post-events\r\nEcalCalib Monitor Client: Exception in bookMEs @ LaserClient\r\n%MSG\r\n----- Begin Fatal Exception 24-Jun-2022 02:45:57 CEST-----------------------\r\nAn exception of category 'InvalidCall' occurred while\r\n   [0] Processing end ProcessBlock\r\n   [1] Calling method for module EcalDQMonitorClient/'ecalCalibMonitorClient'\r\nException Message:\r\nElectronics Mapping not initialized\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\n\r\nThe crashes were due to one of the global variables removed in https://github.com/cms-sw/cmssw/pull/33200 being called without being initialized. This PR reintroduces the check functions (eg. `checkElectronicsMap()`) that existed before  https://github.com/cms-sw/cmssw/pull/33200 and uses them to prevent running the code that crashes when there's nothing to run over. \r\n\r\n#### PR validation:\r\n\r\n`ecalcalib_dqm_sourceclient-live_cfg.py` no longer crashes in this scenario\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackports made to 12_3_X and 12_4_X to include this in the production version at P5 as soon as possible", "branch": "master", "changed_files": 3, "comments": 4, "commits": 1, "created_at": "1656109428", "deletions": 16, "labels": ["dqm-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 38503, "release-notes": [], "review_comments": 0, "state": "open", "title": "Add checks for ECAL DQM setup objects to prevent crashes on runs with no calibration data", "updated_at": "1656132326", "user": "alejands"}