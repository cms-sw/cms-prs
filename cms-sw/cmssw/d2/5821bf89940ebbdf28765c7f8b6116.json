{"additions": 145129, "auther_ref": "beamspot-dipserver", "auther_sha": "a2bba87d58cac6852dedeb1fe20286cbee1481b8", "author": "sikler", "body": "#### PR description:\r\n\r\n- the aim was to get rid of the java-based DIP server (DQM/BeamMonitor/test/dip/BeamSpotDipServer.java) used in the past years to transmit beamspot information to LHC\r\n- detailed information on the Data Interchange Protocol is at https://readthedocs.web.cern.ch/display/ICKB/DIP+and+DIM\r\n- our beamspot server is now rewritten in C++, in the form of a normal DQM client\r\n- the central piece of code is the plugin DQM/BeamMonitor/plugins/BeamSpotDipServer.{cc,h}, the config at DQM/BeamMonitor/python/BeamSpotDipServer_cff.py, and the live client at DQM/Integration/python/clients/beamspotdip_dqm_sourceclient-live_cfg.py\r\n- it uses _two external tools_: dip (version 5.7.0) and log4cplus [in fact log4cplus is containted in the dip distribution], available at https://readthedocs.web.cern.ch/display/ICKB/DIP+API; now provided as external tools\r\n- mode of operation: the client is alive from begin to end of run; it checks the result of the previous beamspot fit at the end of each lumisection (in dqmEndLuminosityBlock); for now it looks at files containing the last beamspot fit and the actual status of the tracker under /nfshome0/dqmpro/BeamMonitorDQM/\r\n- configurable through _readFromNFS_: work either on files /nfshome0 or using beamspot from database and Dcs information on tracker status (now the reading of the legacy beamspot is implemented)\r\n\r\n#### PR validation:\r\n\r\n- compiles runs on lxplus without warning or error message\r\n- test using a working DIP browser or java application is _not yet possible_ (javaws is not supported anymore, jws is not available neither on the technical network, nor on lxplus; the page https://dash.web.cern.ch/DIP/ does not work)\r\n- live version to be tested\r\n\r\n#### PR issues, questions:\r\n\r\n- issue: when reading from database, some fields cannot be filled (BeamSpotOnlineObject does not have the fields startTime, lumisection range, number of events used, meanPV, err_meanPV, rmsPV, err_rmsPV, maxPV); are those fields necessary for LHC?", "branch": "CMSSW_12_0_X", "changed_files": 4263, "comments": 32, "commits": 1817, "created_at": "1631091478", "deletions": 117713, "labels": ["dqm-pending", "pending-signatures", "tests-pending", "orp-pending"], "milestone": "CMSSW_12_0_X", "number": 35193, "release-notes": [], "review_comments": 43, "state": "open", "title": "Beamspot DIP server (normal DQM client) for 12_0_X", "updated_at": "1632741789", "user": "sikler"}