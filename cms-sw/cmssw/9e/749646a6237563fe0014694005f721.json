{"additions": 222, "auther_ref": "pps_db_reco_geom", "auther_sha": "4f8c28395d5d85e47d8ead8cb89e6e3c0a7679f5", "author": "wpcarvalho", "body": "#### PR description:\r\n\r\nThe goal of this PR is to make the ES producer `CTPPSGeometryESModule.cc` able to read the PPS reco geometry from conditions data stored in the database. Currently, PPS geometry is read directly from XML files.\r\n\r\n- No changes are expected in the output.\r\n- We plan a future PR that will change the default reco sequence to consume conditions data from DB. \r\n\r\n@fabferro @jan-kaspar \r\n\r\n<!-- Please replace this text with a description of the feature proposed or problem addressed, specifying:\r\n  - what changes are expected in the output if any, \r\n  - what other PRs or externals it depends upon if any,\r\n  - link to any additional material useful to provide a documentation for this PR (slides, JIRA tickets, related pull requestes, hypernews, TWiki or Indico pages)  -->\r\n\r\n#### PR validation:\r\n\r\nThe following validation tests have been performed:\r\n\r\n-  Comparison of pot and sensor positions obtained from XML (current producer) and from DB (changed producer). Perfect agreement is found.\r\n-  Reco workflow. Local tests have been run to compare the current and the changed versions of the producer. Nearly perfect agreement has been observed, as can be seen from a sample of plots shown below. Only a few very tiny differences (probably at the round level) among hundreds of histograms. See the Mean for theta_x and theta_y histograms in the bottom canvas (top row = baseline ; bottom row = changed producer) as the only visible differences.\r\n\r\n![reco_cmp](https://user-images.githubusercontent.com/9204751/119693024-47574800-be22-11eb-8b4f-c137ce41b482.png)\r\n\r\n![base_vs_db_1](https://user-images.githubusercontent.com/9204751/119693175-6c4bbb00-be22-11eb-87e1-8e0373308c50.png)\r\n\r\nThe tests with the changed producer used conditions data from a local sqlite file and also the same data uploaded to the Prep database as a test tag: https://cms-conddb.cern.ch/cmsDbBrowser/list/Prep/tags/PPS_RecoGeometry_test_v1.\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot a backport.\r\n\r\n<!-- Before submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)  -->\r\n", "branch": "master", "changed_files": 7, "closed_at": "1622163963", "comments": 12, "commits": 3, "created_at": "1622039794", "deletions": 42, "labels": ["code-checks-approved", "fully-signed", "geometry-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "628c74d1813f3aa9eb4063c49ba85614da14492b", "merged_at": "1622163963", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 33851, "release-notes": [], "review_comments": 5, "state": "closed", "title": "Change PPS geometry ES producer to read preprocessed geometry from DB", "updated_at": "1622163963", "user": "wpcarvalho"}