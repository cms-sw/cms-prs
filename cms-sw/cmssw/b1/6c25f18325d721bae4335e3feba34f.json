{"additions": 103, "auther_ref": "from-CMSSW_11_0_X_2019-11-19-2300_10bits_for_heback_GF", "auther_sha": "fca9aeefc58ce1cfc0aa4d29cdb105b8d167da34", "author": "franzoni", "body": "#### PR description:\r\n\r\nThis is a follow up to the [PR 28349](https://github.com/cms-sw/cmssw/pull/28349#issuecomment-554785930), which pointed out the necessity of extending the dynamic range for energy of the HGCAL scintillator. \r\nWe do it by introducing the realistic digitisation also for the scintillators, even though not all parameters of the electronics and photo detection are currently known. By using the 10 bits of the adc (leaving the LSB un-changed) and the 12 bits for the amplitude measurement after the ToA switch, we are able to extend the saturation value to 1000 MIP (up from 275), which comfortably covers magnitude of physical deposits in the scintillator cells.\r\n\r\n#### PR validation at digi level\r\n\r\n![HEback-Mod-sample](https://user-images.githubusercontent.com/4729828/69537093-a2835280-0f7f-11ea-92fd-6c1ee3849508.png)\r\n\r\n\r\nWe verify that (for 100 ttbar events, no pu, same GEN-SIM for target-pr-> RED and reference->BLACK) with this PR the `mode` bit of the in-time bunch-crossing (3rd in a window of 5 samples) turns on for the hardest hits, \r\n\r\n![HEback-DIGI-sample_2](https://user-images.githubusercontent.com/4729828/69537118-b16a0500-0f7f-11ea-8b2f-1fbc29a1d8da.png)\r\nand that the amplitude of the digi themselves is limited to below ~0.8*1024, the current coverage of the adc (the hits which exceed the threshold now use the toA way of recording the amplitude, which has a larger LSB and are therefore buried in the bulk of the distribution).\r\n![HEback-DIGI-sample_3](https://user-images.githubusercontent.com/4729828/69537133-b929a980-0f7f-11ea-9c7e-a67bb5b38928.png)\r\n\r\nWe verify also that in the bunch-crossing after the in-time sample (4th in a window of 5), more hits are present which stems from shape leakage of the realistic digitisation now used for the scintillators.\r\nNo changes in EE and HEfront.\r\n\r\n#### PR validation at rechit level\r\n\r\n![HEback-RH-sample](https://user-images.githubusercontent.com/4729828/69537420-5ab0fb00-0f80-11ea-9566-a7a22e9c34b3.png)\r\n\r\nThe spectrum of HGCAL scintillator rechits in statistically unvaried for hits which don't hit the old saturation threshold. \r\n\r\n![HEback-T-sample](https://user-images.githubusercontent.com/4729828/69537495-88963f80-0f80-11ea-87e2-3ca8547dcb9b.png)\r\n\r\nThe reconstructed time now happens for hits above the ToA threshold (previously no such thing was possible with the single-BX trivial digitisation). The ball-park values make sense and can enable studies, we don't aim at tuning the details since the actual parameters of the scintillator part are not known.\r\n\r\n#### this PR is *not* a backport\r\n", "branch": "master", "changed_files": 6, "closed_at": "1574888160", "comments": 36, "commits": 16, "created_at": "1574678431", "deletions": 163, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "requires-external", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "efb3f18fef5a259783c5855e849252b9f1f920dd", "merged_at": "1574888160", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28463, "release-notes": [], "review_comments": 7, "state": "closed", "title": "HGCAL scintillator digitisation: adequate dynamic range (follow up 28349)", "updated_at": "1574888160", "user": "franzoni"}