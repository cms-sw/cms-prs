{"additions": 146, "auther_ref": "LowPtElectrons_EnergyRegression_106X", "auther_sha": "2a63f288c63b9d7e4d69cfc3be8473e832e7d7e1", "author": "bainbrid", "body": "#### PR description:\r\n\r\nThis PR:\r\n\r\n- Provides support for UL re-MINIAOD of both \"standard\" and BParking data sets, using the modifiers `bParking`, `run2_miniAOD_UL`, and `run2_miniAOD_devel`.\r\n\r\n- Leaves the RECO sequence, and RECO/AOD content, unchanged w.r.t. 10_6_25. \r\n \r\n- Enables energy regression for certain modifier configurations (detailed below). The energy regression performance can be found on slides 6-7 [here](https://indico.cern.ch/event/1034467/contributions/4344267/attachments/2248230/3813485/LowPtElectrons_PPDMay21.pdf).\r\n\r\n- Enables new electron ID models for certain modifier configurations (detailed below). The performance of the ID models 2020Nov28 and 2021May17 can be found on slides 4-5 [here](https://indico.cern.ch/event/1034467/contributions/4344267/attachments/2248230/3813485/LowPtElectrons_PPDMay21.pdf).\r\n\r\n- Depends on PR cms-data/RecoEgamma-ElectronIdentification#19 \r\n\r\nA detailed summary of the modifier configurations provided in this PR can be found at this [TWiki](https://twiki.cern.ch/twiki/bin/view/Main/RobBainbridgeSandBox#Support_for_CMSSW_releases_and_d) (see table). A brief summary is provided below.\r\n\r\n1) *No changes to the RECO sequence are applied.*\r\n\r\n2) *No-change policy for UL re-MINIAOD of standard data sets, modifier `(~bParking & run2_miniAOD_UL)`:*\r\n\r\n- the functionality provided by this logic is preserved w.r.t. release CMSSW_10_6_20, which was used as part of the Winter 2020 UL re-MINIAOD campaign for standard data sets. (No energy regression is performed; the 2020Sept15 ID model is evaluated.)\r\n\r\n3) *Changes to PAT for any future (re)MINIAOD campaign for standard data sets, modifier `(~bParking & run2_miniAOD_devel)`:*\r\n\r\n- Energy regression is performed as part of the re-MINIAOD sequence.\r\n\r\n- ID is evaluated as part of the re-MINIAOD sequence. A new ID weights file (2020Nov28) has been provided for use with a UL re-MINIAOD campaign. There is no appreciable extra CPU load (w.r.t. the original model), and the memory footprint will reduce (due to the smaller weights file). The 2020Nov28 model is available within PR cms-data/RecoEgamma-ElectronIdentification#19.\r\n\r\n- Low-pT PAT electrons are selected based on the following conditions `pT > 1.0 GeV and ID score > -0.25`, which provides 90% signal efficiency, a 10% mistag rate, resulting in an increase to the MINIAOD footprint of ~1%.\r\n\r\n4) *Changes to PAT for any future (re)MINIAOD campaign for the BParking data set, modifier `(bParking & run2_miniAOD_UL)`:*\r\n\r\n- Energy regression is performed as part of the re-MINIAOD sequence.\r\n\r\n- ID is evaluated as part of the re-MINIAOD sequence. A new ID weights file (2021May17), has been provided for use with a UL re-MINIAOD campaign. There is no appreciable extra CPU load (w.r.t. the original model), and the memory footprint will reduce (due to the smaller weights file). The 2021May17 model is available within PR cms-data/RecoEgamma-ElectronIdentification#19.\r\n\r\n- Low-pT PAT electrons are selected based on the following conditions `pT > 1.0 GeV`. Computing performance studies can be found [below](https://github.com/cms-sw/cmssw/pull/33589#issuecomment-840673517). The raising of the minimum electron pT threshold from 'open' (effectively ~0.5 GeV) to 1.0 GeV reduces the MINIAOD event size by ~20%, based on the 136.898 workflow (data ParkingBPH 2018B).\r\n\r\n#### PR validation:\r\n\r\n  - Local checks performed for both the RECO and PAT steps, for all relevant modifier configurations\r\n  - The following workflows were considered: 136.88811, 1325.518, 136.898\r\n  - the 2020Nov28 and 2021May17 model performances in CMSSW were validated against our standalone test bench setup. \r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis PR is a back port of cms-sw/cmssw#32391\r\n\r\n#### Forward port of additional functionality\r\n\r\n- Most for the aforementioned changes are already in master (merged PR: cms-sw/cmssw#32391)\r\n- However, a few recent changes have also been \"forward ported\" to a new PR to master: https://github.com/cms-sw/cmssw/pull/33725\r\n", "branch": "CMSSW_10_6_X", "changed_files": 7, "closed_at": "1623017510", "comments": 58, "commits": 3, "created_at": "1619773292", "deletions": 8, "labels": ["fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "08a0aa2d07b6378545841e8c4c08e8b252594d91", "merged_at": "1623017510", "merged_by": "cmsbuild", "milestone": "CMSSW_10_6_X", "number": 33589, "release-notes": [], "review_comments": 72, "state": "closed", "title": "LowPtElectrons: final energy regression and ID (back port of 32391)", "updated_at": "1623017510", "user": "bainbrid"}