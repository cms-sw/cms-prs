{"additions": 163, "auther_ref": "sherpa-psweights", "auther_sha": "13e350c197e2551e9e0b382a397dc91fd031458c", "author": "acmbulla", "body": "This PR improves the handling of generator weights for Sherpa-produced samples in the NanoAOD GenWeightsTableProducer.\r\n\r\nSherpa encodes all generator weights (including the nominal weight, matrix-element weight, normalisation, number of trials, parton shower variations, and theory-related variations) in a single, ordered list, which does not follow the assumptions used for MadGraph/powheg-based samples.\r\nIn the previous implementation, these weights were normalised with respect to the wrong reference weight, leading to inconsistent relative weights.\r\n\r\nThis PR introduces an explicit Sherpa detection at the GenLumiInfoHeader level and enforces a dedicated treatment:\r\n\t\tSherpa samples are identified via their characteristic weight-name structure.\r\n\t\tAll Sherpa generator weights are stored in the PSWeight table (always, not using keepAllPSWeights_).\r\n\t\tAll weights are normalized to a configurable baseline (default index 0 for Sherpa).\r\n\t\tScale and PDF containers are left empty for Sherpa, with clear documentation strings indicating that these weights are stored in the PS container instead.\r\n\t\tThe existing logic for non-Sherpa generators is preserved unchanged.\r\n\r\nNo changes are expected for non-Sherpa samples.", "branch": "master", "changed_files": 1, "closed_at": "1771226429", "comments": 20, "commits": 4, "created_at": "1766421081", "deletions": 89, "labels": ["fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "xpog-approved"], "merge_commit_sha": "d9aedc6a52323b4e6b0b099a5d4570a90e9b6204", "merged_at": "1771226429", "merged_by": "cmsbuild", "milestone": "CMSSW_16_1_X", "number": 49699, "release-notes": [], "review_comments": 0, "state": "closed", "title": "NanoAOD: handle Sherpa PS weights consistently", "updated_at": "1771226430", "user": "acmbulla"}