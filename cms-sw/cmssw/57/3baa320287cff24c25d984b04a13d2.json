{"additions": 46, "auther_ref": "HGCAL_DIGI_LocalTime_CMSSW_12_6_0_pre3", "auther_sha": "809ee86e5b4e861766f27724f788d9f8724aae69", "author": "stahlleiton", "body": "#### PR description:\r\n\r\nThis PR changes the definition of the time of arrival at DIGI level to represent the global time at which the signal is detected in the HGCAL hit (instead of been back-propagated to (0,0,0)). To ensure the time distribution is sampled within 25 ns window, a delay on the global time is added depending on the sub-detector equal to: EE=-9 ns, HEfront=-11 ns, HEback=-14 ns and HFNose=-33 ns.\r\n\r\nThese time delays are checked in the following plot:\r\n![image](https://user-images.githubusercontent.com/14130873/195450762-9ea91d3d-dfa3-4842-978b-0c4c4ec3e148.png)\r\n\r\nThe ToA definition is not changed at RECO level, thus the time of reconstructed HGCAL clusters and tracksters is still the time back-propagated to the center (as currently used), to simplify the review of the DIGI changes. The uncalibrated rechit algorithm takes care of the  back-propagation and the removal of the time delay.\r\n\r\nThis is part of the set of updates already announced in the HGCAL DPG meeting (see https://docs.google.com/presentation/d/11AHfmXCauuNehVb7wZkH5JLHSSI_rbgjducatd0IJwU/edit?usp=sharing).\r\n\r\n#### PR validation:\r\n\r\nPR was validated using the following cmsDriver command:\r\ncmsDriver.py TTbar_14TeV_TuneCP5_cfi --conditions auto:phase2_realistic_T21 -n 10 --era Phase2C18I13M9 --eventcontent FEVTDEBUG -s GEN,SIM,DIGI --datatier GEN-SIM-DIGI --beamspot HLLHC14TeV --geometry Extended2026D94 --fileout file:step12_HF.root --customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_3000\r\n\r\nThe expected changes include:\r\n- Minor variations of all CMS digis due to change in number of calls to random number generator engine (correlated per event across all CMSSW).\r\n- Simulated HGCAL toa time distribution lowered to 1ns (instead of 5 ns).\r\n- Rec hit time distribution peaking at around 0 ns (before was offset to 5 ns).\r\n\r\n@pfs @rovere @felicepantaleo ", "branch": "master", "changed_files": 12, "comments": 9, "commits": 3, "created_at": "1665603712", "deletions": 44, "labels": ["reconstruction-pending", "simulation-pending", "hlt-pending", "pending-signatures", "orp-pending", "tests-started", "upgrade-pending", "code-checks-approved", "hgcal-dpg-pending"], "milestone": "CMSSW_12_6_X", "number": 39720, "release-notes": [], "review_comments": 2, "state": "open", "title": "HGCAL: Change ToA to global time in DIGI", "updated_at": "1665643894", "user": "stahlleiton"}