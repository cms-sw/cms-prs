{"additions": 22, "auther_ref": "EF_uGTfixForHItriggers_133X", "auther_sha": "75faf10b1fe6c94367b29968324c99b1aa3a358c", "author": "elfontan", "body": "#### PR description:\r\nBug fix related to the uGT emulator changes for ZDC triggers (https://github.com/cms-sw/cmssw/pull/42634) in view of the 2023 HI data-taking.\r\n\r\nThe countings from ZDCP and ZDCM were the same because the type of the `m_gtEnergySumZdcTemplate` (containing the information parsed by the menu about the type of the ZDC EtSum, Plus or Minus) was not properly checked. \r\n\r\n#### PR validation:\r\nA complete test have been performed in CMSSW_13_2_3 following the recipe below (documented in the [ZDCL1TEmulator twiki](https://twiki.cern.ch/twiki/bin/viewauth/CMS/ZDCL1TEmulator)):\r\n```\r\ncmsrel CMSSW_13_2_3\r\ncd CMSSW_13_2_3/src\r\ncmsenv\r\ngit cms-init\r\ngit remote add cms-l1t-offline https://github.com/cms-l1t-offline/cmssw.git\r\ngit fetch cms-l1t-offline l1t-integration-CMSSW_13_2_0_pre3\r\ngit cms-merge-topic -u cms-l1t-offline:l1t-integration-v164-CMSSW_13_2_0_pre3\r\ngit clone https://github.com/cms-l1t-offline/L1Trigger-L1TCalorimeter.git L1Trigger/L1TCalorimeter/data\r\ngit cms-addpkg L1Trigger/L1TCommon\r\ngit cms-addpkg L1Trigger/L1TGlobal\r\ngit cms-addpkg L1Trigger/Configuration\r\ngit cms-addpkg L1Trigger/L1TZDC\r\nmkdir L1Trigger/L1TZDC/data\r\ncd L1Trigger/L1TZDC/data\r\nwget https://raw.githubusercontent.com/cms-data/L1Trigger-L1TCalorimeter/master/zdcLUT_HI_v0_1.txt\r\ncd -\r\nmkdir -p L1Trigger/L1TGlobal/data/Luminosity/startup/\r\ncd L1Trigger/L1TGlobal/data/Luminosity/startup/\r\nwget https://raw.githubusercontent.com/mitaylor/HIMenus/main/Menus/L1Menu_CollisionsHeavyIons2023_v1_1_0.xml\r\ncd -\r\ngit cms-checkdeps -A -a\r\nscram b -j 8\r\n```\r\nand manually adding to the configuration file the following lines:\r\n```\r\nprocess.etSumZdcProducer = cms.EDProducer('L1TZDCProducer',\r\n  zdcDigis = cms.InputTag(\"hcalDigis\", \"ZDC\")\r\n)\r\n\r\nprocess.etSumZdc = cms.Path(process.etSumZdcProducer)\r\nprocess.schedule.append(process.etSumZdc)\r\n```\r\nCountings from different ZDC seeds (Plus and Minus) are now different. See a quick test on 1000 events based on `/store/user/shuaiy/RiceHIN/L1Emulator/SkimedZeroBias_HIRun2018A_v1_RAW_run326776/HIForward/SkimedZeroBias_HIRun2018A_v1_RAW_run326776/201228_010151/0000/skimedZeroBias_1.root`:\r\n- BEFORE FIX:\r\n```\r\n500  L1_ZDCP1  1000\r\n502  L1_ZDCP512  59\r\n505  L1_ZDCM512  59\r\n```\r\n- AFTER FIX:\r\n```\r\n500  L1_ZDCP1  1000\r\n502  L1_ZDCP512  67\r\n505  L1_ZDCM512  59\r\n```\r\nA cross-check with the expected countings from the standalone framework of the HI group was successfully performed on a larger statistics. \r\n\r\nThe PR has been prepared starting from CMSSW_13_3_X_2023-09-13-1100:\r\n```\r\ncmsrel CMSSW_13_3_X_2023-09-13-1100\r\ncd CMSSW_13_3_X_2023-09-13-1100/src\r\ncmsenv\r\ngit cms-init\r\ngit cms-addpkg L1Trigger/L1TGlobal\r\nscram b && scram b code-checks && scram b code-format && scram b\r\n```\r\n\r\nBackport to CMSSW_13_2_X needed for the HI data-taking: https://github.com/cms-sw/cmssw/pull/42781.\r\n\r\n[cc: @hjbossi @cfmcginn @ginnocen @icali]", "branch": "master", "changed_files": 1, "comments": 4, "commits": 1, "created_at": "1694605178", "deletions": 6, "labels": ["l1-pending", "pending-signatures", "orp-pending", "tests-started", "urgent", "code-checks-approved"], "milestone": "CMSSW_13_3_X", "number": 42778, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix for proper separation of the ZDCP and ZDCM triggers in the uGT", "updated_at": "1694664578", "user": "elfontan"}