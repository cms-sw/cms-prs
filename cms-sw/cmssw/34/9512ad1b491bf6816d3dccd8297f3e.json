{"additions": 551, "auther_ref": "cq-btlnumbschemeupdate", "auther_sha": "2413b698843175b2c33a6cef6f9912578fde0f9a", "author": "cquarant", "body": "#### PR description:\r\n\r\n**Implementation of new numbering scheme for the BTLDetId.**\r\nID based on the geometry v3 of BTL: only one type of crystals (same thickness), instead of the three types of v2. \r\nIt also better describe the modularity of BTL, allowing to identify each component of the detector in its final design.\r\n\r\n**Geometry v1 is considered obsolete and it's not supported.**\r\n\r\n**The code is backward compatible with Geometry v2**: simulated events produced in v2 are automatically translated in the new format.\r\n\r\nThe code also implements a mapping to identify the electronic BTL components and the two electronic channels corresponding to a crystal, specifying also the side of the crystal they're connected to.\r\n\r\nThe new numbering scheme and the electronics mapping are documented in these **slides** (https://indico.cern.ch/event/1485592/#6-btl-numering-scheme-update-a) and in **Detector Note 2024/14** (https://icms.cern.ch/tools/publications/notes/entries/DN/2024/014)\r\n\r\nThis PR reverts commit https://github.com/cms-sw/cmssw/commit/06d30e104bc56cf687bf9722599b95a364470199 and activates the new order in BTL reconstruction geometry from -pi to pi, aligning the order of BTL modules in MTD geometry and the tracking navigation geometry in RecoMTD/DetLayers.\r\n\r\nIt is integrated on top of https://github.com/cms-sw/cmssw/pull/46911 , and it requires the update of the unit test references. This update is proposed in parallel to the update of the BTL numbering scheme, that also requires the update of all references.\r\n\r\n#### PR validation:\r\n\r\nThe following tests has been run:\r\n- Geometry/MTDCommonData/test/TestMTDIdealGeometry.cc\r\n- RecoMTD/DetLayers/test/MTDRecoGeometryAnalyzer.cc\r\n- Geometry/MTDGeometryBuilder/test/MTDDigiGeometryAnalyzer.cc\r\n- Geometry/MTDNumberingBuilder/test/GeometricTimingDetAnalyzer.cc\r\n\r\nThe result with the test is coherent with the new numbering, reference file for unit tests (https://github.com/[cms-data/Geometry-TestReference](https://github.com/cms-data/Geometry-TestReference)) needs to be updated.", "branch": "master", "changed_files": 13, "closed_at": "1734684186", "comments": 13, "commits": 5, "created_at": "1734446473", "deletions": 216, "labels": ["geometry-approved", "reconstruction-approved", "simulation-approved", "fully-signed", "tests-approved", "orp-approved", "upgrade-approved", "requires-external", "code-checks-approved", "tracking", "mtd", "changes-dataformats"], "merge_commit_sha": "84cbe952a61bc9bc484ad6445990da472b3ba0eb", "merged_at": "1734684186", "merged_by": "cmsbuild", "milestone": "CMSSW_15_0_X", "number": 46977, "release-notes": [], "review_comments": 0, "state": "closed", "title": "MTD Geometry - Numbering scheme update", "updated_at": "1734684187", "user": "cquarant"}