{"additions": 163, "auther_ref": "geant4mtfixes", "auther_sha": "382dc027d3025536ce884ae9edf9eb43c2a339be", "author": "makortel", "body": "Most of SimWatchers are thread-unsafe, so for now support for them is explicitly disabled if running OscarMTProducer with more than one thread. Same is done for the connection to external SimActivityRegistry (connection to visualization?). It is assumed now that one thread would be sufficient for both of these activities.\n\nIntroduce two optional CustomUIsession classes for MT (no effect for serial OscarProducer nor the default behaviour of OscarMTProducer) for making it easier to interpret debug output from Geant4 in the presence of multiple threads:\n- CustomUIsessionThreadPrefix: use MessageLogger, but add a thread-specific prefix for each line\n- CustomUIsessionToFile: forward the output to thread-specific files\n\nThe first class is for small to moderate size output, and the latter for large outputs (e.g. when the synchronization in MessageLogger makes the MT job essentially serial thus hiding possible MT-specific issues).\n", "branch": "CMSSW_7_3_X", "changed_files": 11, "closed_at": "1415476589", "comments": 5, "commits": 4, "created_at": "1415353391", "deletions": 13, "labels": ["comparison-available", "fully-signed", "simulation-approved", "tests-approved"], "merge_commit_sha": "1dd29c4ff9461169a0cbb40f01c651afce9d82ac", "merged_at": "1415476589", "merged_by": "cmsbuild", "milestone": "Next CMSSW_7_3_X", "number": 6264, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Disable SimWatchers for MT sim in presence of more than one thread + additional fixes", "updated_at": "1476951485", "user": "makortel"}