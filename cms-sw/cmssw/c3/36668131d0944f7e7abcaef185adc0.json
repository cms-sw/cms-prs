{"additions": 121, "auther_ref": "NanoVIDFixesNoEle_125X", "auther_sha": "76bdc2450302a78b0c3be0ee0094885f7bed9bb7", "author": "Sam-Harper", "body": "#### PR description:\r\n\r\nThis PR addresses the issue where MiniAOD and Nano can not run in the same job when using EGM IDs in NANO as identified in https://github.com/cms-sw/cmssw/pull/38690\r\n\r\nThe reason for this is simple:\r\n\r\nEGM IDs use valuemaps\r\nValues are keyed to specific collection of objects\r\nNano uses selectedPatPhotons\r\nEGM IDs are produced with reducedEGamma:reducedPhotons  which is needed to embed the IDs in the selectedPatPhotons\r\n\r\nThe solution in this PR is to allow the offending modules to also get the ancestor collections and thus be able to convert their pointer to a pointer in the equivalent photon (or electron) in the collection used for the value maps.  To map one photon / electron to another, their supercluster seed ID is used. \r\n\r\nA better solution would be that nano rather than reinventing the wheel, retrieves the objects from from the pat::Electrons of mini directly and doesnt mess around with value maps, this is how EGM intended this to be used.  But that is out side the scope of this PR. \r\n\r\n\r\n#### PR validation:\r\n\r\nwhen testing the workflow runTheMatrix.py -l 11634.0, it now works and ids are being produced as expected. \r\n\r\n", "branch": "master", "changed_files": 3, "comments": 10, "commits": 3, "created_at": "1658394497", "deletions": 35, "labels": ["reconstruction-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "xpog-approved"], "milestone": "CMSSW_12_5_X", "number": 38810, "release-notes": [], "review_comments": 0, "state": "open", "title": "Allowing EGM IDs to run in Mini with  Nano workflows ", "updated_at": "1658476783", "user": "Sam-Harper"}