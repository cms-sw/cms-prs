{"additions": 3, "auther_ref": "fix-das-selected-lumis", "auther_sha": "5013b372cfea189927ba5b6217f486683a4c9dce", "author": "tvami", "body": "#### PR description:\r\n\r\nIn the most recent IBs `runTheMatrix` step1 doesn't work.\r\n\r\nIt seems to be due to the fact that in the new DBS server the DAS return output is a list, while old DBS server returned a dictionary output \r\n\r\n#### PR validation:\r\n\r\nBefore this PR doing `runTheMatrix -l 138.4` I got\r\n```\r\n# in: /afs/cern.ch/user/t/tvami/public/PRsToCMSSW/removeCastorTags/CMSSW_12_3_X_2022-02-25-1100/src going to execute cd 138.4_PromptCollisions+RunMinimumBias2021+ALCARECOPROMPTR3+HARVESTDPROMPTR3\r\n (dasgoclient --limit 0 --query 'lumi,file dataset=/MinimumBias/Commissioning2021-v1/RAW run=346512' --format json | das-selected-lumis.py 250,300 ) | sort -u > step1_dasquery.log  2>&1\r\n \r\nTraceback (most recent call last):\r\n  File \"/cvmfs/cms-ib.cern.ch/nweek-02721/slc7_amd64_gcc10/cms/cmssw/CMSSW_12_3_X_2022-02-24-2300/bin/slc7_amd64_gcc10/das-selected-lumis.py\", line 50, in <module>\r\n    process_lumi(lumi_data)\r\n  File \"/cvmfs/cms-ib.cern.ch/nweek-02721/slc7_amd64_gcc10/cms/cmssw/CMSSW_12_3_X_2022-02-24-2300/bin/slc7_amd64_gcc10/das-selected-lumis.py\", line 40, in process_lumi\r\n    if not isinstance(lumi_nums[0], list): lumi_rang = [ [n,n] for n in lumi_nums ]\r\nTypeError: 'int' object has no attribute '__getitem__'\r\n```\r\n\r\nAfter the PR, it works.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN/A\r\n", "branch": "master", "changed_files": 1, "closed_at": "1645886654", "comments": 8, "commits": 1, "created_at": "1645885902", "deletions": 2, "labels": ["pending-signatures", "tests-pending", "orp-pending", "pdmv-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_12_3_X", "number": 37076, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update das-selected-lumis to cope with the latest changes in DAS server", "updated_at": "1645886777", "user": "tvami"}