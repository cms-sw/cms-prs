{"additions": 414, "auther_ref": "devel_fixNOTinHLTparser", "auther_sha": "608afeaf342b251276aa0908c10f8afb95d4f882", "author": "missirol", "body": "#### PR description:\r\n\r\nThe `NOT` operator of the parser in the `triggerExpression` namespace does not work correctly in recent CMSSW releases.\r\n\r\nThis PR fixes that. All credit to @fwyzard for finding the solution.\r\n\r\nThe issue was that the parser was mistakenly interpreting \"NOT\" as the name of an HLT path (parsing it into a `TriggerExpressionPathReader` object).\r\n\r\nUnit tests are improved in order to catch issues with the parser, should they come up in the future:\r\n - a unit test with syntax checks on the parser is added to `HLTcore`;\r\n - unit tests related to `TriggerResultsFilters` in `HLTfilters` are updated, including a numerical check on the trigger results of the `cmsRun` jobs.\r\n\r\n(The above tests can be used to verify that without this PR the `NOT` operator would not work correctly in recent CMSSW releases.)\r\n\r\nContext:\r\n - the `triggerExpression` parser is used in the `TriggerResultsFilter` plugin, many instances of which exist in the HLT menus;\r\n - at the same time, in recent menus none of these instances use the `NOT` operator, so this fix will have no impact on any current production use case;\r\n - still, I think it would be best to backport this fix to `12_4_X`.\r\n\r\nThis PR has a small overlap with #39044, and takes precedence over it.\r\n\r\n#### PR validation:\r\n\r\nRelies on the updated unit tests.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\n`CMSSW_12_4_X`\r\n", "branch": "master", "changed_files": 15, "comments": 18, "commits": 8, "created_at": "1660897214", "deletions": 25, "labels": ["hlt-pending", "pending-signatures", "tests-approved", "orp-pending", "bug-fix", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 39108, "release-notes": [], "review_comments": 14, "state": "open", "title": "fix for `NOT` operator in `triggerExpression::Parser`", "updated_at": "1661194157", "user": "missirol"}