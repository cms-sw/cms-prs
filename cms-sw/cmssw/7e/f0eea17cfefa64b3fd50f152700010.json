{"additions": 14, "auther_ref": "detSetVectorNewThreadSafety", "auther_sha": "9cc736bbe426f8f6c2d6cfe055518c1353184389", "author": "makortel", "body": "#### PR description:\r\n\r\nThis PR addresses the issue in the `edmNew::DetSetVector` interface that does not enforce the `LazyGetter`-derived class (provided by the user) to be thread safe (noticed in https://github.com/cms-sw/cmssw/issues/41786#issuecomment-1569139512). This PR adds the requirement for the `LazyGetter::fill()` to be `const`.\r\n\r\nThe only deriving class (beyond tests) is `ClusterFiller` defined in `RecoLocalTracker/SiStripClusterizer/plugins/ClustersFromRawProducer.cc`. As far as I can tell, the use of `buffers` and `done` is thread safe, so I added the necessary `mutable` type specifiers there. Having the `fill()` function as `const` helps to reason about thread safety, because now nothing else there needs to be understood that well (assuming everything else used by the `fill()` function is `const`-thread-safe) to conclude the function is thread safe.\r\n\r\n#### PR validation:\r\n\r\nCode compiles.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\n", "branch": "master", "changed_files": 4, "comments": 2, "commits": 1, "created_at": "1685711441", "deletions": 13, "labels": ["reconstruction-pending", "core-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved", "trk"], "milestone": "CMSSW_13_2_X", "number": 41853, "release-notes": [], "review_comments": 0, "state": "open", "title": "Enforce const-correctness for the Getter in edmNew::DetSetVector", "updated_at": "1685711816", "user": "makortel"}