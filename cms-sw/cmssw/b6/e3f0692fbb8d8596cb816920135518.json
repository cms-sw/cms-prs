{"additions": 67, "auther_ref": "PropagateExceptionsFromFileOpening", "auther_sha": "49f474d3cc5640ae1ca36faf722d2b8a5696c51e", "author": "wmtan", "body": "This is a fix for numerous relval failures in the ROOT6 branch.  It is being queued to the main 7_1_X because it is 100% compatible with ROOT5.\nROOT6 cannot propagate exceptions across the just-in-time interpreter, which is used every time cmsRun opens a TFile.   This means that, if a file cannot be opened for any reason, our TFileAdaptor throws an exception, which JIT makes into a call to terminate().  This fix uses a thread local static std::exception_ptr to\nstore the exception instead of immediately throwing it.  Then the caller of TFile::Open can check if there was an exception and rethrow it.\nAttempts to open a TFile outside of cmsRun jobs do not have this problem, because they use the standard ROOT adaptor, which does not throw.\nThis request has been tested with the short relval matrix.  There were no errors.\nPlease merge this in a timely manner after testing and after it is signed.\n", "branch": "CMSSW_7_1_X", "changed_files": 5, "closed_at": "1391820198", "comments": 3, "commits": 1, "created_at": "1391815966", "deletions": 10, "labels": ["core-pending", "pending-signatures", "tests-pending"], "milestone": "CMSSW_7_1_0_pre5", "number": 2371, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Propagate exceptions from TFile opening", "updated_at": "1394439776", "user": "wmtan"}