{"additions": 679, "auther_ref": "dd4hep-filtered-view-performance-v3", "auther_sha": "e90200c33b8c98a8a7b96c9927366e5bb8756aa0", "author": "ianna", "body": "#### PR description:\r\n\r\n* Unite an API for retrieving an attribute value from a `SpecPar` whether it's a string or numeric\r\n* Add a `find` method to allow a `SpecPar` caching defined by a parameter pack of attributes, subsequent calls to `getNextValue` will not perform a search in the SpecPar registry:\r\n```c++\r\n  fview.findSpecPar(\"TrackerRadLength\", \"TrackerXi\");\r\n  \r\n  double radLength = fview.getNextValue(\"TrackerRadLength\");\r\n  double xi = fview.getNextValue(\"TrackerXi\");\r\n\r\n```\r\nI should probably rename `getNextValue` to `getValueOf`\r\n* Make sure that current `SpecPar` cache is invalidated on iteration\r\n* Add a unit test for `find`\r\n* Test replacing `split` with a sliding window on Hcal where all part selectors have a single name in the path:\r\n```xml\r\n//HBS.* //HTS.* //HES.* //HVQF //HCal //HBS.* //HTS.* //HEScintillator.* //HVQX //VcalElecCathode //FibreBundle.* //VcalFibreBundleL.* //VcalFibreBundleR.* //CALO //MBAT //MBBT.* //VCAL\r\n``` \r\nthis PR vs CMSSW_11_2_X_2020-10-03-1100 IB:\r\n```diff\r\n194,202c234,242\r\n<  - Min event:   185.589\r\n<  - Max event:   185.589\r\n<  - Avg event:   185.589\r\n<  - Total loop:  185.59\r\n<  - Total init:  4.00237\r\n<  - Total job:   189.594\r\n<  - EventSetup Lock:   0\r\n<  - EventSetup Get:   0\r\n<  Event Throughput: 0.00538822 ev/s\r\n---\r\n>  - Min event:   188.521\r\n>  - Max event:   188.521\r\n>  - Avg event:   188.521\r\n>  - Total loop:  188.523\r\n>  - Total init:  13.8746\r\n>  - Total job:   202.399\r\n>  - EventSetup Lock:   4.76837e-06\r\n>  - EventSetup Get:   199.737\r\n>  Event Throughput: 0.00530439 ev/s\r\n204,205c244,245\r\n<  - Total loop:  185.408\r\n<  - Total init:  2.09542\r\n---\r\n>  - Total loop:  186.369\r\n>  - Total init:  1.61794\r\n207c247\r\n<  - Total job:   187.504\r\n---\r\n>  - Total job:   187.988\r\n\r\n```\r\n\r\n* Remove unused `Vis` and `VisSection` processing\r\n* Remove unused `dd4hep::SensitiveDetector` and its reference passed to the Algorithms \r\n* Replace the `tbb` containers with the `std` ones where concurrent processing is not expected \r\n\r\n<!-- Please replace this text with a description of the feature proposed or problem addressed, specifying:\r\n  - what changes are expected in the output if any, \r\n  - what other PRs or externals it depends upon if any,\r\n  - link to any additional material useful to provide a documentation for this PR (slides, JIRA tickets, related pull requestes, hypernews, TWiki or Indico pages)  -->\r\n\r\n#### PR validation:\r\n\r\n<!-- Please replace this text with a description of which tests have been performed to verify the correctness of the PR, including the eventual addition of new code for testing like unit tests, test configurations, additions or updates to the runTheMatrix test workflows -->\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\n<!-- Please replace this text with any link to  -->\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n", "branch": "master", "changed_files": 78, "closed_at": "1602007400", "comments": 52, "commits": 11, "created_at": "1601820333", "deletions": 340, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "geometry-approved", "orp-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "13187eda52a26f9d1da7d7fc81625a274e60262e", "merged_at": "1602007400", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31662, "release-notes": [], "review_comments": 4, "state": "closed", "title": "[DD4hep] Filtered View Performance - Step 3", "updated_at": "1602007400", "user": "ianna"}