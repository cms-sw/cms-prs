{"additions": 8178, "auther_ref": "dd4hep-sim-geometry-v0", "auther_sha": "6976c83aa6c060d257a746c924671934a5472b15", "author": "ianna", "body": "#### PR description:\r\n\r\nThis PR is intended for discussion only. It does not need to be merged in IBs. @mrodozov is working on adding DDG4 static library, so eventually this code will be picked up from an external. These are DD4hep classes needed to convert a DD geometry description to a G4 geometry.\r\n\r\n* DD4hep geometry to G4 geometry converter\r\n* Added a test and its configuration\r\n\r\n**There is one issue:** the converter does not like our _material:Vacuum_ definition:\r\n\r\n```\r\n<ElementaryMaterial name=\"Vacuum\" density=\"1e-13*mg/cm3\" symbol=\" \" atomicWeight=\"1*g/mole\" atomicNumber=\"1\"/>\r\n```\r\nas it passes it to G4 the latter throws:\r\n```\r\n-------- EEEE ------- G4Exception-START -------- EEEE -------\r\n\r\n*** ExceptionHandler is not defined ***\r\n*** G4Exception : mat012\r\n      issued by : G4Element::G4Element()\r\nFail to create G4Element CMS element with Z= 2  N= 1   N < Z is not allowed\r\n\r\n*** Fatal Exception ***\r\n-------- EEEE -------- G4Exception-END --------- EEEE -------\r\n```\r\n\r\nInstead, the following Vacuum definition as a thing Air works fine:\r\n```\r\n<CompositeMaterial name=\"Vacuum\" density=\"1e-10*mg/cm3\" symbol=\" \" method=\"mixture by weight\">\r\n   <MaterialFraction fraction=\"0.7494\">\r\n    <rMaterial name=\"materials:Nitrogen\"/>\r\n   </MaterialFraction>\r\n   <MaterialFraction fraction=\"0.2369\">\r\n    <rMaterial name=\"materials:Oxygen\"/>\r\n   </MaterialFraction>\r\n   <MaterialFraction fraction=\"0.0129\">\r\n    <rMaterial name=\"materials:Argon\"/>\r\n   </MaterialFraction>\r\n   <MaterialFraction fraction=\"0.0008\">\r\n    <rMaterial name=\"materials:Hydrogen\"/>\r\n   </MaterialFraction>\r\n  </CompositeMaterial>\r\n```\r\nwhich creates:\r\n```\r\nGeant4Converter        ++ Created G4  Material: materials:Vacuum    density:  0.000 mg/cm3  RadL: 5864694.266 km   Nucl.Int.Length: 13694660.844 km \r\n                       Imean:  85.538 eV   temperature: 273.15 K  pressure:   1.00 atm\r\n```\r\n\r\n#### PR validation:\r\n\r\n```\r\ncmsRun SimG4Core/DD4hepGeometry/test/python/testG4Geometry.py\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nno back port is needed\r\n", "branch": "master", "changed_files": 18, "comments": 0, "commits": 1, "created_at": "1553596829", "deletions": 3, "labels": [], "number": 26253, "release-notes": [], "review_comments": 0, "state": "open", "title": "DD4hep-based Geometry Description to G4 Geometry Converter", "updated_at": "1553596829", "user": "ianna"}