{"additions": 18, "auther_ref": "tensorflow-disable-gpu-tests_14_1_X", "auther_sha": "b9b41e4c8166dca668644f4aef63429fb9c4aebf", "author": "valsdav", "body": "#### PR description:\r\n\r\nThis PR improves the handling of CUDA unit tests for the TensorFlow package, using a new `tf_cuda_support` tool from scram , which checks if the GPU support is enabled in TensorFlow compilation. \r\n\r\nThe PR also makes the TF cuda tests more strict by checking explicitely if a CUDA device is visible to TF and not only to cmssw.  \r\n\r\nThe test `testTFVisibleDevicesCUDA` is in fact run by the framework as a CUDA device is registered, but then TF does not recognize the device and the test fails.   The other `testTF*CUDA` tests were passing silently using the CPU to run the test.  After this PR all the TF sessions using  `tf::backend::cuda` , but  not finding a GPU will fail explicitly. \r\n\r\n- This PR is needed to continue the integration of CUDA 12.4 in https://github.com/cms-sw/cmsdist/pull/9046. \r\n- This PR needs https://github.com/cms-sw/cmsdist/pull/9066 (thanks to @smuzaffar https://github.com/cms-sw/cmssw/pull/44376#issuecomment-1992693414)", "branch": "master", "changed_files": 2, "comments": 22, "commits": 2, "created_at": "1710239054", "deletions": 7, "labels": ["pending-signatures", "tests-approved", "orp-pending", "hold", "code-checks-approved", "ml-pending"], "milestone": "CMSSW_14_1_X", "number": 44376, "release-notes": [], "review_comments": 1, "state": "open", "title": "Improve handling of TF CUDA tests for 14_1_X", "updated_at": "1710349919", "user": "valsdav"}