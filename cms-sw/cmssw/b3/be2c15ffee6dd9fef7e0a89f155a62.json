{"additions": 1854, "auther_ref": "HGCalEgammaInMiniAOD_94x", "auther_sha": "02eec6b79e3e6dce8e770a5e3b3c556369c67f44", "author": "nsmith-", "body": "Adds `slimmedElectronsFromMultiCl` and `slimmedPhotonsFromMultiCl` to MiniAOD standard sequence for the `phase2_hgcal` era.  These are separate 'companion' collections due to the fact that endcap EGamma objects from real clustering are not yet part of GED, and a lot work is needed to include them in the existing chain.\r\n\r\nAs part of this inclusion, several `userFloat`s are included in the objects from the ID helpers developed in https://github.com/CMS-HGCAL/EgammaTools.  These include a 3D PCA analysis of the hits, a projective isolation cone sum, and track matching variables in the case of electrons.\r\n\r\n93x PR: #21045 \r\n\r\nThe following config,\r\n```bash\r\ncmsDriver.py patTest --filein dbs:/TT_TuneCUETP8M2T4_14TeV-powheg-pythia8/PhaseIITDRFall17DR-PU200_93X_upgrade2023_realistic_v2-v1/GEN-SIM-RECO --fileout file:miniaod.root --mc --eventcontent MINIAODSIM --runUnscheduled --datatier MINIAODSIM --conditions 93X_upgrade2023_realistic_v2 --step PAT --nThreads 8 --geometry Extended2023D17 --era Phase2_timing --python_filename miniaod_cfg.py --no_exec --customise Configuration/DataProcessing/Utils.addMonitoring -n 100\r\n```\r\ngives this `edmEventSize` output (lines * are new):\r\n```\r\nFile miniaod.root Events 100\r\nBranch Name | Average Uncompressed Size (Bytes/Event) | Average Compressed Size (Bytes/Event)\r\npatPackedCandidates_packedPFCandidates__PAT. 1.04031e+06 158201\r\npatJets_slimmedJets__PAT. 359949 30795\r\n* patElectrons_slimmedElectronsFromMultiCl__PAT. 231337 22856.8\r\npatMuons_slimmedMuons__PAT. 57552.1 18927\r\n* patPhotons_slimmedPhotonsFromMultiCl__PAT. 87394.3 10690.5\r\nEcalRecHitsSorted_reducedEgamma_reducedEBRecHits_PAT. 25045.8 10295\r\npatElectrons_slimmedElectrons__PAT. 39264.2 7971.17\r\nrecoCaloClusters_reducedEgamma_reducedEBEEClusters_PAT. 14900.1 5744.01\r\n```\r\nand after copying a file locally to test CPU, I got:\r\n```xml\r\n    <Metric Name=\"PeakValueRss\" Value=\"3195.18\"/>\r\n    <Metric Name=\"PeakValueVsize\" Value=\"4987.05\"/>\r\n    <Metric Name=\"AvgEventTime\" Value=\"27.4069\"/>\r\n```\r\nvs. previously:\r\n```xml\r\n    <Metric Name=\"PeakValueRss\" Value=\"2586.71\"/>\r\n    <Metric Name=\"PeakValueVsize\" Value=\"4268.74\"/>\r\n    <Metric Name=\"AvgEventTime\" Value=\"27.0465\"/>\r\n```\r\nSo essentially no cpu change, and the memory increase is because now the HGCal RecHit collections have to be read from the event, which are quite large.", "branch": "master", "changed_files": 26, "closed_at": "1512050373", "comments": 148, "commits": 20, "created_at": "1509054157", "deletions": 12, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "orp-approved", "pending-signatures", "reconstruction-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "9b389656fc7abd70a8507259b1eb6ee57a00d319", "merged_at": "1512050373", "merged_by": "cmsbuild", "milestone": "CMSSW_10_0_X", "number": 21037, "release-notes": [], "review_comments": 146, "state": "closed", "title": "HGCal EGamma ID helpers and Phase-II MiniAOD", "updated_at": "1512050373", "user": "nsmith-"}