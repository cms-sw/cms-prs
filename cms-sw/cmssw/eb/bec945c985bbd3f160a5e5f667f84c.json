{"additions": 14, "auther_ref": "unitest-dqm-config_13_3_X", "auther_sha": "095f214f2af99c06c2cb77235e6bc3e2d7ea9800", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/43586\r\n\r\n#### PR description:\r\n\r\nFixes unit tests failures in IB ([link](https://cmssdt.cern.ch/SDT/cgi-bin/logreader/el8_amd64_gcc12/CMSSW_13_3_X_2024-01-05-1100/unitTestLogs/DQMOffline/Configuration#/30-30)).\r\nfrom the original description at https://github.com/cms-sw/cmssw/pull/43586#issue-2045172654\r\n\r\n> This fixes the `DQMOfflineConfiguration` unit tests. Unit tests was failing as `TestDQMOfflineConfigurationGotAll` was suppose to not run any sequence but as now there are over 300 sequences so this tests was running the extra 3 sequences and grep `'Analyzing 0 seqs'` failed. I have updated the test to properly report the error\r\n> \r\n> ```\r\n> ++ sed 's|.*Analyzing *||;s| .*||'\r\n> ++ grep 'Analyzing [0-9][0-9]* seqs' run.log\r\n> + seqs=3\r\n> + echo 'Sequences run by final DQMOfflineConfiguration: 3'\r\n> Sequences run by final DQMOfflineConfiguration: 3\r\n> + '[' 3 -gt 0 ']'\r\n> + echo 'Final DQMOfflineConfiguration should not run any sequences.'\r\n> Final DQMOfflineConfiguration should not run any sequences.\r\n> + echo 'Please update parameters for TestDQMOfflineConfiguration unittest to run the extra sequences.'\r\n> Please update parameters for TestDQMOfflineConfiguration unittest run the extra sequences.\r\n> + exit 1\r\n> ```\r\n\r\n\r\n#### PR validation:\r\n\r\n`scram b runtests_TestDQMOfflineConfigurationGotAll` runs fine\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nverbatim backport of https://github.com/cms-sw/cmssw/pull/43586\r\n", "branch": "CMSSW_13_3_X", "changed_files": 2, "comments": 2, "commits": 2, "created_at": "1704454708", "deletions": 2, "labels": ["dqm-pending", "pending-signatures", "tests-pending", "orp-pending", "backport-ok"], "milestone": "CMSSW_13_3_X", "number": 43664, "release-notes": [], "review_comments": 0, "state": "open", "title": "[13.3.X] Fix DQMOfflineConfiguration unit tests", "updated_at": "1704454752", "user": "mmusich"}