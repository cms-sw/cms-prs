{"additions": 3, "auther_ref": "fix-duplicateRemoval", "auther_sha": "589537fe46836d82c8d6243d3ff3ce9d735c2d2a", "author": "CeliaFernandez", "body": "#### PR description:\r\n\r\nThis PR is a fix for one of the issues that are caused by the disambiguation in `GlobalMuonProducer` when choosing the standalone track (with or without BS contraint) to seed the global muon reconstruction.\r\n\r\nThe issue is described in https://github.com/cms-sw/cmssw/issues/38201 and consists of the duplication of some standalone muon tracks in the muons collection when global muons are fitted from the non-updated standalone track. Two `reco::Muon` objects are saved for the same physical muon:\r\n- One Global Muon with non-updated standalone track (from `standAloneMuons` collection)\r\n- One Standalone Muon (only) with updated standalone track (from `standAloneMuons::UpdatedAtVtx` collection)\r\n\r\nInternal duplicate removal fails to compare these standalone tracks as they are different refits of the same muon track. This PR doesn't modify the track choice to fit the global muons in `GlobalMuonProducer` but fixes the internal duplicate removal when filling the `muons` collection in `MuonIdProducer`.\r\n\r\nThe changes were built on top of CMSSW_12_5_0_pre5.\r\n\r\n#### PR validation:\r\n\r\nThe proposed changes passed all code format, unit and runTheMatrix tests.\r\n\r\nThis PR removes all standalone muons in `muons` collection that share the same `track.extra()` and no standalone muons sharing hits are found after the fix is done. The performance was tested in the following dataset where 1891290 out of 172618407 muons where removed:\r\n\r\n/DYJetsToMuMu_M-50_TuneCP5_13TeV-powhegMiNNLO-pythia8-photos/RunIISummer20UL16RECO-1\r\n06X_mcRun2_asymptotic_v13-v2/AODSIM\r\n\r\nAfter the fix the number of standalone muons decreases and the number of global muons remains the same, which is expected. Some plots are:\r\n\r\n![h_nSTA](https://user-images.githubusercontent.com/29282388/188828464-436aff79-d950-45d6-a6e3-5744ee7f1494.png)\r\n![h_nGLB](https://user-images.githubusercontent.com/29282388/188828489-3456e9e2-feb4-4176-95f4-7054f1a1cb5d.png)\r\n\r\n@andrea21z @cms-sw/muon-pog-l2 \r\n", "branch": "master", "changed_files": 1, "closed_at": "1662712546", "comments": 7, "commits": 1, "created_at": "1662531838", "deletions": 1, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "3f5451a2a22a89ed7c02a796557268d5264c1397", "merged_at": "1662712546", "merged_by": "cmsbuild", "milestone": "CMSSW_12_6_X", "number": 39328, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Add standalone track.extra() criteria to internal duplicate removal in MuonIdProducer", "updated_at": "1662712546", "user": "CeliaFernandez"}