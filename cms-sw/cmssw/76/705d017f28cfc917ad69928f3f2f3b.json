{"additions": 19, "auther_ref": "reuse_produce_queue_in_transform", "auther_sha": "6c47f8edac4f4406123c5e516adeacaaa9c88ae6", "author": "fwyzard", "body": "#### PR description:\r\n\r\nModify the \"transform\" that the framework uses to automatically copy device products to the host to reuse the same device queue associated with the product, instead of an independent one.\r\n\r\nThis make the host copy use the same queue as any potential module that consumes the device product, slightly reducing the potential parallelism. On the other hand it cuts the number of device queues by about 30%, potentially improving the performance of the GPU runtime,\r\n\r\nOn an AMD MI300X GPU with a \"reduced\" HLT menu running with 16 threads and 16 streams, this gives a speed-up of over 10%.\r\n\r\nOn an NVIDIA L40S GPU with the same \"reduced\" HLT menu running with 32 threads and 32 streams, the changes do not have any measurable impact (maybe a speed-up of 0.1~0.2%, well within the error).\r\n\r\n\r\n#### PR validation:\r\n\r\nCode builds, a reduced HLT menu runs correctly, with a speed-up of about 10% observed on an AMD MI300X GPU.", "branch": "master", "changed_files": 3, "comments": 6, "commits": 1, "created_at": "1764834765", "deletions": 8, "labels": ["pending-signatures", "orp-pending", "tests-started", "code-checks-approved", "heterogeneous-pending"], "milestone": "CMSSW_16_0_X", "number": 49545, "release-notes": [], "review_comments": 0, "state": "open", "title": "Reuse the device queue from produce in transform", "updated_at": "1764840309", "user": "fwyzard"}