{"additions": 445, "auther_ref": "fc-fixbtldd4hep", "auther_sha": "7cac000c2522c8d1705ea830eb08313dcaa772d7", "author": "fabiocos", "body": "#### PR description:\r\n\r\nThis PR addresses the failure of the validation of BTL simulation and reconstruction when comparing DDD and DD4hep versions, see \r\nhttps://cms-talk.web.cern.ch/t/valdb-13-2-0-pre1-phase2-d99-dd4hep-reconstruction-fullsim-mtd-reports-status-has-been-changed/26069/3\r\nThe problem is observed in the global z coordinate of the BTL SimHits, and it is given by incorrect ```BTLDetId``` being filled for the DD4hep version, as shown by debugging dumps.\r\n\r\nUnit tests are showing agreement between the two versions of geometry since 2020, but the way the BTL ```BaseNumber``` object is filled in the ```MtdSD``` interface to Geant4 does not clean the DD4hep output for the appended version number in the name of the volume, as instead is done in the geometry test code. Such a cleaning is now done inside the BTL numbering scheme natively, causing the unit test and Geant4-based simulation to behave in the same way.\r\n\r\nAt the same time, all MTD geometry unit tests have been updated to scenario 2026D98 (identical to D95 as far as MTD is concerned, no need to update external references).\r\n\r\n#### PR validation:\r\n\r\nUnit tests run without issue, the debugging printout of the numbering scheme and ```MtdSD``` is the same for 100 single muons tracked by Geant4. ", "branch": "master", "changed_files": 13, "comments": 33, "commits": 2, "created_at": "1687980562", "deletions": 71, "labels": ["reconstruction-pending", "simulation-pending", "geometry-pending", "pending-signatures", "tests-rejected", "orp-pending", "bug-fix", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_13_2_X", "number": 42127, "release-notes": [], "review_comments": 0, "state": "open", "title": "MTD geometry: fix BTL numbering scheme to work with DD4hep through Geant4", "updated_at": "1688312029", "user": "fabiocos"}