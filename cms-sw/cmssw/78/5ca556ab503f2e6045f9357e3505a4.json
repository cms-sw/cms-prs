{"additions": 377, "auther_ref": "HGC_ageing_SampleBits_forProd_CMSSW_11_0_0_pre11", "auther_sha": "6eb45416dfa871fee41c08b20910d36cc3bf5eb2", "author": "franzoni", "body": "#### PR description:\r\n\r\n+ improvements and extensions to handle of HGCAL end-of-life scenario\r\n. improvements to the ageing mode (tools to toggle on/off different ingredients)\r\n. fix for the treatment of the common noise, set minimum charge collection efficiency to 0\r\n\r\n+ tool to apply realistic noise/gain setting also to startup scenarios ( `SLHCUpgradeSimulations/Configuration/python/aging.py:realisticHGCalStartup` )\r\n\r\n+ easier to handle also in startup scenarios (reshuffling `HGCalSiNoiseMap::getSiOpCharacteristics`)\r\n   in this PR the startup scenario is not touched, only tools prepared for the next PR\r\n\r\n+ HGCSample:\r\n. bits allocation changed to 12 bits reserved for data Data ( see HGC TDR page 161: adc mode only needs 10, ToT instead needs 12); 4 newly reserved for gain (currently only 3 gains used; 12 are technically possible and may be used)\r\n. boolean `toaFired_` removed, one bit reserve to it\r\n\r\n\r\n#### PR validation:\r\n\r\nOccupancies (only pileup, average 200) :\r\n\r\n![radialprofile_counts_CEE_5_ps_gf](https://user-images.githubusercontent.com/4729828/68221990-97757c00-ffea-11e9-81e2-2e00829aaa13.png)\r\n\r\n\r\nat end-of-life with these improvements have been validated against a simple analytical model which, starting form the sole occupancy of in-time hits w/o noise, predicts the extra occupancy stemming from noise and from out of time pileup. Comparing pred and FS (full-sim) in the last four columns of the table supports the validity of the occupancies form this PR\r\n\r\n<img width=\"863\" alt=\"Screenshot 2019-11-05 at 16 32 16\" src=\"https://user-images.githubusercontent.com/4729828/68221563-e5d64b00-ffe9-11e9-867a-d16a46611e4d.png\">\r\n\r\n\r\nThese updated occupancies and the validation model have  been presented at the HGCAL DPG see [here](https://indico.cern.ch/event/855542/contributions/3602119/).\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis PR is not a back-port\r\n\r\n@pfs @deguio \r\n\r\n", "branch": "master", "changed_files": 18, "closed_at": "1574193996", "comments": 105, "commits": 60, "created_at": "1572964772", "deletions": 113, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "322a0c2b8521f72bab8da22efdd6cde6e6028cc4", "merged_at": "1574193996", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 28349, "release-notes": [], "review_comments": 33, "state": "closed", "title": "HGCAL digitisation: end-of-life updates, more realism for startup", "updated_at": "1574193996", "user": "franzoni"}