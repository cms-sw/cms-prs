{"additions": 12, "auther_ref": "fix_l1tGTAXOL1TLEtInputs2", "auther_sha": "ea1b2ed7fc0b08edb5f9601f2ee0f0c9d7dfd3b5", "author": "missirol", "body": "backport of #49753\r\n\r\n#### PR description:\r\n\r\nFrom the description of #49753.\r\n> This PR fixes the \"Pt\" inputs used in the inference of AXOL1TL models in the L1-uGT emulation.\r\n>  - Without this PR, these \"Pt\" values are truncated to integers (which is unintended, as far as I understand).\r\n>  - With this PR, the data-emulator mismatches for L1T algorithms involving AXOL1TL (recently mentioned in [#49056 (comment)](https://github.com/cms-sw/cmssw/issues/49056#issuecomment-3414537143) are reduced by ~10x (see the validation section below).\r\n>\r\n> This is a bugfix. It affects only the results of the L1-uGT emulation for AXOL1TL seeds.\r\n\r\n#### PR validation:\r\n\r\nRunning [this config](https://github.com/user-attachments/files/24532533/test_l1tDataEmulatorMismatchesGT_cfg.py) with [1] without (with) this PR in `CMSSW_16_0_0_pre4`, one gets the output in [2] ([3]). `TestL1TMismatchAnyPath` shows that running on 20K events of Run2025G (`EphemeralHLTPhysics*` PDs) without this PR there are 157 events with at least one data-emulator mismatch for the AXOL1TL seeds in the 2025 menu. With this PR, that number goes down to 17 (events). Similar checks were made on larger stats (~200K events of 2025 data from files that are no longer on EOS), and the results were similar (~10x reduction in data-emulator mismatches).\r\n\r\n[1]\r\n```bash\r\n#!/bin/bash\r\n\r\ncmsRun test_l1tDataEmulatorMismatchesGT_cfg.py \\\r\n -t 32 -n 20000 \\\r\n -a L1_AXO_VLoose L1_AXO_Loose L1_AXO_Medium L1_AXO_Tight L1_AXO_VTight L1_AXO_VVTight L1_AXO_VVVTight \\\r\n -i \"/eos/cms/store/data/Run2025G/EphemeralHLTPhysics*/RAW/*/*/398/183/*/*.root\" \\\r\n -o tmp.root\r\n```\r\n\r\n[2]\r\n```\r\nTrigReport ---------- Event  Summary ------------\r\nTrigReport Events total = 20000 passed = 1990 failed = 18010\r\n\r\nTrigReport ---------- Path   Summary ------------\r\nTrigReport  Trig Bit#   Executed     Passed     Failed      Error Name\r\nTrigReport     1    0      20000       1987      18013          0 TestL1TDigisPath0\r\nTrigReport     1    1      20000       1950      18050          0 TestL1uGTEmuPath0\r\nTrigReport     1    2      20000         43      19957          0 TestL1TMismatchPath0\r\nTrigReport     1    3      20000       1594      18406          0 TestL1TDigisPath1\r\nTrigReport     1    4      20000       1545      18455          0 TestL1uGTEmuPath1\r\nTrigReport     1    5      20000         53      19947          0 TestL1TMismatchPath1\r\nTrigReport     1    6      20000       1252      18748          0 TestL1TDigisPath2\r\nTrigReport     1    7      20000       1226      18774          0 TestL1uGTEmuPath2\r\nTrigReport     1    8      20000         26      19974          0 TestL1TMismatchPath2\r\nTrigReport     1    9      20000        975      19025          0 TestL1TDigisPath3\r\nTrigReport     1   10      20000        950      19050          0 TestL1uGTEmuPath3\r\nTrigReport     1   11      20000         25      19975          0 TestL1TMismatchPath3\r\nTrigReport     1   12      20000        566      19434          0 TestL1TDigisPath4\r\nTrigReport     1   13      20000        556      19444          0 TestL1uGTEmuPath4\r\nTrigReport     1   14      20000         10      19990          0 TestL1TMismatchPath4\r\nTrigReport     1   15      20000         87      19913          0 TestL1TDigisPath5\r\nTrigReport     1   16      20000         87      19913          0 TestL1uGTEmuPath5\r\nTrigReport     1   17      20000          0      20000          0 TestL1TMismatchPath5\r\nTrigReport     1   18      20000         10      19990          0 TestL1TDigisPath6\r\nTrigReport     1   19      20000         10      19990          0 TestL1uGTEmuPath6\r\nTrigReport     1   20      20000          0      20000          0 TestL1TMismatchPath6\r\nTrigReport     1   21      20000        157      19843          0 TestL1TMismatchAnyPath\r\n```\r\n\r\n[3]\r\n```\r\nTrigReport ---------- Event  Summary ------------\r\nTrigReport Events total = 20000 passed = 1990 failed = 18010\r\n\r\nTrigReport ---------- Path   Summary ------------\r\nTrigReport  Trig Bit#   Executed     Passed     Failed      Error Name\r\nTrigReport     1    0      20000       1987      18013          0 TestL1TDigisPath0\r\nTrigReport     1    1      20000       1988      18012          0 TestL1uGTEmuPath0\r\nTrigReport     1    2      20000          5      19995          0 TestL1TMismatchPath0\r\nTrigReport     1    3      20000       1594      18406          0 TestL1TDigisPath1\r\nTrigReport     1    4      20000       1597      18403          0 TestL1uGTEmuPath1\r\nTrigReport     1    5      20000          5      19995          0 TestL1TMismatchPath1\r\nTrigReport     1    6      20000       1252      18748          0 TestL1TDigisPath2\r\nTrigReport     1    7      20000       1253      18747          0 TestL1uGTEmuPath2\r\nTrigReport     1    8      20000          1      19999          0 TestL1TMismatchPath2\r\nTrigReport     1    9      20000        975      19025          0 TestL1TDigisPath3\r\nTrigReport     1   10      20000        975      19025          0 TestL1uGTEmuPath3\r\nTrigReport     1   11      20000          4      19996          0 TestL1TMismatchPath3\r\nTrigReport     1   12      20000        566      19434          0 TestL1TDigisPath4\r\nTrigReport     1   13      20000        566      19434          0 TestL1uGTEmuPath4\r\nTrigReport     1   14      20000          2      19998          0 TestL1TMismatchPath4\r\nTrigReport     1   15      20000         87      19913          0 TestL1TDigisPath5\r\nTrigReport     1   16      20000         87      19913          0 TestL1uGTEmuPath5\r\nTrigReport     1   17      20000          0      20000          0 TestL1TMismatchPath5\r\nTrigReport     1   18      20000         10      19990          0 TestL1TDigisPath6\r\nTrigReport     1   19      20000         10      19990          0 TestL1uGTEmuPath6\r\nTrigReport     1   20      20000          0      20000          0 TestL1TMismatchPath6\r\nTrigReport     1   21      20000         17      19983          0 TestL1TMismatchAnyPath\r\n```\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\n#49753\r\n\r\nBackport of a bugfix to the L1-uGT emulator for 2026 data-taking purposes (e.g. L1-uGT online DQM).", "branch": "CMSSW_16_0_X", "changed_files": 1, "comments": 2, "commits": 1, "created_at": "1767977430", "deletions": 12, "labels": ["l1-pending", "pending-signatures", "tests-pending", "orp-pending", "backport"], "milestone": "CMSSW_16_0_X", "number": 49754, "release-notes": [], "review_comments": 0, "state": "open", "title": "L1-uGT emulator: fix to `AXOL1TL`'s \"Pt\" inputs [`16_0_X`]", "updated_at": "1767977473", "user": "missirol"}