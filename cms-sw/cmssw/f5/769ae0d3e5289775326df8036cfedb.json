{"additions": 370, "auther_ref": "hcalLutDiffImprov", "auther_sha": "0dde070885c5d388ffa854dbd4fae9bfb9ad9a58", "author": "JHiltbrand", "body": "#### PR description:\r\n\r\nThis PR concerns some improvements to HCAL LUT XML comparing. Note that HCAL LUT XML generation/diffing code is run manually offline and not a part of standard workflows.\r\nThe only regularly-used \"mainline\" code that is modified for this PR is `HcaluLUTTPGCoder` and `HcalTPGCoderULUT`. This is due to a single function call, which _now_ requires an `HcalElectronicsEmap` pointer, as the function is depended upon in the LUT XML gen/diff code. The including of `HcalElectronicsMap` pointer in these two classes is accommodated in the same way that they are passed a topology and time slew pointer at construction time.\r\n\r\nNotable changes introduced in this PR:\r\n- Explicitly show ZDC in LUT XML diffing\r\n- Split results by zside in addition to showing total for each HCAL subdetector i.e. HBP, HBM, HB, etc.\r\n- Fix check of fine-grain (FG) bits in HBHE and introduce check for HF FG\r\n- Make use of `HcalElectronicsEmap` via DB conditions in order scary `subdet_from_crate` hard-coding\r\n- Move diff module from standalone executable and make it an EDAnalyzer to have native access to `HcalElectronicsMap`\r\n\r\n#### PR validation:\r\n\r\nA XML LUT was generated with and without the PR and with intentional input conditions differences. With the PR, the LUT diff finds the same number of HCAL channels for the various subdetectors and show ZDC channels, along with expected differences based on input conditions differences.\r\n\r\nATTN: @hjbossi @abdoulline @akhukhun ", "branch": "master", "changed_files": 12, "comments": 6, "commits": 1, "created_at": "1732028292", "deletions": 189, "labels": ["l1-pending", "alca-approved", "pending-signatures", "tests-approved", "orp-pending", "db-approved", "code-checks-approved"], "milestone": "CMSSW_14_2_X", "number": 46738, "release-notes": [], "review_comments": 0, "state": "open", "title": "Improvements for HCAL LUT XML Diffing", "updated_at": "1732093188", "user": "JHiltbrand"}