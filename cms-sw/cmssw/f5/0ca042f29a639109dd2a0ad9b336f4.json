{"additions": 65, "auther_ref": "EF_uGT_2LooseHMT", "auther_sha": "9158f962b1a76415cf824a26816f62635d47b5e1", "author": "elfontan", "body": "#### PR description:\r\nUpdate of the Global Trigger emulator for 2Loose HMT seeds (targeting the 2023 L1 menu).\r\nIt relies on the new utm library v0.11.2 recently integrated: https://github.com/cms-sw/cmsdist/pull/8386.\r\n\r\nThis PR includes also an update of the GlobalBoard code to check the HMT condition for all BXs (see the discussion in https://github.com/cms-l1t-offline/cmssw/issues/1071). It should complete the fix of DQM issues at uGT with HMT observed during 2022. \r\n\r\nBackport to CMSSW_13_0_X: https://github.com/cms-sw/cmssw/pull/41249.\r\n\r\n[cc: @dinyar @eyigitba @fmanteca]\r\n\r\n#### PR validation:\r\nBasic tests performed successfully starting from CMSSW_13_1_X_2023-03-28-1100\r\n> cmsrel CMSSW_13_1_X_2023-03-28-1100\r\n> cd CMSSW_13_1_X_2023-03-28-1100/src\r\n> cmsenv\r\n> git cms-addpkg L1Trigger/L1TGlobal \r\n> git cms-addpkg L1Trigger/Configuration\r\n> scram b distclean \r\n> git cms-checkdeps -a -A\r\n> scram b -j 8\r\n> scram b runtests \r\n> scram build code-checks\r\n> scram build code-format\r\n\r\nChanges for the L1Ntuples have been included as well: https://github.com/cms-sw/cmssw/pull/41233.\r\nA L1Ntuple [1] has been produced emulating a new menu [2] including the 2LooseHMT seed with the following recipe:\r\n\r\n`cmsDriver.py l1Ntuple -s RAW2DIGI --python_filename=data_def.py -n 10000 --no_output --era=Run3 --data --conditions=124X_dataRun3_Prompt_v4  --customise=L1Trigger/Configuration/customiseReEmul.L1TReEmulFromRAW --customise=L1Trigger/L1TNtuples/customiseL1Ntuple.L1NtupleRAWEMU --filein=/store/data/Commissioning2023/Cosmics/RAW/v2/000/365/300/00000/0bee10f0-6e0c-4efd-9ab5-c58993f0b709.root  --customise=L1Trigger/Configuration/customiseUtils.L1TGlobalMenuXML --fileout=HMT_test_L1Ntuple.root`\r\nNote that the file `L1Trigger/Configuration/python/customiseUtils.py` has to be modify to use the new menu.\r\n\r\nThe output of the `uGTEmuTree` has been checked and includes countings for all the three HMT seeds:\r\n\r\n> L1_TwoMuShower_Loose (Bit 69): 98\r\n> L1_SingleMuShower_Nominal (Bit 101): 153\r\n> L1_SingleMuShower_Tight (Bit 102):  89\r\n> \r\n\r\nAs discussed in [HMT](https://github.com/cms-l1t-offline/cmssw/issues/1080), at the moment all HMT rates are high and the reason is under investigation. Anyway, the uGT updates can be considered validated. \r\n\r\n[1] _/afs/cern.ch/work/e/elfontan/public/L1MenuTeamWork/HMT_test_L1Ntuple.root_\r\n[2]  _/afs/cern.ch/work/e/elfontan/public/L1MenuTeamWork/L1TMenu_test_HMT.xml_ (Bit 69)\r\n", "branch": "master", "changed_files": 5, "closed_at": "1680337939", "comments": 19, "commits": 1, "created_at": "1680017456", "deletions": 39, "labels": ["l1-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "5244a6a6287921a39ab289da928efe28cb8c64e4", "merged_at": "1680337939", "merged_by": "cmsbuild", "milestone": "CMSSW_13_1_X", "number": 41211, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Adding 2Loose HMT showers in the GT emulator", "updated_at": "1680337939", "user": "elfontan"}