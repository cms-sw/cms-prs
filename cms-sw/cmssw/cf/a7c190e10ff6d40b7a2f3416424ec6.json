{"additions": 55, "auther_ref": "fixOffsetBPIX2", "auther_sha": "2b0d16b62eb78b08464295b0b2683ec458645325", "author": "Parsifal-2045", "body": "#### PR description:\r\nSince #48921 made the alpaka-based PixelTracking CA default for Phase 2 we have observed some failures in IB tests, mostly related to older geometries failing an assertion in the CA code (see #49266). The root cause has been investigated and found to be in the way used to compute `offsetBPIX2` https://github.com/cms-sw/cmssw/issues/49266#issuecomment-3470624939.\r\nThis PR implements a more flexible computation based on the geometry instead of using an hard-coded constant stored in `simplePixelTopology.h` \r\n\r\n#### PR validation:\r\n\r\nTested locally on workflows that were failing in the latest IB: `23634.0, 24834.0,25234.0,25634.0,26034.0,26834.0` plus a D110 reference `29634.0`.\r\nRun 3 performance is unaffected, verified using the following recipe\r\n```bash\r\n#!/bin/bash -ex\r\n\r\ncmsDriver.py step2 -s HLT:@relval2025,VALIDATION:hltMultiTrackValidation \\\r\n    --conditions auto:phase1_2025_realistic \\\r\n    --datatier DQMIO \\\r\n    -n 1000 \\\r\n    --eventcontent DQMIO \\\r\n    --geometry DB:Extended \\\r\n    --era Run3_2025 \\\r\n    --filein file:/eos/cms/store/relval/CMSSW_16_0_0_pre1/RelValTTbar_14TeV/GEN-SIM-DIGI-RAW/PU_151X_mcRun3_2025_realistic_v4_STD_2025_PU-v1/2590000/0003c424-1e5a-4177-adbe-5afbbb578af1.root \\\r\n    --fileout file:step2.root \\\r\n    --nThreads 32 \\\r\n    --process HLTX \\\r\n    --inputCommands='keep *, drop *_hlt*_*_HLT, drop triggerTriggerFilterObjectWithRefs_l1t*_*_HLT' \\\r\n    >step2.log 2>&1\r\n\r\ncmsDriver.py step3 -s HARVESTING:postProcessorHLTtrackingSequence \\\r\n    --conditions auto:phase1_2025_realistic \\\r\n    --mc \\\r\n    --geometry DB:Extended \\\r\n    --scenario pp \\\r\n    --filetype DQM \\\r\n    --era Run3_2025 \\\r\n    -n 1000 \\\r\n    --filein file:step2.root \\\r\n    --fileout file:step3.root >step3.log 2>&1\r\n```\r\nbefore and after the fix (full plots [here](https://lferragi.web.cern.ch/plots/tracking_phase2/CAExtPR/postMergeIssue49266/run3/comparison/)).\r\n\r\nPhase-2 CA (and CA Extension) physics performance is also unaffected and reflects the results in #48921.\r\n", "branch": "master", "changed_files": 3, "comments": 1, "commits": 1, "created_at": "1761905731", "deletions": 4, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "trk"], "milestone": "CMSSW_16_0_X", "number": 49272, "release-notes": [], "review_comments": 0, "state": "open", "title": "[NGT] Add support for older geometries in PixelTracking CA", "updated_at": "1761905753", "user": "Parsifal-2045"}