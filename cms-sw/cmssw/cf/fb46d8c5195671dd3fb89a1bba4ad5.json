{"additions": 4062, "auther_ref": "newAssociators_inValidation_14_1_0_pre7", "auther_sha": "acff6a74114f80c8c7ca47e8899122c428dba8ac", "author": "felicepantaleo", "body": "#### PR description:\r\n\r\nIn the context of Next Generation Triggers and HGCAL TICL reconstruction, fast AssociatorMaps between Reco and Sim, Sim to Sim, and Reco to Reco are required in order to develop new reconstruction algorithms and study their performance.  They have also been included in the HGCalValidator and in the TICLDumper, but can be extended to many other detectors (MTD for instance, as it is the new main offender). \r\nThe HGCAL Rechit producer was optimized by avoiding calling virtual functions for every rechit and to enable support for the MultiVectorManager.\r\nThe MultiVectorManager was optimized and together with the HGCAL RecHit map was used to optimize the E/Gamma reconstruction and the associators.\r\nThe HGCAL Validation was redesigned to make effective usage of the new associators. The framework was completely redesigned to generate automatically validation plots for any new collection of TICL tracksters  against SimTracksters from Simclusters and CaloParticles. \r\n\r\n#### Performance measurements:\r\nPerformed with `14_1_0_pre7` with TTbar PU200, 10 events, single thread, single stream\r\n\r\n[**14_1_0_pre7**](https://felice.web.cern.ch/CMS/circles/web/piechart.php?local=false&dataset=Phase2Timing_resources_14_1_0_pre7&resource=time_thread&colours=default&groups=consolidated_group_mapping&show_labels=true&threshold=0): \r\n\r\n- Total time: 536s\r\n- Total allocated memory: 90GB\r\n\r\n[**14_1_0_pre7+PR**](https://felice.web.cern.ch/CMS/circles/web/piechart.php?local=false&dataset=Phase2Timing_resources_newAssociators&resource=time_thread&colours=default&groups=consolidated_group_mapping&show_labels=true&threshold=0)\r\n\r\n- Total time: 171s\r\n- Total allocated memory: 56GB\r\n\r\n#### Performance comparison \r\n\r\nFull performance comparison table coming soon.\r\n\r\nNotable numbers:\r\n- Overall Phase-2 Reconstruction workflows PU200: speedup **313%** , allocated memory **-38%**\r\n- Overall E/Gamma Phase-2 Reconstruction: **1.5x** speedup\r\n- ElectronSeedProducer ecalDrivenElectronSeeds: **3x** speedup\r\n- HGCalValidator: **30x** speedup\r\n- New associators: between **two orders of magnitude** and infinite speedup depending if you want to run on the CaloParticles from pileup as well. In this case the associators in release will crash for the amount of resources needed.\r\n\r\n@cms-sw/hgcal-dpg-l2 @cms-sw/egamma-pog-l2 @waredjeb @AuroraPerego @rovere \r\n", "branch": "master", "changed_files": 77, "comments": 1, "commits": 17, "created_at": "1725363742", "deletions": 2083, "labels": ["reconstruction-pending", "simulation-pending", "dqm-pending", "hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "upgrade-pending", "code-checks-pending", "changes-dataformats"], "milestone": "CMSSW_14_2_X", "number": 45865, "release-notes": [], "review_comments": 0, "state": "open", "title": "Redesign of the association maps, multivector manager with significant speedup of Phase-2 reconstruction workflows", "updated_at": "1725363781", "user": "felicepantaleo"}