{"additions": 287, "auther_ref": "SiStripMonitorClientFixes", "auther_sha": "419be43a3c348ef2a649c6f6a73ac2d9b2f0523e", "author": "tvami", "body": "#### PR description:\r\n\r\nTracker Offline DQM shift scripts, such as\r\n`python3 PhaseITreeProducer.py DQM_V0001_R000359278__ZeroBias__Run2022E-PromptReco-v1__DQMIO.root`\r\ngave the following\r\n```\r\nHistograms to read 114\r\nHistograms saved to internal data structure\r\nData saved as TTree object\r\nException ignored in: <function ModuleLvlValuesReader.__del__ at 0x7f99aa46ed30>\r\nTraceback (most recent call last):\r\n  File \"/data/vami/projects/DQM/CMSSW_12_4_9/src/DQM/SiStripMonitorClient/scripts/PhaseITreeProducer.py\", line 317, in __del__\r\nAttributeError: 'CPyCppyy_NoneType' object has no attribute 'IsOpen'\r\n```\r\n\r\nAfter adding a check on the existence, this is gone.\r\n\r\nSince I touched the package and gave a lot of warnings about the Legacy modules, \r\n * I moved everything to a `::one::` module\r\n * merged the header files to the cc files\r\n * moves the es consume into the initializer list\r\n\r\n#### PR validation:\r\n\r\n`PhaseITreeProducer.py` runs fine. For the rest, the code compiles w/o warning.s\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot sure, it's a cleanup, but the PhaseITreeProducer.py is used during the shifts for every run, so in that aspect, at least that part should be backported to 12_4_X (and then of course 12_5_X too)\r\n", "branch": "master", "changed_files": 10, "comments": 4, "commits": 1, "created_at": "1664326646", "deletions": 419, "labels": ["dqm-pending", "pending-signatures", "orp-pending", "tests-started", "bug-fix", "code-checks-approved", "trk"], "milestone": "CMSSW_12_6_X", "number": 39518, "release-notes": [], "review_comments": 0, "state": "open", "title": "Modernize SiStripMonitorClient, bugfix to the destructor of two scripts", "updated_at": "1664328505", "user": "tvami"}