{"additions": 1, "auther_ref": "fix-testUCTUnpacker", "auther_sha": "09b75e77168419a579c083c68ee82a06622925ce", "author": "smuzaffar", "body": "Unit test `testUCTUnpacker` requires valid input to run. In UBSAN IBs it fails [a] as the stdin is closed and no data is feed to the test which resulted in creating `UCTAMCRawData` with undefined data. \r\n\r\nThis PR proposes to use https://github.com/cms-sw/cmssw/blob/master/EventFilter/L1TXRawToDigi/test/event_test1.txt as input. Local test in UBSAN IBs shows no failure.\r\n\r\n\r\n[a] https://cmssdt.cern.ch/SDT/cgi-bin/logreader/slc7_amd64_gcc10/CMSSW_12_1_UBSAN_X_2021-09-27-2300/unitTestLogs/EventFilter/L1TXRawToDigi#/\r\n```\r\nAMC Payload Header:\r\nData Length.. = 318408\r\nBXID......... = 36\r\nL1ID......... = 00000000\r\nAMC No ...... = 0\r\nLayer-1 Phi.. = 58432\r\nOrbit No..... = 50225\r\nAMC Payload Trailer:\r\n\r\n *** Break *** segmentation violation\r\nData Length.. = \r\n\r\n\r\n===========================================================\r\nThere was a crash.\r\nThis is the entire stack trace of all threads:\r\n===========================================================\r\n#0  0x00002af6b117a4fc in waitpid () from /lib64/libc.so.6\r\n#1  0x00002af6b10f7f62 in do_system () from /lib64/libc.so.6\r\n#2  0x00002af6b0098f9b in TUnixSystem::StackTrace() () from /cvmfs/cms-ib.cern.ch/nweek-02700/slc7_amd64_gcc10/cms/cmssw/CMSSW_12_1_UBSAN_X_2021-09-27-2300/external/slc7_amd64_gcc10/lib/libCore.so\r\n#3  0x00002af6b0096555 in TUnixSystem::DispatchSignals(ESignals) () from /cvmfs/cms-ib.cern.ch/nweek-02700/slc7_amd64_gcc10/cms/cmssw/CMSSW_12_1_UBSAN_X_2021-09-27-2300/external/slc7_amd64_gcc10/lib/libCore.so\r\n#4  <signal handler called>\r\n#5  0x000000000041e602 in UCTAMCRawData::print() ()\r\n#6  0x00000000004058a6 in main ()\r\n===========================================================\r\n```\r\n", "branch": "master", "changed_files": 1, "comments": 6, "commits": 1, "created_at": "1632896722", "deletions": 0, "labels": ["l1-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_12_1_X", "number": 35465, "release-notes": [], "review_comments": 0, "state": "open", "title": "[UBSAN] Fix unit test by feeding it with correct input", "updated_at": "1632908109", "user": "smuzaffar"}