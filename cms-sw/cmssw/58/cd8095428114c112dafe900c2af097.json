{"additions": 230, "auther_ref": "refineRunInfoPI", "auther_sha": "3cf29b197c640f47e218fd2f93f5aa6f9788966d", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe goal of this PR is two-fold\r\n   1. first: is to improve the graphical appearance of the output of the `RunInfoParameters` plotting class. This now contains human readable run start and end times as well as small descriptor if the payload is valid, invalid or fake. \r\n   2. second: at the moment, the trend plots of values vs run-number (e.g. `RunInfoBFieldHistory`) are polluted by fake payloads which in production are interposed between valid ones. In order to discard them in plotting a hack in `CondCore/Utilities/interface/PayloadInspector.h` has been introduced in order to treat the case in which the return type of `getFromPayload` is a `std::pair<bool, float>`, where the boolean stores the information whether the payload is fake or not.\r\n\r\n#### PR validation:\r\n\r\nThis a graphical display with this [script](https://github.com/mmusich/cmssw/blob/3cf29b197c640f47e218fd2f93f5aa6f9788966d/CondCore/RunInfoPlugins/test/plot2JsonTimeSeries.py) of the output of running the command:\r\n```python\r\ngetPayloadData.py --plugin pluginRunInfo_PayloadInspector --plot plot_RunInfoBFieldHistory --tag runinfo_31X_hlt --time_type Run --iovs '{\"start_iov\": \"312000\", \"end_iov\": \"312260\"}' --db Prod --test ;\r\n```\r\nwith this branch and the master branch, showing how the fake payloads are epurated.\r\n\r\n![comparison_masterbranch_vs_thisPR_json](https://user-images.githubusercontent.com/5082376/90001252-7fc1d700-dc91-11ea-97e2-55630001dc29.png)\r\n\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis PR is not a backport and no backport is needed.", "branch": "master", "changed_files": 4, "closed_at": "1597758927", "comments": 12, "commits": 5, "created_at": "1597240624", "deletions": 32, "labels": ["code-checks-approved", "comparison-available", "db-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "c0a3735218d20e93415b6461d9fb3c79eb273e52", "merged_at": "1597758927", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31128, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Refine RuInfo payload inspector", "updated_at": "1597758928", "user": "mmusich"}