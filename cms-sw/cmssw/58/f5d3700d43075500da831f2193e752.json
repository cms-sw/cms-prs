{"additions": 46, "auther_ref": "skipPSOption_forCorrectedECALPFClusterProducer_CMSSW_12_0", "auther_sha": "d0114226c037e4c7027681a690ca980414f9de3f", "author": "hatakeyamak", "body": "#### PR description:\r\n\r\nThis PR introduces a flag which allows us to skip preshower-energy based correction for PF ECAL clusters. The performance of this option is still being studied, so the default behavior is to use this correction, but the preliminary study indicates non-negligible speed-up for HLT workflow [1,2]. This switch will facilitate further studies including physics object performance.\r\n\r\nA little more information on this option can be found in this talk:\r\nhttps://indico.cern.ch/event/1040953/#35-pog-status-reports-particle\r\n\r\n```\r\nbased on Run 3 ttbar PU sample.\r\n[1]\r\n[original]\r\nFastReport ---------------------------- Job Summary ----------------------------\r\nFastReport   CPU time avg.      when run  Real time avg.      when run     Alloc. avg.      when run   Dealloc. avg.      when run Modules\r\nFastReport         1.1 ms         3.4 ms         1.6 ms         5.0 ms        +647 kB       +2081 kB        -607 kB       -1954 kB    hltParticleFlowRecHitECALUnseeded\r\nFastReport         1.2 ms         3.8 ms         1.5 ms         4.7 ms        +709 kB       +2279 kB        -637 kB       -2049 kB    hltParticleFlowRecHitHBHE\r\nFastReport         1.1 ms         3.6 ms         1.4 ms         4.4 ms        +860 kB       +2764 kB        -779 kB       -2504 kB    hltParticleFlowRecHitHF\r\nFastReport         7.7 ms        24.9 ms         9.6 ms        30.7 ms       +1969 kB       +6329 kB        -611 kB       -1964 kB    hltParticleFlowRecHitPSUnseeded\r\n\r\nFastReport         1.1 ms         3.4 ms         1.4 ms         4.5 ms        +381 kB       +1226 kB        -325 kB       -1045 kB    hltParticleFlowClusterECALUncorrectedUnseeded\r\nFastReport        20.8 ms        66.8 ms        25.0 ms        80.4 ms       +4920 kB      +15816 kB       -3864 kB      -12420 kB    hltParticleFlowClusterPSUnseeded\r\nFastReport        15.8 ms        50.8 ms        18.8 ms        60.3 ms         +64 kB        +207 kB         -15 kB         -48 kB    hltParticleFlowClusterECALUnseeded\r\nFastReport        13.0 ms        41.7 ms        16.0 ms        51.4 ms       +1250 kB       +4019 kB       -1122 kB       -3606 kB    hltParticleFlowClusterHBHE\r\nFastReport         2.3 ms         7.3 ms         2.8 ms         8.9 ms        +492 kB       +1583 kB        -406 kB       -1305 kB    hltParticleFlowClusterHCAL\r\nFastReport         0.4 ms         1.3 ms         0.5 ms         1.5 ms        +376 kB       +1210 kB        -280 kB        -900 kB    hltParticleFlowClusterHF\r\n\r\nFastReport         7.4 ms        23.9 ms         9.3 ms        29.9 ms        +798 kB       +2565 kB        -652 kB       -2098 kB    hltParticleFlowBlock\r\nFastReport         1.8 ms         5.9 ms         2.3 ms         7.4 ms       +1194 kB       +3837 kB        -903 kB       -2903 kB    hltParticleFlow\r\n\r\nFastReport       308.1 ms                      381.3 ms                     +70590 kB                     -56502 kB                 total\r\nFastReport        88.8 ms                      380.8 ms                      +4417 kB                     -17447 kB                 other\r\n\r\n[2]\r\n[skipPS]\r\n# skip hltParticleFlowRecHitPSUnseeded & hltParticleFlowClusterPSUnseeded\r\n# use skipPS flag for hltParticleFlowClusterECALUnseeded\r\n\r\nFastReport         1.1 ms         3.4 ms         1.2 ms         3.8 ms        +117 kB        +379 kB         -68 kB        -220 kB    hltParticleFlowRecHitECALUnseeded\r\nFastReport         1.1 ms         3.4 ms         1.2 ms         3.8 ms        +167 kB        +538 kB         -79 kB        -254 kB    hltParticleFlowRecHitHBHE\r\nFastReport         1.0 ms         3.2 ms         1.1 ms         3.4 ms        +296 kB        +953 kB        -204 kB        -656 kB    hltParticleFlowRecHitHF\r\n\r\nFastReport         1.0 ms         3.1 ms         1.1 ms         3.5 ms        +381 kB       +1226 kB        -325 kB       -1045 kB    hltParticleFlowClusterECALUncorrectedUnseeded\r\nFastReport         1.2 ms         3.8 ms         1.4 ms         4.5 ms         +48 kB        +155 kB          -5 kB         -18 kB    hltParticleFlowClusterECALUnseeded\r\nFastReport        11.8 ms        38.1 ms        12.8 ms        41.2 ms       +1250 kB       +4019 kB       -1122 kB       -3606 kB    hltParticleFlowClusterHBHE\r\nFastReport         2.1 ms         6.8 ms         2.3 ms         7.3 ms        +492 kB       +1583 kB        -406 kB       -1305 kB    hltParticleFlowClusterHCAL\r\nFastReport         0.4 ms         1.2 ms         0.4 ms         1.3 ms        +376 kB       +1210 kB        -280 kB        -900 kB    hltParticleFlowClusterHF\r\n\r\nFastReport         6.8 ms        21.9 ms         7.4 ms        23.8 ms        +798 kB       +2565 kB        -652 kB       -2098 kB    hltParticleFlowBlock\r\nFastReport         1.7 ms         5.4 ms         1.8 ms         5.9 ms       +1193 kB       +3837 kB        -903 kB       -2903 kB    hltParticleFlow\r\n\r\nFastReport       242.2 ms                      268.8 ms                     +62027 kB                     -50325 kB                 total\r\nFastReport        91.7 ms                      365.7 ms                      +4376 kB                     -15106 kB                 other\r\n ```\r\n\r\n#### PR validation:\r\n\r\n```\r\nrunTheMatrix.py -l limited\r\n```\r\nwas successful apart from a few input data file access errors.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis is not a backport.\r\n\r\n@bendavid @marksan87 @laurenhay @dimkarasav", "branch": "master", "changed_files": 1, "closed_at": "1624010433", "comments": 9, "commits": 3, "created_at": "1623748926", "deletions": 37, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "bdd9204ade3bb82dce15ffb2a5334476b3f6c75c", "merged_at": "1624010433", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 34134, "release-notes": [], "review_comments": 0, "state": "closed", "title": "skipPS option for CorrectedECALPFClusterProducer", "updated_at": "1624010433", "user": "hatakeyamak"}