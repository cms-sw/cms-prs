{"additions": 121, "auther_ref": "mm_dev_DenkMybu_HitsRecovery", "auther_sha": "4288574f3f4fa4152ee03c09e33783e74d03da01", "author": "CMSTrackerDPG", "body": "#### PR description:\r\n\r\nThe goal of this PR is apply the correction introduced in PR https://github.com/cms-sw/cmssw/pull/44858 to the `SiStripHitEfficiencyWorker` module which is run as part of the `PromptCalibProdSiStripHitEff` Prompt Calibration Loop workflows.\r\nFeatures introduced (as per https://github.com/cms-sw/cmssw/pull/44858#issue-2267074701):\r\n   * Improvement of the missing hits recovery within the strips, to take into account two consecutive missing hits when one is located in an inactive modules;\r\n   * Expected output is a slight change in the hit efficiency per layer, as shown in the slides presented during the Strip calibration and local reconstruction meeting [here](https://indico.cern.ch/event/1396784/#b-556867-strip-calibration-loc) ( Recovery of consecutive missing hits )\r\n\r\n#### PR validation:\r\n\r\nI've run the following script with and without this PR:\r\n\r\n```bash\r\n#!/bin/bash -ex\r\n\r\n# CMSSW_14_1_X_2024-05-20-2300\r\n# voms-proxy-init -voms cms\r\n\r\ncmsDriver.py stepReAlCa \\\r\n\t     -s ALCA:PromptCalibProdSiStripHitEff \\\r\n\t     --conditions 130X_dataRun3_Express_v2 \\\r\n\t     --scenario pp \\\r\n\t     --data \\\r\n\t     --era Run3 \\\r\n\t     --datatier ALCARECO \\\r\n\t     --eventcontent ALCARECO \\\r\n\t     --processName=ReAlCa \\\r\n\t     -n 100000 \\\r\n\t     --dasquery='file dataset=/StreamExpress/Run2023C-SiStripCalMinBias-Express-v4/ALCARECO run=368724' \\\r\n\t     --nThreads=4\r\n\r\ncmsDriver.py stepHarvest \\\r\n\t     -s ALCAHARVEST:SiStripHitEff \\\r\n\t     --conditions 130X_dataRun3_Express_v2 \\\r\n\t     --scenario pp \\\r\n\t     --data \\\r\n\t     --era Run3 \\\r\n\t     --filein file:PromptCalibProdSiStripHitEff.root \\\r\n\t     -n -1\r\n```\r\n\r\nand compared the ouptut:\r\n   * for good modules only:\r\n   \r\n![superimposed_histograms_good](https://github.com/cms-sw/cmssw/assets/5082376/fb72cfba-d7cf-4df8-a41d-78615144d748)\r\n\r\n   * for all modules:\r\n![superimposed_histograms](https://github.com/cms-sw/cmssw/assets/5082376/60137f7a-d0ff-42c8-a176-387016124729)\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport, but will be backported together with https://github.com/cms-sw/cmssw/pull/44858 to `CMSSW_14_0_X` for data-taking purposes.\r\n", "branch": "master", "changed_files": 1, "comments": 5, "commits": 1, "created_at": "1716285626", "deletions": 2, "labels": ["alca-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved", "trk"], "milestone": "CMSSW_14_1_X", "number": 45008, "release-notes": [], "review_comments": 0, "state": "open", "title": "`SiStripHitEfficiencyWorker`: adding consecutive missing hits recovery when one of the two hits is in an inactive module", "updated_at": "1716286421", "user": "mmusich"}