{"additions": 21, "auther_ref": "WorkaroundForDouble32Bug", "auther_sha": "172900800b799a62e74d4a1ed21e91477ac24b0e", "author": "wmtan", "body": "This is a workaround for a ROOT bug that causes two relval tests to fail while reading files written with ROOT5.\nFixing the ROOT bug cannot cure the problem, because the ROOT bug is in ROOT5, not ROOT 6, and fixing the bug in ROOT5 would not magically update all files already written with ROOT 5.\nThe bug is that if a member of a persistent class specified in an xml selection file contains a Double32_t, the Double32_t is properly stored on disk only if there is a iotype selection rule for that field.  If not, the item is stored as a double.  The bug does not exist in ROOT6.  ROOT6 expects a Double32_t, and cannot convert the double to a Double32_t, causing a fatal error.  It is not easy to modify ROOT6 to do the conversion.\nThe easiest fix is to replace Double32_t with double in the code for those cases where there was no iotype selection rule.  This does not increase the size on disk, because in these cases, they are already stored as double.\nNOTE: At some time in the future, if we can enhance ROOT6 to do the double=>Double32_conversion when reading a file, this workaround could be removed.  I do not know if that is feasible or not.\n", "branch": "CMSSW_7_1_ROOT6_X", "changed_files": 5, "closed_at": "1399696713", "comments": 1, "commits": 1, "created_at": "1399662497", "deletions": 6, "labels": ["comparison-pending", "pending-signatures", "reconstruction-pending", "tests-pending"], "merge_commit_sha": "d875121f245ab9a25a24c865f4b090d23f297e52", "merged_at": "1399696713", "merged_by": "davidlt", "number": 3796, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Workaround for Double32_t bug", "updated_at": "1401801048", "user": "wmtan"}