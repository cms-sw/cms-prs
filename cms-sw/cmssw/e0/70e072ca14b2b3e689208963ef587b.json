{"additions": 37, "auther_ref": "ScoutingDataformat", "auther_sha": "c74322371f4e35cd42817675f797cd93b0910ca5", "author": "silviodonato", "body": "Scouting collections have been added to AOD since Run-2 [1] and to MINIAOD since 2024 data/MC (13_3_X) [2] [3].\r\nScouting collections are defined [/HLTrigger/Configuration/python/HLTrigger_EventContent_cff.py](https://github.com/cms-sw/cmssw/blob/master/HLTrigger/Configuration/python/HLTrigger_EventContent_cff.py). However `HLTrigger_EventContent_cff.py` is produced semi-automatically from the HLT menu used by TSG.\r\n\r\nThis means that currently AOD and MINIAOD know only the current scouting collections, and therefore running reMINI from Run-2 data we might loose the Run-2 scouting collections.\r\n\r\nThis issue have been already discussed in [CMSHLT-3593](https://its.cern.ch/jira/browse/CMSHLT-3593) and https://github.com/cms-sw/cmssw/pull/48465 , as in 2024 we replaced `hltScoutingMuonPacker` collection with `hltScoutingMuonPackerVtx` and `hltScoutingMuonPackerNoVtx` collections\r\n\r\nThis PR adds a new file `HLTrigger/Configuration/python/HLTScouting_EventContent_cff.py` with the definition of all scouting collections used since Run-2. This file is used in `Configuration/EventContent/python/EventContent_cff.py` to include the scouting collections to all HLT event contents.\r\n\r\nNote: for Phase-2, this approach will allow use to reprocess Run-3 data with scouting collection.\r\n\r\nI tested this PR in two ways:\r\n- I checked the diff of all PSet produced by  `Configuration/EventContent/python/EventContent_cff.py` , and I see that the previous scouting objects are added proper collection \r\n```\r\n'HLTriggerAOD': cms.PSet(\r\n     outputCommands = cms.vstring(\r\n@@ -2089,7 +2111,18 @@\r\n     outputCommands = cms.vstring(\r\n         'drop *_hlt*_*_*',\r\n         'keep FEDRawDataCollection_rawDataCollector_*_*',\r\n@@ -2059,7 +2059,18 @@\r\n         'keep *_hltScoutingPFPacker_*_*',\r\n         'keep *_hltScoutingPrimaryVertexPacker_*_*',\r\n         'keep *_hltScoutingTrackPacker_*_*',\r\n-        'keep edmTriggerResults_*_*_*'\r\n+        'keep edmTriggerResults_*_*_*',\r\n+        'keep *_hltFEDSelectorL1_*_*',\r\n+        'keep *_hltScoutingEgammaPacker_*_*',\r\n+        'keep *_hltScoutingMuonPackerNoVtx_*_*',\r\n+        'keep *_hltScoutingMuonPackerVtx_*_*',\r\n+        'keep *_hltScoutingPFPacker_*_*',\r\n+        'keep *_hltScoutingPrimaryVertexPacker_*_*',\r\n+        'keep *_hltScoutingTrackPacker_*_*',\r\n+        'keep *_hltScoutingMuonPacker_*_*',\r\n+        'keep *_hltScoutingCaloPacker_*_*',\r\n+        'keep *_hltScoutingMuonPackerCalo_*_*',\r\n+        'keep *_hltScoutingPrimaryVertexPackerCaloMuon_*_*'\r\n     )\r\n```\r\n- I ran a reMini from Run-2 data \r\n`cmsDriver.py step2  -s PAT,VALIDATION:@miniAODValidation,DQM:@miniAODDQM --era Run2_2018 -n 100 --process PAT --conditions auto:phase1_2018_realistic --mc  --scenario pp --eventcontent MINIAODSIM,DQM --datatier MINIAODSIM,DQMIO --procModifiers run2_miniAOD_UL_preSummer20 --filein root://eoscms.cern.ch//store/user/cmsbuild/store/relval/CMSSW_10_6_4/RelValProdTTbar_13_pmx25ns/AODSIM/PUpmx25ns_106X_upgrade2018_realistic_v9-v1/10000/4440FA53-897B-9A4B-AD76-D1337B591A2F.root --fileout file:step2.root  --number 1`  \r\n(taken from `runTheMatrix.py -l 2500.024`)\r\nwith and without the PR.\r\nThe diff of `edmDumpEventContent` of the two files is:\r\n```\r\n> double                                \"hltScoutingCaloPacker\"     \"caloMetPhi\"      \"HLT\"     \r\n> double                                \"hltScoutingCaloPacker\"     \"caloMetPt\"       \"HLT\"     \r\n> double                                \"hltScoutingCaloPacker\"     \"rho\"             \"HLT\"     \r\n> vector<ScoutingCaloJet>               \"hltScoutingCaloPacker\"     \"\"                \"HLT\"     \r\n> vector<ScoutingMuon>                  \"hltScoutingMuonPacker\"     \"\"                \"HLT\"     \r\n> vector<ScoutingMuon>                  \"hltScoutingMuonPackerCalo\"   \"\"                \"HLT\"     \r\n> vector<ScoutingVertex>                \"hltScoutingMuonPacker\"     \"displacedVtx\"    \"HLT\"     \r\n> vector<ScoutingVertex>                \"hltScoutingMuonPackerCalo\"   \"displacedVtx\"    \"HLT\"     \r\n> vector<ScoutingVertex>                \"hltScoutingPrimaryVertexPackerCaloMuon\"   \"primaryVtx\"      \"HLT\" \r\n```\r\nas expected.\r\n\r\ncc: @cms-sw/hlt-l2 @missirol @elfontan @patinkaew @cms-sw/pdmv-l2 \r\n\r\n[1] #21295\r\n[2] #42863\r\n[3] #43327", "branch": "master", "changed_files": 2, "comments": 5, "commits": 2, "created_at": "1753441830", "deletions": 1, "labels": ["hlt-pending", "operations-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_15_1_X", "number": 48630, "release-notes": [], "review_comments": 5, "state": "open", "title": "Add previous scouting dataformat in AOD and MINIAOD", "updated_at": "1753530171", "user": "silviodonato"}