{"additions": 15, "auther_ref": "phase0_pixel_charge_reweighting", "auther_sha": "7de1d31a1145d7b81b1666b2cefad962db93f5db", "author": "mmusich", "body": "#### PR description:\r\n\r\nIn the scope of the preparations for the 2016 Ultra-Legacy MC campaigns, when looking at the data charge profiles, we have reached the conclusion that the radiation damage accumulated by the Phase-0 detector justifies the activation of the pixel cluster charge re-weighting (full details on the study of the radiation damage is presented here: [here](https://indico.cern.ch/event/808418/contributions/3495567/attachments/1878023/3093308/ultra_legacy_templates_2016_Update.pdf)).\r\nThis feature was up to now nominally switched off for the the Phase-0 detector and it is hereby activated by means of the era mechanism. \r\nA new modifier `Configuration/Eras/python/Modifier_pixel_2016_cff.py ` is introduced and used in the definition of the `Era_Run2_2016` to selectively switch on the feature only for 2016 which is targeted by the Ultra-Legacy.\r\nAn appropriate set of 2D template conditions for the radiation damage model has been derived together with update CPE conditions (Simulation Lorentz Angle, Lorentz Angle offset calibration, empry Lorentz Angle widths, generic errors and 1D templates), using the third IOV of the data conditions as an approximation of the \"average\" radiation damage in 2016.\r\nThey are proposed in this PR, by updating several `autoCond` keys with candidate Global Tags:\r\n   * `run2_design`:  https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/110X_mcRun2_design_v1/110X_mcRun2_design_v2\r\n   * `run2_mc`: https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/110X_mcRun2_asymptotic_v1/110X_mcRun2_asymptotic_v2\r\n   * `run2_mc_cosmics`: https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/110X_mcRun2cosmics_startup_deco_v1/110X_mcRun2cosmics_startup_deco_v2\r\n   * `run2_mc_pa`: https://cms-conddb.cern.ch/cmsDbBrowser/diff/Prod/gts/110X_mcRun2_pA_v1/110X_mcRun2_pA_v2\r\n\r\n**N.B.**: in the design MC case only the 2D template tags are changed using the same payload both at the `numerator` and `denominator` label, resulting in no re-weigthing applied (design is assumed to be unirradiated).\r\n~~If AlCa/DB can make these full-fledged Global Tags I will be gladly updating the autoCond file~~.\r\n\r\n#### PR validation:\r\nThe PR passes standard tests (`addOnTests` and ```runTheMatrix.py -l limited -t 4 -j 8```.\r\n\r\nAdditionally the effect of the charge re-weighting has been tested in simulation by comparing the pixel charge profiles vs depth with two 2016 runs 278240 & 278308 ( falling into IOV 3  of the data CPE conditions) and the reference MC without re-weighting.\r\nThe comparison is shown [here](https://indico.cern.ch/event/808419/contributions/3509501/attachments/1884963/3106810/ccp_2016ULprep_reweighting_newTemplate.pdf)\r\n\r\n![image](https://user-images.githubusercontent.com/5082376/61814570-a45dcd80-ae48-11e9-9c98-d9d3d7b8366f.png)\r\n\r\nPost-reweighting DATA and MC profiles are found in satisfactory agreement. \r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis PR is not a backport\r\ncc:\r\n@tsusa @tvami @leaca \r\n", "branch": "master", "changed_files": 5, "closed_at": "1564517059", "comments": 29, "commits": 7, "created_at": "1563982221", "deletions": 6, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "fully-signed", "operations-approved", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "fdec8cfcafa23c39286f9fbdb05830ffa1da6295", "merged_at": "1564517059", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27600, "release-notes": [], "review_comments": 5, "state": "closed", "title": "Activate Pixel Charge Reweighting for phase-0 detector (2016 only)", "updated_at": "1564601020", "user": "mmusich"}