{"additions": 813, "auther_ref": "CMSSW_12_0_X-pack-by-cfeb", "auther_sha": "45a1877761564baad1c4f8c7e6bbbf0bf1576551", "author": "dildick", "body": "#### PR description:\r\n\r\n* New option in CSC DigiToRaw step to pack strip digis by CFEB in each chamber (called `packByCFEB`). This is how it was done in the (digital)CFEBs in Run-1 and Run-2 (and how it will be done in Run-3), but it was not implemented until now. The option is still turned off though.\r\n* I also added a unit test to check if the DAQ conditions implemented in the CSC packer correctly pack the CSC wiregroups, comparators and strip digis. 10 dimuon events are generated with 0.9 < |eta| < 2.4 and 2 < pT < 1000 GeV. The whole simulation is done up to RawToDigi, followed by the test. In each event, check each chamber (540 CSC chambers) if the DAQ conditions are met. They are\r\n   * Pack wire digis if there is an ALCT in that chamber (and a L1A)\r\n   * Pack comparator digis if there is CLCT in that chamber (and a L1A)\r\n   * Pack strip digis in a CFEB (strip sector in a chamber) if there is CLCT pretrigger in that CFEB (and a L1A)\r\n* The DAQ conditions were moved to a static class `CSCDigiToRawAccept`, so that I can use the same functions in the unit test.\r\n\r\n#### PR validation:\r\n\r\nBecause `packByCFEB` is set to `False` there should be no changes in any workflow.\r\n\r\nTested with WF 11634.0 \r\n\r\nAlso tested with `testPackingUnpackingPreTriggers_cfg.py`. To run the test, do `cmsRun EventFilter/CSCRawToDigi/test/testPackingUnpackingPreTriggers_cfg.py ` with either `packByCFEB` in cscPacker_cfi `True` or `False`. \r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN/A\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n\r\n@barvic @ptcox @tahuang1991 ", "branch": "master", "changed_files": 10, "closed_at": "1629875534", "comments": 43, "commits": 11, "created_at": "1628106426", "deletions": 98, "labels": ["reconstruction-approved", "simulation-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "6a1c54966f430fe4974c99b6d977ccbfdd1ae50f", "merged_at": "1629875534", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 34783, "release-notes": [], "review_comments": 4, "state": "closed", "title": "New option in CSC DigiToRaw to pack strip digis by CFEB in each chamber. ", "updated_at": "1629875535", "user": "dildick"}