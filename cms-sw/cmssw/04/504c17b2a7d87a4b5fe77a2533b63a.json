{"additions": 1452, "auther_ref": "egamma_tensorflow_pfid", "auther_sha": "f45b48ac2d03f08ea01c7f3bc0b139e6d850351e", "author": "valsdav", "body": "#### PR description:\r\n\r\nThis PR introduces the DNN based Egamma particle flow ID evaluation based on the Tensorflow internal support.\r\nTwo helper classes, ElectronDNNEstimator and PhotonDNNEstimator, are included to handle the loading and evaluation of the DNN models for GsfElectron and GEDPhotons candidates. \r\n\r\nMultiple models are evaluated for electrons and photons in different detector and energy regions. Batch evaluation is implemented to call each Tensorflow session only 1 time for event.  The evaluation of the DNN models is configurable from python config and txt files:  the list of variables to be used, their scaling parameters, the model files can be changed without changes to the code.  \r\n\r\nThe DNNs are evaluated before the electron and photons candidates pass through the PFEgammaFilters, where the DNN values are available in the candidates to be used for the selection. Thresholds configuration for the PFid have been added to the PFEGammaFilter producer.\r\n\r\nIn the PR, the DNN based PFid has been activated by default and default models files have been included for the testing. Final model file will be provided in a separate PR after the finalization on the CMSSW_12_0  samples.  \r\n\r\nPresentations and documentation:\r\n- Physics talk in PPD:  https://indico.cern.ch/event/1084340/contributions/4560857/attachments/2328176/3966582/PPDMeeting_14Oct2021.pdf\r\n- Integration of PF EGM ID in CMSSW  https://indico.cern.ch/event/1081058/#4-integration-of-pf-egm-id-in\r\n- EGM PF validation studies https://indico.cern.ch/event/1081058/#5-egm-pf-validation-studies\r\n\r\n#### PR validation:\r\n\r\nStandard PF validation:  https://akanugan.web.cern.ch/akanugan/PF_Validation_PFEGammaID_PR35403/\r\nList of MINIAOD files and a few summary slides looking at the PF electrons & gedGsfElectrons in test vs reference are at:\r\nhttps://cernbox.cern.ch/index.php/s/ki533KAwuWW1k3T\r\n\r\n", "branch": "master", "changed_files": 35, "closed_at": "1634554230", "comments": 73, "commits": 24, "created_at": "1632483017", "deletions": 138, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "requires-external", "code-checks-approved"], "merge_commit_sha": "5c87671b8716e4dda30cdaa67d7ad85b9a9d9d64", "merged_at": "1634554230", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 35403, "release-notes": [], "review_comments": 72, "state": "closed", "title": "Egamma PFID based on Tensorflow DNNs ", "updated_at": "1634554231", "user": "valsdav"}