{"additions": 8, "auther_ref": "fixMixHGCHEBack", "auther_sha": "b78f314ca278d1c0dac305ebaf709cc9df34277f", "author": "makortel", "body": "@kpedro88 Reported that MTD RelVals are failing mysteriously with \"missing\" `g4SimHits:HGCHitsHEback` collection in the pileup files. The product, however, exists in the files and is present in all events. The problem is not visible if the DIGI job is given only one pileup file.\r\n\r\nI noticed that there is also another case where the problem is not visible. The mixing system opens a random pileup file once before the event loop to check the event content. Then, in the event loop, the mixing system opens a random pileup file to start processing the pileup events. In case these two files are the same (by chance), the job works fine.\r\n\r\nThe problem lies in `MixingModule` constructing a list of allowed branches from the specified \"mixed objects\" (SimTracks, RecoTracks, SimVertices, HepMCProduct, PCaloHits, and PSimHits), and it turns out that the `HGCHitsHEBack` is missing from the list of PCaloHits and thus gets dropped. This PR adds the `HGCHitsHEBack` back to the list.\r\n\r\nDigging from the history, the `hgchebackDigitizer` was removed from here in #14667. After that, it was added back to `digitizers_cfi.py` and removed from there a few times such that #16022 left it there. I suppose that PR should have also restored `hgchebackDigitizer` here as well.\r\n\r\nTested in 10_4_0_pre2, no other changes expected.\r\n", "branch": "master", "changed_files": 1, "comments": 23, "commits": 2, "created_at": "1542664663", "deletions": 1, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-pending", "simulation-approved", "tests-approved"], "milestone": "CMSSW_10_4_X", "number": 25297, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix pileup mixing with multiple pileup files for HGCal", "updated_at": "1542833620", "user": "makortel"}