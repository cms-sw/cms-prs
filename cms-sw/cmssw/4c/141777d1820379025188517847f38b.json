{"additions": 26, "auther_ref": "DestructorBug", "auther_sha": "ecbef17c4fd4356cbf2f0f1a29847e339e62a548", "author": "tvami", "body": "#### PR description:\r\n\r\nTracker Offline DQM shift scripts, such as\r\n`python3 PhaseITreeProducer.py DQM_V0001_R000359278__ZeroBias__Run2022E-PromptReco-v1__DQMIO.root`\r\ngave the following\r\n```\r\nHistograms to read 114\r\nHistograms saved to internal data structure\r\nData saved as TTree object\r\nException ignored in: <function ModuleLvlValuesReader.__del__ at 0x7f99aa46ed30>\r\nTraceback (most recent call last):\r\n  File \"/data/vami/projects/DQM/CMSSW_12_4_9/src/DQM/SiStripMonitorClient/scripts/PhaseITreeProducer.py\", line 317, in __del__\r\nAttributeError: 'CPyCppyy_NoneType' object has no attribute 'IsOpen'\r\n```\r\n\r\nAfter adding a check on the existence, this is gone.\r\n\r\n#### PR validation:\r\n\r\n`PhaseITreeProducer.py` runs fine. \r\nAdded new unit test\r\n```\r\nscram b runtests_test_TreeAndTkMapProducer\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\n<!-- Please replace this text with any link to the master PR, or the intended backport release cycle numbers -->\r\n\r\nPhaseITreeProducer.py is used during the shifts for every run, so it should be backported to 12_4_X (and then of course 12_5_X too)\r\n", "branch": "master", "changed_files": 4, "comments": 12, "commits": 2, "created_at": "1664748583", "deletions": 4, "labels": ["dqm-pending", "pending-signatures", "tests-approved", "orp-pending", "bug-fix", "code-checks-approved", "trk"], "milestone": "CMSSW_12_6_X", "number": 39573, "release-notes": [], "review_comments": 1, "state": "open", "title": "Bugfix to the destructor of two TkDQM scripts", "updated_at": "1664864932", "user": "tvami"}