{"additions": 27, "auther_ref": "CMSSW_9_2_3_patch1/sign917/for80XLegacy", "auther_sha": "bb794a7a5b29429926b8cf1225a03d3474869c25", "author": "slava77", "body": "- run2_miniAOD_80XLegacy modifier (to be added to the list of eras with Run2_2016 or related)\r\n- updates from #18828 for deep flavor \r\n- disable chargedHadronIsolation reading in packedPFCandidates (it is not available in 80X)\r\n\r\nTested in CMSSW_9_2_3_patch1 with the following:\r\n\r\nfor MC:\r\n```\r\ncmsDriver.py step3  --conditions auto:run2_mc --mc --scenario pp --process PAT --era Run2_2016,run2_miniAOD_80XLegacy --eventcontent MINIAODSIM,DQM --runUnscheduled  -s PAT,VALIDATION:@miniAODValidation,DQM:@miniAODDQM --datatier MINIAODSIM,DQMIO  -n 3000 --filein /store/mc/RunIISummer16DR80Premix/TT_TuneCUETP8M2T4_13TeV-powheg-pythia8/AODSIM/PUMoriond17_backup_80X_mcRun2_asymptotic_2016_TrancheIV_v6-v1/00000/004973E8-26BA-E611-93E0-A0000420FE80.root  --fileout file:step3.root > step3.log  2>&1 \r\n\r\ncmsDriver.py step4  --filetype DQM --conditions auto:run2_mc --mc  --scenario pp -s HARVESTING:@miniAODValidation+@miniAODDQM --era Run2_2016,run2_miniAOD_80XLegacy -n -1 --filein file:step3_inDQM.root --fileout file:step4.root  > step4.log  2>&1 \r\n\r\n```\r\n\r\nfor data:\r\n```\r\ncmsDriver.py step3  --conditions auto:run2_data --data --scenario pp --process PAT --era Run2_2016,run2_miniAOD_80XLegacy --eventcontent MINIAOD,DQM --runUnscheduled  -s PAT,DQM:@miniAODDQM --datatier MINIAOD,DQMIO  -n 3000 --filein /store/data/Run2016E/MET/AOD/18Apr2017-v1/120001/A21C3008-A548-E711-A90D-FA163E26AC84.root  --fileout file:step3.root > step3.log  2>&1 \r\n\r\ncmsDriver.py step4  --filetype DQM --conditions auto:run2_data --data --scenario pp  -s HARVESTING:@miniAODDQM --era Run2_2016,run2_miniAOD_80XLegacy -n -1 --filein file:step3_inDQM.root --fileout file:step4.root  > step4.log  2>&1 \r\n```\r\n\r\nHere are a couple of plots from the MET PD (instructions above):\r\n- some things are essentially the same (with recognizeable changes [simple , e.g. p4 kinematics pf packedCandidates is the same)]:\r\n![all_8_0_28_patch1-orig-patvs9_2_3_patch1-sign917-pat_met18apr2017c_patpackedcandidates_packedpfcandidates__pat_obj_packeddxy_](https://user-images.githubusercontent.com/4676718/27243425-b3b4eee0-5296-11e7-90d1-2b9b22e63de8.png)\r\n\r\n- Some things differ more (and I don't obviously recognize the difference\r\nE.g. in slimmedJets (maybe cleaning is not the same? it's the same ak4PFJetsCHS on input from AOD directly)\r\n![all_8_0_28_patch1-orig-patvs9_2_3_patch1-sign917-pat_met18apr2017c_log10patjets_slimmedjets__pat_obj_et](https://user-images.githubusercontent.com/4676718/27243499-0d36b67e-5297-11e7-885b-5ccddfc21705.png)\r\n)\r\n![all_8_0_28_patch1-orig-patvs9_2_3_patch1-sign917-pat_met18apr2017c_log10patjets_slimmedjets__pat_obj_energy](https://user-images.githubusercontent.com/4676718/27243484-f6f1034c-5296-11e7-8a51-5e29ec33370a.png)\r\nNote that ak4PFJets \r\n\r\n@mverzett @kmcdermo @arizzi @gpetruc \r\n\r\n@fabozzi please take a look to possibly set up a matrix workflow to have this regularly tested.\r\n", "branch": "master", "changed_files": 4, "closed_at": "1497961048", "comments": 16, "commits": 5, "created_at": "1497638432", "deletions": 1, "labels": ["analysis-pending", "comparison-available", "operations-pending", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "dc15221d513c4754dbd8214a96300e52e9a0821a", "merged_at": "1497961048", "merged_by": "cmsbuild", "milestone": "CMSSW_9_2_X", "number": 19304, "release-notes": [], "review_comments": 0, "state": "closed", "title": "setup to run miniAOD on legacy 80X AOD inputs", "updated_at": "1497963017", "user": "slava77"}