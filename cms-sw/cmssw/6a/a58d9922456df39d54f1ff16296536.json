{"additions": 267, "auther_ref": "AllDaughterDecayFilter_112Xbackport", "auther_sha": "a808459efefeec23664e231b8e934d47748ff12a", "author": "ats2008", "body": "#### PR description:\r\nBackport for PR #33408 and its bug fix #33581\r\n\r\n**Description**:\r\nThis PR intends to add new GEN filter to the repo that will select a specific decay based on the decaying particle its daughters and  kinematic constraints put on the daughters.This intended as a new module to remove some of the shortcomings that the existing filter has. \r\n\r\nThe PythiaDauVFilter as implemented [here](https://cmssdt.cern.ch/dxr/CMSSW/source/GeneratorInterface/GenFilters/plugins/PythiaDauVFilter.cc) , does not check for the compliance of the cuts for each particle separately. For the specified mother (`ParticleID`) it checks if there are at least `NumberDaughters` daughter particles and exactly `NumberDaughters` daughters that satisfies the specific eta & pt cuts.  ( the gamma multiplicity of Bs->Mu Mu Gamma decay in the validation section)\r\n\r\nFor detailed context  on the issue please see the slides from the BPH Trigger meeting  [here](https://indico.cern.ch/event/1019671/contributions/4280967/attachments/2211280/3742378/bs2mumugamma_BPH_TRIGGER_MEETING_18Mar2021.pdf)( tldr : see slides  6,7,8 )\r\n\r\n#### PR validation:\r\n```\r\ncmsrel  CMSSW_11_2_0_pre10\r\ncd CMSSW_11_2_0_pre10/src \r\ncmsenv\r\ngit cms-init\r\ngit pull official-cmssw pull/33976/head\r\ncurl -s -k https://cms-pdmv.cern.ch/mcm/public/restapi/requests/get_fragment/TSG-Phase2HLTTDRWinter20GS-00251 --retry 3 --create-dirs -o Configuration/GenProduction/python/TSG-Phase2HLTTDRWinter20GS-00251-fragment.py\r\nscram b -j \r\ncmsDriver.py Configuration/GenProduction/python/TSG-Phase2HLTTDRWinter20GS-00251-fragment.py --python_filename cfg2023_bs2mmg_SDR.py --eventcontent RAWSIM --customise Configuration/DataProcessing/Utils.addMonitoring --datatier GEN-SIM --fileout file:bs2mmg2023.root --conditions 113X_mcRun3_2021_realistic_v6 --beamspot Run3RoundOptics25ns13TeVLowSigmaZ --step GEN,SIM --geometry DB:Extended --era Run3 --no_exec --mc -n 10\r\n# now please change the name of the filter used in line  97 to \r\n# process.decayfilter = cms.EDFilter(\"PythiaDauVFilter\" ,  - - > process.decayfilter = cms.EDFilter(\"PythiaAllDauVFilter\" , \r\n# add one more parameter to the module :\r\n# moduleLabel = cms.untracked.InputTag(\"generator\",\"unsmeared\")\r\ncmsRun cfg2023_bs2mmg_SDR.py\r\n \r\n```\r\n\r\n\r\n\r\n", "branch": "CMSSW_11_2_X", "changed_files": 2, "closed_at": "1623143724", "comments": 7, "commits": 1, "created_at": "1622790475", "deletions": 0, "labels": ["fully-signed", "generators-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "061c281eba1fe28a82cf8138c25c8dded62eb23b", "merged_at": "1623143724", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 33976, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Backport of the PythiaAllDauVFilter to 11_2_X from 12_0_X", "updated_at": "1623143724", "user": "ats2008"}