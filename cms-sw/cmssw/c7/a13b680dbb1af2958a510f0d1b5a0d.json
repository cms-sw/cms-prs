{"additions": 2, "auther_ref": "CMSSW_15_0_0_pre2/is48443-nhits", "auther_sha": "172e36b0aa540011290bcbde18558d4e7d94ab5a", "author": "trackreco", "body": "A fix (at least a partial one) to #48443 and likely also #39803\r\n\r\nInitially, I navigated to this from the reproducer step2 in `runTheMatrix.py -l 145.014 --ibeos` suggested in #48443\r\nThe modified loop range was the first point of the track reconstruction divergence.\r\nThe last (out of range) hit is apparently random and sometimes the \"random\" hit layer matches with the current layer of hits, which leads to the hit suppression and a subsequent difference in the results.\r\nAfter the fix at least in the 100 events tested there are no more differences.\r\n\r\nFrom Mario (thanks for the checks!):\r\nIt looks to me like the MTV output shows identity for offline tracking:\r\nhttps://uaf-10.t2.ucsd.edu/~mmasciov/TRKPOG/HLT2025/mkFitDoubletRecovery/MTVOffline_2025_TTbarPU_reproducibilityFix/\r\n\r\nAt HLT, validation returns results that are consistent within sub-% (within usual fluctuations): https://uaf-10.t2.ucsd.edu/~mmasciov/TRKPOG/HLT2025/mkFitDoubletRecovery/hltMTV_2025_TTbarPU_reproducibilityFix/\r\n\r\n\r\n@mmasciov @elusian @mmusich \r\n", "branch": "master", "changed_files": 1, "comments": 6, "commits": 1, "created_at": "1751366102", "deletions": 2, "labels": ["reconstruction-pending", "pending-signatures", "orp-pending", "tests-started", "bug-fix", "code-checks-approved", "tracking"], "milestone": "CMSSW_15_1_X", "number": 48454, "release-notes": [], "review_comments": 0, "state": "open", "title": "fix the loop range in mkFit MkFinder hit checks", "updated_at": "1751366592", "user": "slava77"}