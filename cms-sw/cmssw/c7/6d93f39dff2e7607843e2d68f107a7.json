{"additions": 259, "auther_ref": "scouting_nano_test_14_0_15", "auther_sha": "3678aaa0a81a903124d11582ae67e0836457e714", "author": "patinkaew", "body": "#### PR description:\r\n\r\nBackport to 14_0_X of\r\n- https://github.com/cms-sw/cmssw/pull/44970\r\n- https://github.com/cms-sw/cmssw/pull/45820\r\nto actual data-taking release (14_0_X) to allow T0 production tests with 14_0_X and actual T0 production if tests succeed.\r\n\r\nDetails:\r\n- Change ScoutingNano event content from [#45820](https://github.com/cms-sw/cmssw/pull/45820) since the changes to add ScoutingMuonNoVtx and ScoutingMuonVtx from [#44970](https://github.com/cms-sw/cmssw/pull/44970) are also propagated to [#45820](https://github.com/cms-sw/cmssw/pull/45820). \r\n- Add ```run3_scouting_nanoAOD_post2023``` to ```Era_Run3_2024```.\r\n- Add T0 processing scenarios for processing HLTSCOUT datatier as input```hltScouting```, ```hltScoutingEra_Run3_2024``` from [#44970](https://github.com/cms-sw/cmssw/pull/44970).\r\n- Add  ```hltScoutingEra_Run3_2024``` scenario to unit test ```run_CfgTest_8.sh``` and add new unit test ```run_CfgTest_13.sh``` specific for ```hltScouting``` scenarios from [#44970](https://github.com/cms-sw/cmssw/pull/44970).\r\n- Add workflow 2500.6 to relval_nano. Since [#45419](https://github.com/cms-sw/cmssw/pull/45419) won't be backported to 14_0_X, only necessary information for workflow ```ScoutingNANOdata140Xrun3``` is added. The input file and lumisection range are the same as in [#45419](https://github.com/cms-sw/cmssw/pull/45419). The names are the same as in [#45419](https://github.com/cms-sw/cmssw/pull/45419) for ```NANO_data14.0```, ```ScoutingPFRun32024RAW14.0```, ```ScoutingNANOdata140Xrun3```, except ```NANO_dataRun3ScoutingPF14.0``` which corresponds to ```scoutingNANO_data14.0``` in [#45419](https://github.com/cms-sw/cmssw/pull/45419). This is to keep a convention used in 14_0_X release.\r\n\r\nEvent size is measured with relval_nano matrix. These are default ScoutingNano with only scouting objects and without standard offline objects and without gen info (for mc).\r\n- 0.88 kB/event (2500.5 ScoutingNANOdata13X)\r\n- 2.07 kB/event (2500.51 ScoutingNANOmc13X)\r\n- 1.14 kB/event (2500.6 ScoutingNANOdata140Xrun3)\r\n\r\nWorkflow 2500.5 is similar to 2500.131 and 2500.6 is similar to 2500.237 after [#45419](https://github.com/cms-sw/cmssw/pull/45419), so measured event sizes are the same. 2500.51 uses TTBarMINIAOD13.3 while 2500.227 after [#45419](https://github.com/cms-sw/cmssw/pull/45419) uses TTbarMINIAOD14.0, so measured event sizes are slightly different.\r\n\r\nSize reports (root files used and size report html files) can be found in [09.07.2024_ScoutingNano_size_reports](https://indico.cern.ch/event/1441452/#4-scouting-nano-updates-and-pr).\r\n\r\nNote: another related PR is [#45949](https://github.com/cms-sw/cmssw/pull/45949) which is a backport of [#45820](https://github.com/cms-sw/cmssw/pull/45820) to 14_1_X to ensure that the event content changes are consistent in subsequent releases across 14_0_X, 14_1_X, and 14_2_X.\r\n\r\n#### PR validation:\r\n\r\nPass all standard unit tests from ```scram b runtests``` when running on ```el8_amd64_gcc12```:\r\n```\r\nPass    2s ... Configuration/DataProcessing/TestConfigDP_1\r\nPass   10s ... Configuration/DataProcessing/TestConfigDP_10\r\nPass   11s ... Configuration/DataProcessing/TestConfigDP_11\r\nPass  129s ... Configuration/DataProcessing/TestConfigDP_12\r\nPass    1s ... Configuration/DataProcessing/TestConfigDP_13\r\nPass  115s ... Configuration/DataProcessing/TestConfigDP_2\r\nPass   22s ... Configuration/DataProcessing/TestConfigDP_3\r\nPass   27s ... Configuration/DataProcessing/TestConfigDP_4\r\nPass  245s ... Configuration/DataProcessing/TestConfigDP_5\r\nPass   85s ... Configuration/DataProcessing/TestConfigDP_6\r\nPass  140s ... Configuration/DataProcessing/TestConfigDP_7\r\nPass  371s ... Configuration/DataProcessing/TestConfigDP_8\r\nPass   10s ... Configuration/DataProcessing/TestConfigDP_9\r\nPass    2s ... Configuration/PyReleaseValidation/test-das-selected-lumis\r\nPass  242s ... Configuration/PyReleaseValidation/test-runTheMatrix-interactive\r\nPass  268s ... Configuration/PyReleaseValidation/test_MC_22_crosscheck\r\nPass  218s ... Configuration/PyReleaseValidation/test_MC_22_setup\r\nPass  293s ... Configuration/PyReleaseValidation/test_MC_23_crosscheck\r\nPass  328s ... Configuration/PyReleaseValidation/test_MC_23_setup\r\n```\r\nwhen running on ```el9_amd64_gcc12```, pass all unit tests from ```scram b runtests``` except:\r\n```\r\nFail  209s ... Configuration/PyReleaseValidation/test_MC_23_setup\r\n```\r\nThis unit test failure on ```el9_amd64_gcc12``` seems to relate to https://github.com/cms-sw/cmssw/pull/45614.\r\n\r\nNext following tests are all done on ```el8_amd64_gcc12```.\r\n\r\nPass all tests from ```runTheMatrix.py -l limited -i all --ibeos```\r\n```\r\n47 46 45 36 19 1 1 1 1 1 1 tests passed, 0 0 0 0 0 0 0 0 0 0 0 failed\r\n```\r\n\r\nOther tests:\r\n- ```RunPromptReco.py``` example. The outputs look reasonable:\r\n```\r\npython3 Configuration/DataProcessing/test/RunPromptReco.py --scenario=hltScoutingEra_Run3_2024 \\\r\n--global-tag=140X_dataRun3_Prompt_v4 --nanoaod --nanoFlavours=@Scout --lfn=fileIN.root\r\n\r\npython3 Configuration/DataProcessing/test/RunPromptReco.py --scenario=hltScoutingEra_Run3_2024 \\\r\n--global-tag=140X_dataRun3_Prompt_v4 --nanoaod --miniaod --nanoFlavours=@Scout --lfn=fileIN.root\r\n```\r\n- ```runTheMatrix.py --ibeos -l 2500.6``` (added ScoutingNano workflow) passes and the output nano file looks reasonable\r\n- ```cmsDriver.py``` example. The output looks reasonable:\r\n```\r\ncmsDriver.py step2 -s NANO:@Scout --process NANO \\\r\n--data --eventcontent NANOAOD --datatier NANOAOD -n 1000 \\\r\n--era Run3_2024 --conditions 140X_dataRun3_Prompt_v4 --filein fileIN.root\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nOriginal PRs are [#44970](https://github.com/cms-sw/cmssw/pull/44970) and [#45820](https://github.com/cms-sw/cmssw/pull/45820). This is a backport to 14_0_X.\r\n\r\nFYI: @elfontan @silviodonato", "branch": "CMSSW_14_0_X", "changed_files": 11, "comments": 16, "commits": 7, "created_at": "1725774096", "deletions": 28, "labels": ["operations-pending", "pending-signatures", "tests-approved", "orp-pending", "pdmv-approved", "upgrade-approved", "xpog-approved"], "milestone": "CMSSW_14_0_X", "number": 45950, "release-notes": [], "review_comments": 0, "state": "open", "title": "[14_0_X] Backport of 44970 and 45820 (ScoutingNano event content changes for 2024 and T0 scenario for HLTSCOUT datatier)", "updated_at": "1725987912", "user": "patinkaew"}