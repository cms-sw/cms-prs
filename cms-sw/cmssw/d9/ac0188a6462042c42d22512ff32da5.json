{"additions": 1649, "auther_ref": "from-CMSSW_12_0_X_2021-07-29-2300-CSCL1TPLookupTable-v3", "auther_sha": "7787a9bfb54795575bd207028142e77cc0401658", "author": "dildick", "body": "#### PR description:\r\n\r\nMove CSC trigger and GEM-CSC trigger lookup tables into eventsetup objects. This should prevent cmsRun from spending too much time loading lookup tables for the pattern finding logic. This PR requires https://github.com/cms-data/L1Trigger-CSCTriggerPrimitives/pull/11\r\n\r\nIn response to https://github.com/cms-sw/cmssw/issues/34633\r\n\r\n@Dr15Jones @makortel Supersedes #34693. \r\n\r\n- The CSC trigger is being upgraded for Phase-2 displaced muon triggering with (1) CCLUT that provides a more precise position and incident angle of the L1 CSC stub, and (2) GEM-CSC integrated local trigger to recover L1 CSC stub efficiency, improve ME1/1 and ME2/1 bending angle, and reduce muon trigger rate. The algorithms rely on lookup tables which are loaded into the FPGAs in the peripheral crates.\r\n- Existing lookup tables, which are in text files in cms-data/L1Trigger-CSCTriggerPrimitives, are loaded through a new reader called `CSCL1TPLookupTableEP` which is an ESProducer. \r\n- `CSCL1TPLookupTableEP` produces 3 types of ES data: (a) `CSCL1TPLookupTableCCLUT`, (b) `CSCL1TPLookupTableME11ILT`, and (c)`CSCL1TPLookupTableME21ILT`. (a) is for upgrade (1). (b) and (c) are for upgrade (2). \r\n- (b) and (c) convert GEM system coordinates to CSC coordinates in order to match GEM clusters with L1 CSC stubs. They also contain utilities to allow for purer GEM-CSC matches (i.e. more likely to be the correct match in MC truth) based on position and slope from  `CSCL1TPLookupTableCCLUT`. \r\n- The ES data objects are requested in the CSC trigger plugin and propagate to specific components that actually use them. For instance, `CSCL1TPLookupTableCCLUT` follows `CSCTriggerPrimitivesProducer`->`CSCTriggerPrimitivesBuilder`->`CSCMotherBoard`->`CSCCathodeLCTProcessor`->`ComparatorCodeLUT`.\r\n\r\nProposal was presented at https://indico.cern.ch/event/1065089/contributions/4478403/attachments/2292436/3897925/GEM_CSC_Trigger_AlcaDB_20210808.pdf\r\n\r\n#### PR validation:\r\n\r\nTested the code so far on `/RelValSingleMuPt10/CMSSW_11_3_0-113X_mcRun4_realistic_v7_2026D76noPU-v1/GEN-SIM-DIGI-RAW`. Efficiency plots for ME1/1 and ME2/1 are the same as in https://github.com/cms-sw/cmssw/pull/34582. \r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN.A. \r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n\r\n@tahuang1991", "branch": "master", "changed_files": 53, "closed_at": "1630623439", "comments": 58, "commits": 1, "created_at": "1628088443", "deletions": 940, "labels": ["alca-approved", "dqm-approved", "l1-approved", "fully-signed", "tests-approved", "db-approved", "orp-approved", "requires-external", "code-checks-approved"], "merge_commit_sha": "7912bbccbf3dc091310afb284c010ab1d9b1d042", "merged_at": "1630623439", "merged_by": "cmsbuild", "milestone": "CMSSW_12_1_X", "number": 34779, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Move CSC trigger and GEM-CSC trigger lookup tables into eventsetup objects (CCLUT-17)", "updated_at": "1630623440", "user": "dildick"}