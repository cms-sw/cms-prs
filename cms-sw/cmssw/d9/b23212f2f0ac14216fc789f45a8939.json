{"additions": 575, "auther_ref": "l1p2gt_menu_142x_dev", "auther_sha": "e2e4b6ceb091cd04e1f34af547d2b0173b148458", "author": "artlbv", "body": "#### PR description:\r\n\r\nThe idea of this PR is to allow for a more convenient organisation and book-keeping of the P2GT emulator menu configurations. Previously threshold changes due to object changes (so-called offline-online scalings) or ID/Iso WP changes had to be changed manually in every seed. With this PR dictionaries are introduced for common ID and Isolation Working Points as well as reading of the scalings (a MenuTools output) is implemented.\r\n\r\nThis addresses #46470 and was agreed to with the P2GT developer team @haarigerharald and @qvyz as presented [here in slide 42](https://indico.cern.ch/event/1469447/contributions/6186551/attachments/2951766/5190339/P2L1Menu%20Spring24%20MC%20Report%20October%202024.pdf).\r\n\r\nFYI @VourMa @rovere @slaurila @robertjward @gpetruc \r\n\r\n#### PR validation:\r\n\r\nTested to work with the standard recipe we (and HLT) are using in `1420pre1`:\r\n```\r\ncmsDriver.py l1nanoPhase2 -s L1,L1TrackTrigger,L1P2GT,USER:PhysicsTools/L1Nano/l1tPh2Nano_cff.l1tPh2NanoTask --customise PhysicsTools/L1Nano/l1tPh2Nano_cff.addFullPh2L1Nano \\                 \r\n--conditions auto:phase2_realistic_T33 \\\r\n--geometry Extended2026D110 \\\r\n--era Phase2C17I13M9 \\\r\n--eventcontent NANOAOD \\\r\n--datatier GEN-SIM-DIGI-RAW-MINIAOD \\\r\n--customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000,Configuration/DataProcessing/Utils.addMonitoring,L1Trigger/Configuration/customisePhase2TTOn110.customisePhase2TTOn110 \\\r\n--filein /store/mc/Phase2Spring24DIGIRECOMiniAOD/TT_TuneCP5_14TeV-powheg-pythia8/GEN-SIM-DIGI-RAW-MINIAOD/PU200_AllTP_140X_mcRun4_realistic_v4-v1/2560000/11d1f6f0-5f03-421e-90c7-b5815197fc85.root \\\r\n--fileout file:output_Phase2_L1T.root \\\r\n--python_filename rerunL1_cfg.py \\\r\n--inputCommands=\"keep *, drop l1tPFJets_*_*_*, drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" \\\r\n--mc \\\r\n-n 1000 --nThreads 4\r\n```\r\n\r\nA simple check was comparing the `edmConfigDump` outputs pre and post PR as there the actual thresholds, ID and Isolation values are expanded into plaintext. The results seem reasonable.\r\nNote that also the IDs used for TkMuons have changed since since the AR24 there are now 4 WPs (compared to 1 before).\r\n\r\nWe will check the agreement with the MenuTools once we get more stats processed (on small stats the agreement is rather good), but I would like to start the PR and the reviewing process, eventually soliciting feedback from our SW experts on these changes. \r\n\r\nNote that the code function names in the `menuConstants.py` could be cleaned up etc, but the mechanism should the final one.\r\n", "branch": "master", "changed_files": 7, "comments": 9, "commits": 14, "created_at": "1729676380", "deletions": 145, "labels": ["l1-pending", "pending-signatures", "tests-pending", "orp-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_14_2_X", "number": 46489, "release-notes": [], "review_comments": 1, "state": "open", "title": "[Phase-2 L1] Incorporate object threshold scalings, ID and isolation via dictionaries into the P2GT menu", "updated_at": "1729698686", "user": "artlbv"}