{"additions": 15, "auther_ref": "fixHLT2017customize", "auther_sha": "4ded3bca323129499656ed42efa7333e8747828e", "author": "makortel", "body": "The automatic expansion of sequences in `customizeHLTTrackingForPhaseI2017.py` after #17170 can, in some cases, lead to necessary modules missing in the sequences. While the full menu apparently works (since the 2017 workflows have run successfully after the integration of #17170), a recipe provided by @silviodonato fails\r\n```\r\nhltGetConfiguration /dev/CMSSW_9_0_0/HLT --path HLTFirstPath,HLT_PFHT125_v5,HLTEndPath \\\r\n  --globaltag  auto:phase1_2017_realistic \\\r\n  --input /store/relval/CMSSW_9_0_0_pre2/RelValTTbar_13/GEN-SIM-DIGI-RAW/PU25ns_90X_upgrade2017_realistic_v0_HLT2017Trk-v1/10000/0480A4C5-F7C2-E611-9FE0-0CC47A4D767A.root  \\\r\n  --no-output  > hlt1.py \r\n\r\n# in hlt1.py replace\r\n# process = cms.Process( \"HLTX\")\r\n# with\r\n# from Configuration.StandardSequences.Eras import eras \r\n# process = cms.Process( \"HLTX\", eras.phase1Pixel) \r\n```\r\n\r\nThis PR fixes the problem by avoiding the expansion of sequences caused by `setattr(process, ...)` by using a a `cms.Modifier` to replace modules/sequences \"in place\".\r\n\r\nTested in 9_0_0_pre3 (and CMSSW_9_0_X_2017-01-25-1100+#17170), the recipe above works again (as well as limited matrix, add addOnTests).\r\n\r\n@silviodonato @Martin-Grunewald @mtosi @JanFSchulte ", "branch": "CMSSW_9_0_X", "changed_files": 1, "closed_at": "1486564090", "comments": 28, "commits": 1, "created_at": "1486109899", "deletions": 6, "labels": ["bug-fix", "comparison-available", "hlt-approved", "hold", "orp-pending", "pending-signatures", "tests-approved"], "milestone": "CMSSW_9_0_X", "number": 17406, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Avoid sequence expansion in customizeHLTTrackingForPhaseI2017", "updated_at": "1486564090", "user": "makortel"}