{"additions": 9, "auther_ref": "ubsan-TestSubProcess", "auther_sha": "7933f69c6a07214d76db7810f50836b2633f9cf7", "author": "smuzaffar", "body": "This should fix the FW unit tests failure for UBSAN.\r\n- For UBSAN IBs , there was some output like [a] and `grep '++'` was matching some of these extra line which contained  `/c++/`  string. This change makes sure that we only match lines which starts with '++'.\r\n\r\n- For MessageService tests, add `log_path` in `UBSAN_OPTIONS` env so that ubsan dumps its output in separate file.\r\n\r\n- For FWCore/Services: Increase the RSS/VSize limits to 1.5 ( ubsan consumes a bit more memory)\r\n\r\nLocal tests for UBSAN shows that test runs after this change\r\n\r\n[a]\r\n```\r\n /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc11/external/gcc/11.2.1-f9b9dfdd886f71cd63f5538223d8f161/include/c++/11.2.1/future:212:62: runtime error: member call on address 0x2acb0679b880 which does not point to an object of type '_Result_base'\r\n     #0 0x2acafdf8368a in std::__future_base::_Result_base::_Deleter::operator()(std::__future_base::_Result_base*) const /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc11/external/gcc/11.2.1-f9b9dfdd886f71cd63f5538223d8f161/include/c++/11.2.1/future:212\r\n     #1 0x2acafdf8368a in std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::~unique_ptr() /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc11/external/gcc/11.2.1-f9b9dfdd886f71cd63f5538223d8f161/include/c++/11.2.1/bits/unique_ptr.h:361\r\n     #2 0x2acafdf8368a in std::__future_base::_State_baseV2::~_State_baseV2() /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc11/external/gcc/11.2.1-f9b9dfdd886f71cd63f5538223d8f161/include/c++/11.2.1/future:327\r\n     #18 0x2acb021cd618 in std::_MakeUniq<TFileAdaptor>::__single_object std::make_unique<TFileAdaptor, edm::ParameterSet const&, edm::ActivityRegistry&>(edm::ParameterSet const&, edm::ActivityRegistry&) /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc11/external/gcc/11.2.1-f9b9dfdd886f71cd63f5538223d8f161/include/c++/11.2.1/bits/unique_ptr.h:962\r\n     #27 0x2acaf451a388 in void __gnu_cxx::new_allocator<edm::serviceregistry::ServicesManager>::construct<edm::serviceregistry::ServicesManager, edm::ServiceToken&, edm::serviceregistry::ServiceLegacy&, std::vector<edm::ParameterSet, std::allocator<edm::ParameterSet> >&, bool&>(edm::serviceregistry::ServicesManager*, edm::ServiceToken&, \r\n```", "branch": "master", "changed_files": 4, "closed_at": "1683295997", "comments": 14, "commits": 2, "created_at": "1683274907", "deletions": 5, "labels": ["core-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "70d6f180da1fdd565cf1d12022a54e217b7d6aaa", "merged_at": "1683295997", "merged_by": "cmsbuild", "milestone": "CMSSW_13_2_X", "number": 41554, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[UBSAN] Fix for FWCore unit tests", "updated_at": "1683295997", "user": "smuzaffar"}