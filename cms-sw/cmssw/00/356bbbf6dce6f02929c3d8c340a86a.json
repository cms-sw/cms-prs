{"additions": 119, "auther_ref": "packedCandidateFixes", "auther_sha": "34ee08d0c00d1c7d78ea9d5593ae66d37dad2e81", "author": "makortel", "body": "This PR contains the following fixes to certain issues I encountered when developing #12405 \n- Add missing `+dphi_` to `dxy(Point)` and `dz(Point)`\n  - Otherwise they give different results than `dxy()` and `dzAssociatedPV()` for the point of associated PV\n  - Note that this does not affect packing, only unpacking\n- Fix smallest negative being packed as smallest positive\n  - Currently negative numbers whose `abs(pack(x)) < 1` (e.g. (`-exp(lmin)`) get packed as `0`, which is unpacked as the smallest positive numbers (`exp(lmin)`)\n  - Here the issue is fixed by packing such negative numbers as `-1`\n  - It follows that for negative numbers the smallest unpacked value (by abs) is `-exp(lmin + 1/base*(lmax-lmin))`, while for positive numbers the smallest value is `exp(lmin)`\n- Use doubles in intermediate steps in liblogintpack\n  - With floats current `pack8logCeil()` rounds towards zero for certain input values\n\nThe PR also adds some unit tests for liblogintpack.\n\nTested in CMSSW_8_0_X_2015-11-22-1100. The latter two issues were rather rare (handful of PackedCandidates in 9k event RelVal) that they're probably not visible in PR tests, but the first one should show up.\n\n@arizzi @gpetruc \n", "branch": "CMSSW_8_0_X", "changed_files": 4, "closed_at": "1449471674", "comments": 14, "commits": 3, "created_at": "1448546136", "deletions": 20, "labels": ["analysis-pending", "comparison-available", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "b4afaa7378d534001c91c472c10c7c8776bee3e9", "merged_at": "1449471674", "merged_by": "davidlange6", "milestone": "CMSSW_8_0_X", "number": 12581, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fixes to PackedCandidate", "updated_at": "1476956995", "user": "makortel"}