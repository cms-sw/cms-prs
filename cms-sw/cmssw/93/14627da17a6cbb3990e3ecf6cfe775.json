{"additions": 26, "auther_ref": "fix_diamond_z_sign", "auther_sha": "ca280c26d74d04b1326ba76d85e1563bbe1e1520", "author": "CTPPS", "body": "#### PR description:\r\n\r\nUp to now, the z sign of diamond-RP geometry has been wrong (i.e. inconsistent with other PPS RPs).\r\n\r\nThis PR brings a fix:\r\n  * for Run3 geometry, the fix is applied directly in the geometry XML file\r\n  * for Run2 geometry, the fix is applied in the geometry builder code - in order to avoid the need to re-upload the geometry to DB, revalidate, ...\r\n\r\nThanks to the fix, the mitigation code is removed from:\r\n  * proton-reco module\r\n  * direct-simulation module\r\n\r\nThis is a technical PR, no change in results is expected.\r\n\r\n#### PR validation:\r\n\r\nBelow few snippets from PPS geometry print out (module ``CTPPSGeometryInfo``). ``ce`` stands for the detector centre, the z component is the last number.\r\n\r\n  * 2018, before PR:\r\n```\r\n2054160384 (diamd RP  16) | ce=(+73.050, -0.000, +215700.000)\r\n2070937600 (diamd RP 116) | ce=(+73.050, -0.000, -215700.000)\r\n\r\n2054160384 (diamd RP  16, plane 0, channel  0) | ce=(+3.325, +0.000, +215679.449)\r\n2054164480 (diamd RP  16, plane 0, channel  1) | ce=(+4.825, +0.000, +215679.449)\r\n\r\n2070937600 (diamd RP 116, plane 0, channel  0) | ce=(+3.325, +0.000, -215720.551)\r\n2070941696 (diamd RP 116, plane 0, channel  1) | ce=(+4.825, +0.000, -215720.551)\r\n```\r\n\r\n  * 2018, after PR:\r\n```\r\n2054160384 (diamd RP  16) | ce=(+73.050, -0.000, -215700.000)\r\n2070937600 (diamd RP 116) | ce=(+73.050, -0.000, +215700.000)\r\n\r\n2054160384 (diamd RP  16, plane 0, channel  0) | ce=(+3.325, +0.000, -215679.449)\r\n2054164480 (diamd RP  16, plane 0, channel  1) | ce=(+4.825, +0.000, -215679.449)\r\n\r\n2070937600 (diamd RP 116, plane 0, channel  0) | ce=(+3.325, +0.000, +215720.551)\r\n2070941696 (diamd RP 116, plane 0, channel  1) | ce=(+4.825, +0.000, +215720.551)\r\n```\r\n\r\n  * 2021, after PR:\r\n```\r\n2054160384 (diamd RP  16) | ce=(+72.050, -0.000, -215700.000)\r\n2056257536 (diamd RP  22) | ce=(+72.050, -0.000, -215078.000)\r\n2070937600 (diamd RP 116) | ce=(+72.050, -0.000, +215700.000)\r\n2073034752 (diamd RP 122) | ce=(+72.050, -0.000, +215078.000)\r\n\r\n2054160384 (diamd RP  16, plane 0, channel  0) | ce=(+2.325, +0.000, -215720.551)\r\n2054164480 (diamd RP  16, plane 0, channel  1) | ce=(+3.825, +0.000, -215720.551)\r\n\r\n2070937600 (diamd RP 116, plane 0, channel  0) | ce=(+2.325, +0.000, +215679.449)\r\n2070941696 (diamd RP 116, plane 0, channel  1) | ce=(+3.825, +0.000, +215679.449)\r\n```\r\n\r\nInterpretation of the snippets:\r\n  * 2018, comparison of before and after this PR: only the z component changed sign, as expected\r\n  * comparison 2018 and 2021, both after the PR: the z signs are identical and correct (negative for LHC sector 45, positive for LHC sector 56)\r\n\r\nAddition comparison plots (before and after the PR):\r\n  * [dirsim_cmp.pdf](https://github.com/cms-sw/cmssw/files/5771116/dirsim_cmp.pdf): direct simulation of PPS\r\n  * [reco_cmp.pdf](https://github.com/cms-sw/cmssw/files/5771118/reco_cmp.pdf): PPS reco of Run2 data\r\n  * no difference observed - as expected \r\n", "branch": "master", "changed_files": 5, "closed_at": "1609989052", "comments": 10, "commits": 4, "created_at": "1609857548", "deletions": 12, "labels": ["code-checks-approved", "dqm-approved", "fully-signed", "geometry-approved", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "e52a1799a42f359989ac24189886b0dc8bcc58cd", "merged_at": "1609989052", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32603, "release-notes": [], "review_comments": 0, "state": "closed", "title": "PPS: fix z sign in diamond geometry", "updated_at": "1609989053", "user": "jan-kaspar"}