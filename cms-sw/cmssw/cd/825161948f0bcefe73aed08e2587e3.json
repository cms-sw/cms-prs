{"additions": 2, "auther_ref": "sistripapvshotcleaner10bit", "auther_sha": "81bcb2d6a81aa93cee17ab8ac21b67fce92d7394", "author": "pieterdavid", "body": "As discussed in https://hypernews.cern.ch/HyperNews/CMS/get/tier0-Ops/2029/1/1/1/2/1/1/1/1.html point 4: a fix for the APV shot cleaner (which performs an \"emergency zero-suppression\") for 10bit data.\r\nThe problem was that 254 and 255 have special meanings in 8-bit truncation, see https://github.com/cms-sw/cmssw/blob/master/RecoLocalTracker/SiStripZeroSuppression/interface/SiStripFedZeroSuppression.h#L38 (saturated strips, 254-1022 or even above), so values above 253 were not CM-subtracted here.\r\nThe fix exploits this by concluding that if any digi is larger than 255, the 8bit scheme is not used, and all digis can be CM-subtracted (for typical hybrid data the baseline is above 500). The hypothetical case of 10bit data with all digis below 254 is also handled correctly; only if the largest digi is 254 or 255 the detection doesn't work (but this should not happen in practice).\r\nChanges expected: none, expect for data taken in hybrid mode on which the (hybrid-adjusted) zero-suppression and repacking was not run in the HLT (like 324623, possibly also cosmics during the HI run).\r\n\r\nCC: @icali ", "branch": "master", "changed_files": 1, "closed_at": "1540454101", "comments": 12, "commits": 1, "created_at": "1540216764", "deletions": 1, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "1cc9a3b7b9801a05509aef282f6584b41063c657", "merged_at": "1540454101", "merged_by": "cmsbuild", "milestone": "CMSSW_10_4_X", "number": 24961, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Fix APV shot cleaner for 10bit", "updated_at": "1540454101", "user": "pieterdavid"}