{"additions": 11, "auther_ref": "fix-lostTracks-lostInnerHits", "auther_sha": "4139d1a012d79badc52f516557ef27b89f0b9f04", "author": "elusian", "body": "#### PR description:\r\n\r\nAs shown at the PPD meeting last Thursday, the lostTracks producer has a bug that leaves the `lostInnerHits` of the `PackedCandidate` unset (and thus at its default value of `validHitInFirstPixelBarrelLayer`). Other than in `lostInnerHits` the bug propagates in the number of valid pixel hits and the number of pixel and tracker layers with measurements in the `HitPattern` of the `bestTrack` of the candidate. \r\n\r\nThis bug is present in both the V1 and V2 of the miniAOD.\r\n\r\nDQM plots showing the effects of the bug in V1 and V2 (from the miniAOD V1 vs V2 validation):\r\n- [lostInnerHits](https://tinyurl.com/y2sjwjck)\r\n- [number of lostInnerHits from the HitPattern](https://tinyurl.com/yyfvawbw)\r\n- [HitPattern has valid hits in the first pixel barrel](https://tinyurl.com/y3lgnxjz)\r\n- [number of valid pixel hits](https://tinyurl.com/y3hsdnb5)\r\n- [number of pixel layers with measurements](https://tinyurl.com/y62ssf3z)\r\n- [number of tracker layer with measurements](https://tinyurl.com/y52hg7ab)\r\n\r\nAs agreed with xPOG and TAU POG ( @mariadalfonso , @gouskos , @mbluj ), this PR fixes the bug by adding the call to `setLostInnerHits` as the code from the packedPFCandidates producer does. This fix has been checked running the workflow 136.8311 and the issue was solved (see attached figures).\r\n\r\n#### PR validation:\r\n\r\nThis PR has been validated with `runTheMatrix.py -l limited -i all --ibeos` and all checks are ok. \r\nThe final output is \r\n37 36 35 26 17 4 1 1 1 tests passed, 0 0 0 0 0 0 0 0 0 failed\r\nIn particular the DQM output of 136.8311 shows the differences which are expected: inside Tracking/PackedCandidates/lostracks, see above list, all the mentioned plots are now cured.\r\n\r\n", "branch": "master", "changed_files": 1, "closed_at": "1612793394", "comments": 16, "commits": 1, "created_at": "1612436854", "deletions": 0, "labels": ["bug-fix", "code-checks-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved", "xpog-approved"], "merge_commit_sha": "4e5f50fd80d49a4bd5fac7853b42852f98d9498b", "merged_at": "1612793394", "merged_by": "cmsbuild", "milestone": "CMSSW_11_3_X", "number": 32814, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix lostTracks producer not setting lostInnerHits", "updated_at": "1612793394", "user": "elusian"}