{"additions": 54, "auther_ref": "bug_fix_stepping", "auther_sha": "4f5e1504b53862b11d042cb7f7097ae76537dab1", "author": "civanch", "body": "#### PR description:\r\nIn an attempt to optimize Run-3 simulation and fix minor problem in Geant4 user actions a logical bug was introduced, which affect calorimeter responses. The problem was reported first by @abdoulline . In this PR the logic of filters at each step (SteppingAction) has been fixed. A minor problem is also fixed in StackingAction, which is called for each new secondary particle.\r\n\r\nThe level of the problem, identified by @abdoulline is 2-3% reduction of energy deposition in calorimeters. With the test-beam 2006 the effect is even more and may illustrated for pi- projectile: \r\n![image](https://user-images.githubusercontent.com/4955118/120238763-239a6480-c25d-11eb-8257-efb0ed05cfb5.png)\r\n\r\nIn the proposed fix the situation return back to normal: \r\n![image](https://user-images.githubusercontent.com/4955118/120238828-504e7c00-c25d-11eb-87c4-ea1e686354bd.png)\r\n\r\n", "branch": "master", "changed_files": 4, "closed_at": "1622548192", "comments": 10, "commits": 2, "created_at": "1622484783", "deletions": 44, "labels": ["code-checks-approved", "fully-signed", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "ec11383d70106dd5ff42d4790a659bae5335bf2c", "merged_at": "1622548192", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 33923, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Bug fix in Geant4 stepping and stacking actions", "updated_at": "1622548192", "user": "civanch"}