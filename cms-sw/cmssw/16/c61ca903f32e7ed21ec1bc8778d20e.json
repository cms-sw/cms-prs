{"additions": 19, "auther_ref": "preparation-for-new-mixing-part-9", "auther_sha": "7bf2c639776074009b3ee75a274af4dc29b64dbd", "author": "giamman", "body": "This PR contains an important fix to a bug that had sneaked inside 710pre3, related to the \"DigiRecoMixing\" option (non-default yet).\nHowever, that bug was masking another problem. We had been discussing exactly that problem with Chris Jones in the comments of PR 2016 ( https://github.com/cms-sw/cmssw/pull/2016 ), but we didn't converge on a solution.\nWhat you find in FastSimulation/Tracking/plugins/RecoTrackAccumulator.cc now is what I understood that Chris was suggesting to do. However, if you test it you will get:\n\n<blockquote>\n----- Begin Fatal Exception 27-Mar-2014 16:24:26 CET-----------------------\nAn exception of category 'InvalidReference' occurred while\n   [0] Processing run: 1 lumi: 1 event: 1\n   [1] Running path 'simulation_step'\n   [2] Calling event method for module MixingModule/'mix'\nException Message:\nInconsistency RefCore::pushBackItem: Ref or Ptr is inconsistent with RefVector (PtrVector)id = (1:184) should be (1:165)\n----- End Fatal Exception -------------------------------------------------\n</blockquote>\n\n\nTo do a test, you need to edit the last line in FastSimulation/Configuration/python/CommonInputs_cff.py from GenMixing to DigiRecoMixing, and then execute /afs/cern.ch/user/g/giamman/public/test.py (which includes a PU scenario that makes use of the new mixing).\n", "branch": "CMSSW_7_1_X", "changed_files": 7, "closed_at": "1396338652", "comments": 10, "commits": 4, "created_at": "1395930499", "deletions": 10, "labels": ["comparison-available", "fastsim-approved", "fully-signed", "tests-approved"], "merge_commit_sha": "46683bceffe838250997a8e2cde822858210040d", "merged_at": "1396338652", "merged_by": "nclopezo", "milestone": "CMSSW_7_1_0_pre6", "number": 3052, "release-notes": [], "review_comments": 38, "state": "closed", "title": "Preparation for new mixing part 9", "updated_at": "1397531472", "user": "giamman"}