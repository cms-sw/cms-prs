{"additions": 9, "auther_ref": "fix_dbproxy_hltGetConfiguration", "auther_sha": "2e1878a944582ba3fd4b8b1f28e5ad919e8fa860", "author": "cms-tsg-storm", "body": "backport of https://github.com/cms-sw/cmssw/pull/47704\r\n\r\n#### PR description:\r\n\r\nAs per details at [INC4361156](https://cern.service-now.com/service-portal?id=ticket&table=incident&n=INC4361156), this PR implements the changes needed to comply with the recommendation of the oracle-DB experts, following up to the relocation of the databases queried by TSG tools (DB to a new cluster implies that IP numbers do change).\r\n\r\n> On the other hand, the problem as you can guess, is that with every change of HW.. these IP numbers do change (as expected). So we have created the new IP aliases that point to the different hostname-v values... These new IP aliases should remain constant, easing and making the change of HW transparent. These IP values are\r\n> \r\n> cmsr1-v.cern.ch\r\n> cmsr2-v.cern.ch\r\n> cmsr3-v.cern.ch\r\n> \r\n\r\n\r\n(see also cms-sw/hlt-confdb#106)\r\n\r\n#### PR validation:\r\n\r\nI tested connection to the `run3` DB on `lxplus` via:\r\n\r\n```\r\n hltGetConfiguration /dev/CMSSW_15_0_0/GRun --globaltag 150X_dataRun3_HLT_v1 --input file:/scratch/sdonato/data/Run2024I_ScoutingPFMonitor_RAW_Run386924_LS35_f0729acd-1b20-4ddf-9da2-24cf1a52be20.root --max-events 100 --output none --eras Run3_2025 --l1-emulator uGT --l1 L1Menu_Collisions2024_v1_3_0_xml --paths 'ScoutingPFOutput,DST_PFScouting_*,Dataset_ScoutingPFRun3' --dbproxyhost localhost --dbproxyport 10121 > hlt.py\r\n ```\r\nand connection to the `adg` DB on `lxplus` via:\r\n\r\n```\r\n hltGetConfiguration v3/adg:/cdaq/physics/Run2022/2e34/v1.5.0/HLT/V13 --dbproxyhost localhost --dbproxyport 10121 \r\n```\r\n\r\n(somewhat random parameters for the menu and other attributes are chosen).\r\n\r\nThe online DB connection was tested on a hilton machine in the P5 .cms network via:\r\n\r\n```\r\nhttps_proxy=\"http://cmsproxy.cms:3128/\" hltConfigFromDB --online --configName /cdaq/cosmic/commissioning2025/v0.1.1/HLT/V1 \r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nVerbatim backport of https://github.com/cms-sw/cmssw/pull/47704 to the 2025 data-taking cycle.", "branch": "CMSSW_15_0_X", "changed_files": 1, "closed_at": "1743564385", "comments": 9, "commits": 3, "created_at": "1743013696", "deletions": 20, "labels": ["hlt-approved", "fully-signed", "tests-approved", "orp-approved", "backport-ok"], "merge_commit_sha": "d8780a73f7ff734cd344ce3c53581dc81c696875", "merged_at": "1743564385", "merged_by": "cmsbuild", "milestone": "CMSSW_15_0_X", "number": 47705, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[15.0.X] remove hardcoded IP substitution for `dbproxy` option of `hltGetConfiguration`", "updated_at": "1743564386", "user": "mmusich"}