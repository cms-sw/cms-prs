{"additions": 22, "auther_ref": "autoPtrPdfInfo", "auther_sha": "54bdaa5b9dbbceaa3b815b2b86ca5b619dc593e8", "author": "makortel", "body": "#### PR description:\r\n\r\nThis PR applies the ROOT schema evolution pattern that avoids the use of `std::auto_ptr` (that was formally removed in C++17), for which a test was developed in https://github.com/cms-sw/cmssw/pull/48817, to the `std::auto_ptr<gen::PdfInfo>` -to-`std::unique_ptr<gen::PdfInfo>` read rules for `GenEventInfoProduct` and `LHEEventProduct`.\r\n\r\nIn addition, the first commit fixes the `LHEEventProduct` read rule to include all versions before `13` (that came up in https://github.com/cms-sw/cmssw/issues/49538). I included it here to because I had to touch the same line in `classes_def.xml`, and doing that change first makes the backporting easier.\r\n\r\nFixes https://github.com/cms-sw/cmssw/issues/43422\r\nFixes https://github.com/cms-sw/cmssw/issues/43923\r\nResolves https://github.com/cms-sw/framework-team/issues/1538\r\nResolves https://github.com/cms-sw/framework-team/issues/1714\r\n\r\n#### PR validation:\r\n\r\nCode  compiles, and the deprecation warnings along\r\n```\r\n>> Compiling scram_x86-64-v2 LCG dictionary: tmp/el8_amd64_gcc13/src/SimDataFormats/GeneratorProducts/src/SimDataFormatsGeneratorProducts/lcgdict/SimDataFormatsGeneratorProducts_xr.cc\r\n/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/gcc/13.4.0-6908cfdf803923e783448096ca4f0923/bin/c++ -MMD -MF tmp/el8_amd64_gcc13/src/SimDataFormats/GeneratorProducts/src/SimDataFormatsGeneratorProducts/scram_x86-64-v2/lcgdict/SimDataFormatsGeneratorProducts_xr.cc.d -I. -c -DCMS_MICRO_ARCH='x86-64-v2' -DGNU_GCC -D_GNU_SOURCE -DTBB_USE_GLIBCXX_VERSION=130400 -DTBB_SUPPRESS_DEPRECATED_MESSAGES -DTBB_PREVIEW_RESUMABLE_TASKS=1 -DTBB_PREVIEW_TASK_GROUP_EXTENSIONS=1 -DBOOST_SPIRIT_THREADSAFE -DPHOENIX_THREADSAFE -DBOOST_MATH_DISABLE_STD_FPCLASSIFY -DBOOST_UUID_RANDOM_PROVIDER_FORCE_POSIX -DBOOST_MPL_IGNORE_PARENTHESES_WARNING -DCMSSW_GIT_HASH='CMSSW_16_0_X_2025-12-09-2300' -DPROJECT_NAME='CMSSW' -DPROJECT_VERSION='CMSSW_16_0_X_2025-12-09-2300' -Isrc -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/pcre/8.43-6d98fda3bfd074ebb583e2d6a2c75d25/include -isystem/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/boost/1.80.0-6fb83b2bac2398768f2cc6374a639c37/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/bz2lib/1.0.6-d113e1c6278c07eeaff5f84db9548446/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/hepmc/2.06.10-903e23142392c852f3df97c32fbd4659/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/libuuid/2.34-5ba7a8abfc0c5fecdc448cca360c25ff/include -isystem/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/lcg/root/6.36.07-0490e78b33943d48f9af1c19441a9d2e/include -isystem/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/tbb/v2022.3.0-54089f7aad511dfcd272d65c5ee4b3ab/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/xz/5.6.4-b9c4ffbc390ed320a5d57fd552e29a05/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/zlib/1.2.13-589f6bb51bbeba38a7adf5a10ea8a093/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/hepmc3/3.2.7-f8f0da18d94695d72ff740910e834c9f/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/md5/1.0.0-26057075013e190e56dad37d35219376/include -I/data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc13/external/tinyxml2/6.2.0-67924ead96ecb4e69aad321b767979a5/include -DCMSSW_REFLEX_DICT -pthread -pipe -Werror=main -Werror=pointer-arith -Werror=overlength-strings -Wno-vla -Werror=overflow -std=c++20 -ftree-vectorize -Werror=array-bounds -Werror=format-contains-nul -Werror=type-limits -fvisibility-inlines-hidden -fno-math-errno --param vect-max-version-for-alias-checks=50 -Xassembler --compress-debug-sections -Wno-error=array-bounds -Warray-bounds -fuse-ld=bfd -felide-constructors -fmessage-length=0 -Wall -Wno-non-template-friend -Wno-long-long -Wreturn-type -Wextra -Wpessimizing-move -Wclass-memaccess -Wno-cast-function-type -Wno-unused-but-set-parameter -Wno-ignored-qualifiers -Wno-unused-parameter -Wunused -Wparentheses -Werror=return-type -Werror=unused-value -Werror=unused-label -Werror=address -Werror=format -Werror=sign-compare -Werror=write-strings -Werror=delete-non-virtual-dtor -Werror=strict-aliasing -Werror=narrowing -Werror=unused-but-set-variable -Werror=reorder -Werror=unused-variable -Werror=conversion-null -Werror=return-local-addr -Wnon-virtual-dtor -Werror=switch -fdiagnostics-show-option -Wno-unused-local-typedefs -Wno-attributes -Wno-psabi -Wno-error=unused-variable -DBOOST_DISABLE_ASSERTS -Os -Wno-unused-variable -march=x86-64-v2 -flto=auto -fipa-icf -flto-odr-type-merging -fno-fat-lto-objects -Wodr  -fPIC  tmp/el8_amd64_gcc13/src/SimDataFormats/GeneratorProducts/src/SimDataFormatsGeneratorProducts/lcgdict/SimDataFormatsGeneratorProducts_xr.cc -o tmp/el8_amd64_gcc13/src/SimDataFormats/GeneratorProducts/src/SimDataFormatsGeneratorProducts/scram_x86-64-v2/lcgdict/SimDataFormatsGeneratorProducts_xr.cc.o\r\n  tmp/el8_amd64_gcc13/src/SimDataFormats/GeneratorProducts/src/SimDataFormatsGeneratorProducts/lcgdict/SimDataFormatsGeneratorProducts_xr.cc:234:62: warning: 'template<class> class std::auto_ptr' is deprecated: use 'std::unique_ptr' instead [-Wdeprecated-declarations]\r\n   234 |    static TGenericClassInfo *GenerateInitInstanceLocal(const auto_ptr<gen::PdfInfo>*)\r\n      |                                                              ^~~~~~~~\r\n```\r\nare gone. Testing of the actual behavior relies of the test of the pattern added in https://github.com/cms-sw/cmssw/pull/48817, and in existing tests (including runTheMatrix) in PR and IB tests.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nThe first commit will be backported (at least down to 15_0_X).", "branch": "master", "changed_files": 2, "comments": 17, "commits": 2, "created_at": "1765380642", "deletions": 5, "labels": ["generators-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "changes-dataformats"], "milestone": "CMSSW_16_0_X", "number": 49593, "release-notes": [], "review_comments": 7, "state": "open", "title": "Evolve `auto_ptr<gen::PdfInfo>`-to-`unique_ptr` read rules to avoid `std::auto_ptr`", "updated_at": "1765588505", "user": "makortel"}