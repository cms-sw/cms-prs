{"additions": 1318, "auther_ref": "CMSSW_10_6_X_tau-pog_DeepTau2017v2_forUL", "auther_sha": "1d2c2c7f6b8dc2cd071e933886d3bbf5df4b5ca4", "author": "cms-tau-pog", "body": "#### PR description:\r\n\r\nThis PR updates DeepTauID to version 2017v2. The new version, thanks to revised structure of used DNN, fixes issues of version 2017v1 that is a size of training files and memory consumption are greatly reduced. Possibility to run previous version is maintained.\r\n\r\nDeepTauID (2017v2) is added to the tau sequence in the standard MiniAOD workflow.\r\n\r\nPerformance with 1k ttbar events:\r\n* size of three training files: 2.9+0.85+0.85=4.6MiB (was 21MiB in 2017v1);\r\n* memory consumption: on top of DeepJet: 6.4MiB or 21.5 MiB standalone. The difference between the two comes mainly from executing pat::PackedCandidate::dzError() method which triggers unpacking of track covariance matrix and at smaller extend from initialization of TensorFlow. Full information on memory usage from IGProf can be accessed at this link: http://mdidomen.web.cern.ch/mdidomen/cgi-bin/igprof-navigator/changes_PR_126/DeepTau_memory_usage/;\r\n* CPU timing:\r\n   * Full timing of a simple test workflow is 0.11s/event with DeepTauId::getPredictions 0.088s/event; details at at http://mdidomen.web.cern.ch/mdidomen/cgi-bin/igprof-navigator/changes_PR_126/DeepTauCPU_TT;\r\n   * Full timing of miniAOD workflow is 1.06s/event with DeepTauId::getPredictions 0.082s/event; details at http://mdidomen.web.cern.ch/mdidomen/cgi-bin/igprof-navigator/changes_PR_126/DeepTau_MiniAOD.\r\n\r\nIn addition the new v2 training overperforms (physics-result-wise) old v1 one as well as other TauIDs, details in slides:\r\n* https://indico.cern.ch/event/816162/contributions/3408556/attachments/1835352/3007877/2019-04-29_DeepTau_ID_v2_developments.pdf\r\n* https://indico.cern.ch/event/818643/contributions/3422014/attachments/1839253/3014630/2019-05-06_DeepTau_ID_v2_WP.pdf\r\n\r\nNote 1: this PR is backport of #26796 to 10_6_X for UL processing\r\nNote 2: this PR is completed by cms-data/RecoTauTag-TrainingFiles#3 which needs to be propagated to cms-dist.\r\n\r\n#### PR validation:\r\n\r\nValidated with matrix tests; requires cms-data/RecoTauTag-TrainingFiles#3 for unit tests\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nThis is port of #26796 for UL (rebased to CMSSW_10_6_X as for 7 June 2019) \r\n", "branch": "CMSSW_10_6_X", "changed_files": 8, "closed_at": "1560493765", "comments": 46, "commits": 47, "created_at": "1559903651", "deletions": 125, "labels": ["analysis-approved", "backport-ok", "comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "6af6c5f8830769fb1ed62351f4180d443573838a", "merged_at": "1560493765", "merged_by": "cmsbuild", "milestone": "CMSSW_10_6_X", "number": 27146, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update of DeepTauID to ver. 2017v2 (backport for UL)", "updated_at": "1560692244", "user": "mbluj"}