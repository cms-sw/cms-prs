{"additions": 1019, "auther_ref": "muonRangeMap", "auther_sha": "bd206a5686e1a85acf36c748149b29357938bee7", "author": "Dr15Jones", "body": "#### PR description:\r\n\r\nChanged the use of `edm::RangeMap<ID, edm::OwnVector<HIT>>` in muon code to `edm::IdToHitRange<ID, HIT>`. This is a part of the migration away from the use of `edm::OwnVector` (see #42734 ). The classes modified are those which are stored to either RECO, AOD, or MiniAOD files and the `HIT` class does not have any inheriting classes so the use of an `edm::OwnVector` was never needed. The `edm::IdToHitRange` should take up less memory as well as be easier/faster/smaller to store (measurements need to be done to confirm this).\r\n\r\nAs part of the change, new EDProducers were introduced to be able to convert `edm::RangeMap` into the equivalent `edm::IdToHitRange`. Thes EDProducers can be used to allow reading of old files containing `edm::RangeMap` and then covert to the new type as needed.\r\n\r\nThe `edm::IdToHitRange` is designed to be a drop-in replacement to `edm::RangeMap` so shares the same API. One of the functions in `edm::RangMap` allows one to pass in a different comparison function in order to find a range of hits. This is a very dangerous item as it requires the new comparison to be degenerate with respect to the standard comparator used to sort in `edm::RangeMap`. I added a new unit test for one of the two comparators to prove that it meets that standard (and to guarantee if it is ever change to keep meeting that standard).\r\n\r\n#### PR validation:\r\n\r\nCode compiles and new unit tests pass. I ran workflow 12434.0 using the new code.", "branch": "master", "changed_files": 34, "comments": 6, "commits": 5, "created_at": "1695997384", "deletions": 47, "labels": ["reconstruction-pending", "simulation-pending", "core-pending", "analysis-pending", "pending-signatures", "tests-rejected", "orp-pending", "upgrade-pending", "code-checks-approved"], "milestone": "CMSSW_13_3_X", "number": 42917, "release-notes": [], "review_comments": 7, "state": "open", "title": "[RFC] Replace RangeMap used in Muon hit storage", "updated_at": "1696012557", "user": "Dr15Jones"}