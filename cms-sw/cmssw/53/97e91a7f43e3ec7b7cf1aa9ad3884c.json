{"additions": 450, "auther_ref": "ecal-pfsr-91X", "auther_sha": "f91893c2901ceb7b6bcb0568f59bf18156f9f81f", "author": "emanueledimarco", "body": "This change is to implement a match of the online selective readout algorithm, basically:\r\n\r\n- when the hit belongs to a region which the trigger flagged as \"high-interest\"(\"medium interest\"), read in full-readout a set of (one) readout units\r\n- when the hit belongs to a \"low-interest region\", apply the zero-suppression\r\n\r\nRight now the offline ZS was done in two places:\r\n\r\n1. ECAL -> PF rechit translation (including offline zero-suppression)\r\n2. gathering threholds of hits in a PFCluster\r\n\r\nin 2016 thresholds in 1. and 2. coincided and were lower than online zero-suppression. Since online ZS is on uncalibrated amplitude, this possibly produced time- and eta-dependent effects (radiation / transparency loss). In 2017 the online ZS will be much harder, so worsening these effects. \r\n\r\nThis allows to decouple what happens in a high-interest region (online = full-readout ; offline = stay with low cluster gathering thresholds) to what happens in low-interest region (online = zs ; offline = raise the ZS in PFRecHit QTest to a value higher than online, but done on calibrated energy).\r\n\r\nFew details more in this [presentation at the ECAL DPG](https://indico.cern.ch/event/600314/contributions/2423735/).\r\n\r\nMore complete description, with a validation including Z->ee re-reco, in [this presentation at the ECAL DPG / EGM meeting]( https://indico.cern.ch/event/604935/contributions/2524563/attachments/1431621/2199883/edm-pfsr-egm_22_03_2017.pdf)\r\n\r\nWith this PR there are two main changes:\r\n1. the algorithm that matches any rechit to a selective readout region in the online, and decides wether to apply ZS or not\r\n2. it introduces ZS thresholds appropriate for the readout of 2017 data, where we will have higher selective readout thresholds (so more frequency for the application of ZS). The [thresholds introduced](https://emanuele.web.cern.ch/emanuele/ECAL/srpf/rereco2016/smoothzs.png), especially in the endcap, are much higher than the previous ones, and reflect the equivalent thresholds in the online for 2017. \r\n\r\nSo expect big suppression of low ET ECAL clusters, especially in the EE, while very small changes for high ET clusters (ET>~4.5 GeV).\r\n\r\nThis PR is the equivalent in 91X of #17776 in 90X, but also includes the changes suggested there by @slava77 . I will close then the one in 90X.\r\n\r\n@bendavid @amassiro @shervin86 @argiro @crovelli @fcouderc @paramatti @gzevi  please also follow this", "branch": "master", "changed_files": 43, "closed_at": "1490881606", "comments": 123, "commits": 36, "created_at": "1488806549", "deletions": 132, "labels": ["comparison-available", "hlt-approved", "operations-pending", "orp-pending", "pending-signatures", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "1fb150174ca84db2dcd0e9090bb20d12dec58daf", "merged_at": "1490881606", "merged_by": "davidlange6", "milestone": "CMSSW_9_1_X", "number": 17794, "release-notes": [], "review_comments": 57, "state": "closed", "title": "ECAL offline selective readout", "updated_at": "1490947715", "user": "emanueledimarco"}