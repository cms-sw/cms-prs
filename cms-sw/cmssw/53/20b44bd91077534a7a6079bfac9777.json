{"additions": 234, "auther_ref": "alca-BeamSpotOnline_updates_12_1_X", "auther_sha": "7c7ac7472b3dd3711853682018a95aa2bb724b69", "author": "francescobrivio", "body": "#### PR description:\r\nIn #35193 it was reported that the `BeamSpotOnline` objects do not contain certain features that were published in DIP during Run2. This PR adds these features by extending the vector members of `CondFormats/BeamSpotObjects/interface/BeamSpotOnlineObjects.h`, specifically:\r\n - Events used in the BeamSpot fit [int]\r\n - Mean of the PVs distribution and error on the mean [float]\r\n - RMS of the PVs distribution and error on the RMS [float]\r\n - Max number of PVs [int]\r\n - Start (and end) time of the first (and last) LS used in the fit [string]\r\n - Start (and end) time of the first (and last) LS used in the fit [epoch in seconds]\r\n\r\nDQM clients `BeamMonitor` and `FakeBeamMonitor` have been updated to add to the payload the new parameters for DIP. The DB logs have also been updated with the parameters.\r\nSame as for the BeamSpot values in the `FakeBeamMonitor` client, all the parameters for DIP produced by the fake client are filled with random numbers coming from a TRandom3.\r\n\r\n#### PR validation:\r\nTested running:\r\n```\r\ncmsRun DQM/Integration/python/clients/beamhltfake_dqm_sourceclient-live_cfg.py unitTest=True runNumber=3252833\r\n```\r\non `/store/express/Run2018E/ExpressPhysics/FEVT/Express-v1/000/325/283/00000/DF31860D-3EA3-2B42-A7CB-ACFE8C2810DF.root`\r\n\r\nThis produces a log which contains:\r\n```\r\n...\r\n-----------------------------------------------------\r\n              BeamSpotOnline Data\r\n Beam type    = 2\r\n       X0     = 0.118887 +/- 0 [cm]\r\n       Y0     = -0.0745552 +/- 0 [cm]\r\n       Z0     = 0.0711385 +/- 0 [cm]\r\n Sigma Z0     = 3.65177 +/- 0 [cm]\r\n dxdz         = 0 +/- 0 [radians]\r\n dydz         = 0 +/- 0 [radians]\r\n Beam Width X = 0.000404199 +/- 0 [cm]\r\n Beam Width Y = 0.000861879 +/- 0 [cm]\r\n Emittance X  = 0 [cm]\r\n Emittance Y  = 0 [cm]\r\n Beta star    = 0 [cm]\r\n Last Lumi    = 2\r\n Last Run     = 325283\r\n Last Fill    = 0\r\n-----------------------------------------------------\r\n[2021-09-19 21:57:18.589888] INFO: FakeBeamMonitor - Additional parameters for DIP:\r\n[2021-09-19 21:57:18.589900] INFO: Events used in the fit: 821\r\n[2021-09-19 21:57:18.589911] INFO: Mean PV               : 106.167\r\n[2021-09-19 21:57:18.589926] INFO: Mean PV Error         : 9.39724\r\n[2021-09-19 21:57:18.589938] INFO: Rms PV                : 7.43257\r\n[2021-09-19 21:57:18.589950] INFO: Rms PV Error          : 7.42233\r\n[2021-09-19 21:57:18.589962] INFO: Max PVs               : 108\r\n[2021-09-19 21:57:18.589972] INFO: StartTime             : 1970.01.01 00:00:00 GMT\r\n[2021-09-19 21:57:18.589982] INFO: StartTimeStamp        : 0\r\n[2021-09-19 21:57:18.589993] INFO: EndTime               : 1970.01.01 00:00:01 GMT\r\n[2021-09-19 21:57:18.590004] INFO: EndTimeStamp          : 1\r\n...\r\n```\r\nWhich shows that the new values are correectly stored and read from the BeamSpotOnline object\r\n\r\n#### Backport:\r\nA backport to 12_0_X will be provided.\r\n\r\n----\r\nFYI @sikler @mmusich @gennai @dzuolo", "branch": "master", "changed_files": 6, "comments": 20, "commits": 1, "created_at": "1632082132", "deletions": 12, "labels": ["dqm-pending", "alca-approved", "pending-signatures", "tests-approved", "orp-pending", "db-approved", "urgent", "code-checks-approved"], "milestone": "CMSSW_12_1_X", "number": 35338, "release-notes": [], "review_comments": 5, "state": "open", "title": "Add new features to BeamSpotOnlineObjects", "updated_at": "1632484987", "user": "francescobrivio"}