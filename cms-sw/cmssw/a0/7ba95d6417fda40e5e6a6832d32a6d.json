{"additions": 766, "auther_ref": "OTLAFromDB_v3_rebased", "auther_sha": "c90a4986aaec07614e6b4c8b81ae08c4452829c1", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe primary goal of this PR is to introduce a new DB object to store per-`DetId` Lorentz Angle calibration values for the Phase-2 Outer Tracker. A new `CondFormat` called `SiPhase2OuterTrackerLorentzAngle` is introduced and used to populate the newly created `EventSetup` records `SiPhase2OuterTrackerLorentzAngleRcd` and `SiPhase2OuterTrackerLorentzAngleSimRcd`.\r\nThe former is then used to provide the calibration to the Outer Tracker local reconstruction via `Phase2StripCPEE`, while the latter is used to provide the simulation Lorentz Angle to the Phase2 Tracker digitizer concrete implementations for the OT (`PSPDigitizerAlgorithm`, `PSSDigitizerAlgorithm` and `SSDigitizerAlgorithm`).\r\n   * The `EventSetup` records are for the moment populated via an ad-hoc `ESSource` called `SiPhase2OuterTrackerFakeLorentzAngleESSource` which can be used for both records, but eventually the input data will come from `CondDB` via `GlobalTag` once this PR is accepted. The `ESSource` is percolated via `fakePhase2OuterTrackerConditions_cff` to all the active phase-2 geometries.\r\n   * The `ESSource` is configured in such a way to produce same values of the hardcoded Lorentz Angles used so far in the Simulation and Local Reconstruction (wich is &mu;<sub>H</sub>=0.07/T).     \r\n   * Few utilities are added to fetch, import, dump, etc. the new data-base objects, as well as a DB object writer.\r\n   * I profit of this PR to decouple the Phase-2 OT local reconstruction from the Phase-0 SiStrip dependent record `TkStripCPERecord` by introducing a new dependent record `TkPhase2OTCPERecord` which goes in the spirit of what was proposed originally at https://github.com/cms-sw/cmssw/pull/28101. The new dependent record at the moment depends only on the Phase Outer Tracker LA, but will depend on more records as more pieces are added to the local reconstruction. `TkPhase2OTCPERecord` is then subsequently percolated to the appropriate classes in Tracking.\r\n\r\nThe changes proposed here have been discussed at the Tracker Phase-2 simulation meeting of [May 22nd 2020](https://indico.cern.ch/event/879043/contributions/3874511/attachments/2043128/3422322/mm_phase2SimMeeting_22May2020.pdf), but have then been postponed to allow other urgent developments to enter the release.\r\n\r\n#### PR validation:\r\n\r\nThe local branch passes the following workflows tests (one for each active geometry):\r\n\r\n```\r\nrunTheMatrix.py --what upgrade -l 23206.0,23606.0,24406.0,24806.0,26606.0,27006.0,27406.0,27806.0,28206.0,28606.0,29006.0\r\n```\r\nas well as the unit tests of the respective packages involved.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nThis PR is not a backport and no backport is needed.\r\ncc:\r\n@emiglior @skinnari @tsusa @mtosi @JanFSchulte \r\n", "branch": "master", "changed_files": 66, "closed_at": "1597744909", "comments": 37, "commits": 31, "created_at": "1596813125", "deletions": 48, "labels": ["alca-approved", "code-checks-approved", "comparison-available", "db-pending", "geometry-approved", "orp-pending", "pdmv-approved", "pending-signatures", "reconstruction-approved", "simulation-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "aed779d48669694c8bdf42a6d20eaeec54c92106", "merged_at": "1597744909", "merged_by": "qliphy", "milestone": "CMSSW_11_2_X", "number": 31095, "release-notes": [], "review_comments": 20, "state": "closed", "title": "Introduce SiPhase2OuterTrackerLorentzAngle ", "updated_at": "1597744910", "user": "mmusich"}