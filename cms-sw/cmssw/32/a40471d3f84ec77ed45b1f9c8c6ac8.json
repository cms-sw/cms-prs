{"additions": 176, "auther_ref": "fixSiStripHitEfficiencyAtPCL_12_4_X", "auther_sha": "52cd76ea3118f472e415fe6366f33c4208264815", "author": "mmusich", "body": "backport of #38075\r\n\r\n#### PR description:\r\n\r\nThis PR implements few bug-fixes in the SiStripHitEfficiency PCL Workflow as spotted in the Tier-0 replay https://github.com/dmwm/T0/pull/4674#issuecomment-1131255929.\r\n   * 28b45e323b745b62daa0d6a025cd62b894733a77 loosens the cut on the track multiplicity (used to be 100 to limit the size of the internal SiStrip Calibration Trees, but now that the workflow is centrally supported that is not a problem anymore)\r\n   * 412f37926b9a6d2a98d87415c14fd220440e0933 adds plots for monitoring the total number of tracks used and its correlation with PU\r\n   * 1c9637e6c20683f47e04ea5d622053f5e7c157f8 and b8e5f2a92454baf25f1108328ebd6390c3ea81fc are the core of the bug-fix and allow several histograms that were previously empty to be filled.\r\n   * 615a8718238c6991d5ec45677a95ad21b223d2c6 makes the input / output folder in the DQM file configurable\r\n   * ed6ba6f681c8ea3373cad101f11e082878c1e49e reduces the amount of hardcoded constants in the code\r\n\r\n#### PR validation:\r\n\r\nI've run the following commands to test the `ALCAPROMPT` production:\r\n\r\n```console\r\ncmsDriver.py testReAlCa -s ALCA:PromptCalibProdSiStripHitEfficiency --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --datatier ALCARECO --eventcontent ALCARECO --processName=ReAlCa -n 100000 --dasquery='file dataset=/StreamExpress/Run2018D-SiStripCalMinBias-Express-v1/ALCARECO run=325172' --nThreads=4 --no_exec \r\n```\r\n\r\nfollowed by:\r\n\r\n```console\r\ncmsDriver.py stepHarvest -s ALCAHARVEST:SiStripHitEff --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --filein file:PromptCalibProdSiStripHitEfficiency.root -n -1 --no_exec                        \r\n```\r\nto test the `ALCAHARVESTING` step.\r\nI have also run successfully:\r\n   * `runTheMatrix.py -l 1001.0, 1001.2` \r\n   * `scram b runtests`\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nverbatim backport of #38075\r\n\r\n", "branch": "CMSSW_12_4_X", "changed_files": 5, "closed_at": "1653684844", "comments": 16, "commits": 8, "created_at": "1653475268", "deletions": 85, "labels": ["alca-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "backport-ok", "trk"], "merge_commit_sha": "0bc583972afb9b3921a0644ecc51a6a4c2c8f494", "merged_at": "1653684844", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 38079, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12.4.X] SiStripHitEfficiency PCL Workflow: miscellaneous fixes", "updated_at": "1653684844", "user": "mmusich"}