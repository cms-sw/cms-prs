{"additions": 403, "auther_ref": "backportONNX_CMSSW12_1_X", "auther_sha": "843898a5d7e24c38e3ab206e5140087793df2d63", "author": "sbein", "body": "#### PR description:\r\n\r\nThe main thing here is to backport the FastSim refinement network applied as part of the NANO step (https://github.com/cms-sw/cmssw/pull/40553). This feature modifies AK4 CHS jets relevant for Run 2 UltraLegacy MC (NANOv9 and greater). This BP is different from the original PR in that the default meanings of the DeepJet observables don't change, and a new separate set of variables are added to NANO with suffix ```refined```. A cms-data backport will also accompany this PR to support https://github.com/sbein/cmssw/blob/b32450010a0ed20cf00cfc9ba2e5626d329f1f5a/PhysicsTools/NanoAOD/python/jets_cff.py#L555. \r\n\r\nThis PR backports the ONNX RunTime library additions,  https://github.com/cms-sw/cmssw/commit/3152213492c928a6f58b90ada8c97d1de2024283, as they are needed to run the refinement network. This in turn requires a couple of restructuring changes implemented [here](https://github.com/cms-sw/cmssw/pull/31378/files) in order for PhysicsTools/NanoAOD to not trip on changes in the PhysicsTools/PatAlgos/plugins buildfile.\r\n\r\nThe following commands were used to test the workflow\r\n\r\ncmsDriver.py TTbar_13TeV_TuneCUETP8M1_cfi  --conditions auto:run2_mc --fast  -n 10 --era Run2_2016 --eventcontent FEVTDEBUGHLT,DQM --relval 100000,1000 -s GEN,SIM,RECOBEFMIX,DIGI:pdigi_valid,L1,DIGI2RAW,L1Reco,RECO,EI,VALIDATION:@standardValidation,DQM:@standardDQM --datatier GEN-SIM-DIGI-RECO,DQMIO --beamspot Realistic25ns13TeV2016Collision \r\n\r\ncmsDriver.py step3  --conditions auto:run2_mc --fast  -n 100 --era Run2_2016 --eventcontent MINIAODSIM --runUnscheduled  --filein file:step1.root -s PAT --datatier MINIAODSIM --mc \r\n\r\ncmsDriver.py step4  --conditions auto:run2_mc --fast  -n 1000 --era Run2_2016 --eventcontent NANOAODSIM --filein file:step3_PAT.root -s NANO --datatier NANOAODSIM --customise PhysicsTools/NanoAOD/jets_cff.nanoAOD_refineFastSim_bTagDeepFlav --mc \r\n", "branch": "CMSSW_10_6_X", "changed_files": 11, "comments": 41, "commits": 7, "created_at": "1676911170", "deletions": 277, "labels": ["reconstruction-approved", "pending-signatures", "orp-pending", "pdmv-pending", "tests-started", "upgrade-pending", "requires-external", "backport-ok", "xpog-pending"], "milestone": "CMSSW_10_6_X", "number": 40828, "release-notes": [], "review_comments": 13, "state": "open", "title": "Backport FastSim refiner network for NANO (DeepJet for AK4 CHS Jets)", "updated_at": "1686821848", "user": "sbein"}