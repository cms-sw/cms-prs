{"additions": 138, "auther_ref": "update_DIP_publication", "auther_sha": "ed44b8b29c14bdd9b89a4a421999959a703f2f4d", "author": "francescobrivio", "body": "#### PR description:\r\nIn #46613 we tried updating the source of the `beamspotdip` client (which publishes the online BeamSpot values to DIP and OMS) to read the BeamSpot result from `BeamFitResultsForDIP.txt`, which is produced by the `onlinebeammonitor` and is the result of the arbitration between the beamspot values produced by the `beam` and `beamhlt` clients.\r\nWe then had to revert it (done in  #46737) because the `BeamFitResultsForDIP.txt` file was not in the correct format for the DIP client to correctly parse it (it was missing few records).\r\n\r\nIn this PR I'm finally updating the `OnlineBeamMonitor` plugin to write the `BeamFitResultsForDIP.txt` file in the corect format and setting it to be the file that is read by `beamspotdip_dqm_sourceclient-live_cfg.py`.\r\n\r\n#### PR validation:\r\nRan `scram b runtests` and verified that the output of `onlinebeammonitor_dqm_sourceclient-live_cfg` is in the expected format, i.e.:\r\n```\r\nRunnumber 381594\r\nBeginTimeOfFit 2024.06.06 03:43:05 GMT 0\r\nEndTimeOfFit 2024.06.06 03:44:58 GMT 0\r\nLumiRange 988 - 992\r\nType 2\r\nX0 0.0957226\r\nY0 -0.190293\r\nZ0 -5.49297\r\nsigmaZ0 4.98153\r\ndxdz 8.7899e-05\r\ndydz 9.82145e-05\r\nBeamWidthX 0.00115646\r\nBeamWidthY 0.00107762\r\nCov(0,j) 1.74165e-09 8.82035e-12 0 0 0 0 0 \r\nCov(1,j) 8.82035e-12 1.664e-09 0 0 0 0 0 \r\nCov(2,j) 0 0 0.00553555 0 0 0 0 \r\nCov(3,j) 0 0 0 0.00276762 0 0 0 \r\nCov(4,j) 0 0 0 0 4.46792e-11 -1.01635e-13 0 \r\nCov(5,j) 0 0 0 0 -1.01635e-13 4.37167e-11 0 \r\nCov(6,j) 0 0 0 0 0 0 1.12828e-09\r\nEmittanceX 0\r\nEmittanceY 0\r\nBetaStar 0\r\nevents 3115\r\nmeanPV 3.1573\r\nmeanErrPV 0.03701\r\nrmsPV 2.06561\r\nrmsErrPV 0.02617\r\nmaxPV 11\r\nnPV 4483\r\n```\r\n\r\n#### Backport:\r\nNot a backport, but a 15_0_X backport will be opened to be used for 2025 data-taking.\r\n\r\n-----\r\nFYI @gennai @lguzzi @sikler @mmusich \r\n", "branch": "master", "changed_files": 2, "comments": 12, "commits": 4, "created_at": "1741527886", "deletions": 60, "labels": ["dqm-pending", "db-pending", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "tracking"], "milestone": "CMSSW_15_1_X", "number": 47539, "release-notes": [], "review_comments": 0, "state": "open", "title": "Update OnlineBeamMonitor for DIP publication", "updated_at": "1741618882", "user": "francescobrivio"}