{"additions": 10, "auther_ref": "CPEProbQMsg", "auther_sha": "b3adfe3cd682200f6cbeb4da3b1c8b1db3fddbe6", "author": "tvami", "body": "#### PR description:\r\n\r\nWhen doing some refitting I notice this MSG\r\n```\r\n%MSG-w OutOfBounds:  TrackRefitter:RefitterForDeDx 13-Nov-2021 21:07:38 CET  Run: 319450 Event: 228163659\r\nProb Q outside the bounds of the quality word. Defaulting to Prob=0. Prob = 1 QualityWord = 1\r\n%MSG\r\n```\r\n\r\nWhich seems to be due to machine precision error in the comparison. This PR adds an epsilon to the comparison to 1. \r\n\r\nI'm open to alternative solutions! Also maybe I should set the case when probQ=1+epsilon to 1, but that's a second if statement which might effect the performance, right?\r\n\r\n#### PR validation:\r\n\r\n\r\nReran the code that gave the warning msg above --> Now it's gone.\r\nI'm not sure these are the correct timing value to look at but\r\n```\r\nBefore\r\nTimeReport ---------- Event  Summary ---[sec]----\r\nTimeReport       event loop CPU/event = 0.558920\r\nTimeReport      event loop Real/event = 0.959158\r\nTimeReport     sum Streams Real/event = 0.909626\r\nTimeReport efficiency CPU/Real/thread = 0.582719\r\n\r\nTimeReport ---------- Modules in Path: p ---[Real sec]----\r\nTimeReport   0.200814     0.200814  RefitterForDeDx\r\n```\r\n\r\nAfter PR\r\n```\r\nTimeReport ---------- Event  Summary ---[sec]----\r\nTimeReport       event loop CPU/event = 0.550824\r\nTimeReport      event loop Real/event = 0.952079\r\nTimeReport     sum Streams Real/event = 0.910521\r\nTimeReport efficiency CPU/Real/thread = 0.578549\r\n\r\n\r\nTimeReport ---------- Modules in Path: p ---[Real sec]----\r\nTimeReport   0.193779     0.193779  RefitterForDeDx\r\n```\r\n\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\n<!-- Please replace this text with any link to  -->\r\n\r\nN/A\r\n", "branch": "master", "changed_files": 2, "comments": 30, "commits": 2, "created_at": "1636843216", "deletions": 11, "labels": ["reconstruction-pending", "pending-signatures", "orp-pending", "tests-started", "code-checks-approved"], "milestone": "CMSSW_12_2_X", "number": 36120, "release-notes": [], "review_comments": 4, "state": "open", "title": "Add epsilon in comparison of probabilities in SiPixelRecHitQuality", "updated_at": "1637155978", "user": "tvami"}