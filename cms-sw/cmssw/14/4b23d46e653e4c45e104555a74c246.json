{"additions": 4551, "auther_ref": "ecal-reco-gpu-alpaka-migration-multifit-integration-140x", "auther_sha": "14c3c41de92a47860779ae3e4875470c9dc2c2f9", "author": "thomreis", "body": "#### PR description:\r\n\r\nThis PR migrates the ECAL unpacker and ECAL multifit algorithm to alpaka. This is a follow up PR to #42930 , in which the data formats and conditions formats have been defined.\r\n\r\nEventFilter modules:\r\n- Unpacker\r\n- Portable digis to legacy digis converter\r\n- Electronics mapping ESProducer\r\n\r\nAmplitude and time reconstruction modules:\r\n- Multifit conditions ESProducer\r\n- Multifit parameters ESProducer\r\n- Multifit uncalibrated rechits producer\r\n- Portable uncalibrated rechit to CPU uncalibrated rechit converter\r\n\r\nA customization function for the HLT menu is included that replaces the ECAL CUDA modules in the menu with alpaka ones.\r\n\r\nThis PR requires `blocks_with_stride()` and `elements_in_block()` from PR #43205 .\r\n\r\n@valsdav and @Jakub-Gajownik contributed to these development as well.\r\n\r\n#### PR validation:\r\n\r\nTested with the matrix workflow 12434.513, which produces a legacy CPU vs. alpaka(-nvidia/-serial) comparison in DQM.\r\n \r\nFor the validation 9k events from the `/store/relval/CMSSW_13_3_0_pre4/RelValZEE_14/GEN-SIM-DIGI-RAW/\r\n133X_mcRun3_2023_realistic_v1_Standard_13_3_0_pre4-v1` sample were used.\r\n\r\nAn almost perfect agreement is found between results from the the nvidia and serial backends.\r\nCompared to the original CUDA implementation a very good agreement is found as well.\r\n\r\nFrom the TimeReport, the timing of the alpaka-nvida version is close to the native CUDA implementation, while the alpaka-serial version is about 18% slower than the legacy CPU module.", "branch": "master", "changed_files": 25, "comments": 6, "commits": 1, "created_at": "1699883945", "deletions": 61, "labels": ["reconstruction-pending", "hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "requires-external", "code-checks-pending", "ecal"], "milestone": "CMSSW_14_0_X", "number": 43257, "release-notes": [], "review_comments": 0, "state": "open", "title": "ECAL unpacker and ECAL multifit algorithm migration to alpaka", "updated_at": "1699887347", "user": "thomreis"}