{"additions": 2, "auther_ref": "pixel_cotalpha_qbin_bugfix", "auther_sha": "4b8602b2758116e74b4659e37a37506d345125b0", "author": "pmaksim1", "body": "This PR fixes a longstanding software bug that was introduced when we implemented the Phase I FPix.  The FPix template entries for IP related tracks are folded into one quadrant of positive (cotalpha, cotbeta) space and sign flips are used fix signed quantities.  The subtlety is that one can get negative values (cotalpha, cotbeta) from cosmic rays that must also be included.  Therefore the flipping is governed by flags that depend on the local magnetic fields.  The different cases are handled by the signs of cota/cotb and the flags flip_x/flip_y.  This is done correctly in the interpolation code for the template reco, but in the qbin method (used for generic reco) in the template and generror code, the reference to cotalpha was not changed to cota [sign corrected] in a consistent way.  This causes the interpolation fraction xxratio to be outside the 0-1 range and sometimes produces crazy results.  Because of the way that everything is signed, FPix R1P1, R1P2, and R2P1 are affected.  The effect is on the RecHit errors in this panels.\r\n\r\nThis has been tested by @VinInn .", "branch": "master", "changed_files": 2, "comments": 10, "commits": 1, "created_at": "1541905834", "deletions": 2, "labels": ["bug-fix", "code-checks-approved", "comparison-available", "db-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-approved"], "milestone": "CMSSW_10_4_X", "number": 25195, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix bug in sign of cot(alpha) in qbin() methods, needed for CPEGeneric errors", "updated_at": "1542013713", "user": "pmaksim1"}