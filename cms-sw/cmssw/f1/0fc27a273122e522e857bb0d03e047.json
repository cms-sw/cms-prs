{"additions": 4, "auther_ref": "fix_faultyCut_VertexAssociatorByPositionAndTracksProducer_16_0_X", "auther_sha": "dc195d1a02f7016845b380c97fd7f7bd75ad7895", "author": "cms-ngt-hlt", "body": "backport of https://github.com/cms-sw/cmssw/pull/50107\r\n\r\n#### PR description:\r\n\r\nPR https://github.com/cms-sw/cmssw/pull/49609 inadvertently introduced a bug in the vertexing validation suite.\r\nIn that PR we introduced new SIM<->RECO vertexing association methods that do not rely on the spatial proximity normalized by the vertexing error (`zdiff / recoVertex.zError() < sigmaZ_`) as this is very reliant on the actual estimation of the z position error. To that effect, the value of the significance cut was changed from the default 3. to ~ infinity in the `fillDescriptions` of `VertexAssociatorByPositionAndTracksProducer`. This makes sense **only** if the association method (variable `weightMethod`) is not `\"none\"` (which is the current default for the offline validation). In case one wants to use the \"old\" default the `sigmaZ` cut needs to be in place. \r\nThe issue was spotted in the offline `CMSSW_16_0_0_pre4` validation: https://cern.ch/krpwx\r\n\r\nTo fix the issue we revert the `sigmaZ` cut to 3 and we change it explicitly only when needed (i.e. when `weightMethod` is equal to `dzError`)\r\n\r\n#### PR validation:\r\n\r\nI run in `CMSSW_16_1_X_2026-02-09-2300` with / and without this branch and big difference is seen e.g. in the vertex merge rate:\r\n\r\n| Current release | This PR |\r\n| ------------- | ------------- |\r\n| <img width=\"957\" height=\"1009\" alt=\"image\" src=\"https://github.com/user-attachments/assets/aa0f191d-37a0-449b-8c9e-4b4f0efa70d7\" /> | <img width=\"1122\" height=\"1009\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4906234b-c96f-407d-b364-35881733aa5b\" /> |\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nVerbatim backport to CMSSW_16_0_X of #50107 for 2026 data-taking purposes.\r\n", "branch": "CMSSW_16_0_X", "changed_files": 2, "comments": 5, "commits": 1, "created_at": "1770914722", "deletions": 1, "labels": ["simulation-pending", "dqm-pending", "pending-signatures", "orp-pending", "tests-started", "bug-fix", "backport-ok", "tracking", "trk", "ngt"], "milestone": "CMSSW_16_0_X", "number": 50128, "release-notes": [], "review_comments": 0, "state": "open", "title": "fix faulty default of `sigmaZ` in `VertexAssociatorByPositionAndTracksProducer`, use fake cut only for HLT [16.0.X]", "updated_at": "1770914763", "user": "mmusich"}