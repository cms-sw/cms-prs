{"additions": 1078, "auther_ref": "moduleTypeResolverPython", "auther_sha": "de3e4efa3174b1b54e4ed53169dafc7f81b3b17a", "author": "makortel", "body": "#### PR description:\r\n\r\nThis PR contains changes to the generic module type resolver system (https://github.com/cms-sw/cmssw/pull/37731, https://github.com/cms-sw/cmssw/pull/39391) in the framework so that it would be usable for a specific implementation for Alpaka modules (that comes in a subsequent PR). I explored a few approaches on the implementation, and settled in one that makes most of its work in the python configuration (as opposed to C++ code).\r\n\r\nThe changes include in the python configuration side\r\n* Allow `UnavailableAccelerator` `edm::Exception` to be thrown in python (extending #40315) \r\n* Add `ModuleTypeResolver` functionality to `ProcessAccelerator`:\r\n  * `ProcessAccelerator` can return (via `moduleTypeResolver()` member function) a \"type resolver\" object (based on the accelerators available in the machine) that is used to \r\n      * specify a `ModuleTypeResolver` plugin for C++ code with an accompanied PSet\r\n      * customize each module PSet; must limit to a PSet specifying the variant (\"backend\") of the module with untracked parameters\r\n\r\nand in the C++ side\r\n* Use abstract factory pattern for module type resolver in order to use information from the module PSet in the type resolver, in a way that the PSet is parsed only once per module instance\r\n* Module makers are now cached by their resolved module type in order to allow the type resolver return different type name per module instance\r\n* `ModuleTypeResolverMaker` is constructed in `EventProcessor`, and percolated to relevant ED and ES module factories\r\n\r\n#### PR validation:\r\n\r\nFramework unit tests pass (except for `TestIOPoolInputNoParentDictionary` that needs an improvement done in a separate PR).", "branch": "master", "changed_files": 47, "closed_at": "1673339330", "comments": 43, "commits": 11, "created_at": "1671586880", "deletions": 139, "labels": ["core-approved", "simulation-approved", "fully-signed", "tests-rejected", "orp-approved", "code-checks-approved"], "merge_commit_sha": "23f31bf28f92e50220e0ee196b33a522fe73a3cb", "merged_at": "1673339330", "merged_by": "cmsbuild", "milestone": "CMSSW_13_0_X", "number": 40383, "release-notes": [], "review_comments": 32, "state": "closed", "title": "Improve module type resolver system so that it would be usable for Alpaka modules", "updated_at": "1673339331", "user": "makortel"}