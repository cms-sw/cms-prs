{"additions": 508, "auther_ref": "MiniAODSubstructurePiecesOverhaul", "auther_sha": "dfc034a74a8736912f756f7bf4e6205d37164d9f", "author": "rappoccio", "body": "Making new PR to accomplish the goals in  #7606, after code review. The only major change is to write out ONLY subjets that are associated to selected jets. \n\n====== EVENT Content =======\nThe AK8 jet content is therefore : \n- Add all AK8 jets for pt > 50 GeV\n  - If AK8 jet pt > 200:\n    - Add top-tagging and soft drop tagger info. \n    - Run b-tagging and JECs on subjets\n\nSo if the AK8 jet has pt between 50 and 200 GeV, the substructure algorithms are not run. If pt > 200 GeV, The subjets are written along with the \"fat\" jets in the BoostedJetMerger, and then are rekeyed accordingly with the JetSubstructurePacker. The slimming is done upstream on the pat::Jets made for the substructure algorithms, and so downstream this is no longer necessary to re-slim. \n\nThe jet content is (on 9000 events without pileup):\n\npatJets_slimmedJets__PAT    1.00    1.00    1.00        4.8%\npatJets_packedPatJetsAK8__PAT   1.00    0.58    0.58        2.8%\nrecoGenJets_slimmedGenJets__PAT 1.00    0.46    0.46        2.2%\nrecoGenJets_slimmedGenJetsAK8__PAT  1.00    0.45    0.45        2.2%\npatJets_slimmedJetsCMSTopTagCHSPacked_SubJets_PAT   1.00    0.16    0.16        0.8%\npatJets_slimmedJetsAK8PFCHSSoftDropPacked_SubJets_PAT   1.00    0.14    0.14        0.7%\n\nSo the additional collections (the subjets) are about 1.5% of the total miniAOD size. \n\n====== CPU usage =====\nThe additional CPU usage here is negligible because the workflow is not running any algorithms, but instead taking the values directly from the RECO collections upstream and rekeying the information : \n\nTimeReport   0.000074     0.000074     0.000074  caTopTagInfos\nTimeReport   0.000041     0.000041     0.000041  caTopTagInfosPAT\nTimeReport   0.000100     0.000100     0.000100  slimmedGenJets\nTimeReport   0.000128     0.000128     0.000128  slimmedGenJetsAK8\nTimeReport   0.000131     0.000131     0.000131  slimmedJets\nTimeReport   0.000000     0.000000     0.000000  slimmedJetsAK8\nTimeReport   0.000041     0.000041     0.000041  slimmedJetsAK8PFCHSSoftDropPacked\nTimeReport   0.000051     0.000051     0.000051  slimmedJetsAK8PFCHSSoftDropSubjets\nTimeReport   0.000048     0.000048     0.000048  slimmedJetsCMSTopTagCHSPacked\nTimeReport   0.000056     0.000056     0.000056  slimmedJetsCMSTopTagCHSSubjets\nTimeReport   0.000095     0.000095     0.000095  packedPatJetsAK8\n\n==== Testing ====\nTests are checking out (thanks to @ianna  for providing the correct recipe so quickly, I've merged in that PR, and apologies to @ferencek since I had to revert out the genJetsNoNu for the b-tagging sequence, to be discussed at an upcoming JMAR meeting). \n\n==== For posterity, here is the original PR message : ====\n\nWith @arizzi and @ferencek : we've added substructure into miniAOD in a slightly more natural way to allow for multiple interpretations of the jet. This will now be accessed through the \"subjet\" methods. They can take string or integer access similar to the JECs. I have also adjusted pt thresholds so that they are sensible given common user preferences. This makes the total of the AK8 jets (including two subjet collections) 3.8% of the total miniAOD size.\n\nThe nice additions are :\n\nSubjets from soft drop and the CMS top tagger are stored as lists of pat::Jets.\nJet corrections are applied to subjets.\nSubjet b-tagging is being run.\n", "branch": "CMSSW_7_4_X", "changed_files": 19, "closed_at": "1425991726", "comments": 39, "commits": 41, "created_at": "1423598284", "deletions": 61, "labels": ["analysis-pending", "comparison-available", "dqm-approved", "orp-pending", "pending-signatures", "tests-approved"], "milestone": "Next CMSSW_7_4_X", "number": 7659, "release-notes": [], "review_comments": 1, "state": "closed", "title": "Mini aod substructure pieces overhaul", "updated_at": "1429721084", "user": "rappoccio"}