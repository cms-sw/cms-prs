{"additions": 29, "auther_ref": "fixRawPrime_13_2_X", "auther_sha": "6e38bd933cf0c29de1d6461248d1ef463bbf3719", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/42475\r\nbackport of https://github.com/cms-sw/cmssw/pull/42480\r\n\r\n#### PR description:\r\n\r\nIt has been shown (see [talk](https://indico.cern.ch/event/1271490/contributions/5484101/attachments/2679179/4647438/DPG_RawPrime_20230705.pdf)) that events repacked in the RAW' data format and then reconstructed with the dedicated process modifier `approxSiStripClusters` have a different content in terms of tracks w.r.t. the standard reconstruction starting from RAW data (with full SiStrip ADC information). Part of that is expected from information loss intrinsic to the procedure, but dedicated checks showed that in some events few perfectly valid seeds lead to no track reconstructed when data is repacked with the RAW' data format.\r\nThis has been shown to depend on the fact the currently the RAW' data format is not saving the list of SiStrip FED errors (collection  `DetIdedmEDCollection_siStripDigisHLT_*_*`) which is used in the tracking setup to construct the list of inactive componets:\r\n\r\nhttps://github.com/cms-sw/cmssw/blob/a5b91a1d0848665cc6f5d3ddb11be28272302e1c/RecoTracker/MeasurementDet/plugins/MeasurementTrackerEventProducer.cc#L405-L417\r\n\r\nwhich is then used in trajectory building.\r\nThis PR proposed to fix this issue by keeping the missing collection (32b79ff31e275defbbd3ca982d86a6cd2758f971, supposed eventually to come from the HLT) in the repack procedure and then to use it in the `MeasurementTrackerEventProducer` (4e3c70edf7e6496faa320850ebc556a1a4007522).\r\nAfter that is no longer necessary to run the SiStrip unpacker `siStripDigis` in the RAW2DIGI step, therefore that's excluded from execution profiting of the process modifier (e6f3888992a7c17621d530a6c247053323b97488).\r\nIn addition since the `DetIdedmEDCollection` with the list of Strip FED errors is supposed to come from the HLT in production, the name of the collection should match the one in the [Online HLT Heavy Ion menu](https://github.com/cms-sw/cmssw/blob/f04980c79911900153373b23c402f042276160ee/HLTrigger/Configuration/test/OnLine_HLT_HIon.py#L6129) in order to consume the right collection (as it was done before for `SiStripClusters2ApproxClustersHLT` -> `hltSiStripClusters2ApproxClusters` in https://github.com/cms-sw/cmssw/pull/39863).\r\nThis is done in commit 6e38bd933cf0c29de1d6461248d1ef463bbf3719.\r\nThis final change is purely technical and it's not expected to generate further regressions.\r\n#### PR validation:\r\n\r\nRun successfully `runTheMatrix.py -l 140.58 -t 4 -j 8 --ibeos`\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nVerbatim backport of https://github.com/cms-sw/cmssw/pull/42475 and https://github.com/cms-sw/cmssw/pull/42480 to CMSSW_13_2_X for the 2023 HI data-taking.\r\n", "branch": "CMSSW_13_2_X", "changed_files": 6, "comments": 9, "commits": 4, "created_at": "1691491412", "deletions": 10, "labels": ["operations-pending", "reconstruction-approved", "pending-signatures", "tests-approved", "orp-pending", "pdmv-pending", "urgent", "upgrade-approved", "backport-ok", "tracking", "trk"], "milestone": "CMSSW_13_2_X", "number": 42507, "release-notes": [], "review_comments": 0, "state": "open", "title": "[13.2.X] Fix approximated SiStrip clusters workflow by saving SiStrip FED error information", "updated_at": "1691646072", "user": "mmusich"}