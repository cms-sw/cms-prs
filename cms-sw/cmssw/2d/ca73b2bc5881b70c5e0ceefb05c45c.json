{"additions": 12, "auther_ref": "fix-edmPickEvents", "auther_sha": "b9f3973b9dbcd999b4ef96c0c884795220e330f7", "author": "smuzaffar", "body": "The problem with `edmPickEvents.py` unit test is that we timeout das command after 15 seconds ( https://github.com/cms-sw/cmssw/blob/master/PhysicsTools/Utilities/scripts/edmPickEvents.py#L128 ) but the querywe are running takes more than 15s that is why unit test is failing. This PR proposes to add a new optional command-line arg `--das-client-timeout` (default value is 15s) to change the timeout. \r\n\r\nAlso unit test now properly prints the error message [a]\r\n\r\nFixes https://github.com/cms-sw/cmssw/issues/37126\r\nThis can be backported to other releases if needed\r\n\r\n```\r\n+ edmPickEvents.py --das-client-timeout 15 /Cosmics/Run2011A-v1/RAW 160960:277:10001082,160960:277:10001058,160960:277:10001650\r\n+ cat run_edmCopyPickMerge.sh\r\nDAS query timeout\r\nDAS command: ['dasgoclient', '-query', 'file dataset=/Cosmics/Run2011A-v1/RAW run=160960 lumi=277', '-json']\r\nDAS query error: return code -9\r\n--- Standard output---\r\n[\r\n{\"das\":{\"expire\":1647429691,\"instance\":\"prod/global\",\"primary_key\":\"file.name\",\"record\":1,\"services\":[\"dbs3:file4dataset_run_lumi\"]},\"file\":[{\"name\":\"/store/data/Run2011A/Cosmics/RAW/v1/000/160/960/049F6443-8E53-E011-A943-003048F117EA.root\"}],\"qhash\":\"e3520c0a67318a03b339b02affe9a3e2\"}\r\n]\r\n\r\n--- Standard error---\r\n\r\n--- End ---\r\n+ exit 1\r\n\r\n```", "branch": "master", "changed_files": 2, "comments": 3, "commits": 3, "created_at": "1647426593", "deletions": 25, "labels": ["analysis-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_12_4_X", "number": 37255, "release-notes": [], "review_comments": 0, "state": "open", "title": "Fix edmPickEvents.py unit test", "updated_at": "1647428874", "user": "smuzaffar"}