{"additions": 83, "auther_ref": "dev_pfrhfAlloc_14_1_X", "auther_sha": "20d65278a72555724fd063b9a8841a3e83c83039", "author": "jsamudio", "body": "#### PR description:\r\n\r\nThis PR is made to address crashes of the type in https://github.com/cms-sw/cmssw/issues/45477 and https://github.com/cms-sw/cmssw/issues/44634. It provides runtime allocation of the PF RecHit Fraction SoA to minimize memory usage and avoid crashes when the allocation needed was not a reasonable multiple of the number of PF RecHits. This change is made in a way which does not touch the configuration, and therefore is transparent to the HLT menu.\r\n\r\n#### PR validation:\r\n\r\nPR physics performance was validated using the matrix workflow 12434.423 and checking output Legacy CPU vs GPU comparisons. The event throughput was tested on a HLT test machine with the following results:\r\n\r\n```\r\nRunning 3 times over 6300 events with 8 jobs, each with 32 threads, 32 streams and 1 GPUs\r\n\r\nReference: 565.8    0.3 ev/s\r\n\r\nThis PR: 564.7    1.3 ev/s\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\n~~Verbatim backport of #46135 for `14_1_X`~~\r\nBackport of #46135 for `14_1_X`, but differs by one commit which makes the `pfRecHitFractionAllocation` parameter optional so that this update will not conflict with the current HLT menu. Also does not include the change to the menu customization.\r\n\r\n@fwyzard @waredjeb ", "branch": "CMSSW_14_1_X", "changed_files": 3, "comments": 17, "commits": 3, "created_at": "1727354614", "deletions": 31, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "backport-ok", "heterogeneous-pending"], "milestone": "CMSSW_14_1_X", "number": 46136, "release-notes": [], "review_comments": 0, "state": "open", "title": "[14_1_X] Add runtime allocation of PF rechit fraction SoA", "updated_at": "1727968444", "user": "jsamudio"}