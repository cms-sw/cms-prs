{"additions": 145, "auther_ref": "mapping-dump-update", "auther_sha": "0f65a00011e9530a6673418532c3ecaf71ef8588", "author": "CTPPS", "body": "#### PR description:\r\n\r\nThis PR is makes a small addition to work started in PR  #42471 concerning migration of all PPS detectors' mappings from XML to CondDB.\r\n\r\nIn this PR are updates of: \r\n\r\n- plugin which creates SQLite files based on XML files ([CondTools/CTPPS/plugins/WriteCTPPSTotemDAQMappingMask.cc](https://github.com/cms-sw/cmssw/compare/master...CTPPS:cmssw:mapping-dump-update?expand=1#diff-140c17cd5e469a3e3692f7f3e397d10512b8b9e95d1038ac986f3737902f8475))\r\n- plugin which reads SQLite/XML file and dumps data to text file ([CalibPPS/ESProducers/plugins/WriteTotemDAQMapping.cc](https://github.com/cms-sw/cmssw/compare/master...CTPPS:cmssw:mapping-dump-update?expand=1#diff-276299009e7ad4e9336945c66d7cfcb5b6ec85d7835707bcd3096bcfb382c7dc))\r\n- configs/scripts used for tests\r\n\r\n\r\nPreviously both AnalysisMask and DAQMapping were read from XML files.\r\nBased on that TotemReadoutRcd and AnalysisMaskRcd records were created and dumped to one SQLite file.\r\n\r\n**This PR makes possible to dump only one record to SQLite file (using WriteCTPPSTotemDAQMappingMask plugin).**\r\nAlso  adds option to read and dump only one record from SQLite/XML files (using WriteTotemDAQMapping plugin).\r\n\r\n\r\n#### PR validation:\r\n\r\nTo validate this PR I used a test I made for PR  #42471 ([CondTools/CTPPS/test/test_XML_to_SQLite_mapping.sh](https://github.com/cms-sw/cmssw/compare/master...CTPPS:cmssw:mapping-dump-update?expand=1#diff-1dba015306a25198f8fc530bec2f491c24af99f0b3fafb31d66dba92e8df90cd)).\r\n\r\nIn the test firstly SQLite files are created based on XML files. In each SQLite file is only one type of record (TotemReadoutRcd or AnalysisMaskRcd).\r\nThen data is read from SQLite files and dumped to text files.\r\nThen data is read from XML files and dumped to text files.\r\nThen corresponding text files are compared.\r\n\r\nThe results show that the data is the same in XML and SQLite, so the migration from XML to SQLite was successful.\r\n\r\n---\r\n@grzanka for your attention", "branch": "master", "changed_files": 8, "comments": 0, "commits": 1, "created_at": "1695769440", "deletions": 60, "labels": ["alca-pending", "db-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_13_3_X", "number": 42879, "release-notes": [], "review_comments": 0, "state": "open", "title": "PPS Dump to SQLite only one record (mask or mapping)", "updated_at": "1695769468", "user": "brzozia"}