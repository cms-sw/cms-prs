{"additions": 16, "auther_ref": "fc-relval", "auther_sha": "c6923b00a8d6d1a0d9a2aab91731a30bc67f30ec", "author": "fabiocos", "body": "#### PR description:\r\n\r\nThis PR adds an LHE-based simulation relval workflow where 2 lumi sections are produced, and the concurrent luminosity block settings are activated. This is a first attempt to address the request by @Dr15Jones discussed in #26348 , and test the lumi section boundary crossing that is usual in production and that sometimes shows problems (see for instance #25708 ).\r\n\r\nIn order to test the boundary crossing from LHE_based input onwards, the workflow 1361.18 is modified by forcing the EmptySource to have 5 events per lumi section, and therefore forcing the standard 10 events sample to contain 2 lumi sections.\r\n\r\n#### PR validation:\r\n\r\nIf ```--nThreads 4``` the new workflow 1361.181 has the new correct settings, for instance in step2 (DIGI):\r\n\r\n```\r\n%MSG-i ThreadStreamSetup:  (NoModuleName) 04-Sep-2019 16:12:47 CEST pre-events\r\nsetting # threads 4\r\nsetting # streams 4\r\n%MSG\r\n04-Sep-2019 16:12:53 CEST  Initiating request to open file file:step1.root\r\n04-Sep-2019 16:12:54 CEST  Successfully opened file file:step1.root\r\n%MSG-s ModulesSynchingOnLumis:  AfterModConstruction 04-Sep-2019 16:12:59 CEST  pre-events\r\nThe following modules require synchronizing on LuminosityBlock boundaries:\r\n  HLTrigReport hltTrigReport\r\n%MSG\r\nBegin processing the 1st record. Run 1, Event 2, LumiSection 1 on stream 3 at 04-Sep-2019 16:13:05.814 CEST\r\nBegin processing the 2nd record. Run 1, Event 3, LumiSection 1 on stream 0 at 04-Sep-2019 16:13:05.814 CEST\r\nBegin processing the 3rd record. Run 1, Event 4, LumiSection 1 on stream 2 at 04-Sep-2019 16:13:05.814 CEST\r\nBegin processing the 4th record. Run 1, Event 5, LumiSection 1 on stream 1 at 04-Sep-2019 16:13:05.814 CEST\r\nDTTSPhi::addTracoT: preview not present in TRACO trigger or its code=0  trigger not added!\r\nBegin processing the 5th record. Run 1, Event 1, LumiSection 1 on stream 1 at 04-Sep-2019 16:14:14.785 CEST\r\nBegin processing the 6th record. Run 1, Event 9, LumiSection 2 on stream 3 at 04-Sep-2019 16:14:16.953 CEST\r\nBegin processing the 7th record. Run 1, Event 7, LumiSection 2 on stream 0 at 04-Sep-2019 16:14:16.953 CEST\r\nBegin processing the 8th record. Run 1, Event 6, LumiSection 2 on stream 2 at 04-Sep-2019 16:14:16.953 CEST\r\nBegin processing the 9th record. Run 1, Event 8, LumiSection 2 on stream 1 at 04-Sep-2019 16:14:16.954 CEST\r\nBegin processing the 10th record. Run 1, Event 10, LumiSection 2 on stream 0 at 04-Sep-2019 16:14:18.686 CEST\r\n04-Sep-2019 16:14:20 CEST  Closed file file:step1.root\r\n```\r\n", "branch": "master", "changed_files": 2, "closed_at": "1568053594", "comments": 29, "commits": 2, "created_at": "1567601401", "deletions": 0, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "orp-approved", "pdmv-approved", "tests-approved", "upgrade-approved"], "merge_commit_sha": "55ab40e67690a9fcfffd106fb034e44039be559f", "merged_at": "1568053594", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27928, "release-notes": [], "review_comments": 4, "state": "closed", "title": "Add an LHE-based mc relval with multiple lumi sections and concurrent lumi settings", "updated_at": "1568053595", "user": "fabiocos"}