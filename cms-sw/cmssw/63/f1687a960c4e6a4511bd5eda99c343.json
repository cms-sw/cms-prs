{"additions": 789, "auther_ref": "ntuple_matchScore", "auther_sha": "4f98c647b62f928441fd8707cd4de7dd617995a5", "author": "makortel", "body": "This PR makes the following updates to the TrackingNtuple:\r\n* add alternative track-to-TrackingParticle matchings\r\n  * best matching TrackingParticle (also for those tracks that would be fake by the standard matching)\r\n     * defined as the TrackingParticle with most SimHits matched to the clusters of the track, at minimum 3 hits of a track must be matched to the TP\r\n  * best matching TrackingParticle starting from the first hit of the track\r\n      * same definition as above but starting from the first hit of the track\r\n* add various track-to-TrackingParticle matching scores\r\n  * for both \"best TP\" and \"best TP from first hit\"\r\n     * shared cluster fraction (the quantity used in `QuickTrackAssociatorByHits`; of these only this one is added for seeds)\r\n     * shared cluster fraction with the `TrackingParticle::numberOfTrackerHits()` as the denominator\r\n     * shared cluster fraction with the number of reco clusters matched to the TrackingParticle (as given by `ClusterTPAssociation`)\r\n     * chi2 calculated from the track and TrackingParticle parameters and the track parameter uncertanties (as in `TrackAssociatorByChi2`)\r\n  * for each matched TP: the chi2 (as above)\r\n   * tracks: number of invalid hits (inside track and also \"inner\" and \"outer\"); this implied a change of branch name `trk_nInvalid` => `trk_nLost`\r\n* include on-the-fly created matched strip hits\r\n  * omitting these this was actually a serious bug causing memory over writes\r\n* other additions\r\n   * tracks and seeds: number of clusters (mostly because it is used in the track-to-TP matching)\r\n   * TrackingParticles: `numberOfTrackerHits()`, and the number of reco clusters matched to the TP (as in `ClusterTPAssociation`)\r\n\r\nand in addition:\r\n* remove unused code from `TrackAssociatorByChi2Impl`\r\n\r\n\r\nTested in 9_4_0_pre3, no changes expected in standard workflows.\r\n\r\n@VinInn @ebrondol @hajohajo", "branch": "master", "changed_files": 15, "closed_at": "1510127447", "comments": 20, "commits": 24, "created_at": "1509701105", "deletions": 477, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "fully-signed", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "a584e600e028aca26aec65befceb698e25e9f85d", "merged_at": "1510127447", "merged_by": "cmsbuild", "milestone": "CMSSW_10_0_X", "number": 21148, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Update TrackingNtuple", "updated_at": "1510127447", "user": "makortel"}