{"additions": 40, "auther_ref": "hcal-hf_fg_thresholds", "auther_sha": "f07848580d217f0cd713fd30e89b95671cd923f6", "author": "konpas17", "body": "#### PR description:\r\n\r\nUntil now the LUT generation for HF fine grain bits requires thresholds hardcoded in `SimCalorimetry/HcalTrigPrimProducers/python/hcaltpdigi_cff.py`. With this update, the two HF MinBias FG thresholds are retrieved from the conditions via the `HcalTPParameters` payload (using the previously unused`auxi1` field). A dedicated switch is also implemented to provide a fallback to the thresholds defined in the cff file. \r\n\r\n- For the time being, no changes are expected in the output, until the conditions are updated with non-zero values in the auxi1 field of HcalTPParameters. \r\n- This PR is self-contained and does not depend on other PRs or externals.\r\n- Additional documentation:  [Indico](https://indico.cern.ch/event/1580570/), [cmshcal#288]( https://gitlab.cern.ch/cmshcal/docs/-/issues/288)\r\n\r\n#### PR validation:\r\n\r\n- Code compiles successfully under CMSSW_16_0_X with `scram build code-checks` and `scram build code-format`.\r\n- Local tests with `runTheMatrix.py -l limited -i all --ibeos` completed without errors.\r\n- Tests were performed using `CaloOnlineTools/HcalOnlineDb/test/genLUT.sh`. Thresholds were correctly retrieved from conditions or from the cff when `auxi1` is empty or when the fallback switch is used. LUTs for HF are produced with the expected values in both cases.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport. If approved, this PR will later be backported to 15_1_X, which will be used for HI this year.\r\n\r\n@akhukhun @abdoulline @JHiltbrand ", "branch": "master", "changed_files": 5, "comments": 13, "commits": 3, "created_at": "1758989855", "deletions": 2, "labels": ["l1-pending", "alca-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_16_0_X", "number": 49012, "release-notes": [], "review_comments": 3, "state": "open", "title": "HCAL: Move HF fine-grain thresholds to conditions", "updated_at": "1759231926", "user": "konpas17"}