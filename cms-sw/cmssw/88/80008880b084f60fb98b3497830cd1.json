{"additions": 100, "auther_ref": "tkHistoMap_fixes", "auther_sha": "8f827ff907b0963236392b44aa93731924ef3436", "author": "mmusich", "body": "#### PR description:\r\n\r\nWhen developing for https://github.com/cms-sw/cmssw/pull/39351 I noticed that if a `TkHistoMap` object is constructed not using a valid pointer to `TkDetMap` (which is fetched from the EventSetup), while technically compiling fine, at run time using methods such as \r\n\r\nhttps://github.com/cms-sw/cmssw/blob/6d2f66057131baacc2fcbdd203588c41c885b42c/DQM/SiStripCommon/interface/TkHistoMap.h#L47\r\n\r\nor\r\n\r\nhttps://github.com/cms-sw/cmssw/blob/6d2f66057131baacc2fcbdd203588c41c885b42c/DQM/SiStripCommon/interface/TkHistoMap.h#L48\r\n\r\nresults in a nasty segmentation fault and the user is left to scratch their heads as to why that happens.\r\nIn this PR I propose to throw at construction time if a valid pointer to `TkDetMap` is not provided.\r\nI also profit to delay the computation of `TkLayerMap::XYbin` only in the case in while the underlying `MonitorElement` is a `TProfile2D` and not a `TH2D`.\r\nFinally I add unit tests for the package `DQM/SiStripCommon` in commit 8f827ff907b0963236392b44aa93731924ef3436.\r\n\r\n#### PR validation:\r\n\r\nRelies on the augmented unit tests\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nN/A", "branch": "master", "changed_files": 9, "comments": 4, "commits": 2, "created_at": "1662983450", "deletions": 88, "labels": ["dqm-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending"], "milestone": "CMSSW_12_6_X", "number": 39369, "release-notes": [], "review_comments": 0, "state": "open", "title": "Miscellaneous updates to `TkHistoMap`", "updated_at": "1662992265", "user": "mmusich"}