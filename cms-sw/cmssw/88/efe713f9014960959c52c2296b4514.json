{"additions": 41, "auther_ref": "HFchanges", "auther_sha": "88c30ee4131bb8594df1ca9bbaec8fdbd6adcbfb", "author": "knash", "body": "Comparing the current HF PF spike cleaning recipe to that seen in [1] (slide 17), there seems to be a bug in the code such that the cleaning never occurs (would require a ~10^10 GeV spike) due to the fact that the rechit energy is summed in the numerator and denominator (L123,L137 of the original).  \r\n\r\nThis PR attempts to fix the issue by explicitly finding the corresponding 9 neighbors (<=5 from L120 to L164) and the other <=4 from the loop starting at 171.  \r\n\r\nThe code also would affect ECAL spikes which use the same cleaner.  There, the changes only take out the rechit energy from the numerator without any additional summing required.  This can also be motivated [1] (slide 8)\r\n\r\n[1]:https://indico.cern.ch/event/76306/contributions/1251307/attachments/1052529/1500838/Patrick.pdf", "branch": "master", "changed_files": 3, "closed_at": "1501822789", "comments": 124, "commits": 7, "created_at": "1489072869", "deletions": 6, "labels": ["comparison-available", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "dd94c88d87c90a7428721b52312375275be03395", "merged_at": "1501822789", "merged_by": "cmsbuild", "milestone": "CMSSW_9_3_X", "number": 17859, "release-notes": [], "review_comments": 35, "state": "closed", "title": "Spike cleaner fix", "updated_at": "1502796846", "user": "knash"}