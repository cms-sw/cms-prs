{"additions": 16, "auther_ref": "devel_fixGEMRawToDigiInL1TFullMC", "auther_sha": "e290d429c270dae5dc61c0c2db06d311f3c18fb5", "author": "missirol", "body": "#### PR description:\r\n\r\nIt looks like `L1REPACK:FullMC` does not work as expected on EDM inputs without the DIGI data tier, as [1] returns [2].\r\n\r\n(This would suggest that, up to now, users were simply reading the GEM digis from the EDM inputs when running `L1REPACK:FullMC`.)\r\n\r\nThis PR is a tentative fix (I'm not a domain expert). It is based on what is currently done for `L1REPACK:Full` (which is for real data, as opposed to `L1REPACK:FullMC` which is for MC), e.g.\r\nhttps://github.com/cms-sw/cmssw/blob/a8e4ccae45c0e50fba6f716327e0ef4bfd1f145f/Configuration/StandardSequences/python/SimL1EmulatorRepack_Full_cff.py#L168-L170\r\n(`L1REPACK:Full` was fixed in #36133, based on https://github.com/cms-sw/cmssw/pull/36133#issuecomment-971473027)\r\n\r\n[1]\r\n```\r\ncmsDriver.py step2 -s L1REPACK:FullMC --conditions auto:phase1_2022_realistic_postEE --era Run3 \\\r\n  --datatier RAW --eventcontent RAW --geometry DB:Extended --nThreads 1 --nStreams 0 -n 10 \\\r\n  --filein /store/mc/Run3Summer22EEDR/QCD_Pt-120To170_TuneCP5_13p6TeV-pythia8/GEN-SIM-RAW/Poisson70KeepRAW_124X_mcRun3_2022_realistic_postEE_v1-v1/80000/55194757-7f7a-4fac-83b2-fc6e0b5fe7f5.root\r\n```\r\n\r\n[2]\r\n```\r\n----- Begin Fatal Exception 09-Jan-2023 18:08:53 CET-----------------------\r\nAn exception of category 'ProductNotFound' occurred while\r\n   [0] Processing  Event run: 1 lumi: 104 event: 103002 stream: 0\r\n   [1] Running path 'RAWoutput_step'\r\n   [2] Prefetching for module PoolOutputModule/'RAWoutput'\r\n   [3] Prefetching for module RawDataCollectorByLabel/'rawDataCollector'\r\n   [4] Prefetching for module L1TDigiToRaw/'packGmtStage2'\r\n   [5] Prefetching for module L1TMuonOverlapPhase1TrackProducer/'simOmtfDigis'\r\n   [6] Prefetching for module CSCTriggerPrimitivesProducer/'simCscTriggerPrimitiveDigis'\r\n   [7] Prefetching for module GEMPadDigiClusterProducer/'simMuonGEMPadDigiClusters'\r\n   [8] Calling method for module GEMPadDigiProducer/'simMuonGEMPadDigis'\r\nException Message:\r\nPrincipal::getByToken: Found zero products matching all criteria\r\nLooking for type: MuonDigiCollection<GEMDetId,GEMDigi>\r\nLooking for module label: simMuonGEMDigis\r\nLooking for productInstanceName: \r\n\r\n   Additional Info:\r\n      [a] If you wish to continue processing events after a ProductNotFound exception,\r\nadd \"SkipEvent = cms.untracked.vstring('ProductNotFound')\" to the \"options\" PSet in the configuration.\r\n\r\n----- End Fatal Exception -------------------------------------------------\r\n```\r\n\r\n#### PR validation:\r\n\r\nNothing beyond the use case described in the PR description.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\nPlan to backport to `12_6_X` to aid HLT studies.\r\n", "branch": "master", "changed_files": 1, "comments": 4, "commits": 1, "created_at": "1673283271", "deletions": 2, "labels": ["l1-pending", "operations-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_13_0_X", "number": 40461, "release-notes": [], "review_comments": 0, "state": "open", "title": "fix GEM inputs for `L1REPACK:FullMC`", "updated_at": "1673283694", "user": "missirol"}