{"additions": 11, "auther_ref": "devel_hcalAlpaka_fixShrEnergyM0TotalAccum_14_0_11", "auther_sha": "57e9df5db2b2102744643b67d925485f87c521a7", "author": "missirol", "body": "backport of #45452\r\n\r\n#### PR description:\r\n\r\nFrom the description of #45452:\r\n\r\n>This PR fixes how the values in the array `shrEnergyM0TotalAccum` in shared memory are used in one of the HCAL-Alpaka kernels.\r\n> \r\n>The per-channel value of `shrEnergyM0TotalAccum[lch]` is filled summing values across \"samples\", and this is done concurrently on GPU. The issue is that the same value is accessed before threads are synchronised. In the examples tested offline, this tends to return almost-always the correct results on GPU, but incorrect ones on CPU (or rather, \"serial_sync\" backend) as the samples in the latter case are processed one at the time.\r\n>\r\n>This change (and the related validation, see below) were discussed offline last week with @fwyzard and @kakwok.\r\n\r\n#### PR validation:\r\n\r\nSee the validation section of #45452.\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\n#45452\r\n\r\nFix relevant to 2024 data-taking.\r\n", "branch": "CMSSW_14_0_X", "changed_files": 1, "comments": 13, "commits": 1, "created_at": "1721029294", "deletions": 6, "labels": ["reconstruction-approved", "pending-signatures", "tests-approved", "orp-pending", "urgent", "backport", "heterogeneous-pending"], "milestone": "CMSSW_14_0_X", "number": 45453, "release-notes": [], "review_comments": 0, "state": "open", "title": "fix check on `shrEnergyM0TotalAccum` in HCAL-Alpaka kernel [`14_0_X`]", "updated_at": "1721057556", "user": "missirol"}