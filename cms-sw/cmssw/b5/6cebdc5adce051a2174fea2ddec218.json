{"additions": 642, "auther_ref": "110X-rawfile-reuse-fd-with-compression_v7", "auther_sha": "71cf55c33b63554c18d5a3f7915af52fcfea1972", "author": "smorovic", "body": "#### PR description:\r\n\r\nAddition of file header to Fed Raw Data format. This header contains metadata description of the content (file size without header and number of events, LS and versioning). Aim is to replace separate JSON file which can take a lot of space in ramdisk with 2 MB huge pages (minimum per file).\r\n\r\nFile broker will switch protocol to v2 when detecting raw files with header, and Input source assumes i in this case . In addition there is also format autodetection when using fileListMode and in FRDSource, as well as generation support for the new format in the fake BU module.\r\n\r\nAdditional optimization is added: input source will, in case of using a single reader thread with double buffering (default mode), open raw file only once and reuse the same FD to read file sequentially until done (reducing number file operations performed).\r\n\r\n#### PR validation:\r\n\r\nThis has been developed and tested in DAQ3VAL system.", "branch": "master", "changed_files": 10, "closed_at": "1565893334", "comments": 29, "commits": 24, "created_at": "1565602212", "deletions": 170, "labels": ["code-checks-approved", "comparison-available", "core-approved", "daq-approved", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved"], "merge_commit_sha": "981dc3642e68c94f0724e5c42acc14b544559a1e", "merged_at": "1565893334", "merged_by": "cmsbuild", "milestone": "CMSSW_11_0_X", "number": 27750, "release-notes": [], "review_comments": 22, "state": "closed", "title": "Adding FRD file header (DAQ)", "updated_at": "1565893334", "user": "smorovic"}