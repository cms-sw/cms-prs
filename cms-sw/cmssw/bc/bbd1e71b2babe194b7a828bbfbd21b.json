{"additions": 1576, "auther_ref": "soa_blocks", "auther_sha": "e61a9f3f10e7b6da2c7eddde290296281d561ba1", "author": "leobeltra", "body": "#### PR description:\r\n\r\nThis PR extends the concept of `SoA`, introducing `SoABlocks`, i.e., a collection of SoA `Layout`s, with the corresponding `View`s and `ConstView`s. Both the memory abstraction and accessors to elements have been built by composition of multiple traditional SoAs. One of the purpose of `SoABlocks` is to substitute the role of `PortableMultiCollection`. For this reason, new constructors for `PortableHostCollection` and `PortableDeviceCollection` have been added.\r\n\r\nThe implementation of `SoABlocks` aims to mirror the design of the traditional `SoALayout`, so it has been written using macros. For a complete overview of the PR, the expanded code of the `SoAGenericBlocksView_t.cc` is taken as an example and attached to the description of this PR, in a separate comment (only `SoAPCATemplate` and `SoAGenericBlocksTemplate`, because `SoAPosition` is totally equivalent to `SoAPCATemplate`).\r\n\r\nTODOs:\r\n- Provide a suitable method to print information about `SoABlocks`\r\n- Implement fully templated `View` and `ConstView`\r\n- Enable heterogeneous `deepCopy()` method for `SoABlocks`\r\n\r\n#### PR validation:\r\n\r\nFor the validation four different tests have been added:\r\n- `SoABlocks_t.cc` tests the main properties of `SoABlocks` and its general utilization\r\n- `SoAGenericBlocksView_t.cc` can be seen as the extension of `SoAGenericView_t.cc` and tests the possibility to build the `View` or `ConstView` of an `SoABlocks` starting from `View`s or `ConstView`s of existing SoAs, and then deepCopy these Views in a contigous memory blob, that in this case is an `SoABlocks` instance\r\n- `AssociationMapSoA.cc` is a simple use case of the `SoABlocks`: an association map implemented using two SoA blocks where one gives the access to the other using `SOA_VIEW_METHODS(...)` and `SOA_CONST_VIEW_METHODS(...)` macros.\r\n- `test_catch2_blocks.cc` that tests the correct behaviour of `SoABlocks` instatiated using `PortableHostCollection`\r\n\r\nFYI @felicepantaleo ", "branch": "master", "changed_files": 16, "comments": 38, "commits": 1, "created_at": "1753371823", "deletions": 23, "labels": ["pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "heterogeneous-pending", "allow-leobeltra"], "milestone": "CMSSW_16_0_X", "number": 48629, "release-notes": [], "review_comments": 74, "state": "open", "title": "Added SoABlocks feature", "updated_at": "1760426394", "user": "leobeltra"}