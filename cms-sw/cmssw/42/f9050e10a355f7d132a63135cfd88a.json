{"additions": 10, "auther_ref": "mm_devel_cmssw45708_14_0_X", "auther_sha": "d50e7b0ec5df69a7cced1e4259edc295da91087e", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/45743\r\n\r\n#### PR description:\r\n\r\nOriginally as https://github.com/missirol/cmssw/commit/62620da84d02d0749868ae6281490b461905c8d2\r\nThis PR is meant as a fix for https://github.com/cms-sw/cmssw/issues/45708. \r\nFix to the device-to-host copy of `TrackingRecHitsSoACollection<TrackerTraits>`, in order to initialise the `phiBinner` data member on the host side.\r\n\r\nA more complete explanation of the issue is provided by @makortel in https://github.com/cms-sw/cmssw/issues/45708#issuecomment-2294166204\r\n\r\n#### PR validation:\r\n\r\nExecuted the following script:\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n[ $# -ge 1 ] || exit 1\r\n\r\nhltLabel=hlt\r\noutDir=\"${1}\"\r\n\r\n[ ! -d \"${outDir}\" ] || exit 1\r\n\r\nmkdir -p \"${outDir}\"\r\ncd \"${outDir}\"\r\n\r\nhltGetConfiguration /dev/CMSSW_14_0_0/GRun/V173 \\\r\n  --globaltag 140X_dataRun3_HLT_v3 \\\r\n  --data \\\r\n  --no-prescale \\\r\n  --output none \\\r\n  --max-events -1 \\\r\n  --paths MC_*Tracking* \\\r\n  --input root://eoscms.cern.ch//eos/cms/store/group/tsg/STEAM/validations/GPUVsCPU/240814/raw_pickevents.root \\\r\n  > \"${hltLabel}\".py\r\n\r\ncat <<@EOF >> \"${hltLabel}\".py\r\nprocess.options.numberOfThreads = 1\r\nprocess.options.numberOfStreams = 0\r\nprocess.options.wantSummary = True\r\n\r\nfor foo in ['HLTAnalyzerEndpath', 'dqmOutput', 'MessageLogger']:\r\n    if hasattr(process, foo):\r\n        process.__delattr__(foo)\r\n\r\nprocess.load('FWCore.MessageLogger.MessageLogger_cfi')\r\n\r\n#process.options.accelerators = ['cpu']\r\n\r\n#process.hltEcalDigisSoA.alpaka.backend = 'serial_sync'\r\n#process.hltEcalUncalibRecHitSoA.alpaka.backend = 'serial_sync'\r\n#process.hltHbheRecoSoA.alpaka.backend = 'serial_sync'\r\n#process.hltParticleFlowRecHitHBHESoA.alpaka.backend = 'serial_sync'\r\n#process.hltParticleFlowClusterHBHESoA.alpaka.backend = 'serial_sync'\r\n#process.hltOnlineBeamSpotDevice.alpaka.backend = 'serial_sync'\r\n#process.hltSiPixelClustersSoA.alpaka.backend = 'serial_sync'\r\n#process.hltSiPixelRecHitsSoA.alpaka.backend = 'serial_sync'\r\nprocess.hltPixelTracksSoA.alpaka.backend = 'serial_sync'\r\nprocess.hltPixelVerticesSoA.alpaka.backend = 'serial_sync'\r\n@EOF\r\n\r\nCUDA_LAUNCH_BLOCKING=1 \\\r\ncmsRun \"${hltLabel}\".py &> \"${hltLabel}\".log\r\n```\r\n\r\n(originally from @missirol - thanks!) and verified that with this patch (*N.B.* only after having run `git cms-checkdeps -a` ) it runs, whereas it failed in a plain `CMSSW_14_0_14_MULTIARCHS`.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nverbatim backport of https://github.com/cms-sw/cmssw/pull/45743  in order to use it for building the 2024 HIon HLT menu (see [CMSHLT-3284](https://its.cern.ch/jira/browse/CMSHLT-3284) for more details).", "branch": "CMSSW_14_0_X", "changed_files": 1, "comments": 6, "commits": 1, "created_at": "1724075186", "deletions": 0, "labels": ["reconstruction-pending", "pending-signatures", "tests-approved", "orp-pending", "bug-fix", "backport", "heterogeneous-pending", "tracking"], "milestone": "CMSSW_14_0_X", "number": 45744, "release-notes": [], "review_comments": 0, "state": "open", "title": "[14.0.X] initialise `phiBinner` in device-to-host copy of `TrackingRecHitsSoACollection<TrackerTraits>`", "updated_at": "1724098290", "user": "mmusich"}