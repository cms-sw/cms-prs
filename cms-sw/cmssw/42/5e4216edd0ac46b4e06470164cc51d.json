{"additions": 244, "auther_ref": "92X_SiStripPayloadsInpector", "auther_sha": "d29497908ea5453cb7a24c93ce40743d1923a223", "author": "mmusich", "body": " Greetings,\r\nthis PR adds several types of plots for quick and basic `SiStripApvGain` payload cross-checks profiting of the Payload Inspector service from the central AlCa/DB team. \r\nFew of the plots have been already centrally tested in the production environment:\r\n\r\n   * plot_SiStripApvGainsValue: [DEMO](https://cms-conddb.cern.ch/cmsDbBrowser/payload_inspector/Prod/DEMO/eyJ0YWciOiJTaVN0cmlwQXB2R2Fpbl9Gcm9tUGFydGljbGVzX0dSMTBfdjNfb2ZmbGluZSIsInBsb3QiOiJwbG90X1NpU3RyaXBBcHZHYWluc1ZhbHVlIiwicGx1Z2luIjoicGx1Z2luU2lTdHJpcEFwdkdhaW5fUGF5bG9hZEluc3BlY3RvciIsImlvdnMiOnsic3RhcnRfaW92IjoiMjU0NzkwIiwiZW5kX2lvdiI6IjI1NDc5MCJ9fQ==)\r\n\r\n![chart 2](https://user-images.githubusercontent.com/5082376/27033302-f93d568a-4f78-11e7-86c4-a2c02ec7cbf8.png)\r\n\r\n\r\n   * plot_SiStripApvGainByRunMeans: [DEMO](https://cms-conddb.cern.ch/cmsDbBrowser/payload_inspector/Prod/DEMO/eyJ0YWciOiJTaVN0cmlwQXB2R2Fpbl9Gcm9tUGFydGljbGVzX0dSMTBfdjExX29mZmxpbmUiLCJwbG90IjoicGxvdF9TaVN0cmlwQXB2R2FpbkJ5UnVuTWVhbnMiLCJwbHVnaW4iOiJwbHVnaW5TaVN0cmlwQXB2R2Fpbl9QYXlsb2FkSW5zcGVjdG9yIiwiaW92cyI6eyJzdGFydF9pb3YiOiIyMDEyNzgiLCJlbmRfaW92IjoiMjg1MzY4In19)\r\n\r\n![chart 3](https://user-images.githubusercontent.com/5082376/27033355-3f827472-4f79-11e7-9afc-39a46d8efd08.png)\r\n\r\nFor the other plots, that are not yet deployed, I've performed the checks recommended in the [cmsDbBrowser Twiki](https://twiki.cern.ch/twiki/bin/viewauth/CMS/CmsDbBrowser#How_to_test_your_code), and all the added plots return sensible output:\r\n\r\n```bash\r\n$ getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvEndcapMinusGainsByDisk --tag SiStripApvGain_FromParticles_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"286042\", \"end_iov\": \"286042\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains averages by Endcap (minus) disk\",\"type\":\"Histo1D\",\"x_label\":\"Endcap (minus) disk (0-2: TID), (3-11: TEC)\",\"y_label\":\"average SiStripApv Gain\"},\"data\": [ { \"x\":0, \"y\":0.948253 }, { \"x\":1, \"y\":0.919545 }, { \"x\":2, \"y\":0.936477 }, { \"x\":3, \"y\":0.946448 }, { \"x\":4, \"y\":0.942019 }, { \"x\":5, \"y\":0.942409 }, { \"x\":6, \"y\":0.931668 }, { \"x\":7, \"y\":0.936945 }, { \"x\":8, \"y\":0.933766 }, { \"x\":9, \"y\":0.930011 }, { \"x\":10, \"y\":0.932945 }, { \"x\":11, \"y\":0.945727 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvEndcapPlusGainsByDisk --tag SiStripApvGain_FromParticles_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"286042\", \"end_iov\": \"286042\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains averages by Endcap (plus) disk\",\"type\":\"Histo1D\",\"x_label\":\"Endcap (plus) disk (0-2: TID), (3-11: TEC)\",\"y_label\":\"average SiStripApv Gain\"},\"data\": [ { \"x\":0, \"y\":0.93174 }, { \"x\":1, \"y\":0.929936 }, { \"x\":2, \"y\":0.939624 }, { \"x\":3, \"y\":0.9445 }, { \"x\":4, \"y\":0.935414 }, { \"x\":5, \"y\":0.937082 }, { \"x\":6, \"y\":0.930777 }, { \"x\":7, \"y\":0.933293 }, { \"x\":8, \"y\":0.93004 }, { \"x\":9, \"y\":0.91023 }, { \"x\":10, \"y\":0.925818 }, { \"x\":11, \"y\":0.942909 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvBarrelGainsByLayer --tag SiStripApvGain_FromParticles_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"286042\", \"end_iov\": \"286042\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains averages by Barrel layer\",\"type\":\"Histo1D\",\"x_label\":\"Barrel layer (0-3: TIB), (4-9: TOB)\",\"y_label\":\"average SiStripApv Gain\"},\"data\": [ { \"x\":0, \"y\":1.01021 }, { \"x\":1, \"y\":1.00848 }, { \"x\":2, \"y\":1.00291 }, { \"x\":3, \"y\":0.996242 }, { \"x\":4, \"y\":0.953011 }, { \"x\":5, \"y\":0.966208 }, { \"x\":6, \"y\":0.968372 }, { \"x\":7, \"y\":0.957877 }, { \"x\":8, \"y\":0.987693 }, { \"x\":9, \"y\":0.99202 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvTOBGainByRunMeans --tag SiStripApvGain_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"124260\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains average\",\"type\":\"History\",\"x_label\":\"iov_since\",\"y_label\":\"average Tracker Outer Barrel gain value\"},\"data\": [ { \"x\":1, \"y\":1 }, { \"x\":106945, \"y\":1.08236 }, { \"x\":108835, \"y\":1.08166 }, { \"x\":111800, \"y\":1.07971 }, { \"x\":116635, \"y\":1.08472 }, { \"x\":116636, \"y\":1.08472 }, { \"x\":117801, \"y\":1.08485 }, { \"x\":120696, \"y\":1.08433 }, { \"x\":122380, \"y\":1.08525 }, { \"x\":124260, \"y\":1.08543 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvTIBGainByRunMeans --tag SiStripApvGain_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"124260\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains average\",\"type\":\"History\",\"x_label\":\"iov_since\",\"y_label\":\"average Tracker Inner Barrel APV gain value\"},\"data\": [ { \"x\":1, \"y\":1 }, { \"x\":106945, \"y\":1.07399 }, { \"x\":108835, \"y\":1.07037 }, { \"x\":111800, \"y\":1.05278 }, { \"x\":116635, \"y\":1.05278 }, { \"x\":116636, \"y\":1.01806 }, { \"x\":117801, \"y\":1.02949 }, { \"x\":120696, \"y\":1.02755 }, { \"x\":122380, \"y\":1.02888 }, { \"x\":124260, \"y\":1.02932 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvTIDGainByRunMeans --tag SiStripApvGain_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"124260\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains average\",\"type\":\"History\",\"x_label\":\"iov_since\",\"y_label\":\"average Tracker Inner Disks APV gain value\"},\"data\": [ { \"x\":1, \"y\":1 }, { \"x\":106945, \"y\":1.06468 }, { \"x\":108835, \"y\":1.06358 }, { \"x\":111800, \"y\":1.06228 }, { \"x\":116635, \"y\":1.06228 }, { \"x\":116636, \"y\":1.06805 }, { \"x\":117801, \"y\":1.03418 }, { \"x\":120696, \"y\":1.03198 }, { \"x\":122380, \"y\":1.03383 }, { \"x\":124260, \"y\":1.03559 }]}\r\n$getPayloadData.py --plugin pluginSiStripApvGain_PayloadInspector --plot plot_SiStripApvTECGainByRunMeans --tag SiStripApvGain_GR10_v1_hlt --time_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"124260\"}' --db Prod --test\r\n{\"version\": \"1.0\",\"annotations\": {\"payload_type\":\"SiStripApvGain\",\"title\":\"SiStripApv Gains average in TEC\",\"type\":\"History\",\"x_label\":\"iov_since\",\"y_label\":\"average Tracker Endcaps APV gain value\"},\"data\": [ { \"x\":1, \"y\":1 }, { \"x\":106945, \"y\":1.07645 }, { \"x\":108835, \"y\":1.07606 }, { \"x\":111800, \"y\":1.07534 }, { \"x\":116635, \"y\":1.07975 }, { \"x\":116636, \"y\":1.07975 }, { \"x\":117801, \"y\":1.08001 }, { \"x\":120696, \"y\":1.07804 }, { \"x\":122380, \"y\":1.07847 }, { \"x\":124260, \"y\":1.07928 }]}\r\n```\r\nattn: @dimattia @arunhep @franzoni ", "branch": "master", "changed_files": 4, "closed_at": "1498298826", "comments": 47, "commits": 11, "created_at": "1497262608", "deletions": 4, "labels": ["comparison-available", "db-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "9c5c1b5cbb067c58bcd89c4ba4201481289be151", "merged_at": "1498298826", "merged_by": "cmsbuild", "milestone": "CMSSW_9_2_X", "number": 19193, "release-notes": [], "review_comments": 2, "state": "closed", "title": "[92X] Add Payload Inspector classes for SiStripApvGains", "updated_at": "1498559121", "user": "mmusich"}