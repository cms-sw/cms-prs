{"additions": 74, "auther_ref": "devel_hltRatesMonNotPerPD_141X", "auther_sha": "c6bd33f609aeea04fd02bae2c173c69aa7c4ba77", "author": "missirol", "body": "backport of of https://github.com/cms-sw/cmssw/pull/46522\r\n\r\n#### PR description:\r\n\r\nFrom the description of #46522.\r\n\r\n(Note: this branch is based on `14_1_4_patch2` and could also be used to build a new patch release on top of `14_1_4_patch2`.)\r\n\r\n>This PR suggests an update of the plugin `TriggerRatesMonitor`, a DQM plugin used inside the HLT menu to produce histograms counting the number of events accepted by a given trigger (L1T or HLT), Primary Dataset (PD) and stream.\r\n>\r\n>The current implementation creates a subdirectory named `HLT/` which in turn contains a subdirectory for every PD; in each PD subdirectory, there are 5 histograms for each Path assigned to said PD.\r\n>\r\n>If a Path is assigned to _N_ PDs, each of its 5 histograms will be created and filled _N_ times, leading to duplicate information. Such a duplication is particularly visible in the case of trigger menus such as the PbPb one,\r\nwhere there is a large number of PDs split in a round robin, with each PD having the same content in terms of trigger Paths. In addition, the current approach ignores trigger Paths which are not assigned to any PD (such Paths exist, they are normally used for monitoring purposes, to compute the result of a given trigger Path without writing out the events it accepts).\r\n>\r\n>This PR removes the per-PD structure in the `HLT/` directory created by `TriggerRatesMonitor`, simply filling the latter directory with 5 histograms for every Path in the trigger menu (with 1 subdirectory per Path, each with 5 histograms), ignoring its relation to any PDs (information on the Primary Datasets is already provided in the `Datasets/` directory created by this same plugin).\r\n>\r\n>On Oct-27 in run-387440, while using the 2024 PbPb menu in a commissioning run (no stable beams), a large delay in the macro-merging of the `DQMHistograms` pb files was observed, and the current suspicion is that the large size of these files in the PbPb menu might be part of the problem; this led to this attempt to reduce the number of histograms.\r\n\r\n#### PR validation:\r\n\r\nNone beyond the validation done for #46522 (which was done in 14_1_X).\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR. If this PR will be backported, please specify to which release cycle the backport is meant for:\r\n\r\n#46522\r\n\r\nBackported to `CMSSW_14_1_X` for data-taking purposes (used at HLT).\r\n", "branch": "CMSSW_14_1_X", "changed_files": 1, "comments": 5, "commits": 1, "created_at": "1730103105", "deletions": 75, "labels": ["dqm-pending", "hlt-pending", "pending-signatures", "orp-pending", "tests-started", "urgent"], "milestone": "CMSSW_14_1_X", "number": 46524, "release-notes": [], "review_comments": 0, "state": "open", "title": "`TriggerRatesMonitor`: monitor all HLT Paths, but not per PD [`14_1_X`]", "updated_at": "1730103405", "user": "missirol"}