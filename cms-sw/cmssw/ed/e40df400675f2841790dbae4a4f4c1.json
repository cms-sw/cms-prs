{"additions": 2, "auther_ref": "bugfix-phase2l1nano", "auther_sha": "2b94f055dcd331d05eee22fa8408d621031739ea", "author": "RobertJWard", "body": "#### PR description:\r\n\r\nAddresses two bugs found when testing the Phase2-L1Nano package, which was included in CMSSW (via PR #47178) starting from the release `CMSSW_15_1_0_pre2`:\r\n- Fixes `NANO:@Phase2L1DPGwithGen` cmsDriver step, which adds in the generator-level information to the output nanoAOD: this is equivalent to using the `NANO:@Phase2L1DPG` step with `DPGAnalysis/Phase2L1TNanoAOD/l1tPh2Nano_cff.addGenObjects` appended to the customisations\r\n- Adds HPSTau objects into the Phase2-L1NanoAOD output: the input collection was fixed previously in PR #47723  but their inclusion in the output was mistakenly commented out\r\n\r\n#### PR validation:\r\n\r\nUsed the following CMS Driver command from a `CMSSW_15_1_0_pre2` setup for local testing, and verified that the `Phase2L1DPGwithGen` option worked, and that the `Gen*`, `nL1hpsTau` and `L1hpsTau_*` branches were in the nanoAOD output: \r\n\r\n```\r\ncmsDriver.py l1nanoPhase2 -s L1TrackTrigger,L1,L1P2GT,NANO:@Phase2L1DPGwithGen --conditions auto:phase2_realistic_T33 --geometry ExtendedRun4D110 --era Phase2C17I13M9 --eventcontent NANOAOD --datatier GEN-SIM-DIGI-RAW-MINIAOD --customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000,Configuration/DataProcessing/Utils.addMonitoring,L1Trigger/Configuration/customisePhase2TTOn110.customisePhase2TTOn110 --filein /store/mc/Phase2Spring24DIGIRECOMiniAOD/TT_TuneCP5_14TeV-powheg-pythia8/GEN-SIM-DIGI-RAW-MINIAOD/PU200_AllTP_140X_mcRun4_realistic_v4-v1/2560000/11d1f6f0-5f03-421e-90c7-b5815197fc85.root --fileout file:output_Phase2_L1T.root --python_filename v45_rerunL1wTT_cfg.py --inputCommands=\"keep *, drop l1tPFJets_*_*_*, drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" --mc -n 1 --nThreads 4\r\n```\r\n\r\nCRAB jobs running over the Spring24 VBF_HToTauTau 200PU samples have been submitted to verify with larger statistics that the other tau object collections are not impacted by this change, and that the HPS taus are included successfully. Comparison plots will be linked here when ready (likely within one day).", "branch": "master", "changed_files": 2, "comments": 7, "commits": 2, "created_at": "1746008338", "deletions": 2, "labels": ["l1-approved", "pending-signatures", "tests-approved", "orp-pending", "code-checks-approved", "xpog-pending"], "milestone": "CMSSW_15_1_X", "number": 47986, "release-notes": [], "review_comments": 0, "state": "open", "title": "[L1T] Fix Phase2L1DPGwithGen option in integrated Phase2-L1Nano tool and include HPS Taus in output (Phase2)", "updated_at": "1746021088", "user": "RobertJWard"}