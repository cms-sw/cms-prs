{"additions": 15, "auther_ref": "dbg_IB_ecalClusFix", "auther_sha": "69d6a0157b61de15ad383d531663c980fbeb683e", "author": "swagata87", "body": "#### PR description:\r\n\r\nCurrently several workflows of debug IBs fail with the error message `Found a PS cluster matched to more than one EE cluster!`. This was reported in https://github.com/cms-sw/cmssw/issues/34097 and https://github.com/cms-sw/cmssw/pull/35524 . This PR is aimed at fixing this. \r\n\r\nIt looks like the problem was here:\r\nhttps://github.com/cms-sw/cmssw/blob/b4bb14f6573e803ecbe516d306d651d9774d48b7/RecoEcal/EgammaClusterAlgos/src/PFECALSuperClusterAlgo.cc#L420-L422\r\n\r\nIn particular, `i.key()` seems to give a garbage value. To bypass the issue, `std::find_if` is replaced by `std::find` in a way that we do not need to access `.key()` of `CaloCluster` anymore. This is similar to what was done here: https://github.com/cms-sw/cmssw/blob/cc5a950c6e11d1b3a4dd39b8dff8a9161ecd1037/RecoParticleFlow/PFProducer/src/PFEGammaAlgo.cc#L1869-L1870\r\n\r\nThis small change seems to solve the problem.\r\n\r\n#### PR validation:\r\n\r\nTested from `CMSSW_12_3_DBG_X_2022-01-06-2300` using workflows `117.0` and `11630.0`.\r\n\r\nThis PR is not a backport.\r\nBackport not needed.\r\n\r\n\r\n_PS: After the first round of tests, another crash was found in DBG build (only in WF `25202.0`):_ \r\n```\r\n%MSG-e BasicSingleTrajectoryState:  GsfTrackProducer:lowPtGsfEleGsfTracks  09-Jan-2022 17:26:01 UTC Run: 1 Event: 1\r\nasking for componenets to a SingleTrajectoryState\r\n%MSG\r\ncmsRun: /data/cmsbld/jenkins/workspace/build-any-ib/w/tmp/BUILDROOT/4cd3ceaede4e18eb9ab43f14fe009004/opt/cmssw/slc7_amd64_gcc10/cms/cmssw/CMSSW_12_3_DBG_X_2022-01-06-2300/src/TrackingTools/TrajectoryState/src/BasicTrajectoryState.cc:248: virtual const Components& BasicSingleTrajectoryState::components() const: Assertion `false' failed.\r\n```\r\n_I took the opportunity to fix that as well._", "branch": "master", "changed_files": 2, "closed_at": "1642841054", "comments": 34, "commits": 3, "created_at": "1641709199", "deletions": 6, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "3707fa96313fde4b4ca7b269df402eadff1f53dd", "merged_at": "1642841054", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36655, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fixing issue of PS cluster matched to  >1 EE cluster in DBG_X IBs", "updated_at": "1642841054", "user": "swagata87"}