{"additions": 420, "auther_ref": "fixAlignmentWriting_12_4_X", "auther_sha": "7818525b328440829f8b3c1bd67ae638c1c48f5e", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe goal of this PR is to fix a bug inadvertently introduced at https://github.com/cms-sw/cmssw/pull/36076 (aimed to migrate Alignment codes to new `PoolDBOutputService` methods).\r\nMoving to usage of instances instead of pointers led to the `GeometryAligner::removeGlobalTransform` call (to remove global roto-translations after computation of the alignment corrections) to be ineffective. This in turn lead to large spurious rotations and shifts of the alignment output geometry with respect to the input one.\r\nThis is fixed here in commit e5a18da8858d8d42858db32bcbde2806b58b4873.\r\nI profit of this PR to refresh the inputs for the `testPedeCampaign` unit test (at 0460fec0ecd56b86298237ac2e17a2e42ce9e973) and introduce a new unit test to check the sanity of the output payload against large roto-translations (at 7818525b328440829f8b3c1bd67ae638c1c48f5e)\r\n\r\n#### PR validation:\r\n\r\nRun the unit tests introduced here and compared the output payloads with respect to the input one. Results (obtained from the payload inspector) are collected:\r\n   * [here](http://musich.web.cern.ch/musich/display/comparison_PromptVsAlignmentCRAFT22/old/): before the fix\r\n   * [here](http://musich.web.cern.ch/musich/display/comparison_PromptVsAlignmentCRAFT22/fixed/): after the fix\r\n   \r\nHere is a couple of plots selected from the folders above (**notice the scale**).   \r\n\r\n| Before the fix | After the fix |\r\n| ------------- | ------------- |\r\n|  ![image](https://user-images.githubusercontent.com/5082376/168073606-f38cb43b-312a-45ca-8d5d-57a48b3c8ec8.png) | ![image](https://user-images.githubusercontent.com/5082376/168073732-57d41695-e253-4b12-a674-c06e26ed70a6.png) |\r\n\r\n  \r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot a backport, but a backport will be needed to all production cycles after 12_2_X.\r\n\r\ncc:\r\n@consuegs @antoniovagnerini @connorpa ", "branch": "master", "changed_files": 7, "closed_at": "1652420392", "comments": 10, "commits": 3, "created_at": "1652351034", "deletions": 50, "labels": ["alca-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "urgent", "code-checks-approved", "trk"], "merge_commit_sha": "4346f7715d8281c32b824fb68fe43d0d189f2216", "merged_at": "1652420392", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 37925, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix Tracker Alignment Payload writing ", "updated_at": "1652420393", "user": "mmusich"}