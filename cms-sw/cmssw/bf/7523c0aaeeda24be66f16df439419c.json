{"additions": 57, "auther_ref": "fixIPPV", "auther_sha": "15418f398a2bd96fd6d9f2fded4688afbde7421b", "author": "makortel", "body": "There was a bug in how the dxy and dz wrt. PV were calculated for TrackingParticles in `MultiTrackValidator`. It did not take into account the fact that the position of point of closest approach to beamline (PCA) returned by `ParemtersDefinerTP` shifted by the beamspot position, leading to biases in dxy and dz wrt. PV (most noticeably ~1 cm shift in dz). This PR suggests to fix this problem by making the calculation of dxy and dz more uniform between Track and TrackingParticle:\r\n- `ParametersDefinerTP` leaves the PCA position to be wrt. (0,0,0) (as is Track reference point)\r\n- for dxy/dz wrt. a different point than (0,0,0), the point coordinates need to be given explicitly (as for Track)\r\n  * The copy-pasted formulas are now abstracted to templated functions (there is some copy-paste between those and `reco::TrackBase`, dealing with that is left to a later exercise)\r\n\r\n\r\n\r\nTested in 9_0_0_pre4, expecting changes in MTV sim dxy and dz wrt. PV histograms (should be better centered around 0 now).\r\n\r\n@rovere @VinInn ", "branch": "master", "changed_files": 9, "closed_at": "1488916181", "comments": 8, "commits": 4, "created_at": "1488793566", "deletions": 31, "labels": ["comparison-available", "dqm-approved", "orp-pending", "pending-signatures", "reconstruction-approved", "simulation-pending", "tests-approved"], "merge_commit_sha": "74a5a60e32b7b2ec180150d0bdb13efa30096504", "merged_at": "1488916181", "merged_by": "davidlange6", "milestone": "CMSSW_9_1_X", "number": 17788, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix MultiTrackValidator sim dxy/dz wrt. PV histograms", "updated_at": "1488916181", "user": "makortel"}