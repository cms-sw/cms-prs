{"additions": 389, "auther_ref": "port113XTo106X_nanojme_sizereduction", "auther_sha": "7b84fce510502b78f42742a4e0ac53ce87b1bd0c", "author": "nurfikri89", "body": "Backport from #32722\r\n\r\n#### PR description:\r\n\r\nThis PR is to reduce the size of custom JME NanoAODs. The following changes are made:\r\n- Check that `npuProd[ibx].getPU_pT_hats()` size is more than 0 in `PhysicsTools/NanoAOD/plugins/NPUTablesProducer.cc`.\r\n- Switch on storing Parton Shower (PS) weights.\r\n- b-tagging algorithm outputs are saved for AK4 jets with pT > 15 GeV.\r\n- Low-level input variables for PileUp jet ID and Quark-Gluon Likelihood are saved for AK4 jets with pT > 10 GeV.\r\n- Remove AK4 PF and AK8 PF jet collections.\r\n- Add separate AK8 GEN and AK8 Puppi jet collections for JEC studies. Minimal information are saved.\r\n- For reclustered GEN jet collections, the minimum pT at the jet clustering level uses the default value (3 GeV) in `RecoJets/JetProducers/python/ak4GenJets_cfi.py`.\r\n- For reclustered reco-level jet collections, the minimum pT at the jet clustering level is set to be 0. Then, only jets with (JEC-corrected) pT > 8 GeV are saved. Additionally for MC samples, jets with pT < 8 GeV are saved if they are matched to GEN jets.\r\n\r\n\r\nWith this PR, the event size is now reduced to **6.42 kb/event** from **9.32 kb/event**. The comparison was made using 10K events from a TTJets RunIISummer19UL17MiniAOD sample. The changes in this PR was discussed in the 13/01/2021 XPOG meeting [1]. \r\n\r\n[1] https://indico.cern.ch/event/978436/\r\n\r\n#### if this PR is a backport please specify the original PR:\r\n\r\nOriginal PR is #32722", "branch": "CMSSW_10_6_X", "changed_files": 3, "closed_at": "1612164488", "comments": 8, "commits": 7, "created_at": "1611821938", "deletions": 203, "labels": ["backport-ok", "fully-signed", "orp-approved", "reconstruction-approved", "tests-approved", "xpog-approved"], "merge_commit_sha": "c39a1d7fb7b8baffed333ac2f10905bcea148ae7", "merged_at": "1612164488", "merged_by": "cmsbuild", "milestone": "CMSSW_10_6_X", "number": 32759, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[JME NanoAOD] Backport of #32722 (Changes for event size reduction) to 10_6_X", "updated_at": "1612164489", "user": "nurfikri89"}