{"additions": 174, "auther_ref": "alpakatracking_1410_2024-07-17-2300", "auther_sha": "78974e0384070734cc0e58c72f1b636004558fa2", "author": "lguzzi", "body": "#### PR description:\r\n\r\nthis PR adds a customiser for phase 2 to enable alpaka patatrack pixel tracking in the simplified menu.\r\nThe hltPhase2PixelTracks are redefined to be produced by CAHitNtupletAlpakaPhase2. Full tracks are either produced in a single initialStep or as initialStep+highPtTripletStep. \r\n\r\nIn details:\r\n\r\nthe main customisation functions (to be passed to cmsDriver.py via --customise) are:\r\n- **customizeHLTforAlpaka**: runs two-step tracking (initialStep+highPtTripletStep) seeded by patatrack pixel tracks built with 4 hits. This may be the default choise for testing outside TRK POG.\r\n- **customizeHLTforAlpakaSingleStep**: runs single-step tracking (initialStep) seeded by patatrack pixel tracks built with 4 hits\r\n- **customizeHLTforAlpakaTrackingOnly**: runs two-step tracking only\r\n- **customizeHLTforAlpakaSingleIterationTrackingOnly**: runs single-step tracking only\r\n\r\nOther functions:\r\n- **AlpakaHLTPixelRecoLocal**: defines the needed producers for pixel tracking (rec hits, clusters, beamspot)\r\n- **AlpakaHLTPixelRecoTracking**: defines the producers for pixel tracking\r\n- **AlpakaHLTFullTracking**: defines the full tracking sequence\r\n- **AlpakaHLTTrackingPath**: defines a fake hlt path for running tracking only\r\n\r\n#### PR \r\nThe modifications introduced by this PR do not interfere with any workflow. I tested the customisation file re-running the HLT step on TTBar Relval PU 200\r\n\r\n```\r\ncmsDriver.py step2 -s L1P2GT,HLT:75e33 \\\r\n  --conditions        auto:phase2_realistic_T25 \\\r\n  --datatier          GEN-SIM-DIGI-RAW \\\r\n  --eventcontent      FEVTDEBUGHLT \\\r\n  --geometry          Extended2026D98 \\\r\n  --era               Phase2C17I13M9 \\\r\n  --filein            file:/eos/cms/store/relval/CMSSW_14_1_0_pre2/RelValTTbar_14TeV/GEN-SIM-DIGI-RAW/PU_140X_mcRun4_realistic_v3_STD_2026D98_PU-v2/2580000/012394c3-1ebe-49fc-ac24-a00585da9e56.root \\\r\n  --fileout           file:HLT_trackingOnly_twoIters-v2.root  \\\r\n  --processName       reHLT \\\r\n  --customise         HLTrigger/Configuration/customizer_AlpakaPixelTracking_Phase2_141X.customizeHLTforAlpakaTrackingOnly \\\r\n  -n                  -1 \\\r\n  --nThreads 10\r\n```\r\n\r\nTracking performance are reported [here](https://lguzzi.web.cern.ch/lguzzi/Tracking/Phase2/alpaka/customiser/singleiter_vs_twoiters/generalTracks) for general tracks and [here](https://lguzzi.web.cern.ch/lguzzi/Tracking/Phase2/alpaka/customiser/singleiter_vs_twoiters/hltPhase2PixelTracks/) for pixel tracks. I also checked that the results between tracking-only and full menu are consistent (see [here](https://lguzzi.web.cern.ch/lguzzi/Tracking/Phase2/alpaka/customiser/check_singleIter/) and [here](https://lguzzi.web.cern.ch/lguzzi/Tracking/Phase2/alpaka/customiser/check_twoIter/)).\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nnot a backport\r\n", "branch": "master", "changed_files": 15, "comments": 24, "commits": 3, "created_at": "1721372042", "deletions": 0, "labels": ["hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-pending", "heterogeneous-pending", "tracking"], "milestone": "CMSSW_14_2_X", "number": 45508, "release-notes": [], "review_comments": 28, "state": "open", "title": "customiser for alpaka patatrack pixel seeding for phase2", "updated_at": "1725366293", "user": "lguzzi"}