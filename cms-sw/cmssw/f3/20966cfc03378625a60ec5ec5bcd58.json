{"additions": 1399, "auther_ref": "JetMatchingEWKFxFx", "auther_sha": "6a878df4c89aa5487201f7dcd3d94e87c0b60b6d", "author": "Cvico", "body": "#### PR description:\r\nThis PR includes a plugin that allows to run an alternative Pythia8 FxFx jet matching prescription. The plugin has been implemented using the `PluginFactory` and the code has been directly taken from the new `JetMaching.h` file that can be found [here](http://amcatnlo.web.cern.ch/amcatnlo/FxFx_merging.htm). As stated in the link, this new jet matching algorithm only works in Pythia8.3 and beyond.\r\n\r\nNew versions of Madgraph5_aMC@NLO (v3.3.0 and beyond) introduce a new clustering procedure that distinguishes between jets that have been generated in a QCD or EWK vertex. This new jet matching prescription is required so the proper treatment of  jets is also accounted for in the parton shower (PS) and matrix element matching step.\r\n\r\nAn example of its usage can be found in [this fragment example](https://github.com/Cvico/cmssw/blob/JetMatchingEWKFxFx/GeneratorInterface/Pythia8Interface/python/FxFxEWK.py). Basically, the user needs to apply two modifications to the common fragments used for FxFx merging:\r\n* Turn off Pythia8 default matching so new matchings can be add applied UserHooks. This can be done by adding the following line into the process parameters of the fragment:\r\n`'JetMatching:doVeto = off',  # Turn OFF Pythia JetMatching`\r\n* Include the new matching as a UserHook via the UserCustmization method.\r\n```\r\n    UserCustomization = cms.VPSet(\r\n           cms.PSet(pluginName = cms.string(\"JetMatchingEWKFxFx\"))\r\n           ),\r\n```\r\n\r\n#### PR validation:\r\n\r\n- Tests using the [local config file](https://github.com/Cvico/cmssw/blob/JetMatchingEWKFxFx/GeneratorInterface/Pythia8Interface/python/FxFxEWK.py) show that the JetMatchingEWKFxFx plugin properly matches between Pythia8.3 and MG33X gridpacks.\r\n    - A set of preliminary results for ttW production can be found [here](https://indico.cern.ch/event/1192555/contributions/5086026/attachments/2525008/4342613/ttWnewFxFxSample_CarlosVico_TMG10oct.pdf).\r\n#### Backporting\r\nIf merged, we aim for backporting this PR to 12_4_X for Run3 MC production.\r\n", "branch": "master", "changed_files": 5, "comments": 29, "commits": 6, "created_at": "1667805798", "deletions": 0, "labels": ["generators-pending", "pending-signatures", "tests-pending", "orp-pending", "hold", "code-checks-approved"], "milestone": "CMSSW_13_0_X", "number": 39996, "release-notes": [], "review_comments": 10, "state": "open", "title": "First working version of the alternative JetMatching for Pythia8.3 and MG5aMCNLO", "updated_at": "1673455072", "user": "Cvico"}