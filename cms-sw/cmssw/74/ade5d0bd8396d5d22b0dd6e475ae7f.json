{"additions": 215, "auther_ref": "BTransition_EDAnalyzer_81X_v0", "auther_sha": "3e05de055435e81ce9e5b1b86ab4c10fb9c8ddef", "author": "diguida", "body": "This code enables to automatically handle condition changes in case of magnetic field transitions using `EventSetup` via GlobalTag, and `PoolDBOutputService`. It was developed during 2015.\n\nThe new analyzer requires as template arguments:\n- the payload class\n- the associated Record\n\nIt grabs the whole information using the GlobalTag at `endRun`:\n1. it retrieves the value of the magnet current from the product delivered by `RunInfoRcd`\n2. it compares the average current with the threshold set by the user in the configuration\n3. it loads the payload from the target tag and the reference payload using the labels of the target Record: the target tag is associated to the empty (default) label, the reference tag is chosen from the label corresponding to B ON or B OFF according to the comparison of the above step\n4. it compares the current payload and the reference payload using an abstract method whose implementation is left to endusers, as they know how to assess whether or not two condition payloads are the same\n5. if the payloads are different, it writes the reference payload into the target tag using `PoolDBOutputService`.\n\nA complete example is provided for the `EcalADCToGeVConstant` class.\n\n@mmusich @franzoni this is something you might want to watch as well.\n", "branch": "CMSSW_8_1_X", "changed_files": 5, "closed_at": "1477487137", "comments": 20, "commits": 2, "created_at": "1476791473", "deletions": 8, "labels": ["comparison-available", "db-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "331b38fb550e47c548d2d111548cd056f4c02ef7", "merged_at": "1477487137", "merged_by": "cmsbuild", "milestone": "Next CMSSW_8_1_X", "number": 16248, "release-notes": [], "review_comments": 4, "state": "closed", "title": "New template one::EDAnalyzer for dealing with B ON/OFF transitions using EventSetup and PoolDBOutputService.", "updated_at": "1478093092", "user": "diguida"}