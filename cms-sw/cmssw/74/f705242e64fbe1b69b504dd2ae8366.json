{"additions": 5, "auther_ref": "reco-HitPattern-read", "auther_sha": "7e71dab5d4bd79f8b4c7db3dd865d08c909ba2ad", "author": "hahnjo", "body": "#### PR description:\r\n\r\nUntil https://github.com/root-project/root/pull/17523, ROOT had a (long-standing) issue that array dimensions would spill into all following source types. To allow the rule to compile with old and new versions of ROOT, move the array source last to work around the issue.\r\n\r\nFor illustration purposes, here is the generated type of onfile before:\r\n```\r\nstruct recocLcLHitPattern_Onfile {\r\n   typedef uint16_t onfile_hitPattern_t[50];\r\n   onfile_hitPattern_t &hitPattern;\r\n   typedef uint8_t onfile_hitCount_t[50];\r\n   onfile_hitCount_t &hitCount;\r\n   typedef uint8_t onfile_beginTrackHits_t[50];\r\n   onfile_beginTrackHits_t &beginTrackHits;\r\n   typedef uint8_t onfile_endTrackHits_t[50];\r\n   onfile_endTrackHits_t &endTrackHits;\r\n   typedef uint8_t onfile_beginInner_t[50];\r\n   onfile_beginInner_t &beginInner;\r\n   typedef uint8_t onfile_endInner_t[50];\r\n   onfile_endInner_t &endInner;\r\n   typedef uint8_t onfile_beginOuter_t[50];\r\n   onfile_beginOuter_t &beginOuter;\r\n   typedef uint8_t onfile_endOuter_t[50];\r\n   onfile_endOuter_t &endOuter;\r\n}\r\n```\r\nand after this change:\r\n```\r\nstruct recocLcLHitPattern_Onfile {\r\n   uint8_t &hitCount;\r\n   uint8_t &beginTrackHits;\r\n   uint8_t &endTrackHits;\r\n   uint8_t &beginInner;\r\n   uint8_t &endInner;\r\n   uint8_t &beginOuter;\r\n   uint8_t &endOuter;\r\n   typedef uint16_t onfile_hitPattern_t[50];\r\n};\r\n```\r\n\r\nAs far as I can tell from quick searches, this is the only rule in CMSSW that is affected by the problem. The only other C-style array is in the other rule targeting `HitPattern` up to version 11, but it only has one `source`.\r\n\r\n#### PR validation:\r\n\r\nNone, rules *should* behave the same.\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nBackport probably not needed.\r\n\r\nFYI @iarspider @smuzaffar @makortel ", "branch": "master", "changed_files": 1, "closed_at": "1738248809", "comments": 8, "commits": 1, "created_at": "1738235933", "deletions": 5, "labels": ["reconstruction-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "tracking", "changes-dataformats"], "merge_commit_sha": "78ffd9aabeeed40bf7db6be90933a88f918d0e58", "merged_at": "1738248809", "merged_by": "cmsbuild", "milestone": "CMSSW_15_0_X", "number": 47209, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Work around ROOT bug in HitPattern IO read rule", "updated_at": "1738249085", "user": "hahnjo"}