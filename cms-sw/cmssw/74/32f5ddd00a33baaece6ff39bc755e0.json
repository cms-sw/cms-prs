{"additions": 102, "auther_ref": "updateAlCaRecoEventContentForRun3_take2", "auther_sha": "cfc58524b38be03b4c46019465a3ee6335d7ca34", "author": "mmusich", "body": "#### PR description:\r\n\r\nUnfortunately PR #38415 aimed to update the event content of the input `ALCARECO` event contents to use S/W FED 1023 information instead of SCAL for all the relevant SiStrip and TkAlignment alcas contained two bugs:\r\n   * in python, when a variable `A` is assigned to another variable `B`, if an operation is done on `B`, the attributes of `A` are changed as well. This has resulted in applying the removal of the content of the  `_run3_common_removedCommands` list even for eras <= Run2.\r\n   * the `ConfigBuilder` uses the `*_noDrop` version of the `ALCARECO` event content to build the list of products to keep, so the instructions gated via the `run3_common` modifier were not effective.\r\n   \r\n   https://github.com/cms-sw/cmssw/blob/36d3f6f602d7f3c2864fdb47505d745598545de8/Configuration/Applications/python/ConfigBuilder.py#L1298\r\n\r\nAs a result of the two bugs, the list of event products to be kept is now wrong for all eras.\r\nThis PR resolves the issue.\r\n\r\n#### PR validation:\r\n\r\nTest running:\r\n```console\r\nrunTheMatrix.py -l 1000.0, 136.874, 138.4 --ibeos\r\n```\r\nand checked the event content of the `SiStripCalMinBias` ALCARECO file, in order to test the Run1, Run2 and Run3 eras.\r\nIn addition I've also produced ALCARECO data, starting from RAW and the ConfigDP machinery using the command:\r\n\r\n```console\r\npython3 Configuration/DataProcessing/test/RunExpressProcessing.py --nThreads 8 --scenario ppEra_Run3 --global-tag 124X_dataRun3_Express_v3 --lfn root://eoscms.cern.ch//eos/cms/tier0/store/data//Run2022A/MinimumBias/RAW/v1/000/352/929/00000/18df5589-67c8-45e5-ac84-7fd2472de50a.root --fevt --dqmio --alcarecos SiStripCalMinBias\r\n```\r\n\r\nand obtained the right event content:\r\n\r\n```console\r\nFile output_inALCARECO.root Events 13\r\nBranch Name | Average Uncompressed Size (Bytes/Event) | Average Compressed Size (Bytes/Event) \r\nSiStripClusteredmNewDetSetVector_siStripClusters__RECO. 51212.1 13165.5\r\nSiPixelClusteredmNewDetSetVector_siPixelClusters__RECO. 16359.7 6596.46\r\nrecoTrackExtras_ALCARECOSiStripCalMinBias__RECO. 1641.15 1066.77\r\nSiStripClusteredmNewDetSetVector_ALCARECOSiStripCalMinBias__RECO. 3236.77 871.923\r\nTrackingRecHitsOwned_ALCARECOSiStripCalMinBias__RECO. 4918.23 813.692\r\nrecoTracks_ALCARECOSiStripCalMinBias__RECO. 1793.77 800.615\r\nSiPixelClusteredmNewDetSetVector_ALCARECOSiStripCalMinBias__RECO. 1216.54 559.385\r\nDetIdedmEDCollection_siStripDigis__RECO. 2081.62 280.231\r\nedmTriggerResults_TriggerResults__HLT. 1847.85 245.231\r\nOnlineLuminosityRecord_onlineMetaDataDigis__RECO. 230.538 210.846\r\nL1AcceptBunchCrossings_scalersRawToDigi__RECO. 209.769 198.462\r\nL1GlobalTriggerReadoutRecord_gtDigis__RECO. 261.923 196.385\r\nedmTriggerResults_TriggerResults__RECO. 263.846 191.846\r\nDCSRecord_onlineMetaDataDigis__RECO. 278.538 184.077\r\nEventProductProvenance 2428.31 162\r\nEventAuxiliary 160.385 43.4615\r\nEventSelections 120.769 17.6154\r\nBranchListIndexes 68.5385 12.2308\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport, but will need to be backported to 12.4.X.", "branch": "master", "changed_files": 17, "comments": 2, "commits": 2, "created_at": "1656934938", "deletions": 106, "labels": ["alca-pending", "pending-signatures", "tests-pending", "orp-pending", "bug-fix", "urgent", "code-checks-pending", "trk"], "milestone": "CMSSW_12_5_X", "number": 38590, "release-notes": [], "review_comments": 0, "state": "open", "title": " Fix to \"Update SiStrip and TkAlignment ALCARECO event content for Run3\"", "updated_at": "1656935004", "user": "mmusich"}