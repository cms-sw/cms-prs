{"additions": 4, "auther_ref": "enum_to_int_bug_fix", "auther_sha": "415bea7e7aab496ffbdf43dc3b382c6f2c6f57e1", "author": "drkovalskyi", "body": "There is a subtle problem with python type conversion from signed enums to basic types. In some cases it converts negative enums to an unsigned int. For example instead of -10 you get 4294967286. This problem was report to ROOT team, but it was never fixed. \r\nIt's very easy to miss this problem and unfortunately one cannot rely on enum checks to avoid it, since for example ROOT.reco.GhostMuonFromGaugeOrHiggsBoson evaluates to -10 as it should, but simExtType() returns 4294967286.\r\nThe current workaround is documented on Muon POG twiki, but it's not a reliable solution. People (including me keep rediscovering this problem).\r\nhttps://twiki.cern.ch/twiki/bin/view/CMS/SWGuideMuonIdRun2#SimHit_Muon_matching_since_CMSSW\r\n\r\nThe pull request provides a trivial fix - return int instead of the enum. I know it's ugly, but getting wrong physics results is worse.\r\n", "branch": "master", "changed_files": 1, "closed_at": "1576508399", "comments": 43, "commits": 1, "created_at": "1555070856", "deletions": 2, "labels": ["analysis-pending", "code-checks-approved", "comparison-available", "hold", "orp-pending", "pending-signatures", "reconstruction-rejected", "requires-external", "tests-approved"], "milestone": "CMSSW_11_1_X", "number": 26446, "release-notes": [], "review_comments": 2, "state": "closed", "title": "[muon] a workaround for enum to int conversion problem in pyROOT", "updated_at": "1576508399", "user": "drkovalskyi"}