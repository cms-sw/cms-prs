{"additions": 25, "auther_ref": "mm_refurbish_HLT_DQM_14_0X", "auther_sha": "14961a1f62a058d908f45ff311010b0cd4157e78", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/46245\r\n\r\n#### PR description:\r\n\r\nThis PR bundles together a couple of fixes for the HLT online DQM:\r\n   * I noticed looking at the [Pixel residuals @HLT plots](https://cmsweb.cern.ch/dqm/online/start?runnr=386554;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=Everything;size=M;root=HLT/Pixel/Tracks/PXBarrel;focus=;zoom=no;) in recent runs that they were empty. Looking at the [dqm-square log](https://cmsweb.cern.ch/dqm/dqm-square/api?what=get_logs&id=dqm-source-state-run386554-hostdqmfu-c2b03-45-01-pid2856735&db=production) for that run, I also saw a bunch of errors of the type:\r\n   ```\r\n   %MSG-w TrackProducerBase:  TrackRefitter:hltrefittedForPixelDQM  03-Oct-2024 22:56:25 CEST Run: 386554 Event: 2607599\r\n BeamSpot is not valid\r\n%MSG\r\n%MSG-e TrackRefitter:  TrackRefitter:hltrefittedForPixelDQM  03-Oct-2024 22:56:25 CEST Run: 386554 Event: 2607599\r\n BeamSpot is (0,0,0), it is probably because is not valid in the event\r\n%MSG\r\n   ```\r\n   I believe the issue is that the current `hltrefittedForPixelDQM` instance clones the one used for offline (`refittedForPixelDQM`) which ultimately clones the template with the offline parameters:\r\n   \r\n   https://github.com/cms-sw/cmssw/blob/180e6a5c307a65a434208d7d55abda866eb9094e/RecoTracker/TrackProducer/python/TrackRefitter_cfi.py#L5\r\n   \r\n   * secondly, also looking at the [HLT quick collection](https://cmsweb.cern.ch/dqm/online/start?runnr=386554;dataset=/Global/Online/ALL;sampletype=online_data;filter=all;referencepos=overlay;referenceshow=customise;referencenorm=True;referenceobj1=refobj;referenceobj2=none;referenceobj3=none;referenceobj4=none;search=;striptype=object;stripruns=;stripaxis=run;stripomit=none;workspace=HLT;size=M;root=Quick%20collection;focus=;zoom=no;) many of the plots are empty, I believe due the usage of deprecated trigger paths in input \r\n   \r\nThe two issues are addressed at cedbc3be23c7eb800d9f3695c5a2047f6215bc40 and cedbc3be23c7eb800d9f3695c5a2047f6215bc40 respectively.\r\n\r\n#### PR validation:\r\n\r\nSee results of the DQM playback in the master version: https://github.com/cms-sw/cmssw/pull/46245#issuecomment-2393625771\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nVerbatim backport of #46245 to CMSSW_14_0_X for 2024 data-taking operations.", "branch": "CMSSW_14_0_X", "changed_files": 4, "comments": 4, "commits": 2, "created_at": "1728371806", "deletions": 24, "labels": ["dqm-pending", "hlt-pending", "pending-signatures", "orp-pending", "tests-started", "bug-fix", "backport-ok"], "milestone": "CMSSW_14_0_X", "number": 46302, "release-notes": [], "review_comments": 0, "state": "open", "title": "[14.0.X] Miscellaneous fixes for HLT online DQM", "updated_at": "1728371846", "user": "mmusich"}