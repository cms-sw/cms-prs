{"additions": 32, "auther_ref": "moveDiMuonMassBiasClientToHarvestingPath_12_4_X", "auther_sha": "1ec6145bdfe368436bfcdb5a795c0eea8829c535", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/39217\r\n\r\n#### PR description:\r\n\r\nInspired by the discussion at https://github.com/cms-sw/cmssw/issues/39180#issuecomment-1227738895 I move the `DiMuonMassBiasClient` to a regular harvesting path, actually into the `DQMHarvestMuon` sequence which as per `autoDQM` is run in the `@muon` sequence\r\n\r\nhttps://github.com/cms-sw/cmssw/blob/d9d4aec32230b7d62e51c4622dfd654e8cea106a/DQMOffline/Configuration/python/autoDQM.py#L96-L99\r\n\r\nthat would be run at Tier-0 for the `Muon` PD (cf also: https://github.com/dmwm/T0/blob/0f4f9d27c5366da57c456c4ae01da81c75524595/etc/ProdOfflineConfiguration.py#L698)\r\n\r\nI profit of this PR to remove [remove useless DMQToken produce and consumes](https://github.com/cms-sw/cmssw/commit/a5bab3b6c16061202c6fb8bbb6af0c0848d8a40a) as pointed out in https://github.com/cms-sw/cmssw/issues/39180#issuecomment-1227738895\r\n\r\n#### PR validation:\r\n\r\nRun successfully several workflows [that were failing](https://cmssdt.cern.ch/SDT/html/cmssdt-ib/#/relVal/CMSSW_12_5/2022-08-24-2300?selectedArchs=el8_amd64_gcc10&selectedFlavors=X&selectedStatus=failed) before issue https://github.com/cms-sw/cmssw/issues/39180 was solved in threading mode:\r\n\r\n```console\r\nrunTheMatrix.py -nel 1000.0,10042.0,10842.0 -j 8 -t 4\r\n```\r\n\r\nEDIT:\r\nunfortunately I could not find a RelVal workflow in the matrix that mimics Tier0 in this respect (i.e. that runs `ALCA:TkAlDiMuonAndVertex` in the same step as DQM and then a regular harvesting, so I've created one for this purpose: 1002.4.\r\n\r\nafter that I've tested with :\r\n```console\r\nrunTheMatrix.py -l 1002.4 -t 4 -j 8 --ibeos\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nbackport of https://github.com/cms-sw/cmssw/pull/39217 needed for data-taking purposes.", "branch": "CMSSW_12_4_X", "changed_files": 8, "comments": 9, "commits": 3, "created_at": "1661837438", "deletions": 16, "labels": ["dqm-approved", "pending-signatures", "tests-approved", "orp-pending", "pdmv-pending", "upgrade-approved", "backport-ok"], "milestone": "CMSSW_12_4_X", "number": 39248, "release-notes": [], "review_comments": 0, "state": "open", "title": "[12.4.X] Move `DiMuonMassBiasClient` to a regular harvesting path", "updated_at": "1661946575", "user": "mmusich"}