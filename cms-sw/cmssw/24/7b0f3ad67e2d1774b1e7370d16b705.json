{"additions": 493, "auther_ref": "SiPixel_PayloadInspector_Quality_Maps_Improved", "auther_sha": "85c9df339b45aea7b8296dda11b4c01b14db378f", "author": "mmusich", "body": "#### PR description:\r\n\r\nThe main goal of this PR is to improve the graphical appearance of plots produced with the pixel payload inspector, specifically for the `SiPixelQuality` flavour.\r\nIn doing so the class `Phase1PixelROCMaps` had to be changed in order to:\r\n   * print the name of the tag and IOVs in the plot header (commit https://github.com/cms-sw/cmssw/commit/69821a20ff3ad43cc2190be44f7487c3df1efcf3);\r\n   * support the case of diffing two payloads (commits 56dba64 and 85c9df339b45aea7b8296dda11b4c01b14db378f); \r\n   \r\nAll classes depending on that had to be modified accordingly (done in commits 2bb3909, https://github.com/cms-sw/cmssw/commit/ef689cd86748caea0384661aa8b7993763adde4c,  6e9c712)\r\nI profit of this PR to do some additional clean-up:\r\n   * update the scram architecture in all the test scripts (commit ea3a58c )\r\n   * mark all the methods implemented in the Phase1PixelROCMaps header as `inline`d (see PR #33366) (commit https://github.com/cms-sw/cmssw/pull/34071/commits/f52b3946d61a683889e34d940510160ceda3e44e)\r\n   * fix a mistake in one of the comments (commit b5ddb04db2d64355d94737c6cff23d05499f3f07 )\r\n\r\n#### PR validation:\r\n\r\nUnit tests of the package run successfully.\r\nIn addition run the following script:\r\n```bash\r\n#!/bin/sh\r\n\r\nW_DIR=$(pwd)\r\nmkdir -p $W_DIR/myplots\r\n\r\ngetPayloadData.py --plugin pluginSiPixelQuality_PayloadInspector --plot plot_SiPixelFullQualityMap --tag SiPixelQuality_phase1_2018_permanentlyBad --time_type Lumi --iovs '{\"start_iov\": \"1\", \"end_iov\": \"1\r\n\"}' --db Prod --test ;\r\nmv *.png $W_DIR/myplots/SiPixelQuality_phase1_2018_permanentlyBad.png\r\n\r\ngetPayloadData.py --plugin pluginSiPixelQuality_PayloadInspector --plot plot_SiPixelFullQualityMap --tag SiPixelQuality_phase1_2021_v2 --time_type Lumi --iovs '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --db Pro\r\nd --test ;\r\nmv *.png $W_DIR/myplots/SiPixelQuality_phase1_2021_v2.png\r\n\r\ngetPayloadData.py --plugin pluginSiPixelQuality_PayloadInspector --plot plot_SiPixelFullQualityMapCompareTwoTags --tag SiPixelQuality_phase1_2021_v2 --tagtwo SiPixelQuality_phase1_2018_permanentlyBad --ti\r\nme_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --iovstwo '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --db Prod --test ;\r\nmv *.png $W_DIR/myplots/SiPixelQuality_diff.png\r\n\r\ngetPayloadData.py --plugin pluginSiPixelQuality_PayloadInspector --plot plot_SiPixelBPixQualityMapCompareTwoTags --tag SiPixelQuality_phase1_2021_v2 --tagtwo SiPixelQuality_phase1_2018_permanentlyBad --ti\r\nme_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --iovstwo '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --db Prod --test ;\r\nmv *.png $W_DIR/myplots/SiPixelQuality_BPIX_diff.png\r\n\r\ngetPayloadData.py --plugin pluginSiPixelQuality_PayloadInspector --plot plot_SiPixelFPixQualityMapCompareTwoTags --tag SiPixelQuality_phase1_2021_v2 --tagtwo SiPixelQuality_phase1_2018_permanentlyBad --ti\r\nme_type Run --iovs '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --iovstwo '{\"start_iov\": \"1\", \"end_iov\": \"1\"}' --db Prod --test ;\r\nmv *.png $W_DIR/myplots/SiPixelQuality_FPIX_diff.png\r\n```\r\nand obtained [the following plots](http://musich.web.cern.ch/musich/display/myplots/).\r\n\r\nI post one specific example here:\r\n![image](https://user-images.githubusercontent.com/5082376/121430672-abc4ec00-c978-11eb-922b-46e70f8194d6.png)\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNot a backport, no backport is needed.\r\n\r\nCC: @tvami @tsusa ", "branch": "master", "changed_files": 19, "closed_at": "1623749629", "comments": 15, "commits": 9, "created_at": "1623267860", "deletions": 417, "labels": ["code-checks-approved", "db-approved", "dqm-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "f28b1c9edfd16f0d9865fdaeab9ca983c6763a99", "merged_at": "1623749629", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 34071, "release-notes": [], "review_comments": 2, "state": "closed", "title": "[SiPixel Payload Inspector] Quality Maps Improved", "updated_at": "1623749630", "user": "mmusich"}