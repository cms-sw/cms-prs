{"additions": 4985, "auther_ref": "beamspot-dipserver", "auther_sha": "4afff32af4dda91154abb14631c993410290eb1d", "author": "sikler", "body": "#### PR description:\r\n\r\n- the aim was to get rid of the java-based DIP server (DQM/BeamMonitor/test/dip/BeamSpotDipServer.java) used in the past 10 years to transmit beamspot information to LHC\r\n- detailed information on the Data Interchange Protocol is at https://readthedocs.web.cern.ch/display/ICKB/DIP+and+DIM\r\n- our beamspot server is now rewritten in C++, in the form of a normal DQM client\r\n- the central piece of code is the plugin DQM/BeamMonitor/plugins/BeamSpotDipServer.{cc,h}, the config at DQM/BeamMonitor/python: BeamSpotDipServer_cff.py, and the live client at DQM/Integration/python/clients/beamspotdip_dqm_sourceclient-live_cfg.py\r\n- it uses _two external tools_: dip (version 5.7.0) and log4cplus, in fact log4cplus is containted in the dip distribution, available at https://readthedocs.web.cern.ch/display/ICKB/DIP+API; the shared objects compiled with gcc 4.8.6\r\n- for the moment the necessary files from the external tool dip is provided locally (DQM/BeamMonitor/dip-5.7.0), and configured locally with scram setup (DQM/BeamMonitor/dip-5.7.0/dip.xml)\r\n- the client checks the result of the previous beamspot fit at the end of each lumisection (in dqmEndLuminosityBlock); for now it looks at files containing the last beamspot fit and the actual status of the tracker under /nfshome0/dqmpro/BeamMonitorDQM/.\r\n\r\n#### PR validation:\r\n\r\n- compiles and runs on lxplus without warning or error message\r\n- test using a working DIP browser or java application is _not yet possible_ (javaws is not supported anymore, jws is not available neither on the technical network, nor lxplus; the page https://dash.web.cern.ch/DIP/ does not work)\r\n- question: get rid of /nfshome0 files and read directly the beamspot information from database? problem: we still need access to the status of the tracker /nfshome0/dqmpro/BeamMonitorDQM/BeamFitResults_TkStatus.txt, can it be obtained from other sources?", "branch": "master", "changed_files": 114, "closed_at": "1612793099", "comments": 5, "commits": 52, "created_at": "1612790431", "deletions": 860, "labels": ["alca-pending", "code-checks-rejected", "core-pending", "dqm-pending", "geometry-pending", "hlt-pending", "l1-pending", "orp-pending", "pdmv-pending", "pending-signatures", "reconstruction-rejected", "simulation-pending", "tests-pending", "upgrade-pending"], "milestone": "CMSSW_11_3_X", "number": 32841, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Beamspot dipserver", "updated_at": "1612793111", "user": "sikler"}