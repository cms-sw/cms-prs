{"additions": 135, "auther_ref": "bugfix/ticl_barrel_dst_sequence", "auther_sha": "5fff595e2b32bfcdbc2e27ff27f56d1ffd780eb8", "author": "bfonta", "body": "The PR addresses a series of optimizations and bugfixes concerning TICL-barrel at HLT.\r\n\r\n#### List of fixes\r\n\r\n+ fix ```RecHitTools::isBarrel```\r\n+ ensure an empty ```barrelRecHitMap``` is produced whenever its HGCal counterpart is not valid\r\n+ replace ```SimCluster::endcap_hits_and_fractions``` and ```SimCluster::barrel_hits_and_fractions``` by ```SimCluster::filtered_hits_and_fractions``` to remove code duplication\r\n+ simplify ```SimCalorimetry/HGCalAssociatorProducers/plugins/LCToCPAssociatorByEnergyScoreProducer.cc``` and ```SimCalorimetry/HGCalAssociatorProducers/plugins/LCToSCAssociatorByEnergyScoreProducer.cc```\r\n+ fix ```LCToSCAssociatorEDProducer::fillDescriptions()```\r\n+ optimize ```Validation/HGCalValidation/src/BarrelVHistoProducerAlgo.cc``` in the number of layers being used by 2 orders of magnitude\r\n+ use the recommended approach to read handles from tokens\r\n+ fix minor typos\r\n+ part of the original PR was moved into #48756 to speed-up its integration.\r\n\r\n#### PR validation:\r\n\r\nTested with the following command on top of ```CMSSW_15_1_0_pre5```:\r\n\r\n```bash\r\nNEVENTS=24\r\nGEOM=\"ExtendedRun4D110\"\r\nERA=\"Phase2C17I13M9\"\r\nCONDS=\"auto:phase2_realistic_T33\"\r\nPROCMODS=\"alpaka,ticl_barrel,ticl_v5\"\r\nVALIDSEQ=\"@hltValidation\"\r\nHLTSEQ=\"NGTScouting\"\r\n\r\nfunction mystep2() {\r\n    cmsDriver.py step2 -s L1P2GT,HLT:\"${HLTSEQ}\",DQM:trackingMonitorHLT,VALIDATION:\"${VALIDSEQ}\" \\\r\n         --conditions \"${CONDS}\" \\\r\n         --datatier GEN-SIM-DIGI-RAW,DQMIO \\\r\n         -n ${NEVENTS} \\\r\n         --eventcontent FEVTDEBUGHLT,DQMIO \\\r\n         --geometry \"${GEOM}\" \\\r\n         --era \"${ERA}\" \\\r\n         --procModifier \"${PROCMODS}\" \\\r\n         --customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000 \\\r\n         --filein file:/eos/cms/store/relval/CMSSW_15_1_0_pre5/RelValTTbar_14TeV/GEN-SIM-DIGI-RAW/PU_150X_mcRun4_realistic_v1_STD_Run4D110_PU-v1/2580000/fc4d8a79-582f-4a08-8fbd-190e161cfdaf.root \\\r\n         --fileout file:step2.root \\\r\n         --nThreads 24 \\\r\n         --process HLTX \\\r\n         --inputCommands='keep *, drop *_hlt*_*_HLT, drop triggerTriggerFilterObjectWithRefs_l1t*_*_HLT' \r\n}\r\n\r\nfunction mystep3() {\r\n    cmsDriver.py step3 -s HARVESTING:\"${VALIDSEQ}\" \\\r\n         --conditions \"${CONDS}\" \\\r\n         --mc \\\r\n         --geometry \"${GEOM}\" \\\r\n         --scenario pp \\\r\n         --filetype DQM \\\r\n         --era \"${ERA}\" \\\r\n         --procModifier \"${PROCMODS}\" \\\r\n         -n ${NEVENTS}  \\\r\n         --filein file:step2_inDQM.root \\\r\n         --fileout file:step3.root\r\n}\r\n\r\nmystep2 && mystep3\r\n```\r\n\r\n", "branch": "master", "changed_files": 23, "comments": 113, "commits": 20, "created_at": "1752747765", "deletions": 131, "labels": ["reconstruction-pending", "simulation-pending", "dqm-pending", "core-approved", "pending-signatures", "tests-approved", "orp-pending", "bug-fix", "upgrade-pending", "code-checks-approved", "ngt", "allow-bfonta"], "milestone": "CMSSW_16_0_X", "number": 48565, "release-notes": [], "review_comments": 2, "state": "open", "title": "Bugfixes to TICL-barrel", "updated_at": "1759928318", "user": "bfonta"}