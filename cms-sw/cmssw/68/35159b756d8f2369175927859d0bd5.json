{"additions": 7, "auther_ref": "CMSSW_10_2_0_pre1/sign1012/DP-merge-decouple", "auther_sha": "a46262936096822c49b2b8537beaa5b79e08b973", "author": "slava77", "body": "This should resolve #22933 \r\nThe immediate problem is for Configuration/DataProcessing/python/Scenario.py, which defines the T0 config driver for production workflows:\r\n- the Merge.py is needed for file merging functionality of the Scenario.py\r\n- the EventContent_cff has to be also loaded for RECO or similar workflows and is normally supposed to be loaded only after the cms.Process object with a relevant era is created (done in the ConfigBuilder.py)\r\n- In the current state the EventContent_cff is loaded in Merge.py for RECO and similar workflows before  cms.Process object is defined. This is a bug.\r\n\r\nThis fix simply restricts loading of the EventContent_cff in the Merge.py only in merging context for NANO AOD purposes.\r\n\r\nTests:\r\n``` python $CMSSW_BASE/src/Configuration/DataProcessing/test/RunMerge.py  --input-files file:a.root --output-file file:b.root --mergeNANO```\r\nand then config dump to see that the result is as expected. The RunMerge is also made aware of mergeNANO.\r\n\r\n```python $CMSSW_BASE/src/Configuration/DataProcessing/test/RunPromptReco.py --scenario ppEra_Run2_2017_pp_on_XeXe --reco --aod --miniaod --dqmio --global-tag 92X_dataRun2_Express_v7 --lfn=file:raw.root```\r\nand then dump to see that _hiCentrality name  actually shows up in the keep statements\r\n\r\n", "branch": "master", "changed_files": 2, "closed_at": "1523501142", "comments": 14, "commits": 4, "created_at": "1523471370", "deletions": 5, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "operations-approved", "orp-approved", "tests-approved"], "merge_commit_sha": "3a91cadc0992d577f8b1b8fdad5b887e011d4c92", "merged_at": "1523501141", "merged_by": "cmsbuild", "milestone": "CMSSW_10_2_X", "number": 22938, "release-notes": [], "review_comments": 0, "state": "closed", "title": "decouple EventContent_cff load from general purpose use of Merge.py", "updated_at": "1523511749", "user": "slava77"}