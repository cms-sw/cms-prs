{"additions": 40, "auther_ref": "L1emulator_L1TNtuples_LLPtrig", "auther_sha": "e757f7bac7ee1383ae0fb9007ba961ba123eb90b", "author": "gk199", "body": "#### PR description:\r\n\r\nThis PR implements the L1 emulator of the LLP displaced jet trigger algorithm. Calo L1 takes the 6 fine grain bits from the HCAL uHTR (PRs [#34600](https://github.com/cms-sw/cmssw/pull/34600) and [#35599](https://github.com/cms-sw/cmssw/pull/35599)) and uses a 6:1 LUT to set a single bit of tower hwQual based on the logical OR of the timing and depth information. The Calo L2 jet algorithm flags a jet as delayed if there are >= 2 flagged towers within the 9x9 jet region. This is saved in the LSB of jet.hwQual, 1 if jet is flagged as containing an LLP, 0 otherwise. L1 and L2 firmware updates have been completed. \r\n\r\nThe uGT emulator follows, and is implemented in recent PR [#36868](https://github.com/cms-sw/cmssw/pull/36858). L1 Menu Tools is in the process of being updated to include the displaced jet bit, in PR [#74](https://github.com/cms-l1-dpg/L1MenuTools/pull/74).\r\n\r\nThe L1 seed JIRA ticket, including slides detailing the testing of the L1 emulator and links to relevant presentations, is [here](https://its.cern.ch/jira/browse/CMSLITDPG-963). Slides 2-10 focus on the L1 emulator implementation and validation tests. \r\n\r\nThe emulator implementation has been presented at [L1 Trigger CMS Week](https://indico.cern.ch/event/1072305/contributions/4513777/attachments/2308783/3928427/HCAL_L1TCMSweek_14Sept.pdf) and to the [HCAL Trigger](https://indico.cern.ch/event/1069597/contributions/4497838/attachments/2299267/3914153/HCALtrigger_27August.pdf) group.\r\n\r\nAdditionally, the L1TNtuples are updated to store the jet hwQual information (in `L1AnalysisL1Upgrade.cc` and `L1AnalysisL1UpgradeDataFormat.h`). Tested by myself and @elfontan.\r\n\r\nA single comment in `HcalFinegrainBit.cc` is updated to reflect the correct assignment of the 6 fine grain bits from the uHTR. \r\n\r\n#### PR validation:\r\n\r\nPassed runTheMatrix.py tests. Tested in CMSSW_12_3_X_2022-02-08-1100.", "branch": "master", "changed_files": 7, "closed_at": "1645109905", "comments": 28, "commits": 6, "created_at": "1644417103", "deletions": 11, "labels": ["l1-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "988e2933bdd127ac2ae15f23a45693d28d1c61f2", "merged_at": "1645109905", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36919, "release-notes": [], "review_comments": 2, "state": "closed", "title": "L1 emulator for LLP displaced jet trigger (L1 6:1 LUT, L2 jet algo), L1TNtuples addition of jet hwQual", "updated_at": "1645109906", "user": "gk199"}