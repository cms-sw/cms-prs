{"additions": 103, "auther_ref": "hlt-crash-diag", "auther_sha": "4b8c72c254af6542422adbe13fabc268c3bb5f65", "author": "cms-AlCaDB", "body": "#### PR description:\r\n\r\nPrinting more diagnostics to help with investigating https://github.com/cms-sw/cmssw/issues/45555\r\nContinuation of https://github.com/cms-sw/cmssw/pull/46395\r\n\r\nAllows to define a list of records using `recordsToDebug` parameter of `CondDBESSource` for which additional debug information is printed:\r\n* When loading a tag or when setting IOV interval (in ProductResolverWrapperBase)\r\n* When fetching IOV sequence (in IOVProxy)\r\n\r\n#### PR validation:\r\n\r\nTested with:\r\n\r\n```\r\n#!/bin/bash -ex\r\n\r\nhltGetConfiguration /dev/CMSSW_15_0_0/GRun \\\r\n   --globaltag 150X_dataRun3_HLT_v1 \\\r\n   --data \\\r\n   --unprescale \\\r\n   --output minimal \\\r\n   --max-events 10 \\\r\n   --eras Run3_2024 --l1-emulator uGT --l1 L1Menu_Collisions2024_v1_3_0_xml \\\r\n   --input /store/data/Run2024I/EphemeralHLTPhysics0/RAW/v1/000/386/593/00000/91a08676-199e-404c-9957-f72772ef1354.root \\\r\n   > hlt.py\r\n\r\n\r\ncat <<@EOF >> hlt.py\r\nprocess.options.wantSummary = True\r\nprocess.options.numberOfThreads = 1\r\nprocess.options.numberOfStreams = 0\r\n@EOF\r\n```\r\n\r\nNow the hlt.py produced by above code was edited to provide the list of records to debug:\r\nadd `recordsToDebug = cms.untracked.vstring(\"BeamSpotOnlineHLTObjectsRcd\")`\r\nto the parameters of `PoolDBESSource`:\r\n```\r\nprocess.GlobalTag = cms.ESSource( \"PoolDBESSource\",\r\n    ...\r\n    pfnPrefix = cms.untracked.string( \"\" ),\r\n    recordsToDebug = cms.untracked.vstring(\"BeamSpotOnlineHLTObjectsRcd\")\r\n)\r\n```\r\n\r\nNow it can be run by:\r\n```\r\ncmsRun hlt.py &> hlt.log\r\n```\r\n\r\n\r\nAdditionally tested on CMSSW_14_0_11 with a scenario directly from #45555:\r\n```\r\n#!/bin/bash -ex\r\n\r\n# originally on CMSSW_14_0_11_MULTIARCHS\r\n\r\nhltGetConfiguration run:383631 \\\r\n--globaltag 140X_dataRun3_HLT_v3 \\\r\n--data \\\r\n--no-prescale \\\r\n--no-output \\\r\n--max-events -1 \\\r\n--input '/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0444_index000423_fu-c2b14-43-01_pid675389.root,/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0445_index000025_fu-c2b14-43-01_pid675389.root,/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0666_index000047_fu-c2b14-43-01_pid675067.root,/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0445_index000002_fu-c2b14-43-01_pid675389.root,/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0666_index000027_fu-c2b14-43-01_pid675067.root,/store/group/tsg/FOG/error_stream_root/run383631/run383631_ls0666_index000065_fu-c2b14-43-01_pid675067.root' > hlt.py\r\n\r\ncat <<@EOF >> hlt.py\r\nprocess.options.wantSummary = True\r\nprocess.options.numberOfThreads = 1\r\nprocess.options.numberOfStreams = 0\r\n@EOF\r\n```\r\n\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\n15_0: #47619", "branch": "master", "changed_files": 9, "comments": 52, "commits": 1, "created_at": "1737650173", "deletions": 29, "labels": ["alca-approved", "fully-signed", "tests-approved", "orp-pending", "db-approved", "code-checks-approved"], "milestone": "CMSSW_15_1_X", "number": 47171, "release-notes": [], "review_comments": 22, "state": "open", "title": "Print diagnostics on ProductResolver's loadTag setIntervalFor and IOVProxy's fetchSequence", "updated_at": "1743531624", "user": "JanChyczynski"}