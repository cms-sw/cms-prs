{"additions": 11, "auther_ref": "fix-HGCTriggerDetId-clang", "auther_sha": "b717fccedb174d3a5f5745fd54022fb501e2cf4d", "author": "davidlt", "body": "The patch resolves issue with Clang compiler.\n\nN3690 (should be C++11 standard) and latest draft N4567, 9.4.2/3\n\n...\nThe member shall still be defined in a namespace scope if it\nis odr-used (3.2) in the program and the namespace scope definition\nshall not contain an initializer.\n9.4.2/4 talks about how const static data members are being handled.\n\nAlso standard says that no diagnostic is required by compiler.\n\nThe following undefined references were reported by linker:\n\n```\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x61): undefined reference to GCTriggerDetId::cell_mask'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x6e): undefined reference to GCTriggerDetId::cell_shift'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x7b): undefined reference to GCTriggerDetId::sector_mask'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x85): undefined reference to GCTriggerDetId::sector_shift'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x94): undefined reference to GCTriggerDetId::module_mask'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0x9e): undefined reference to GCTriggerDetId::module_shift'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0xad): undefined reference to GCTriggerDetId::layer_mask'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0xb7): undefined reference to GCTriggerDetId::layer_shift'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0xc6): undefined reference to GCTriggerDetId::zside_mask'\nDataFormats/ForwardDetId/src/HGCTriggerDetId.cc:(.text+0xcf): undefined reference to GCTriggerDetId::zside_shift'\n```\n\nThese are odr-used because\n\n```\ninline void setMaskedId( const uint32_t value, const uint32_t &shift, const uint32_t &mask )\n```\n\n2nd and 3rd arguments are passed by a reference.\n\nSigned-off-by: David Abdurachmanov David.Abdurachmanov@cern.ch\n", "branch": "CMSSW_8_1_X", "changed_files": 1, "closed_at": "1460655025", "comments": 8, "commits": 1, "created_at": "1460629625", "deletions": 0, "labels": ["comparison-available", "fully-signed", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "dc34dda42abac23c94478f0bac1554fba9b7a14d", "merged_at": "1460655025", "merged_by": "cmsbuild", "milestone": "Next CMSSW_8_1_X", "number": 14069, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Fix compilation with Clang (3.7.1)", "updated_at": "1460655026", "user": "davidlt"}