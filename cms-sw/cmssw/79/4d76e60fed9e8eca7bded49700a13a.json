{"additions": 112, "auther_ref": "EF_L1Tfixes", "auther_sha": "9699119ae59f5f388bd8705245158438bf32e698", "author": "elfontan", "body": "#### PR description:\r\nThis PR includes some updates related to the L1 trigger emulation:  \r\n  - Updates of some producers used to produce L1TNtuples that were causing warnings because they were legacy modules: \r\n L1UpgradeTfMuonTreeProducer, L1UpgradeTreeProducer, L1HOTreeProducer, L1EventTreeProducer.\r\n  - Update of the L1TExtCondProducer, where a problem related to the usage of the hltGetConfiguration command for MC (uGT only, not FullMC) occured. The issue is related to the configuration file [SimL1EmulatorRepack_uGT_cff](https://github.com/cms-sw/cmssw/blob/master/Configuration/StandardSequences/python/SimL1EmulatorRepack_uGT_cff.py#L25-L27), where _simGtExtFakeStage2Digis.tcdsRecordLabel_ is modified both for data and MC. However, the label _InputTag(\"unpackTcds\",\"tcdsRecord\")_ for MC implies some checks in the L1ExtCondProducer that are failing. After some investigation, it seems that this tcdsRecordLabel and related input tag should be used as InputTag(\"unpackTcds\",\"tcdsRecord\") only for data. The implemented fix allows to consider all different scenarios in a proper way: FullMC (InputTag empty --> no checks), Full (InputTag (\"unpackTcds\",\"tcdsRecord\") and real data), uGT data (InputTag  (\"unpackTcds\",\"tcdsRecord\") and real data), uGT MC (InputTag  (\"unpackTcds\",\"tcdsRecord\") BUT not real data --> checks skipped).\r\n  - Fix of the L1MenuViewer to avoid an exception MustUseESGetToken.\r\n  - Update of the script use to produce test vectors including example files produced with CMSSW_12X and a small fix needed for the migration to Python3.\r\n\r\n#### PR validation:\r\nBasic tests performed successfully starting from CMSSW_12_3_X_2022-01-26-1100. \r\nFrom CMSSW_12_3_X_2022-01-26-1100/src:\r\n> scram b distclean \r\n> git cms-checkdeps -a -A\r\n> scram b -j 8\r\n> scram b runtests\r\n> scram build code-checks\r\n> scram build code-format\r\n> runTheMatrix.py -l limited -i all --ibeos\r\n\r\n\r\n", "branch": "master", "changed_files": 7, "closed_at": "1643821912", "comments": 27, "commits": 8, "created_at": "1643578374", "deletions": 134, "labels": ["l1-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "d732e13e7687d43c610290d83d57811c3d4e8343", "merged_at": "1643821912", "merged_by": "cmsbuild", "milestone": "CMSSW_12_3_X", "number": 36839, "release-notes": [], "review_comments": 10, "state": "closed", "title": "Update of some L1T producers for L1TNtuples (legacy modules), of the L1TExtCondProducer, and of the L1MenuViewer ", "updated_at": "1643821912", "user": "elfontan"}