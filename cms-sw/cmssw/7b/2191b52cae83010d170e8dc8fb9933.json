{"additions": 375, "auther_ref": "from-CMSSW_12_0_X_2021-05-27-1100-DQM-B904", "auther_sha": "093bbf115c73c36d460da2ec996c7c1015a5bd3a", "author": "dildick", "body": "#### PR description:\r\n\r\nUpdates for CSC L1T DQM following B904 tests on cosmic data. DQM modules in L1TMonitor and L1TMonitorClient were given an option so that we can analyze data from the B904 test-stand. Data-vs-emulation is a 5-step procedure. The last step produces a single postscript containing histograms with data-vs-emulator comparisons.\r\n\r\n```\r\n## step 1: get the .raw file from the CSC DAQ computer. Contact B904 experts\r\n\r\n## step 2: convert the .raw file to EDM ROOT. Set firstRun high enough so that the GEM geometry is recognized in Run-3 eras in step 3.\r\ncmsRun IORawData/CSCCommissioning/test/readFile_b904_Run3.py firstRun=341761 \\\r\ninputFiles=csc_00000001_EmuRUI01_Local_000_210519_162820_UTC.raw maxEvents=80000\r\n\r\n## step 3: unpack, emulate, and run the DQM\r\ncmsRun L1Trigger/CSCTriggerPrimitives/test/runCSCTriggerPrimitiveProducer_cfg.py unpack=True l1=True dqm=True \\\r\nrunCCLUT=True runME11ILT=False useB904Data=True maxEvents=-1 \\\r\ninputFiles= csc_00000001_EmuRUI01_Local_000_210519_162820_UTC.root \r\n\r\n## step 4: run the DQM client (produces histograms of differences)\r\ncmsRun L1Trigger/CSCTriggerPrimitives/test/runCSCL1TDQMClient_cfg.py mc=False run3=True useB904Data=True\r\n\r\n## step 5: run the L1 CSC analyzer (run number 341761 is set in step 2). Produces a postscript file.\r\ncmsRun L1Trigger/CSCTriggerPrimitives/test/runCSCTriggerPrimitiveAnalyzer_cfg.py dataVsEmulation=True \\\r\ndataVsEmulationFile=file:DQM_V0001_R000341761__Global__CMSSW_X_Y_Z__RECO.root runNumber=341761\r\n```\r\n\r\nNote that the CSC unpacker in CMSSW for Run-3 data is not yet updated. That is expected to happen in the next few weeks/months. The validation plots were made with the Run-3 unpacker in a private branch.\r\n\r\n#### PR validation:\r\n\r\nTested with \r\n```\r\nscram b -k -j 16 runtests\r\nrunTheMatrix.py -l limited\r\n```\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nNo backport needed I think. Most of our CSC trigger primitive tests are being conducted with the B904 test-stand. Depending on the timeline when the CSC firmware will be updated at P5 (before or during CRUZET, before or during CRAFT?) it may need to be backported. Perhaps by then we will have switched to CMSSW_12_0_0 at P5.\r\n\r\nBefore submitting your pull requests, make sure you followed this checklist:\r\n- verify that the PR is really intended for the chosen branch\r\n- verify that changes follow [CMS Naming, Coding, And Style Rules](http://cms-sw.github.io/cms_coding_rules.html)\r\n- verify that the PR passes the basic test procedure suggested in the [CMSSW PR instructions](https://cms-sw.github.io/PRWorkflow.html)\r\n\r\n@barvic @tahuang1991 ", "branch": "master", "changed_files": 22, "closed_at": "1622849404", "comments": 55, "commits": 13, "created_at": "1622166799", "deletions": 114, "labels": ["code-checks-approved", "daq-approved", "dqm-approved", "fully-signed", "l1-approved", "orp-approved", "reconstruction-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "cd76da3424f69eb950bf7d26bad7a540cbf1a67e", "merged_at": "1622849404", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 33876, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Updates for CSC L1T DQM following B904 tests on cosmic data", "updated_at": "1622849405", "user": "dildick"}