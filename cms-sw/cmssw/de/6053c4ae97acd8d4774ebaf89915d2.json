{"additions": 56, "auther_ref": "hlt_ph2nano_hpstaus", "auther_sha": "22458df82e716a843d0251e8b11bf4ffb2c3fbd4", "author": "artlbv", "body": "#### PR description:\r\n\r\nThis adds the hltHpsPFTau objects to the HLT Nano introduced in https://github.com/cms-sw/cmssw/pull/48091\r\nThis is based on the [HLT nano ntupler config from the Tau POG](https://github.com/cms-tau-pog/TauMLTools/blob/00bd9416f3198d7aa19ff9799037c14f2fa14514/Production/python/customiseHLT.py#L88) and the [central tau nano](https://github.com/cms-sw/cmssw/blob/master/PhysicsTools/NanoAOD/python/taus_cff.py#L61).\r\n\r\nOne thing I did not manage to add are the DeepTau scores. I tried the same approach as done for the [Btagging scores of PFJets](https://github.com/cms-sw/cmssw/blob/0455dbf9d25a0d3b2acdfb4c7a085db1f41e46a9/HLTrigger/NGTScouting/python/hltJets_cfi.py#L25) using `ExtVar`, but CMSSW complains it cannot find the collection `\"hltHpsPFTauDeepTauProducer\",\"VSjet\"`  despite this being produced in the [HPSTau HLT path](https://github.com/cms-sw/cmssw/blob/0455dbf9d25a0d3b2acdfb4c7a085db1f41e46a9/HLTrigger/Configuration/python/HLT_75e33/modules/hltHpsSelectedPFTausMediumDitauWPDeepTau_cfi.py#L6). I left the code commented for review/testing.\r\n\r\nApart from the DeepTau score the rest works fine!\r\n\r\nFYI @brallmond @kandrosov \r\n\r\n#### PR validation:\r\n\r\nTested with the HLT nano commands. \r\nI first produced a new FEVT file with re-run L1:\r\n```bash\r\ncmsDriver.py Phase2 -s L1,L1TrackTrigger \\                          \r\n    --conditions auto:phase2_realistic_T33 \\\r\n    --geometry ExtendedRun4D110 \\                        \r\n    --era Phase2C17I13M9 \\                    \r\n    --eventcontent FEVTDEBUGHLT \\      \r\n    --datatier GEN-SIM-DIGI-RAW-MINIAOD \\                                                     \r\n    --customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000,Configuration/DataProcessing/Utils.addMonitoring,L1Trigger/Configuration/customisePhase2FEVTDEBUGHLT.customisePhase2FEVTDEBUGHLT,L1Trigger/Configuration/customisePhase2TTOn110.customisePhase2TTOn110 \\\r\n    --filein /store/mc/Phase2Spring24DIGIRECOMiniAOD/TT_TuneCP5_14TeV-powheg-pythia8/GEN-SIM-DIGI-RAW-MINIAOD/PU200_AllTP_140X_mcRun4_realistic_v4-v1/2560000/11d1f6f0-5f03-421e-90c7-b5815197fc85.root \\\r\n    --fileout file:output_Phase2_L1T.root \\                 \r\n    --python_filename rerunL1_cfg.py \\\r\n    --inputCommands=\"keep *, drop l1tPFJets_*_*_*, drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" \\                   \r\n    --outputCommands=\"drop l1tTrackerMuons_l1tTkMuonsGmt*_*_HLT\" \\\r\n    --mc \\                                                                  \r\n    -n 1 --nThreads 1\r\n\r\n```\r\n\r\nand then ran the HLT nano:\r\n```bash\r\ncmsDriver.py Phase2 -s L1P2GT,HLT:NGTScouting,NANO:@NGTScouting \\   \r\n             --processName=HLTX \\       \r\n             --conditions auto:phase2_realistic_T33 \\\r\n             --geometry ExtendedRun4D110 \\\r\n             --era Phase2C17I13M9 \\\r\n             --customise SLHCUpgradeSimulations/Configuration/aging.customise_aging_1000 \\\r\n             --datatier NANOAODSIM \\                                                                                                                                                                                                                                                \r\n             --eventcontent NANOAODSIM \\                                                                                                                                                             \r\n             --filein=file:output_Phase2_L1T.root \\\r\n             --mc \\               \r\n             --inputCommands=\"keep *, drop *_hlt*_*_HLT, drop triggerTriggerFilterObjectWithRefs_l1t*_*_HLT\" \\\r\n             -n -1 \\                                          \r\n             --customise_commands='process.options.wantSummary = True' \\\r\n```\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNo backport needed.", "branch": "master", "changed_files": 2, "comments": 3, "commits": 2, "created_at": "1749628057", "deletions": 0, "labels": ["hlt-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved"], "milestone": "CMSSW_15_1_X", "number": 48295, "release-notes": [], "review_comments": 0, "state": "open", "title": "[Phase-2 HLT] Add hltHpsPFTau table to HLT Nano", "updated_at": "1749628204", "user": "artlbv"}