{"additions": 677, "auther_ref": "from-CMSSW_11_2_X_2020-08-27-1100-CCLUT-generator", "auther_sha": "c638c0922d10c051889fa7f3da661358fdf08339", "author": "dildick", "body": "#### PR description:\r\n\r\nMacro that generates the look-up tables for the Run-3 CSC trigger in https://github.com/cms-data/L1Trigger-CSCTriggerPrimitives (both for CMSSW simulation and firmware). The script performs a linear fit to 5 (patterns) x 3942 (valid comparator codes) possible combinations of >= 3 hits in a CSC. The patterns are those in `CSCPatternBank::clct_pattern_run3_`. Fit results (plots can be found in [DN-19-059, Sec.4.2](https://gitlab.cern.ch/tdr/notes/DN-19-059/blob/master/temp/DN-19-059_temp.pdf)) are used in the CLCT processor to correct the key half-strip, and assign the 1/4-strip bit, 1/8-strip bit and the 5-bit CLCT bending angle. See also: https://github.com/cms-data/L1Trigger-CSCTriggerPrimitives/pull/2.\r\n\r\nThere are 6 types of LUTs:\r\n```\r\n* CSCComparatorCodePatternConversionLUT_pat*_v1.txt: converts (Run-3 pattern, Comparator Code) -> Run-1/2 pattern\r\n* CSCComparatorCodePosOffsetLUT_pat*_float_v1.txt:   Key half-strip position offset in floating point\r\n* CSCComparatorCodePosOffsetLUT_pat*_v1.txt:         4-bit key half-strip position offset  \r\n* CSCComparatorCodeSlopeLUT_pat*_float_v1.txt:       floating point slope\r\n* CSCComparatorCodeSlopeLUT_pat*_v1.txt:             5-bit slope\r\n* rom_pat*.mem:                                      memory files for CSC OTMB firmware\r\n```\r\n\r\nThe CCLUT procedures in the CLCT processor have been updated to use the new LUTs.\r\n\r\n#### PR validation:\r\n\r\nCode compiles.\r\n\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nN/A\r\n\r\n@tahuang1991 ", "branch": "master", "changed_files": 10, "closed_at": "1599546372", "comments": 37, "commits": 10, "created_at": "1598562906", "deletions": 106, "labels": ["code-checks-approved", "comparison-available", "fully-signed", "l1-approved", "orp-approved", "simulation-approved", "tests-approved"], "merge_commit_sha": "1382f836f7cce9f3a4d76c8ceb73709a04a46412", "merged_at": "1599546372", "merged_by": "cmsbuild", "milestone": "CMSSW_11_2_X", "number": 31272, "release-notes": [], "review_comments": 0, "state": "closed", "title": "CCLUT generator macro; LUTs in half-strip format (CCLUT-7)", "updated_at": "1599546373", "user": "dildick"}