{"additions": 83, "auther_ref": "from-CMSSW_13_2_0_pre1", "auther_sha": "ec8d367589be6126183b1c79030a8d5b932fef52", "author": "wpmccormack", "body": "#### PR description:\r\n\r\nFor SONIC, the number of instances of a model in a fallback server and the number of threads that fallback server can occupy on local CPU resources can be controlled via the model's triton config file. We set the number of instances to the number of threads specified for the job, so this implementation requires a bit of text editing before the fallback servers can run. The model files live in cvmfs, and the config files cannot be edited there, so they are pulled locally. The precise edits depend on the model's backend; luckily the backend information can be extracted from the config files, so no additional dictionary containing this information is needed.\r\n\r\nThis PR was tested and able to duplicate results were model config files were adjusted manually.\r\n\r\nThis PR is also a re-do of https://github.com/cms-sw/cmssw/pull/41228.  That PR was aiming at the wrong target branch.\r\n\r\n#### PR validation:\r\n\r\nThis has been tested locally to verify that: 1) the config files get edited correctly, 2) that the fallback servers start properly, and 3) that a miniAOD processing job can run completely.  It also reproduces some rigorous timings tests that were previously performed with manual config file editing.\r\n", "branch": "master", "changed_files": 3, "closed_at": "1686033814", "comments": 17, "commits": 3, "created_at": "1685982551", "deletions": 10, "labels": ["fully-signed", "tests-approved", "orp-approved", "code-checks-approved", "heterogeneous-approved"], "merge_commit_sha": "57ceb236a55f7133e00d9f38a7c81fd57f3cfd78", "merged_at": "1686033814", "merged_by": "cmsbuild", "milestone": "CMSSW_13_2_X", "number": 41876, "release-notes": [], "review_comments": 4, "state": "closed", "title": "Adding automated thread controls for fallback triton servers", "updated_at": "1686033815", "user": "wpmccormack"}