{"additions": 694, "auther_ref": "dEdx_CMSSW_14_1_X", "auther_sha": "5bb6ef97b09fe372170a39d45ed174f2194b08f6", "author": "stahlleiton", "body": "#### PR description:\r\n\r\nThis PR adds a new dEdx estimator meant for the 2024 PbPb UPC reco. It includes the following changes on top of \"Run3_UPC\" era:\r\n- Add a uint8 variable in DeDxHitInfo to store the hit selections that would otherwise require access to hit cluster and track trajectory information to derive (not present in AOD). And adapted the DeDxHitInfoProducer to store the selections.\r\n- Add a float variable in DeDxHit to store the error on the charge deposited used by the new LikelihoodFit dEdx estimator.\r\n- New dEdx hit calibrator module that receives a collection of DeDxHitInfo, loops and correct hits using the DeDxCalibration conditions and store the output in a DeDxHit association vector.\r\n- New dEdx estimator based on a likelihood fit using the path length, deposit charge and charge error of hits.\r\n- Adapted the DeDxEstimatorProducer to read DeDxHit association vectors and use the LikelihoodFit dEdx estimator.\r\n\r\nMore details on the changes and validations done are documented in the [slides](https://docs.google.com/presentation/d/1FnTyN5bGTNMZ-twLcchVlvRBTe0iQdoD2Tsls-v-cG0/edit?usp=sharing)\r\n\r\nThe code was adapted from Ferenc Sikler's dEdx [framework](https://twiki.cern.ch/twiki/pub/CMS/EnergyLossPID/UserCode_EnergyLossPID_13_2_X.tgz) and [results](https://mattermost.web.cern.ch/files/4nmdmxc9t78rzegzauypsmtrqa/public?h=18Plo_V7jlY5LjDWvJYhTAMOw482S3AFI-BZChE_NEo). The details are also documented in the CADI [HIN-12-016](https://cms.cern.ch/iCMS/analysisadmin/cadilines?line=HIN-12-016&tp=an&id=1021&ancode=HIN-12-016).\r\n\r\nThis PR requires https://github.com/cms-sw/cmssw/pull/45024\r\n\r\n@mandrenguyen @sikler \r\n\r\n#### PR validation:\r\n\r\nTested workflows 180, 180.1, 181 and 181.1 with the [dedxCalibration.db](https://drive.google.com/file/d/1IqxFS4Rdj0HikgzJRX4-UDRQOaNX7oxD/view) file using:\r\n\r\nrunTheMatrix.py -l 180,180.1,181,181.1 --command '--customise_commands \"process.GlobalTag.toGet.extend([cms.PSet(record = cms.string(\\\"DeDxCalibrationRcd\\\"), tag = cms.string(\\\"dedxCalibration\\\"), connect = cms.string(\\\"sqlite_file:../dedxCalibration.db\\\"))])\"'\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n", "branch": "master", "changed_files": 11, "comments": 17, "commits": 1, "created_at": "1716380396", "deletions": 50, "labels": ["reconstruction-pending", "pending-signatures", "tests-pending", "orp-pending", "code-checks-approved", "tracking"], "milestone": "CMSSW_14_1_X", "number": 45016, "release-notes": [], "review_comments": 41, "state": "open", "title": "Add new dEdx calibration and estimator", "updated_at": "1716468086", "user": "stahlleiton"}