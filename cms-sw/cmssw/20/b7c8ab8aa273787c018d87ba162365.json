{"additions": 2101, "auther_ref": "emtf_march_2020", "auther_sha": "d64a3679a0e6f93e52131e998aaa69e6c2b01321", "author": "jiafulow", "body": "#### PR description:\r\n\r\nThis PR **adds/updates the interface to all the Phase-2 trigger primitives**. This is the first PR from a series of EMTF emulator updates planned for 2020.\r\n\r\nThe EMTF emulator needs to be upgraded to handle all the Phase-2 trigger primitives, including GEM, ME0, and iRPC. It's also nice to be able to handle DT/TwinMux. Majority of the work has been done during the development for Phase-2 EMTF++, and used for L1T Phase-2 Upgrade TDR studies. These changes are now being ported to the official CMSSW. For Run 3 specifically, the GE1/1 interface is needed to continue the rest of the EMTF-GEM integration.\r\n\r\nThere are a lot of changes because what's in the existing EMTF emulator related to GEM/ME0/iRPC is not correct/updated. Also, unused codes related to converting track trigger stubs into muon trigger primitives have been removed.\r\n\r\nNotes:\r\n\r\n- The definition of `Subsector()` for EMTFHit converted from RPC hit has changed. It is now consistent with the CSC definition (1 or 2 in ME1, 0 in ME2,3,4). The old definition is no longer stored, but can be recovered via `Subsector_RPC()`.\r\n- GEM input is now `GEMPadDigiClusterCollection`.\r\n- ME0 input is now `ME0TriggerDigiCollection`.\r\n- Regarding input: access to `simTwinMuxDigis`, `simDtTriggerPrimitiveDigis`, `rpcRecHits`, `me0TriggerConvertedPseudoDigis` has been added, but none of them are turned on by default.\r\n- Regarding output: no change. While the interface has been implemented, the rest of the track finder logic has not been updated to use the new trigger primitives.\r\n\r\nAdditional notes:\r\n- No dependence on other PRs or externals.\r\n  - This PR does not interfere with the recent EMTF PRs by Andrew that are related to UL2016 emulation bugs.\r\n- The plan for EMTF emulator update is discussed [here]( https://indico.cern.ch/event/890597/contributions/3756065/subcontributions/300461/attachments/1991401/3321960/2020-02-20_emtf_emulator_v2.pdf).\r\n\r\n#### PR validation:\r\n\r\nFrom `runTheMatrix.py -l limited -i all -j10`:\r\n\r\n```\r\n18 17 16 10 4 1 1 1 1 tests passed, 16 0 0 0 0 0 0 0 0 failed\r\n(all the errors are due to DAS ERROR - not sure what's wrong?)\r\n```\r\n\r\nFrom `runTheMatrix.py -w upgrade -l 20434.0,20504.0 -j10`:\r\n\r\n```\r\n2 2 2 2 tests passed, 0 0 0 0 failed\r\n```\r\n\r\nConsidering this is a big PR, there might be bugs. But we will try to detect and fix them as soon as possible.\r\n\r\n---\r\nNotifications: @abrinke1 @eyigitba @rekovic ", "branch": "master", "changed_files": 41, "closed_at": "1589203156", "comments": 59, "commits": 18, "created_at": "1584810893", "deletions": 1894, "labels": ["code-checks-approved", "comparison-available", "dqm-approved", "l1-approved", "orp-pending", "pending-signatures", "tests-approved", "upgrade-rejected"], "milestone": "CMSSW_11_1_X", "number": 29262, "release-notes": [], "review_comments": 34, "state": "closed", "title": "EMTF March 2020 emulator update", "updated_at": "1589203156", "user": "jiafulow"}