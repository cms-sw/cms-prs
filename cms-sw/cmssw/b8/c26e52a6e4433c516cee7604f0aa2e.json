{"additions": 20, "auther_ref": "removeVertexCutForCosmicsResiduals_12_0_X", "auther_sha": "73a5a169f5c8efb82ecddd2dd282ded64a6437ac", "author": "mmusich", "body": "backport of https://github.com/cms-sw/cmssw/pull/35811\r\n\r\n#### PR description:\r\n\r\nI was casually looking at the Strip residuals in a CRAFT 2021 run but they don't make much sense e.g. the number of hits in TIB1 (https://tinyurl.com/yzwdcdc6) is less than BPIX1 (https://tinyurl.com/ygftohy4).\r\nAlso the Strip EndCap residuals plots are empty (https://tinyurl.com/ygxqol8b).\r\nI strongly suspect this is due to the Primary Vertex compatibility cut at: \r\n\r\nhttps://github.com/cms-sw/cmssw/blob/6d2f66057131baacc2fcbdd203588c41c885b42c/DQM/TrackerMonitorTrack/src/MonitorTrackResiduals.cc#L251\r\n\r\nthat makes no sense in cosmic data-taking and is severely limiting the phase-space from which the cosmic tracks are considered (https://tinyurl.com/yjzgap6c)\r\nThe correct behavior is implemented instead in the Pixel residuals code:\r\n\r\nhttps://github.com/cms-sw/cmssw/blob/c6d002524ebec48c82fa8f23dc99ad4fd4f0ac01/DQM/SiPixelPhase1Track/plugins/SiPixelPhase1TrackResiduals.cc#L80-L82\r\n\r\nin which the PV compatibility cut is put in OR with a switch that is set to false in cosmics (and indeed the pixel residuals in cosmic runs are filled).\r\nThis PR implements the same mechanism also for Strip residuals.\r\n#### No regression is expected for collision runs (pp or HI).\r\n\r\n#### PR validation:\r\n\r\nI've run workflow 138.2 (from 2021 cosmics commissioning, Run 343498) with 1000 events:\r\n```console\r\nrunTheMatrix.py -l 138.2 -j 8 --command='-n 1000'\r\n```\r\n#### if this PR is a backport please specify the original PR and why you need to backport that PR:\r\n\r\nbackport of https://github.com/cms-sw/cmssw/pull/35811", "branch": "CMSSW_12_0_X", "changed_files": 6, "comments": 2, "commits": 1, "created_at": "1635084168", "deletions": 5, "labels": ["dqm-pending", "pending-signatures", "orp-pending", "tests-started", "backport"], "milestone": "CMSSW_12_0_X", "number": 35812, "release-notes": [], "review_comments": 0, "state": "open", "title": "`MonitorTrackResiduals`: do not apply PV compatibility cut when running cosmics [12.0.X]", "updated_at": "1635084221", "user": "mmusich"}