{"additions": 2128, "auther_ref": "updateMessageLogger", "auther_sha": "35466169adb5a15f4db090d35374b967135c04a0", "author": "Dr15Jones", "body": "As part of the migration path to updating the MessageLogger to use thread-safe Service signals, the code also got a major 'spring cleaning'. Turns out the old CDF messaging system was embedded into the CMS MessageLogger but only a tiny fraction of it was used. The unused code was refactored out of the system.\n\nNOTE: Even though this change does use the new Service signals it turns out that for a fully task based system the MessageLogger could use the incorrect context when reporting a message. This would happen if\n 1) A task which issued a service signal (say entering a module) does a TBB wait (e.g. because of a tbb::concurrent_foreach).\n 2) The system starts a new temporary task where that task also sends a service signal (say 'preEvent').\n 3) When the second task finishes, tbb goes back to the original task, however the MessageLogger would still think we are in the original task since no further service signals have been issued.\nIt seems likely that the Service system will have to issue a 'returnToTask(...)' call in these cases and therefore have to track what was the previous task on this thread. However, that will not be needed until phase 2. \n", "branch": "CMSSW_7_0_X", "changed_files": 67, "closed_at": "1379324626", "comments": 14, "commits": 15, "created_at": "1379092862", "deletions": 5730, "labels": ["analysis-pending", "core-approved", "pending-signatures", "visualization-approved"], "merge_commit_sha": "10acb1641c906d086371d289e9744299de3f1f60", "merged_at": "1379324626", "merged_by": "ktf", "milestone": "CMSSW_7_0_0_pre5", "number": 827, "release-notes": [], "review_comments": 0, "state": "closed", "title": "Multithread Framework -- Update MessageLogger to use new thread-safe Service signals", "updated_at": "1405687533", "user": "Dr15Jones"}