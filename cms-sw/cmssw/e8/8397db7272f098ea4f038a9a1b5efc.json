{"additions": 26, "auther_ref": "alca-addUnitTestforBeamspot", "auther_sha": "d310c2820b6de1fb7017e5c34064a0834b6673c4", "author": "francescobrivio", "body": "#### PR description:\r\nThis PR adds the unitTest for the DQM BeamSpotHLT client (`beamhlt_dqm_sourceclient-live_cfg.py`).\r\nSince the client requires to be run on a streamer file (in production it runs on an _ad hoc_ stream `streamDQMOnlineBeamspot`),\r\nI had to make some changes:\r\n - Added a new `data` directory in `DQM/Integration/data` to store the streamer files\r\n - Added three `.dat` and three `.jsn` files which are the actual input streamer files for the unitTest\r\n - Modified the `beamhlt` client so that when `unitTest=True` the standard DAS source is owerwritten with \r\n   `process.source = cms.Source(\"DQMStreamerReader\"...`\r\n\r\n@cms-sw/dqm-l2 @jfernan2 please let me know if this approach is acceptable for DQM.\r\nAnother possible approach would be to introduce a new config file in `DQM/Integration/python/config/`, something like `streamerinputsource_cfi.py`, but **at the moment** this is the only client with a unitTest that requires a streamer input file as the other two are commented out, see https://github.com/cms-sw/cmssw/blob/f3a3808f4a0651fed52cc72efc9c5d4dd3603e62/DQM/Integration/test/BuildFile.xml#L30-L33\r\n\r\n#### PR validation:\r\n`scram b runtests` runs and the new unitTest runs succesfully.\r\n\r\n**!!** PLEASE NOTE that this PR only changes the unitTest behavior, **NOT** the production one **!!**\r\n\r\n#### Backport:\r\nNot a backport, but a 12_3_X backport will be provided as soon as I get feedback on this PR from @cms-sw/dqm-l2.\r\n\r\nFYI @dzuolo @gennai ", "branch": "master", "changed_files": 2, "closed_at": "1651013093", "comments": 33, "commits": 2, "created_at": "1650784805", "deletions": 3, "labels": ["dqm-approved", "fully-signed", "tests-approved", "orp-approved", "requires-external", "code-checks-approved"], "merge_commit_sha": "b179dd49f8f0e242827b3b0c259807de40446503", "merged_at": "1651013093", "merged_by": "cmsbuild", "milestone": "CMSSW_12_4_X", "number": 37667, "release-notes": [], "review_comments": 6, "state": "closed", "title": "Add streamerFile-based unitTest for BeamSpotOnlineHLT DQM client", "updated_at": "1651013094", "user": "francescobrivio"}