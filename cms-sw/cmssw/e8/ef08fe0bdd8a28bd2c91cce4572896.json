{"additions": 491, "auther_ref": "sistripHitEffMiscellaneaImprovements", "auther_sha": "78fdf328924f5cb383d9af219e3d47c693f69bc1", "author": "mmusich", "body": "#### PR description:\r\n\r\nAs per request of the SiStrip offline group, I apply few improvement for the harvesting step:\r\n   * in case the harvester is NOT run at PCL (flag `isAtPCL` set to false) produce the final good module/ bad module `TGraphError` plot for the hit efficiency;\r\n   *  in case the harvester is NOT run at PCL (flag `isAtPCL` set to false) produce a `TTree` to store per-DetId information for further post-processing from experts / shifters;\r\n   * introduced a `SiStripHitEffData` struct to store the per event `FEDError`s and some events statistics;\r\n   * profited of the PR to clean-up slightly also `SiStripHitEffFromCalibTree`: used lower case to name methods and use `   usesResource(TFileService::kSharedResource)` for threading efficiency.\r\n   \r\n#### PR validation:\r\n\r\nRun the following commands:\r\n\r\n```console\r\ncmsDriver.py stepReAlCa -s ALCA:PromptCalibProdSiStripHitEff --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --datatier ALCARECO --eventcontent ALCARECO --processName=ReAlCa -n 100000 --dasquery='file dataset=/StreamExpress/Run2018D-SiStripCalMinBias-Express-v1/ALCARECO run=325172' --nThreads=4\r\n```\r\n\r\nfollowed by:\r\n\r\n```console\r\ncmsDriver.py stepHarvest -s ALCAHARVEST:SiStripHitEff --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --filein file:PromptCalibProdSiStripHitEfficiency.root -n -1\r\n```\r\n\r\nand obtained the following plot:\r\n\r\n![image](https://user-images.githubusercontent.com/5082376/177169737-70f99ffe-222c-4421-a003-0fbd4f68f214.png)\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport but needs to be backported for the data-taking.\r\n", "branch": "master", "changed_files": 6, "comments": 4, "commits": 5, "created_at": "1656935916", "deletions": 89, "labels": ["alca-pending", "db-pending", "pending-signatures", "tests-pending", "orp-pending", "hold", "code-checks-approved"], "milestone": "CMSSW_12_5_X", "number": 38592, "release-notes": [], "review_comments": 4, "state": "open", "title": "Improvements to the `SiStripHitEfficiencyHarvester` for Run 3 data-taking ", "updated_at": "1656947094", "user": "mmusich"}