{"additions": 105, "auther_ref": "MahiCPUcleanup", "auther_sha": "4b3a7c4353cf35b6e0b2d4198f35f85ce0166373", "author": "mariadalfonso", "body": "Code cleanup, followed from V.Innocente's suggestions, resulted in a 10% speed improvement. \r\nTested on data 2018-RunB, see igproof below (at commit dfc08dbd4292947382a16b7df9df550c864a8ea7 ).\r\n\r\nNo changes are expected in the HCAL quantities, neither energy/time.\r\n\r\n\r\n- - - - - - - - - - - OLD - - - - - - - - - - - - - - - - - - - -\r\n```\r\n            1.5  .........       1.77 / 2.13         SimpleHBHEPhase1Algo::reconstruct(HBHEChannelInfo const&, HcalRecoParam const*, HcalCalibrations const&, bool) [67]\r\n[76]        1.5       1.77       0.07 / 1.69       MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const\r\n            1.3  .........       1.62 / 1.62         MahiFit::doFit(std::array<float, 3ul>&, int) const [85]\r\n            0.1  .........       0.07 / 0.07         MahiFit::resetWorkspace() const [786]\r\n```\r\n\r\n```\r\n            1.3  .........       1.62 / 1.77         MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [76]\r\n[85]        1.3       1.62       0.03 / 1.59       MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n            1.0  .........       1.23 / 1.23         MahiFit::minimize() const [120]\r\n            0.2  .........       0.20 / 0.20         MahiFit::updatePulseShape(double, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, -1, 0, 19, 19>&) const [426]\r\n            0.1  .........       0.16 / 0.16         MahiFit::calculateArrivalTime() const [489]\r\n```\r\n\r\n- - - - - - - - - - -   NEW - - - - - - - - - - - - - - - - - - - -\r\n```\r\n            1.3  .........       1.56 / 1.95         SimpleHBHEPhase1Algo::reconstruct(HBHEChannelInfo const&, HcalRecoParam const*, HcalCalibrations const&, bool) [70]\r\n[83]        1.3       1.56       0.05 / 1.50       MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const\r\n            1.2  .........       1.48 / 1.48         MahiFit::doFit(std::array<float, 3ul>&, int) const [86]\r\n            0.0  .........       0.02 / 0.02         MahiFit::resetWorkspace() const [1301]\r\n\r\n```\r\n\r\n```\r\n            1.2  .........       1.48 / 1.56         MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [83]\r\n[86]        1.2       1.48       0.07 / 1.41       MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n            1.0  .........       1.19 / 1.19         MahiFit::minimize() const [121]\r\n            0.1  .........       0.14 / 0.14         MahiFit::updatePulseShape(double, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, -1, 0, 19, 19>&\\\r\n) const [507]\r\n            0.1  .........       0.07 / 0.07         MahiFit::calculateArrivalTime() const [754]\r\n\r\n```", "branch": "master", "changed_files": 7, "comments": 36, "commits": 9, "created_at": "1550651825", "deletions": 108, "labels": ["alca-pending", "code-checks-approved", "comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-started"], "milestone": "CMSSW_10_6_X", "number": 25982, "release-notes": [], "review_comments": 2, "state": "open", "title": "HBHE: mahi speed up", "updated_at": "1551731412", "user": "mariadalfonso"}