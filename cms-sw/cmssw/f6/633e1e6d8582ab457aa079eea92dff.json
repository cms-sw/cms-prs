{"additions": 98, "auther_ref": "MahiCPUcleanup", "auther_sha": "2ce99c3f0bab1e83b23fdaa0c60169c3490150d2", "author": "mariadalfonso", "body": "Code cleanup, followed from V.Innocente's suggestions, resulted in a 10% speed improvement. \r\nTested on data 2018-RunB, see igproof below.\r\nNo changes are expected in the HCAL quantities.\r\n\r\n\r\n- - - - - - - - - - - OLD - - - - - - - - - - - - - - - - - - - -\r\n```\r\n            1.5  .........       1.77 / 2.13         SimpleHBHEPhase1Algo::reconstruct(HBHEChannelInfo const&, HcalRecoParam const*, HcalCalibrations const&, bool) [67]\r\n[76]        1.5       1.77       0.07 / 1.69       MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const\r\n            1.3  .........       1.62 / 1.62         MahiFit::doFit(std::array<float, 3ul>&, int) const [85]\r\n            0.1  .........       0.07 / 0.07         MahiFit::resetWorkspace() const [786]\r\n```\r\n\r\n```\r\n            1.3  .........       1.62 / 1.77         MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [76]\r\n[85]        1.3       1.62       0.03 / 1.59       MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n            1.0  .........       1.23 / 1.23         MahiFit::minimize() const [120]\r\n            0.2  .........       0.20 / 0.20         MahiFit::updatePulseShape(double, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, -1, 0, 19, 19>&) const [426]\r\n            0.1  .........       0.16 / 0.16         MahiFit::calculateArrivalTime() const [489]\r\n```\r\n\r\n- - - - - - - - - - -   NEW - - - - - - - - - - - - - - - - - - - -\r\n```\r\n            1.2  .........       1.51 / 1.84         SimpleHBHEPhase1Algo::reconstruct(HBHEChannelInfo const&, HcalRecoParam const*, HcalCalibrations const&, bool) [71]\r\n[86]        1.2       1.51       0.05 / 1.46       MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const\r\n            1.2  .........       1.45 / 1.45         MahiFit::doFit(std::array<float, 3ul>&, int) const [88]\r\n            0.0  .........       0.01 / 0.01         MahiFit::resetWorkspace() const [1916]\r\n```\r\n\r\n```\r\n            1.2  .........       1.45 / 1.51         MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [86]\r\n[88]        1.2       1.45       0.03 / 1.41       MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n            0.9  .........       1.14 / 1.14         MahiFit::minimize() const [124]\r\n            0.1  .........       0.14 / 0.14         MahiFit::calculateArrivalTime() const [532]\r\n            0.1  .........       0.12 / 0.12         MahiFit::updatePulseShape(double, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, -1, 0, 19, 19>&) const [614]\r\n```", "branch": "master", "changed_files": 7, "comments": 5, "commits": 4, "created_at": "1550651825", "deletions": 92, "labels": ["alca-pending", "code-checks-approved", "comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-started"], "milestone": "CMSSW_10_5_X", "number": 25982, "release-notes": [], "review_comments": 0, "state": "open", "title": "HBHE: mahi speed up", "updated_at": "1550652853", "user": "mariadalfonso"}