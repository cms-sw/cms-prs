{"additions": 16, "auther_ref": "SimClusNan93X", "auther_sha": "b1dce9af46ebfc44312fc8d8c6c8793f731c25f0", "author": "kpedro88", "body": "Some Phase 2 TDR production workflows encountered SimClusters with NaN fractions for certain hits.\r\n\r\nI found the likely culprit in `CaloTruthAccumulator` that could make NaN values, and added a protection. I also changed the exception in `Cluster3DPCACalculator` to a warning, so the jobs can still run in case there's another problem that I missed. (These NaNs happen very rarely and are almost impossible to reproduce given we're running 200PU w/ 4 threads.)\r\n\r\nThis PR will be backported to 91X.\r\n\r\nattn: @lgray ", "branch": "master", "changed_files": 3, "closed_at": "1501738846", "comments": 31, "commits": 5, "created_at": "1501593379", "deletions": 11, "labels": ["comparison-available", "orp-pending", "pending-signatures", "reconstruction-approved", "simulation-pending", "tests-approved", "upgrade-approved"], "merge_commit_sha": "c039c9188d1027ba2bfffdca0fb4d907785dda78", "merged_at": "1501738846", "merged_by": "cmsbuild", "milestone": "CMSSW_9_3_X", "number": 19997, "release-notes": [], "review_comments": 2, "state": "closed", "title": "Avoid NaNs in SimClustering", "updated_at": "1501763747", "user": "kpedro88"}