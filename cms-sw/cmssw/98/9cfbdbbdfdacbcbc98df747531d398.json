{"additions": 124, "auther_ref": "pfID_for_eleInExtendedEta", "auther_sha": "3e477834e2e2c7812bd219f044f1017845e70a84", "author": "a-kapoor", "body": "#### PR description:\r\nThe reconstruction efficiency of electrons in |&eta;|>2.5 was significantly improved via [#35309](https://github.com/cms-sw/cmssw/pull/35309). These electrons are now available as gsf electrons but were not allowed to enter Particle Flow (PF) when PF ID for electrons in |&eta;|<=2.5 was added via [#35403](https://github.com/cms-sw/cmssw/pull/35403), [#36243](https://github.com/cms-sw/cmssw/pull/36243/), [#36292](https://github.com/cms-sw/cmssw/pull/36292) \r\n\r\nThis PR adds the code needed for the PF ID of electrons in |&eta;|>2.5. Dedicated PF IDs have been developed, for electrons in this region. There are two dedicated trainings, one for  **Region 1:** 2.5<|&eta;|<=2.65 and one for **Region 2:** |&eta;|>2.65, given that electrons in these regions look very different. More details can be found in this [presentation](https://indico.cern.ch/event/1146227/#10-pf-egm-id-of-eta-extended-e).\r\n\r\n```mermaid\r\ngraph TD\r\nA(GSF Electrons) -->|PFEGammaFilters| B(\"PF Electrons\")\r\nPFEGammaFilters -->|\"|&eta;|<=2.5 \"| C[ID already in CMSSW]\r\nPFEGammaFilters -->|\" 2.5<|&eta;|<=2.65\"| D[\"extended eta region 1 ID (**This PR**)\"]\r\nPFEGammaFilters -->|\"|&eta;|>2.65\"| E[\"extended eta region 2 ID (**This PR**)\"]\r\n```\r\n\r\nThis PR depends on [#25](https://github.com/cms-data/RecoEgamma-ElectronIdentification/pull/25) to cms-data that has been made to merge the model files.\r\n\r\n\r\nSince before this PR, electrons in |&eta;|>2.5 must have been identified by Particle Flow as other objects like photons and jets, this PR might lead to some efficiency changes for primarily PF Photons and to some extent Taus and Jets in |&eta;|>2.5.\r\n\r\nSome points:\r\nIt is understood that this ID will not give the most optimal performance that can be achieved in this region, since some kinds of electrons needed for the training were not fully produced due to hard cuts on | &eta; | in the Tau Gun and QCD_bcToE samples. The hard cuts for the TauGun sample were in the config so this can be easily fixed in the next iteration of samples. However, for the QCD_bcToE sample the cut was hard-coded in [BCToEFilterAlgo.cc](https://github.com/cms-sw/cmssw/blob/d8184188a4f5843b1b4a84e5d800ad178ae8bacf/GeneratorInterface/GenFilters/plugins/BCToEFilterAlgo.cc#L13). Given these constraints, the model in |&eta;|>2.65 has only 3 output nodes instead of the 5 nodes that all other DNN models have. In [#37869](https://github.com/cms-sw/cmssw/pull/37869) we have fixed this. Given the timeline for 12_4_0, update of samples is not possible in this iteration. The PF ID of electrons in |&eta;|>2.5 will thus be updated in a later release, possibly at the end of this year. \r\n\r\n**Main code changes:**\r\n- Output dimension of the DNN for each region is now configurable independently by changing it from a \"single int\" to a \"vector of ints\"\r\n- PFEGammaFilters.cc has been modified to allow the new electrons to enter PF and also select the right ID thresholds for these electrons.\r\n- ElectronDNNEstimator has been modified to select the right model depending on the pt and &eta; of the electron.\r\n\r\n#### PR validation:\r\n\r\nA general validation to check the effect on objects downstream in PF is currently ongoing. A dedicated validation to check the effect on PF Taus is also being carried out. This section will be updated as the results of the validation become available.", "branch": "master", "changed_files": 13, "comments": 13, "commits": 7, "created_at": "1652158628", "deletions": 72, "labels": ["reconstruction-pending", "pending-signatures", "orp-pending", "tests-started", "requires-external", "code-checks-approved", "egamma"], "milestone": "CMSSW_12_4_X", "number": 37880, "release-notes": [], "review_comments": 0, "state": "open", "title": "Particle flow identification of electrons in extended eta", "updated_at": "1652199295", "user": "a-kapoor"}