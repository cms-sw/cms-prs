{"additions": 40, "auther_ref": "tier0improvement", "auther_sha": "5239086a6c251f7383537d23ada604db7d375147", "author": "JanChyczynski", "body": "#### PR description:\r\n\r\nBefore this PR Tier0Handler was running a `curl` command using only the `--connect-timeout` flag which sets the timeout for connecting. If the connection is established but the server takes forever to respond, the command waits indefinitely. To avoid hung-up processes maxTime argument was added to `Tier0Handler` setting the `--max-time` flag. This flag sets the maximum time for the whole `curl` command.\r\n\r\n`Tier0Handler` is used in the `conddb` command and the maxTime was set to 60 s, the connection timeout was left at 1 s.\r\n\r\nAlso, extends the warning information when the certificates are not provided with information about the `X509_USER_CERT` and  `X509_USER_KEY` env variables.\r\n\r\nThis is a follow-up to https://github.com/cms-sw/cmssw/pull/45779\r\n\r\n#### PR validation:\r\n\r\nTested by running `python3 tier0.py` which is running the test for it and by running `conddb showFSCR` (for the latter `scram b` is needed beforehand).\r\n\r\nThe proper functionality of `--connect-timeout` and `--max-time` in `Tier0Handler` was tested by changing the T0 API URL using the `TIER0_API_URL` env variable to:\r\n* `http://localhost:8099/` and running `nc -kl 8099` to test being able to connect but never receiving a response\r\n* `https://example.com:81/` to test the connection timeout\r\n\r\n#### Backport\r\nBackports PRs to 14_1_X and 14_0_X:\r\nhttps://github.com/cms-sw/cmssw/pull/45944   (14_1_X )\r\nhttps://github.com/cms-sw/cmssw/pull/45945   (14_0_X)\r\n\r\nFYI @perrotta @francescobrivio @PonIlya ", "branch": "master", "changed_files": 2, "comments": 8, "commits": 1, "created_at": "1725622644", "deletions": 27, "labels": ["fully-signed", "tests-rejected", "orp-pending", "db-approved", "code-checks-approved"], "milestone": "CMSSW_14_2_X", "number": 45943, "release-notes": [], "review_comments": 0, "state": "open", "title": "Tier0Handler: add maxTime, improve cert warning", "updated_at": "1725776300", "user": "JanChyczynski"}