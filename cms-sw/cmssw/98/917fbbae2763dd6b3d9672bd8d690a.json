{"additions": 40474, "auther_ref": "HLT_Phase2_menu", "auther_sha": "9bee864f2cf3da1ccc9f51e7d918a779a2e82f13", "author": "fwyzard", "body": "#### PR description:\r\n\r\nImplement the Phase-2 HLT menu used for the HLT TDR.\r\n\r\nHLT_75e33_cfg.py implements a self-contained configuration:\r\n  - selects the required input collections for running on a re-emulated L1 sample;\r\n  - uses the global tag 111X_mcRun4_realistic_T15_v5;\r\n  - configures the MessageLogger, DQMStore, FastTimerService and ThroughputService.\r\n\r\nHLT_75e33_cff.py implements a configuration fragment for use wih cmsDriver. To avoid redefinition errors, most of the L1T modules and the offline beamspot module are dropped from this configuration.\r\n\r\nThe HLT configuration is based on\r\n  - `CMSSW_11_1_8`\r\n  - global tag [`111X_mcRun4_realistic_T15_v5`](https://cms-conddb.cern.ch/cmsDbBrowser/list/Prod/gts/111X_mcRun4_realistic_T15_v5)\r\n  - the Tracking v6.1 baseline configuration\r\n  - the TICL v3 configuration\r\n\r\nand implement the baseline Phase-2 configuration for Jets/MET, b-tagging, Muons and E/Gamma.\r\nTaus are not included.\r\n\r\nIt includes \"open\" or \"MC\" HLT paths for running the reconstruction without any (pre)selection applied, and a partial re-emulation of the Level-1 Trigger, which simulates a simplified L1T menu using EDFilters and Paths.\r\n\r\nFor Jets/MET and B-tagging, the exact results obtained for the TDR should be reproducible with the commit 19f3c18687c0 (and likely also with 93a4a572b336, which is just a technical fix), which still use \"offline\" muons for the Particle Flow reconstruction.\r\nThe following commits implement the use of HLT muons in the Particle Flow reconstruction, affecting the Jets/MET (and likely B-tagging) performance in a non-negligible way; for more details see [this presentation](https://indico.cern.ch/event/1035816/contributions/4350085/subcontributions/337175/attachments/2242877/3803185/210511_hltupg_val32903.pdf).\r\n\r\nFor Muons, E/Gamma, and overall timing measurements, the exact results obtained in the TDR should be reproducible using the full PR.\r\n\r\n\r\n#### PR validation:\r\n\r\nThe configuration in `HLTrigger/Configuration/python/HLT_75e33_cfg.py` is as close as it can be to the one used for the HLT TDR.\r\n\r\nThe configuration in `HLTrigger/Configuration/python/HLT_75e33_cff.py` is almost identical, and was validated by running:\r\n```\r\n$ cmsDriver.py step2  --conditions auto:phase2_realistic_T15 -s HLT:75e33 --geometry Extended2026D49 --era Phase2C9 --eventcontent FEVTDEBUGHLT --datatier GEN-SIM-DIGI-RAW -n 10 --filein /store/mc/Phase2HLTTDRSummer20ReRECOMiniAOD/MinBias_TuneCP5_14TeV-pythia8/SKIM/PU200_111X_mcRun4_realistic_T15_v1-v1/000001/2cf57ee0-f543-4718-a2f1-db8b9baeac87.root --processName=HLTX -n 20 --nThreads 8\r\n...\r\n(skip various initialisation messges)\r\nBegin processing the 1st record. Run 1, Event 162234, LumiSection 917 on stream 5 at 19-Sep-2021 11:06:02.253 CEST\r\n%MSG-w TwoTrackMinimumDistance:   InclusiveCandidateVertexFinder:hltDeepInclusiveVertexFinderPF  19-Sep-2021 11:06:27 CEST Run: 1 Event: 162234\r\ncomparing track with itself!\r\n%MSG\r\n...\r\nBegin processing the 14th record. Run 1, Event 519298, LumiSection 2934 on stream 6 at 19-Sep-2021 11:08:53.867 CEST\r\nBegin processing the 15th record. Run 1, Event 519318, LumiSection 2934 on stream 7 at 19-Sep-2021 11:08:53.881 CEST\r\nBegin processing the 16th record. Run 1, Event 169611, LumiSection 959 on stream 1 at 19-Sep-2021 11:09:18.739 CEST\r\nBegin processing the 17th record. Run 1, Event 127902, LumiSection 723 on stream 7 at 19-Sep-2021 11:09:34.448 CEST\r\nBegin processing the 18th record. Run 1, Event 127910, LumiSection 723 on stream 6 at 19-Sep-2021 11:09:34.466 CEST\r\nBegin processing the 19th record. Run 1, Event 127969, LumiSection 723 on stream 3 at 19-Sep-2021 11:09:34.480 CEST\r\nBegin processing the 20th record. Run 1, Event 526297, LumiSection 2974 on stream 0 at 19-Sep-2021 11:10:09.478 CEST\r\n19-Sep-2021 11:10:24 CEST  Closed file file:///gpu_data/store/mc/Phase2HLTTDRSummer20ReRECOMiniAOD/MinBias_TuneCP5_14TeV-pythia8/SKIM/PU200_111X_mcRun4_realistic_T15_v1-v1/000001/2cf57ee0-f543-4718-a2f1-db8b9baeac87.root\r\n\r\n=============================================\r\n\r\nMessageLogger Summary\r\n\r\n type     category        sev    module        subroutine        count    total\r\n ---- -------------------- -- ---------------- ----------------  -----    -----\r\n    1 TwoTrackMinimumDista -w InclusiveCandida                      72       72\r\n    2 fileAction           -s file_close                             1        1\r\n    3 fileAction           -s file_open                              2        2\r\n\r\n type    category    Examples: run/evt        run/evt          run/evt\r\n ---- -------------------- ---------------- ---------------- ----------------\r\n    1 TwoTrackMinimumDistance 1/162234         1/162234         1/512433\r\n    2 fileAction           PostGlobalEndRun                  \r\n    3 fileAction           pre-events       pre-events       \r\n\r\nSeverity    # Occurrences   Total Occurrences\r\n--------    -------------   -----------------\r\nWarning                72                  72\r\nSystem                  3                   3\r\n```", "branch": "CMSSW_11_1_X", "changed_files": 1518, "comments": 78, "commits": 11, "created_at": "1613165892", "deletions": 16, "labels": ["hlt-pending", "pending-signatures", "orp-pending", "pdmv-pending", "tests-started", "upgrade-pending"], "milestone": "CMSSW_11_1_X", "number": 32903, "release-notes": [], "review_comments": 3, "state": "open", "title": "Phase 2 HLT menu targetting 7.510 cms", "updated_at": "1632133020", "user": "fwyzard"}