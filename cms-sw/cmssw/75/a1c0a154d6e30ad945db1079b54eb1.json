{"additions": 182, "auther_ref": "fc-psimhit-20260122", "auther_sha": "e5d8dbbc50af1cbfce8ebd78cd29a78643ef429a", "author": "fabiocos", "body": "#### PR description:\r\n\r\nFollowing https://github.com/cms-sw/cmssw/issues/49732 and the discussion in the Simulation meeting https://indico.cern.ch/event/1634520/contributions/6878108/attachments/3199713/5699141/SIM_20260116.pdf , this PR proposes a revision of the mechanism used to store and propagate the hit type classification, so far used only by MTD for Phase2, but in principle applicable to any interested sub-detector.\r\n\r\n```trackId``` is reverted to the pure Geant4 id, without any offset and limitation on the maximum available (beyond the uint32_t capability), so as not to interfere with exceptionally populated events, and software developments for GPU.\r\n\r\nThe hit type is moved as a 7-bits subfield in the ```processType``` member of ```PSimHit```, where the maximum code is at present 403, and this is a used-defined integer, not a pseudo-random variable. The interface is adapted, the assignment of hit type in MTD is adjusted accordingly, and all the dependencies in the code (truth accumulator, validation) are adapted.\r\n\r\n\r\n#### PR validation:\r\n\r\nTests on 100 single pions (wf 34506.0) are successful, the detailed Geant4 debug printout shows the desired behaviour, when activated, and the usual DQM histogram test shows perfect comparison between histograms.", "branch": "master", "changed_files": 23, "comments": 43, "commits": 9, "created_at": "1769615680", "deletions": 129, "labels": ["reconstruction-pending", "simulation-pending", "dqm-pending", "pending-signatures", "tests-pending", "orp-pending", "hold", "code-checks-pending", "changes-dataformats"], "milestone": "CMSSW_16_1_X", "number": 49969, "release-notes": [], "review_comments": 18, "state": "open", "title": "Revision of the PSimHit type storage, revert trackId to its basic meaning", "updated_at": "1771176684", "user": "fabiocos"}