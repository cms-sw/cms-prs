{"additions": 3, "auther_ref": "ubsan-fix-HepMCProduct", "auther_sha": "adae936c14ba451b2843b41f9615da4255975b94", "author": "smuzaffar", "body": "For UBSAN IBs, few workflows show runtime errors like [a]. Looks like this happens when we try to swap uninitialized bool values [here](https://github.com/cms-sw/cmssw/blob/master/SimDataFormats/GeneratorProducts/src/HepMCProduct.cc#L135-L137)  e.g from https://github.com/cms-sw/cmssw/blob/master/SimDataFormats/GeneratorProducts/src/HepMCProduct.cc#L149 . If I am not wrong, there is no need to use swap for boolean types, just assignment should be enough\r\n\r\nAlso removed using `fTimeOffset` comments\r\n\r\n[a]\r\n```\r\n gcc/include/c++/12.3.1/bits/move.h:204:11: runtime error: load of value 224, which is not a valid value for type 'bool'\r\n\r\n    #0 0x14a7a7ba4fbc in std::enable_if<std::__and_<std::__not_<std::__is_tuple_like<bool> >, std::is_move_constructible<bool>, std::is_move_assignable<bool> >::value, void>::type std::swap<bool>(bool&, bool&) /data/cmsbld/jenkins/workspace/build-any-ib/w/el8_amd64_gcc12/external/gcc/12.3.1-40d504be6370b5a30e3947a6e575ca28/include/c++/12.3.1/bits/move.h:204\r\n    #1 0x14a7a7ba4fbc in edm::HepMCProduct::swap(edm::HepMCProduct&) src/SimDataFormats/GeneratorProducts/src/HepMCProduct.cc:135\r\n    #2 0x14a77bcb7e7d in edm::Wrapper<edm::HepMCProduct>::Wrapper<edm::HepMCProduct>(edm::WrapperBase::Emplace, edm::HepMCProduct&&) src/DataFormats/Common/interface/Wrapper.h:89\r\n    #3 0x14a77bcb7e7d in edm::OrphanHandle<edm::HepMCProduct> edm::Event::emplaceImpl<edm::HepMCProduct, edm::HepMCProduct>(unsigned int, edm::HepMCProduct&&) src/FWCore/Framework/interface/Event.h:454\r\n    #4 0x14a77bc8719c in edm::OrphanHandle<edm::HepMCProduct> edm::Event::emplace<edm::HepMCProduct, edm::HepMCProduct>(edm::EDPutTokenT<edm::HepMCProduct>, edm::HepMCProduct&&) src/FWCore/Framework/interface/Event.h:434\r\n    #5 0x14a77bc8719c in ExternalGeneratorFilter::filter(edm::StreamID, edm::Event&, edm::EventSetup const&) const src/GeneratorInterface/Core/plugins/ExternalGeneratorFilter.cc:270\r\n```", "branch": "master", "changed_files": 1, "closed_at": "1736414345", "comments": 15, "commits": 1, "created_at": "1733831544", "deletions": 6, "labels": ["generators-approved", "fully-signed", "tests-approved", "orp-approved", "code-checks-approved"], "merge_commit_sha": "e944ebc235a859025d94d20571264d911625447e", "merged_at": "1736414345", "merged_by": "cmsbuild", "milestone": "CMSSW_15_0_X", "number": 46907, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[UBSAN]Fix runtime error for invalid bool value assignment", "updated_at": "1736414346", "user": "smuzaffar"}