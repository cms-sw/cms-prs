{"additions": 679, "auther_ref": "fix_CTPPS_crash_151x", "auther_sha": "de1425810b017380e5eefb90753f67fb35048740", "author": "fwyzard", "body": "#### PR description:\r\n\r\nExtend the `DetSetVector` interface to support sorting the `DetSet` elements with a key provided by the `sort_key()` method.\r\n\r\nChange the sorting of `DetSetVector<CTPPSPixelRecHit>` to use `mag2()` instead of `mag()` to avoid the unnecessary square root, and make it more stable using the new interface to cache the value instead of recomputing it each time.\r\n\r\nAvoid leaving the row and column values for invalid PPS pixels uninitialised, and set them explicitly to `-1`.\r\n\r\nVarious other clean up of the CTPPS local reconstruction code.\r\n\r\n#### PR validation:\r\n\r\nThe CTPPS reconstruction run at HLT works correctly also for events where it would previous lead to a crash, as discussed in https://github.com/cms-sw/cmssw/issues/48205 .\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nTo be backported to 15.0.x to avoid rare HLT crashes.", "branch": "master", "changed_files": 12, "comments": 50, "commits": 4, "created_at": "1749220811", "deletions": 244, "labels": ["alca-approved", "core-approved", "reconstruction-approved", "fully-signed", "tests-approved", "orp-pending", "bug-fix", "code-checks-approved", "tests-ib-failure", "changes-dataformats"], "milestone": "CMSSW_15_1_X", "number": 48266, "release-notes": [], "review_comments": 8, "state": "open", "title": "Improve sorting of `DetSetVector<CTPPSPixelRecHit>`", "updated_at": "1749639225", "user": "fwyzard"}