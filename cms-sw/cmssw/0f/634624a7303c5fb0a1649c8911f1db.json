{"additions": 267, "auther_ref": "fw-core-site-local-config-memory-leak-fix", "auther_sha": "a9074be9230bae79c0b3ac4ccb5f0030c2cac8b9", "author": "ianna", "body": "- Make sure Xerces releases memory\n\n```\n...\n==17013== 499 bytes in 13 blocks are definitely lost in loss record 20,978 of 25,216\n==17013==    at 0x4028108: operator new(unsigned long) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/external/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==17013==    by 0xB0C7A10: xercesc_3_1::MemoryManagerImpl::allocate(unsigned long) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/external/xerces-c/3.1.3/lib/libxerces-c-3.1.so)\n==17013==    by 0xB1B28B8: xercesc_3_1::IconvGNULCPTranscoder::transcode(unsigned short const*, xercesc_3_1::MemoryManager*) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/external/xerces-c/3.1.3/lib/libxerces-c-3.1.so)\n==17013==    by 0xB032A8C: xercesc_3_1::XMLString::transcode(unsigned short const*, xercesc_3_1::MemoryManager*) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/external/xerces-c/3.1.3/lib/libxerces-c-3.1.so)\n==17013==    by 0x868CD25: edm::service::SiteLocalConfigService::parse(std::string const&) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServices.so)\n==17013==    by 0x868F25B: edm::service::SiteLocalConfigService::SiteLocalConfigService(edm::ParameterSet const&) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServices.so)\n==17013==    by 0xA916C2B: edm::serviceregistry::ServiceMaker<edm::SiteLocalConfig, edm::serviceregistry::ParameterSetMaker<edm::SiteLocalConfig, edm::service::SiteLocalConfigService> >::make(edm::ParameterSet const&, edm::ActivityRegistry&, edm::serviceregistry::ServicesManager&) const (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/pluginFWCoreServicesPlugins.so)\n==17013==    by 0x4053670: edm::serviceregistry::ServicesManager::MakerHolder::add(edm::serviceregistry::ServicesManager&) const (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServiceRegistry.so)\n==17013==    by 0x4053926: edm::serviceregistry::ServicesManager::createServices() (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServiceRegistry.so)\n==17013==    by 0x4056707: edm::serviceregistry::ServicesManager::ServicesManager(edm::ServiceToken, edm::serviceregistry::ServiceLegacy, std::vector<edm::ParameterSet, std::allocator<edm::ParameterSet> >&, bool) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServiceRegistry.so)\n==17013==    by 0x4052B4E: edm::ServiceRegistry::createSet(std::vector<edm::ParameterSet, std::allocator<edm::ParameterSet> >&, edm::ServiceToken, edm::serviceregistry::ServiceLegacy, bool) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreServiceRegistry.so)\n==17013==    by 0x4AF637A: edm::ScheduleItems::initServices(std::vector<edm::ParameterSet, std::allocator<edm::ParameterSet> >&, edm::ParameterSet&, edm::ServiceToken const&, edm::serviceregistry::ServiceLegacy, bool) (in /cvmfs/cms-ib.cern.ch/2016-26/slc6_amd64_gcc530/cms/cmssw/CMSSW_8_1_X_2016-06-22-2300/lib/slc6_amd64_gcc530/libFWCoreFramework.so)\n...\n```\n", "branch": "CMSSW_8_1_X", "changed_files": 4, "closed_at": "1468917967", "comments": 50, "commits": 10, "created_at": "1467270723", "deletions": 225, "labels": ["comparison-available", "core-approved", "fully-signed", "orp-approved", "tests-approved"], "merge_commit_sha": "22db4d8e56332ac95a4287a8974e0acbcf011e77", "merged_at": "1468917967", "merged_by": "cmsbuild", "milestone": "Next CMSSW_8_1_X", "number": 15076, "release-notes": [], "review_comments": 19, "state": "closed", "title": "Site Local Config Memory Leak Fix", "updated_at": "1468917967", "user": "ianna"}