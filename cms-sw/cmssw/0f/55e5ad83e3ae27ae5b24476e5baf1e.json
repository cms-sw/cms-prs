{"additions": 34, "auther_ref": "fixDQMOfflineGUIindexingProblem", "auther_sha": "f558ce9b70ebe1a63f94257c960289625a401ea9", "author": "mmusich", "body": "resolves https://github.com/cms-sw/cmssw/issues/38814\r\n\r\n#### PR description:\r\n\r\nIn issue https://github.com/cms-sw/cmssw/issues/38814 it was reported that the dataset `/StreamExpress/Run2022C-PromptCalibProdSiStripHitEff-Express-v1/ALCAPROMPT` (run numbers 355807-355942) is not registered in the Offline DQM GUI.  The rootfiles are available on DQM machines (see https://cmsweb.cern.ch/dqm/offline/data/browse/ROOT/OfflineData/Run2022/StreamExpress/0003559xx/ ) but they have not been registered in the DQM Offline GUI database. From log files, it was found that the registration failed with following error:\r\n\r\n```console\r\n/data/srv/state/dqmgui/offline/data/OfflineData/Run2022/StreamExpress/0003558xx/DQM_V0001_R000355869__StreamExpress__Run2022C-PromptCalibProdSiStripHitEff-Express-v1__ALCAPROMPT.root: error reading file: DQMStore: Monitor element path name 'TEC+1: Map of missing hits' uses unacceptable characters\r\n2022-07-20 01:19:31.380953 [visDQMImportDaemon/2757] imported /data/srv/state/dqmgui/offline/data/OfflineData/Run2022/StreamExpress/0003558xx/DQM_V0001_R000355869__StreamExpress__Run2022C-PromptCalibProdSiStripHitEff-Ex\r\npress-v1__ALCAPROMPT.root with status 256 in 0.566s\r\n2022-07-20 01:19:31.381240 [visDQMImportDaemon/2757] command failed with exit code 256\r\n```\r\n\r\nThis PR sanitizes the offending histogram path names to avoid using prohibited characters, in order to be able to upload to the GUI.\r\n\r\n#### PR validation:\r\n\r\nRun in `CMSSW_12_4_3`:\r\n\r\n```console\r\ncmsDriver.py testReAlCa -s ALCA:PromptCalibProdSiStripHitEff --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --datatier ALCARECO --eventcontent ALCARECO --processName=ReAlCa -n 10000 --dasquery='file dataset=/StreamExpress/Run2018D-SiStripCalMinBias-Express-v1/ALCARECO run=325172' --nThreads=4\r\n```\r\nfollowed by:\r\n\r\n```console\r\ncmsDriver.py stepHarvest -s ALCAHARVEST:SiStripHitEff --conditions 123X_dataRun2_v2 --scenario pp --data --era Run2_2018 --filein file:PromptCalibProdSiStripHitEff.root -n -1\r\n```\r\nand obtained a ROOT file with the following histograms naming:\r\n\r\n![Screenshot from 2022-07-21 18-15-40](https://user-images.githubusercontent.com/5082376/180263302-fc39c5fc-13de-482c-a0cf-11836863f855.png)\r\n\r\n#### If this PR is a backport please specify the original PR and why you need to backport that PR. If this PR will be backported please specify to which release cycle the backport is meant for:\r\n\r\nNot a backport but will need to be backported to 12.4.X", "branch": "master", "changed_files": 2, "closed_at": "1658441935", "comments": 10, "commits": 1, "created_at": "1658412970", "deletions": 8, "labels": ["alca-approved", "fully-signed", "tests-approved", "bug-fix", "orp-approved", "urgent", "code-checks-approved", "trk"], "merge_commit_sha": "388f6a930961c851df585a128d728b7478641590", "merged_at": "1658441934", "merged_by": "cmsbuild", "milestone": "CMSSW_12_5_X", "number": 38823, "release-notes": [], "review_comments": 0, "state": "closed", "title": "`SiStripHitEfficiencyWorker`: sanitize histogram names to avoid DQM Offline GUI indexing problem with `ALCAPROMPT` datasets", "updated_at": "1658441935", "user": "mmusich"}