{"additions": 86, "auther_ref": "devel_hltPatatrackCustomFunc_120X", "auther_sha": "a53f448050911e1ed0360837f76465ade76ce43b", "author": "missirol", "body": "#### PR description:\r\n\r\nBackport of #34992\r\n\r\nSince the HLT-Patatrack customisation functions were backported to `12_0_X` (#34957), it makes sense to backport these small improvements as well.\r\n\r\nAttn: @fwyzard\r\n\r\nFrom the description of the original PR:\r\n\r\n> This PR is an attempt to make the HLT-Patatrack customisations introduced in https://github.com/cms-sw/cmssw/pull/34956 a bit more robust (mostly to handle some edge cases, e.g. HLT configs with only a limited number of paths; see [this comment](https://github.com/cms-sw/cmssw/pull/34956#issuecomment-903461360) for an example).\r\n\r\n#### PR validation:\r\n\r\nWith the PR, the customisations are applied as intended in the following 3 tests (without PR, the first 2 tests wouldn't work correctly).\r\n\r\n```bash\r\n#!/bin/bash -ex\r\n\r\nscram project CMSSW CMSSW_12_0_X_2021-08-23-2300\r\ncd CMSSW_12_0_X_2021-08-23-2300/src\r\neval `scram runtime -sh`\r\ngit cms-merge-topic cmssw:\r\nscram build\r\n\r\nhltTest(){\r\n\r\n  hltGetConfiguration /dev/CMSSW_12_0_0/GRun/V5 \\\r\n  --offline --mc --unprescale --process TEST \\\r\n  --input /store/relval/CMSSW_12_0_0_pre6/RelValTTbar_14TeV/GEN-SIM-DIGI-RAW/PU_120X_mcRun3_2021_realistic_v4-v1/00000/20a08d38-8b7f-4ce4-b24b-edc023ddd078.root \\\r\n  --output none \\\r\n  --era Run3 --globaltag 120X_mcRun3_2021_realistic_v4 \\\r\n  --customise HLTrigger/Configuration/customizeHLTforPatatrack.customizeHLTforPatatrackTriplets \\\r\n  --max-events 10 \\\r\n  \"${@:2}\" > \"$1\"_cfg.py\r\n\r\n  edmConfigDump \"$1\"_cfg.py > \"$1\".py\r\n\r\n  python3 \"$1\".py\r\n  cmsRun \"$1\".py\r\n}\r\n\r\nhltTest hltPartial1 --paths HLTriggerFirstPath,MC_PFMET_v17,HLTriggerFinalPath\r\nhltTest hltPartial2 --paths HLTriggerFirstPath,HLT_UncorrectedJetE30_NoBPTX_v6,HLTriggerFinalPath\r\nhltTest hltFull\r\n```\r\n\r\n#### If this PR is a backport, please specify the original PR and why you need to backport that PR:\r\n\r\n#34992\r\n", "branch": "CMSSW_12_0_X", "changed_files": 1, "closed_at": "1629958812", "comments": 7, "commits": 2, "created_at": "1629890198", "deletions": 79, "labels": ["hlt-approved", "fully-signed", "tests-approved", "orp-approved", "backport-ok"], "merge_commit_sha": "44fd0843ea6a49348477d6fdef2a02e4c7ac7d9a", "merged_at": "1629958812", "merged_by": "cmsbuild", "milestone": "CMSSW_12_0_X", "number": 35009, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[12_0_X] Fixing some edge cases in HLT-Patatrack customisations", "updated_at": "1629959127", "user": "missirol"}