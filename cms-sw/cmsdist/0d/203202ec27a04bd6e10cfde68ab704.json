{"additions": 41, "auther_ref": "br-extra-micro-arch", "auther_sha": "56a56ba4b62544e30e93f3bdd33f4f922f1369e0", "author": "cms-sw", "body": "This contains build rules improvement. By default, during the build phase, we use the default micro-arch edm tools to\r\n\r\n    register edm plugins\r\n    generate edm plugin configuration\r\n    Run edm class version checks\r\n\r\nThis break the build if the build node does not support default micro-arch e.g. building on node with x86-64-v2 only support for CMSSW releases where x86-64-v3 is default micro-arch.\r\n\r\nAlso we only build cuda/rocm code for default micro-arch and then link it for additional micro-archs. This works as long as default micro-arch is subset of all addtional micro-archs but fails otherwise.\r\n\r\nNew build rules has the following changes\r\n\r\n    Use min supported micro-arch edm tools to register edm plugins, generate edn plugin configs and edm class version checks\r\n    Build cuda/rocm (+ alpaka cuda/rocm backend) once using the min supported micro-arch flags\r\n\r\nThese changes have been tested in DEVEL IBs\r\n\r\nbackport of #9610", "branch": "IB/CMSSW_15_0_X/master", "changed_files": 4, "comments": 6, "commits": 1, "created_at": "1737008177", "deletions": 4, "labels": ["tests-approved", "externals-pending", "pending-signatures", "orp-pending"], "number": 9617, "release-notes": [], "review_comments": 0, "state": "open", "title": "Buildrule: fixes when extra micro-arch is subset of default microarch", "updated_at": "1737023534", "user": "smuzaffar"}