{"additions": 29, "auther_ref": "c-ares-support-curl-updates", "auther_sha": "e155b402f8aa40bd4b99dfe9e0b5236eac9720d0", "author": "giffels", "body": "Hi Diego,\n\nas discussed via email, the DBS 3 Migration Service has some problems with pycurl and multi-threading. pycurl itself is thread-safe, however the DNS lookup is not. The suggestion on http://linux.die.net/man/3/libcurl-tutorial is to disable signals, which I did for DBS 3. The disadvantage is, that DNS timeouts are not caught anymore in that case. The solution is to use c-ares for the DNS lookup. I have added a c-ares.spec and configured curl to build against c-ares.\n\nIn addition, I have upgraded curl and pycurl to the latest release to enable shared SSL session id caches between different threads, to reduce the load on cmsweb through authentication during migration requests. \n\nI have tested DBS 3 Server, DBS 3 Migration Service and DBS 3 Client, everything seems to be fine.\n\nCould you review and merge, please?\n\nThanks,\nManuel\n", "branch": "comp", "changed_files": 3, "closed_at": "1394088889", "comments": 16, "commits": 1, "created_at": "1391437698", "deletions": 5, "labels": [], "number": 382, "release-notes": [], "review_comments": 1, "state": "closed", "title": "c-ares support for curl. (py)curl updates.", "updated_at": "1394088889", "user": "giffels"}