{"additions": 20, "auther_ref": "tf_gpu", "auther_sha": "73f0f5892cdb3d7e7d83b752bafabcb4d33dc89d", "author": "riga", "body": "This PR is meant to update TensorFlow to version 2.4.1 which seems to be the [first release](https://www.tensorflow.org/install/source#gpu) that is compatible with [CUDA 11](https://github.com/cms-sw/cmsdist/blob/IB/CMSSW_11_3_X/master/cuda.spec) in our software stack, so we can eventually aim for GPU support.\r\n\r\nHowever, in terms of the usual manual patches we apply during the integration process, 2.4 drops SWIG but uses pybind11 instead to generate its bindings. This change interferes with some of the patches in our build process (no more `use_default_shell_env` @smuzaffar @mrodozov) which is why I opened the PR as \"work-in-progress\" to store discussions early on for later reference. \r\n\r\nSo far, the changes to cmsdist are minimal and most of the work needs to be done in the external tensorflow fork.\r\n- I started porting the cms-specific changes [here](https://github.com/riga/tensorflow/commits/cms/v2.4.1) but further adjustments seem necessary (see below).\r\n- For reference, the changes needed for 2.3.1 can be found [here](https://github.com/tensorflow/tensorflow/compare/v2.3.1...cms-externals:cms/v2.3.1).\r\n\r\nThe general idea would be to enable GPU support in a second PR after 2.4.1 is successfully integrated.\r\n\r\n@mialiu149 @vlimant @gkasieczka", "branch": "IB/CMSSW_11_3_X/master", "changed_files": 7, "closed_at": "1615186250", "comments": 38, "commits": 8, "created_at": "1610471631", "deletions": 18, "labels": ["externals-pending", "orp-pending", "pending-signatures", "tests-pending"], "number": 6545, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[WIP] Update TF to 2.4.1.", "updated_at": "1615186251", "user": "riga"}