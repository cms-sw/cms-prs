{"additions": 1, "auther_ref": "smuzaffar-patch-3", "auther_sha": "40355042d1f4d9d6c3e60ff4b48b114a9c9783df", "author": "cms-sw", "body": "Testing latest DEVEL IBs on `x86-64-v2` resources shows that `cmsRun` does not work even if environment is set to use `x86-64-v2`libsraries. Even building `cmsRun` executable for  `x86-64-v2` did not work [a]. I think it might be due to root dictionaries which are only built for default micro-arch (`x86-64-v3`) and root failed to load those on `x86-64-v2` node.\r\n\r\nNew build rule now explicitly build/compile all public binaries, root lcgdict and boost serialization for additional micro-arch too. Local compilation works but we need to get this in IBs so that we can test it on `x86-64-v2` resources via crab\r\n\r\nFYI @makortel \r\n\r\n[a]\r\n```\r\n== CMSSW: + edmPluginDump -a\r\n== CMSSW:\r\n== CMSSW:  *** Break *** illegal instruction\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW: ===========================================================\r\n== CMSSW: There was a crash.\r\n== CMSSW: This is the entire stack trace of all threads:\r\n== CMSSW: ===========================================================\r\n== CMSSW: #0  0x00002b02f7eb1e0b in waitpid () from /lib64/libc.so.6\r\n== CMSSW: #1  0x00002b02f7e05747 in do_system () from /lib64/libc.so.6\r\n== CMSSW: #2  0x00002b02f84f5f2d in TUnixSystem::StackTrace() () from /cvmfs/cms-ib.cern.ch/sw/x86_64/week0/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_DEVEL_X_2024-12-05-0900/external/el8_amd64_gcc12/lib/libCore.so\r\n== CMSSW: #3  0x00002b02f84f3a04 in TUnixSystem::DispatchSignals(ESignals) () from /cvmfs/cms-ib.cern.ch/sw/x86_64/week0/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_DEVEL_X_2024-12-05-0900/external/el8_amd64_gcc12/lib/libCore.so\r\n== CMSSW: #4  <signal handler called>\r\n== CMSSW: #5  0x000000000040235e in main ()\r\n== CMSSW: ===========================================================\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW: The lines below might hint at the cause of the crash. If you see question\r\n== CMSSW: marks as part of the stack trace, try to recompile with debugging information\r\n== CMSSW: enabled and export CLING_DEBUG=1 environment variable before running.\r\n== CMSSW: You may get help by asking at the ROOT forum https://root.cern/forum\r\n== CMSSW: preferably using the command (.forum bug) in the ROOT prompt.\r\n== CMSSW: Only if you are really convinced it is a bug in ROOT then please submit a\r\n== CMSSW: report at https://root.cern/bugs or (preferably) using the command (.gh bug) in\r\n== CMSSW: the ROOT prompt. Please post the ENTIRE stack trace\r\n== CMSSW: from above as an attachment in addition to anything else\r\n== CMSSW: that might help us fixing this issue.\r\n== CMSSW: ===========================================================\r\n== CMSSW: #5  0x000000000040235e in main ()\r\n== CMSSW: ===========================================================\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW: + true\r\n== CMSSW: + which cmsRun\r\n== CMSSW: /srv/CMSSW_15_0_DEVEL_X_2024-12-05-0900/bin/el8_amd64_gcc12/scram_x86-64-v2/cmsRun\r\n== CMSSW: + cmsRun --help\r\n== CMSSW:\r\n== CMSSW:  *** Break *** illegal instruction\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW: ===========================================================\r\n== CMSSW: There was a crash.\r\n== CMSSW: This is the entire stack trace of all threads:\r\n== CMSSW: ===========================================================\r\n== CMSSW: #0  0x00002b1fe1724e0b in waitpid () from /lib64/libc.so.6\r\n== CMSSW: #1  0x00002b1fe1678747 in do_system () from /lib64/libc.so.6\r\n== CMSSW: #2  0x00002b1fe0fdef2d in TUnixSystem::StackTrace() () from /cvmfs/cms-ib.cern.ch/sw/x86_64/week0/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_DEVEL_X_2024-12-05-0900/external/el8_amd64_gcc12/lib/libCore.so\r\n== CMSSW: #3  0x00002b1fe0fdca04 in TUnixSystem::DispatchSignals(ESignals) () from /cvmfs/cms-ib.cern.ch/sw/x86_64/week0/el8_amd64_gcc12/cms/cmssw/CMSSW_15_0_DEVEL_X_2024-12-05-0900/external/el8_amd64_gcc12/lib/libCore.so\r\n== CMSSW: #4  <signal handler called>\r\n== CMSSW: #5  0x000000000040512b in main ()\r\n== CMSSW: ===========================================================\r\n== CMSSW:\r\n== CMSSW:\r\n== CMSSW: The lines below might hint at the cause of the crash. If you see question\r\n== CMSSW: marks as part of the stack trace, try to recompile with debugging information\r\n== CMSSW: enabled and export CLING_DEBUG=1 environment variable before running.\r\n== CMSSW: You may get help by asking at the ROOT forum https://root.cern/forum\r\n== CMSSW: preferably using the command (.forum bug) in the ROOT prompt.\r\n== CMSSW: Only if you are really convinced it is a bug in ROOT then please submit a\r\n== CMSSW: report at https://root.cern/bugs or (preferably) using the command (.gh bug) in\r\n== CMSSW: the ROOT prompt. Please post the ENTIRE stack trace\r\n== CMSSW: from above as an attachment in addition to anything else\r\n== CMSSW: that might help us fixing this issue.\r\n```", "branch": "IB/CMSSW_15_0_X/devel", "changed_files": 1, "comments": 4, "commits": 1, "created_at": "1733469954", "deletions": 1, "labels": ["tests-rejected", "externals-pending", "pending-signatures", "orp-pending"], "number": 9555, "release-notes": [], "review_comments": 0, "state": "open", "title": "[DEVEL]Build more binary products for extra microarch", "updated_at": "1733478118", "user": "smuzaffar"}