{"additions": 1, "auther_ref": "build-cpu-features-shared", "auther_sha": "1326d1fce55944aad560c25e8abac483da736f9c", "author": "dan131riley", "body": "Code linked into plugins needs to be relocatable.  cpu_features by default builds a static library and doesn't turn on position independent code, so it can't be linked into the CPU plugin.  The CMakeList explains:\r\n```\r\n# cpu_features uses bit-fields which are - to some extends - implementation-defined (see https://en.cppreference.com/w/c/language/bit_field).\r\n# As a consequence it is discouraged to use cpu_features as a shared library because different compilers may interpret the code in different ways.\r\n# Prefer static linking from source whenever possible.\r\noption(BUILD_SHARED_LIBS \"Build library as shared.\" OFF)\r\n```\r\nbut that doesn't apply to us since we recompile for every different compiler variant.", "branch": "IB/CMSSW_12_6_X/master", "changed_files": 1, "closed_at": "1668061733", "comments": 5, "commits": 1, "created_at": "1668020196", "deletions": 0, "labels": ["tests-approved", "externals-approved", "fully-signed", "orp-pending"], "merge_commit_sha": "ef72dbd817a8ae174d101628420647d3928ddda1", "merged_at": "1668061732", "merged_by": "smuzaffar", "number": 8176, "release-notes": [], "review_comments": 0, "state": "closed", "title": "build cpu_features so that it can be linked into plugins", "updated_at": "1668061746", "user": "dan131riley"}