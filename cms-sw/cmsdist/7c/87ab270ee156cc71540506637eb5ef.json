{"additions": 2, "auther_ref": "smuzaffar-patch-1", "auther_sha": "64e4c77e61747e290ecdf5eba4899984489af720", "author": "cms-sw", "body": "This update should fix the source of `cmsset_default.sh` and user login scripts e.g. previously we get\r\n- Interactive shell: user alias were not available inside the container but cms alias e.g. `cmsenv` is available\r\n```\r\n> my_alias \r\nMy Alias OK\r\n> cmssw-el7\r\nSingularity> my_alias\r\nbash: my_alias: command not found\r\nSingularity> cmsenv\r\nSCRAM fatal: Unable to locate the top of local release. Please run this command from a SCRAM-based area.\r\nSingularity> echo $SCRAM_ARCH\r\nslc7_amd64_gcc10\r\nSingularity> exit\r\n>\r\n```\r\n- also batch mode both user and cms alias are not available\r\n```\r\n> cmssw-el7 -- 'echo $SCRAM_ARCH; my_alias;cmsenv; echo DONE'\r\n\r\n/bin/bash: my_alias: command not found\r\n/bin/bash: cmsenv: command not found\r\nDONE\r\n```\r\n\r\nAfter these changes, both in interactive shell and batch mode user and cms alias are available\r\n- interactive shell\r\n```\r\n> PATH=/build/muz/env/common:$PATH cmssw-el7 --interactive\r\nSingularity> my_alias \r\nMy Alias OK\r\nSingularity> cmsenv\r\nSCRAM fatal: Unable to locate the top of local release. Please run this command from a SCRAM-based area.\r\nSingularity> echo $SCRAM_ARCH\r\nslc7_amd64_gcc10\r\nSingularity> exit\r\n```\r\n- batch mode\r\n```\r\n>  PATH=/build/muz/env/common:$PATH cmssw-el7 --interactive -- 'echo $SCRAM_ARCH; my_alias;cmsenv; echo DONE'\r\nslc7_amd64_gcc10\r\nMy Alias OK\r\nSCRAM fatal: Unable to locate the top of local release. Please run this command from a SCRAM-based area.\r\nDONE\r\n```\r\n\r\n", "branch": "IB/CMSSW_14_1_X/master", "changed_files": 1, "closed_at": "1719512687", "comments": 8, "commits": 2, "created_at": "1719487070", "deletions": 2, "labels": ["tests-rejected", "externals-approved", "fully-signed", "orp-pending"], "merge_commit_sha": "afd2f34fa39d064d0e72a6b3d965cca55861f564", "merged_at": "1719512687", "merged_by": "smuzaffar", "number": 9273, "release-notes": [], "review_comments": 0, "state": "closed", "title": "cmssw-osenv: Fix for calling cmsset_default and user login scripts", "updated_at": "1719512705", "user": "smuzaffar"}