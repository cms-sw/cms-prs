{"additions": 4, "auther_ref": "fasthadd_2.1", "auther_sha": "501ddeb65a6f8eac413700dad764f18a204d0f5e", "author": "diguida", "body": "Define new minor version of `fasthadd`, namely 2.1:\n- the new minor version 2.1 is defined so that it is explicitly built on top of the new `ROOT 6.0.6`, featuring changes in the histogram serialisation;\n- the code base has been moved to the latest 80X pre-release, but no changes in the source file is done.\n\nNo changes in performance observed or expected.\nThe new version is required for ease the deployment in the online environment.\n@deguio @vanbesien @dmitrijus this is something you might want to watch as well.\n\nLocal test failed, but it seems unrelated with this change: `fasthadd` RPM was built:\n\n```\n....\nStarting to process package external+fasthadd+2.1\nChecking if fasthadd is cached.\nPackage external+fasthadd+2.1 not found in repository. Queuing for build.\nDependencies for external+fasthadd+2.1: ['install-external+gcc+4.9.3', 'install-lcg+root+6.06.00-cms2', 'install-external+protobuf+2.4.1', 'fetch-external+fasthadd+2.1']\n....\nFetching sources for fasthadd\nDone fetching https://raw.githubusercontent.com/cms-sw/cmssw/38304a4dbdfc1a5e7cc860afbb1c31dd09a9ff1e/DQMServices/Components/bin/fastHadd.cc\nDone fetching https://raw.githubusercontent.com/cms-sw/cmssw/38304a4dbdfc1a5e7cc860afbb1c31dd09a9ff1e/DQMServices/Core/src/ROOTFilePB.proto\n....\nCreating directory /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/BUILD/slc6_amd64_gcc493/external/fasthadd/2.1 if not existing.\nBuilding fasthadd. Log can be found in /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/BUILD/slc6_amd64_gcc493/external/fasthadd/2.1/log.\nTMPDIR=/build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/tmp  rpmbuild  --buildroot /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/tmp/BUILDROOT/e98e7322aec04cd4ef8cd98649921a6f -ba --define '_topdir /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a' --define \"compiling_processes 24\"  --define \"cmscompilerv  493\" --define \"cmsos slc6_amd64\" /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/SPECS/external/fasthadd/2.1/spec >/build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/BUILD/slc6_amd64_gcc493/external/fasthadd/2.1/log 2>&1\nBuild successful.\nTrying to install the rpm package external+fasthadd+2.1 just built.\nDone\n....\n* The action \"build-cms+cmssw-tool-conf+32.0-cms2\" was not completed successfully because The following dependencies could not complete:\ninstall-external+py2-dxr-toolfile+1.0-ikhhed\n* The action \"final-job\" was not completed successfully because The following dependencies could not complete:\nbuild-cms+cmssw-tool-conf+32.0-cms2\ninstall-cms+cmssw-tool-conf+32.0-cms2\ninstall-external+py2-dxr-toolfile+1.0-ikhhed\n* The action \"install-external+py2-dxr-toolfile+1.0-ikhhed\" was not completed successfully because Traceback (most recent call last):\nFile \"/build/diguida/ext/CMSSW_8_0_X/20160215_1421/PKGTOOLS/scheduler.py\", line 199, in doSerial\nresult = commandSpec[0](*commandSpec[1:])\nFile \"PKGTOOLS/cmsBuild\", line 2782, in installApt\nRpmInstallFailed: Failed to install package py2-dxr-toolfile. Reason:\nReading Package Lists...\nBuilding Dependency Tree...\nThe following extra packages will be installed:\nexternal+py2-dxr+1.0-ikhhed\nThe following NEW packages will be installed:\nexternal+py2-dxr+1.0-ikhhed external+py2-dxr-toolfile+1.0-ikhhed\n0 upgraded, 2 newly installed, 0 removed and 0 not upgraded.\nNeed to get 0B/868kB of archives.\nAfter unpacking 2596kB of additional disk space will be used.\nExecuting RPM (/build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/slc6_amd64_gcc493/external/apt/0.5.16/bin/rpm-wrapper -Uvh -r /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a --force --prefix /build/diguida\n/ext/CMSSW_8_0_X/20160215_1421/a --ignoreos --ignorearch --force --prefix /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a --ignoreos --ignorearch --oldpackage)...\nerror: Failed dependencies:\n#looks like something wrong with LLVM/clang, I do not list the .so files here\nE: Sub-process /build/diguida/ext/CMSSW_8_0_X/20160215_1421/a/slc6_amd64_gcc493/external/apt/0.5.16/bin/rpm-wrapper returned an error code (2)\n\n* The action \"install-cms+cmssw-tool-conf+32.0-cms2\" was not completed successfully because The following dependencies could not complete:\nbuild-cms+cmssw-tool-conf+32.0-cms2\n```\n\nThis was traced to be an issue with `py2-dxr` `spec` file. LLVM and SQLite are run-time dependencies. In addition to that this causes installation failures. APT-RPM fails if LLVM and SQLite is not installed before DXR. This is fixed in `IB/CMSSW_8_0_X/gcc530` branch by https://github.com/cms-sw/cmsdist/commit/1ac4cd1f418f385cbe07e32f63ee29b7b53db3c9. This is cherry-picked here.\n\nLocal tests are now ok, indeed.\n", "branch": "IB/CMSSW_8_0_X/stable", "changed_files": 2, "closed_at": "1455695167", "comments": 28, "commits": 2, "created_at": "1455551798", "deletions": 5, "labels": ["externals-pending", "orp-pending", "pending-signatures", "tests-approved"], "merge_commit_sha": "4d07b770dbc9206a537660562b9b474556f9fb72", "merged_at": "1455695167", "merged_by": "smuzaffar", "number": 2147, "release-notes": [], "review_comments": 0, "state": "closed", "title": "New minor version of fasthadd, 2.1, and move llvm sqlite from BuildRequires and Requires for py2-dxr", "updated_at": "1455780334", "user": "diguida"}