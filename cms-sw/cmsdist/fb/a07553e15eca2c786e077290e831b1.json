{"additions": 22, "auther_ref": "build-rules-non-default-min-microarch", "auther_sha": "6997e9caa6b159263241ebe6228524f25229e992", "author": "cms-sw", "body": "This contains build rules improvement. By default, during the build phase, we use the default micro-arch edm tools to \r\n- register edm plugins\r\n- generate edm plugin configuration\r\n- Run edm class version checks\r\n\r\nThis break the build if the build node does not support default micro-arch e.g. building on node with x86-64-v2  only support for CMSSW releases where x86-64-v3 is default micro-arch.\r\n\r\nAlso we only build cuda/rocm code for default micro-arch and then link it for additional micro-archs. This works as long as default micro-arch is subset of all addtional micro-archs but fails otherwise.\r\n\r\nNew build rules has the following changes\r\n- Use min supported micro-arch edm tools to register edm plugins, generate edn plugin configs and edm class version checks\r\n- Build cuda/rocm (+ alpaka cuda/rocm backend) once using the min supported micro-arch flags \r\n\r\nLets test the changes in DEVEL IBs first and then we can integrate it in main branch", "branch": "IB/CMSSW_15_0_X/devel", "changed_files": 4, "closed_at": "1736780755", "comments": 9, "commits": 3, "created_at": "1736758532", "deletions": 3, "labels": ["tests-pending", "externals-pending", "pending-signatures", "orp-pending"], "merge_commit_sha": "9983ecd94fdb89acff91f64ac24402d6809d1a6c", "merged_at": "1736780755", "merged_by": "smuzaffar", "number": 9610, "release-notes": [], "review_comments": 0, "state": "closed", "title": "[DEVEL]Build rules non default min microarch", "updated_at": "1736780755", "user": "smuzaffar"}